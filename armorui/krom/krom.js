var $hx_exports="undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this;$hx_exports.kha=$hx_exports.kha||{},$hx_exports.kha.input=$hx_exports.kha.input||{},$hx_exports.kha._Color=$hx_exports.kha._Color||{};var $global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,$hxClasses=$hxClasses||{},$estr=function(){return js_Boot.__string_rec(this,"")};function $extend(e,t){function a(){}a.prototype=e;var r=new a;for(var i in t)r[i]=t[i];return t.toString!==Object.prototype.toString&&(r.toString=t.toString),r}var Elements=$hxClasses.Elements=function(e){if(this.lastCanvasH=0,this.lastCanvasW=0,this.lastH=0,this.lastW=0,this.hradio=zui_Handle.global.nest(7,null),this.hwin=zui_Handle.global.nest(0,null),this.selectedElem=-1,this.dragAsset=null,this.assetNames=[],this.dragBottom=!1,this.dragRight=!1,this.dragTop=!1,this.dragLeft=!1,this.drag=!1,this.dropPath="",this.canvas=e,e.assets.length>0){var t=e.assets;e.assets=[];for(var a=0;a<t.length;){var r=t[a];++a,this.importAsset(r.file)}}kha_Assets.loadEverything($bind(this,this.loaded))};Elements.__name__=!0,Elements.get_uiw=function(){return 240*Main.prefs.scaleFactor|0},Elements.toRelative=function(e,t){e=haxe_io_Path.normalize(e),t=haxe_io_Path.normalize(t);for(var a=[],r=e.split("/"),i=t.split("/"),s=0;r[s]==i[s];)++s;for(var n=0,_=i.length-s;n<_;){n++;a.push("..")}for(var o=s,h=r.length;o<h;){var l=o++;a.push(r[l])}return a.join("/")},Elements.toAbsolute=function(e,t){return haxe_io_Path.normalize(t+"/"+e)},Elements.prototype={ui:null,cui:null,canvas:null,dropPath:null,drag:null,dragLeft:null,dragTop:null,dragRight:null,dragBottom:null,assetNames:null,dragAsset:null,loaded:function(){var e=this,t=Reflect.copy(zui_Themes.dark);t.FILL_WINDOW_BG=!0,this.ui=new zui_Zui({scaleFactor:Main.prefs.scaleFactor,font:kha_Assets.fonts.DroidSans,theme:t,color_wheel:kha_Assets.images.color_wheel}),this.cui=new zui_Zui({scaleFactor:1,font:kha_Assets.fonts.DroidSans,autoNotifyInput:!1}),kha_System.notifyOnDropFiles(function(t){e.dropPath=StringTools.rtrim(t),e.dropPath=Elements.toRelative(e.dropPath,Main.cwd)}),kha_System.notifyOnRender($bind(this,this.render)),kha_Scheduler.addTimeTask($bind(this,this.update),0,.016666666666666666)},importAsset:function(e){var t=this;if(StringTools.endsWith(e,".jpg")||StringTools.endsWith(e,".png")||StringTools.endsWith(e,".k")||StringTools.endsWith(e,".hdr")){var a=Elements.toAbsolute(e,Main.cwd);a="Windows"==kha_System.get_systemId()?StringTools.replace(a,"/","\\"):a,kha_LoaderImpl.loadImageFromDescription({files:[a]},function(a){var r=e.split("/"),i=r[r.length-1],s=zui_Canvas.getAssetId(t.canvas),n={name:i,file:e,id:s};t.canvas.assets.push(n),zui_Canvas.assetMap.h[n.id]=a,t.assetNames.push(i),t.hwin.redraws=2})}},makeElem:function(e){var t="",a=100;return 0==e?(t="Text",a=48):2==e?t="Button":1==e&&(t="Image"),{id:zui_Canvas.getElementId(this.canvas),type:e,name:t,event:"",x:0,y:0,width:150,height:a,text:t,asset:"",color:-1,anchor:0,children:[]}},getEnumTexts:function(){return this.assetNames.length>0?this.assetNames:[""]},getAssetIndex:function(e){for(var t=0,a=this.canvas.assets.length;t<a;){var r=t++;if(e==this.canvas.assets[r].name)return r}return 0},resize:function(){null!=Elements.grid&&(Elements.grid.unload(),Elements.grid=null)},drawGrid:function(){var e=kha_System.windowWidth(0)+80,t=kha_System.windowHeight(0)+80;Elements.grid=kha_Image.createRenderTarget(e,t),Elements.grid.get_g2().begin(!0,-14408668);for(var a=0,r=1+(t/40|0);a<r;){var i=a++;Elements.grid.get_g2().set_color(-14145496),Elements.grid.get_g2().drawLine(0,40*i,e,40*i),Elements.grid.get_g2().set_color(-13487566),Elements.grid.get_g2().drawLine(0,40*i+20,e,40*i+20)}for(var s=0,n=1+(e/40|0);s<n;){var _=s++;Elements.grid.get_g2().set_color(-14145496),Elements.grid.get_g2().drawLine(40*_,0,40*_,t),Elements.grid.get_g2().set_color(-13487566),Elements.grid.get_g2().drawLine(40*_+20,0,40*_+20,t)}Elements.grid.get_g2().set_color(-1),this.canvas.x=Elements.coff,this.canvas.y=Elements.coff,Elements.grid.get_g2().drawRect(this.canvas.x,this.canvas.y,this.canvas.width,this.canvas.height,1),Elements.grid.get_g2().end()},selectedElem:null,hwin:null,hradio:null,lastW:null,lastH:null,lastCanvasW:null,lastCanvasH:null,render:function(e){""!=this.dropPath&&(this.importAsset(this.dropPath),this.dropPath=""),null==Elements.grid&&this.drawGrid();var t=e.get_g2();t.begin(),t.set_color(-1),t.drawImage(Elements.grid,0,0),t.set_font(kha_Assets.fonts.DroidSans),t.set_fontSize(40);var a=this.canvas.name+", "+this.canvas.width+"x"+this.canvas.height,r=t.get_font().width(40,a),i=t.get_font().height(40);if(t.set_color(-1),t.drawString(a,kha_System.windowWidth()-r-30-Elements.get_uiw(),kha_System.windowHeight()-i-10),zui_Canvas.screenW=this.canvas.width,zui_Canvas.screenH=this.canvas.height,zui_Canvas.draw(this.cui,this.canvas,t),this.selectedElem>=0&&this.selectedElem<this.canvas.elements.length){var s=this.canvas.elements[this.selectedElem];t.set_color(-1),t.drawRect(this.canvas.x+s.x,this.canvas.y+s.y,s.width,s.height,1),t.drawRect(this.canvas.x+s.x-3,this.canvas.y+s.y-3,6,6,1),t.drawRect(this.canvas.x+s.x-3+s.width/2,this.canvas.y+s.y-3,6,6,1),t.drawRect(this.canvas.x+s.x-3+s.width,this.canvas.y+s.y-3,6,6,1),t.drawRect(this.canvas.x+s.x-3,this.canvas.y+s.y-3+s.height/2,6,6,1),t.drawRect(this.canvas.x+s.x-3+s.width,this.canvas.y+s.y-3+s.height/2,6,6,1),t.drawRect(this.canvas.x+s.x-3,this.canvas.y+s.y-3+s.height,6,6,1),t.drawRect(this.canvas.x+s.x-3+s.width/2,this.canvas.y+s.y-3+s.height,6,6,1),t.drawRect(this.canvas.x+s.x-3+s.width,this.canvas.y+s.y-3+s.height,6,6,1)}if(t.end(),this.ui.begin(t),this.ui.window(this.hwin,kha_System.windowWidth()-Elements.get_uiw(),0,Elements.get_uiw(),kha_System.windowHeight(),!1)){var n=zui_Handle.global.nest(1,null);if(this.ui.tab(n,"Project")){if(this.ui.button("Save")){this.canvas.x=0,this.canvas.y=0,Krom.fileSaveBytes(Main.prefs.path,haxe_io_Bytes.ofString(JSON.stringify(this.canvas)).b.bufferValue);var _=Main.prefs.path.substr(0,Main.prefs.path.length-5);_+=".files";for(var o="",h=0,l=this.canvas.assets;h<l.length;){var c=l[h];++h,o+=c.file+"\n"}Krom.fileSaveBytes(_,haxe_io_Bytes.ofString(o).b.bufferValue),this.canvas.x=Elements.coff,this.canvas.y=Elements.coff}if(this.ui.panel(zui_Handle.global.nest(2,{selected:!1}),"CANVAS")){this.ui.button("New")&&(this.canvas.elements=[],this.selectedElem=-1);var u=this.ui,d=zui_Handle.global.nest(3,{text:this.canvas.name});this.canvas.name=u.textInput(d,"Name",2),this.ui.row([.5,.5]);var g=this.ui.textInput(zui_Handle.global.nest(4,{text:this.canvas.width+""}),"Width",2),p=this.ui.textInput(zui_Handle.global.nest(5,{text:this.canvas.height+""}),"Height",2);this.canvas.width=Std.parseInt(g),this.canvas.height=Std.parseInt(p)}if(this.ui.separator(),this.ui.panel(zui_Handle.global.nest(6,{selected:!0}),"TREE")){if(this.ui.row([.3333333333333333,.3333333333333333,.3333333333333333]),this.ui.button("Text")){var f=this.makeElem(0);this.canvas.elements.push(f),this.hradio.position=this.canvas.elements.length-1}if(this.ui.button("Image")){var v=this.makeElem(1);this.canvas.elements.push(v),this.hradio.position=this.canvas.elements.length-1}if(this.ui.button("Button")){var k=this.makeElem(2);this.canvas.elements.push(k),this.hradio.position=this.canvas.elements.length-1}for(var m=this.canvas.elements.length-1;m>=0;){var S=this.canvas.elements[m];this.ui.radio(this.hradio,m,S.name)&&(this.selectedElem=m),--m}this.ui.row([.3333333333333333,.3333333333333333,.3333333333333333]);var b=this.ui.t.BUTTON_COL,y=this.ui.t.BUTTON_HOVER_COL,x=this.ui.t.BUTTON_PRESSED_COL;this.ui.t.BUTTON_COL=-13355978,this.ui.t.BUTTON_HOVER_COL=-12303290,this.ui.t.BUTTON_PRESSED_COL=-13619152;var B=this.canvas.elements;if(this.ui.button("Up")&&this.selectedElem<B.length-1){var w=this.canvas.elements[this.selectedElem];this.canvas.elements[this.selectedElem]=this.canvas.elements[this.selectedElem+1],this.canvas.elements[this.selectedElem+1]=w,this.selectedElem++,this.hradio.position=this.selectedElem}if(this.ui.button("Down")&&this.selectedElem>0){var I=this.canvas.elements[this.selectedElem];this.canvas.elements[this.selectedElem]=this.canvas.elements[this.selectedElem-1],this.canvas.elements[this.selectedElem-1]=I,this.selectedElem--,this.hradio.position=this.selectedElem}this.ui.button("Remove")&&this.removeSelectedElem(),this.ui.t.BUTTON_COL=b,this.ui.t.BUTTON_HOVER_COL=y,this.ui.t.BUTTON_PRESSED_COL=x}if(this.ui.separator(),this.ui.panel(zui_Handle.global.nest(8,{selected:!0}),"PROPERTIES")&&this.selectedElem>=0){var T=this.canvas.elements[this.selectedElem],E=T.id;this.ui.row([.5,.5]),T.name=this.ui.textInput(zui_Handle.global.nest(9,null).nest(E,{text:T.name}),"Name",2),T.event=this.ui.textInput(zui_Handle.global.nest(10,null).nest(E,{text:T.event}),"Event",2),this.ui.row([.5,.5]);var C=T.x+"",P=zui_Handle.global.nest(11,null).nest(E,{text:C}),A=T.y+"",L=zui_Handle.global.nest(12,null).nest(E,{text:A});P.text=T.x+"",L.text=T.y+"";var $=this.ui.textInput(P,"X",2),R=this.ui.textInput(L,"Y",2);T.x=parseFloat($),T.y=parseFloat(R),this.ui.row([.5,.5]);var F=T.width+"",N=zui_Handle.global.nest(13,null).nest(E,{text:F}),V=T.height+"",M=zui_Handle.global.nest(14,null).nest(E,{text:V});N.text=T.width+"",M.text=T.height+"";var D=this.ui.textInput(N,"Width",2),O=this.ui.textInput(M,"Height",2);T.width=0|parseFloat(D),T.height=0|parseFloat(O),T.text=this.ui.textInput(zui_Handle.global.nest(15,null).nest(E,{text:T.text}),"Text",2);var U=this.ui.combo(zui_Handle.global.nest(16,null).nest(E,{position:this.getAssetIndex(T.asset)}),this.getEnumTexts(),"Asset",!0,2);T.asset=this.getEnumTexts()[U],T.color=zui_Ext.colorWheel(this.ui,zui_Handle.global.nest(17,null).nest(E,{color:16777215}),!0,null,!0),this.ui.text("Anchor");var H=zui_Handle.global.nest(18,null).nest(E,{position:T.anchor});this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(H,0,"Top-Left"),this.ui.radio(H,1,"Top"),this.ui.radio(H,2,"Top-Right"),this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(H,3,"Left"),this.ui.radio(H,4,"Center"),this.ui.radio(H,5,"Right"),this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(H,6,"Bot-Left"),this.ui.radio(H,7,"Bottom"),this.ui.radio(H,8,"Bot-Right"),T.anchor=H.position}}if(this.ui.tab(n,"Assets"))if(this.canvas.assets.length>0){this.ui.text("Drag images to canvas",1,-15395563);for(var G=this.canvas.assets.length-1;G>=0;){var W=this.canvas.assets[G];1==this.ui.image(this.getImage(W))&&(this.dragAsset=W),this.ui.row([.875,.125]),W.name=this.ui.textInput(zui_Handle.global.nest(19,null).nest(W.id,{text:W.name}),"",2),this.assetNames[G]=W.name,this.ui.button("X")&&(this.getImage(W).unload(),this.canvas.assets.splice(G,1),this.assetNames.splice(G,1)),--G}}else this.ui.text("Drop images  here",1,-15395563)}if(this.ui.end(),t.begin(!1),null!=this.dragAsset){var z=Math.min(128,this.getImage(this.dragAsset).get_width()),j=z/this.getImage(this.dragAsset).get_width(),K=this.getImage(this.dragAsset).get_height()*j;t.drawScaledImage(this.getImage(this.dragAsset),this.ui.inputX,this.ui.inputY,z,K)}t.end(),this.lastW>0&&(this.lastW!=kha_System.windowWidth()||this.lastH!=kha_System.windowHeight())?this.resize():this.lastCanvasW>0&&(this.lastCanvasW!=this.canvas.width||this.lastCanvasH!=this.canvas.height)&&this.resize(),this.lastW=kha_System.windowWidth(),this.lastH=kha_System.windowHeight(),this.lastCanvasW=this.canvas.width,this.lastCanvasH=this.canvas.height},getImage:function(e){return zui_Canvas.assetMap.h[e.id]},removeSelectedElem:function(){this.canvas.elements.splice(this.selectedElem,1),this.selectedElem==this.canvas.elements.length?this.selectedElem--:this.selectedElem<0&&this.selectedElem++,this.hradio.position=this.selectedElem},acceptDrag:function(e){var t=this.makeElem(1);t.asset=this.assetNames[e],t.x=this.ui.inputX-this.canvas.x,t.y=this.ui.inputY-this.canvas.y,t.width=this.getImage(this.canvas.assets[e]).get_width(),t.height=this.getImage(this.canvas.assets[e]).get_height(),this.canvas.elements.push(t),this.selectedElem=this.hradio.position=this.canvas.elements.length-1},update:function(){if(this.ui.inputReleased&&null!=this.dragAsset){if(this.ui.inputX<kha_System.windowWidth()-Elements.get_uiw()){for(var e=0,t=0,a=this.canvas.assets.length;t<a;){var r=t++;if(this.canvas.assets[r]==this.dragAsset){e=r;break}}this.acceptDrag(e)}this.dragAsset=null}if(null==this.dragAsset){if(this.ui.inputStarted&&this.ui.inputDownR)for(var i=this.canvas.elements.length;--i>=0;){var s=this.canvas.elements[i];if(this.ui.inputX>this.canvas.x+s.x&&this.ui.inputX<this.canvas.x+s.x+s.width&&this.ui.inputY>this.canvas.y+s.y&&this.ui.inputY<this.canvas.y+s.y+s.height&&this.selectedElem!=i){this.selectedElem=this.hradio.position=i;break}}if(this.selectedElem>=0&&this.selectedElem<this.canvas.elements.length){var n=this.canvas.elements[this.selectedElem];this.ui.inputStarted&&this.ui.inputX>=this.canvas.x+n.x-3&&this.ui.inputX<=this.canvas.x+n.x+n.width+3&&this.ui.inputY>=this.canvas.y+n.y-3&&this.ui.inputY<=this.canvas.y+n.y+n.height+3&&(this.drag=!0,this.dragLeft=this.dragRight=this.dragTop=this.dragBottom=!1,this.ui.inputX>this.canvas.x+n.x+n.width-3?this.dragRight=!0:this.ui.inputX<this.canvas.x+n.x+3&&(this.dragLeft=!0),this.ui.inputY>this.canvas.y+n.y+n.height-3?this.dragBottom=!0:this.ui.inputY<this.canvas.y+n.y+3&&(this.dragTop=!0)),this.ui.inputReleased&&this.drag&&(this.drag=!1),this.drag&&(this.hwin.redraws=2,this.dragRight?n.width+=0|this.ui.inputDX:this.dragLeft&&(n.x+=0|this.ui.inputDX,n.width-=0|this.ui.inputDX),this.dragBottom?n.height+=0|this.ui.inputDY:this.dragTop&&(n.y+=0|this.ui.inputDY,n.height-=0|this.ui.inputDY),this.dragLeft||this.dragRight||this.dragBottom||this.dragTop||(n.x+=this.ui.inputDX,n.y+=this.ui.inputDY)),this.ui.isKeyDown&&!this.ui.isTyping&&(37==this.ui.key&&n.x--,39==this.ui.key&&n.x++,38==this.ui.key&&n.y--,40==this.ui.key&&n.y++,8!=this.ui.key&&"x"!=this.ui.char||this.removeSelectedElem(),this.hwin.redraws=2)}}},__class__:Elements};var HxOverrides=$hxClasses.HxOverrides=function(){};HxOverrides.__name__=!0,HxOverrides.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),a=new Date;return a.setTime(0),a.setUTCHours(t[0]),a.setUTCMinutes(t[1]),a.setUTCSeconds(t[2]),a;case 10:var r=e.split("-");return new Date(r[0],r[1]-1,r[2],0,0,0);case 19:var i=e.split(" "),s=i[0].split("-"),n=i[1].split(":");return new Date(s[0],s[1]-1,s[2],n[0],n[1],n[2]);default:throw new js__$Boot_HaxeError("Invalid date format : "+e)}},HxOverrides.cca=function(e,t){var a=e.charCodeAt(t);if(a==a)return a},HxOverrides.substr=function(e,t,a){if(null==a)a=e.length;else if(a<0){if(0!=t)return"";a=e.length+a}return e.substr(t,a)},HxOverrides.remove=function(e,t){var a=e.indexOf(t);return-1!=a&&(e.splice(a,1),!0)},HxOverrides.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Lambda=$hxClasses.Lambda=function(){};Lambda.__name__=!0,Lambda.array=function(e){for(var t=[],a=$iterator(e)();a.hasNext();){var r=a.next();t.push(r)}return t};var List=$hxClasses.List=function(){this.length=0};List.__name__=!0,List.prototype={h:null,q:null,length:null,add:function(e){var t=new _$List_ListNode(e,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++},iterator:function(){return new _$List_ListIterator(this.h)},__class__:List};var _$List_ListNode=$hxClasses["_List.ListNode"]=function(e,t){this.item=e,this.next=t};_$List_ListNode.__name__=!0,_$List_ListNode.prototype={item:null,next:null,__class__:_$List_ListNode};var _$List_ListIterator=$hxClasses["_List.ListIterator"]=function(e){this.head=e};_$List_ListIterator.__name__=!0,_$List_ListIterator.prototype={head:null,hasNext:function(){return null!=this.head},next:function(){var e=this.head.item;return this.head=this.head.next,e},__class__:_$List_ListIterator};var Main=$hxClasses.Main=function(){};Main.__name__=!0,Main.main=function(){var e=1280,t=690;e>kha_DisplayImpl.width(0)&&(e=kha_DisplayImpl.width(0)),t>kha_DisplayImpl.height(0)&&(t=kha_DisplayImpl.height(0)),kha_System.init({title:"ArmorUI",width:e,height:t,resizable:!0,maximizable:!0},Main.initialized)},Main.initialized=function(){kha_LoaderImpl.loadBlobFromDescription({files:["prefs.json"]},function(e){Main.prefs=JSON.parse(e.toString());var t=Main.prefs.path.split("/");t.pop(),Main.cwd=t.join("/");var a="Windows"==kha_System.get_systemId()?StringTools.replace(Main.prefs.path,"/","\\"):Main.prefs.path;kha_LoaderImpl.loadBlobFromDescription({files:[a]},function(e){var t=JSON.parse(e.toString());Main.inst=new Elements(t)})})},Math.__name__=!0;var Reflect=$hxClasses.Reflect=function(){};Reflect.__name__=!0,Reflect.field=function(e,t){try{return e[t]}catch(e){return null}},Reflect.fields=function(e){var t=[];if(null!=e){var a=Object.prototype.hasOwnProperty;for(var r in e)"__id__"!=r&&"hx__closures__"!=r&&a.call(e,r)&&t.push(r)}return t},Reflect.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},Reflect.copy=function(e){for(var t={},a=0,r=Reflect.fields(e);a<r.length;){var i=r[a];++a,t[i]=Reflect.field(e,i)}return t};var Std=$hxClasses.Std=function(){};Std.__name__=!0,Std.string=function(e){return js_Boot.__string_rec(e,"")},Std.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=HxOverrides.cca(e,1)&&88!=HxOverrides.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t};var StringTools=$hxClasses.StringTools=function(){};StringTools.__name__=!0,StringTools.endsWith=function(e,t){var a=t.length,r=e.length;return r>=a&&HxOverrides.substr(e,r-a,a)==t},StringTools.isSpace=function(e,t){var a=HxOverrides.cca(e,t);return a>8&&a<14||32==a},StringTools.rtrim=function(e){for(var t=e.length,a=0;a<t&&StringTools.isSpace(e,t-a-1);)++a;return a>0?HxOverrides.substr(e,0,t-a):e},StringTools.replace=function(e,t,a){return e.split(t).join(a)};var Type=$hxClasses.Type=function(){};Type.__name__=!0,Type.resolveClass=function(e){var t=$hxClasses[e];return null!=t&&t.__name__?t:null},Type.resolveEnum=function(e){var t=$hxClasses[e];return null!=t&&t.__ename__?t:null},Type.createEmptyInstance=function(e){function t(){}return t.prototype=e.prototype,new t},Type.createEnum=function(e,t,a){var r=Reflect.field(e,t);if(null==r)throw new js__$Boot_HaxeError("No such constructor "+t);if(Reflect.isFunction(r)){if(null==a)throw new js__$Boot_HaxeError("Constructor "+t+" need parameters");return r.apply(e,a)}if(null!=a&&0!=a.length)throw new js__$Boot_HaxeError("Constructor "+t+" does not need parameters");return r},Type.getInstanceFields=function(e){var t=[];for(var a in e.prototype)t.push(a);return HxOverrides.remove(t,"__class__"),HxOverrides.remove(t,"__properties__"),t};var _$UInt_UInt_$Impl_$=$hxClasses["_UInt.UInt_Impl_"]={};_$UInt_UInt_$Impl_$.__name__=!0,_$UInt_UInt_$Impl_$.gt=function(e,t){var a=e<0;return a!=t<0?a:e>t},_$UInt_UInt_$Impl_$.gte=function(e,t){var a=e<0;return a!=t<0?a:e>=t},_$UInt_UInt_$Impl_$.toFloat=function(e){return e<0?4294967296+e:e+0};var haxe_IMap=$hxClasses["haxe.IMap"]=function(){};haxe_IMap.__name__=!0,haxe_IMap.prototype={iterator:null,__class__:haxe_IMap};var haxe__$Int64__$_$_$Int64=$hxClasses["haxe._Int64.___Int64"]=function(e,t){this.high=e,this.low=t};haxe__$Int64__$_$_$Int64.__name__=!0,haxe__$Int64__$_$_$Int64.prototype={high:null,low:null,__class__:haxe__$Int64__$_$_$Int64};var haxe_Log=$hxClasses["haxe.Log"]=function(){};haxe_Log.__name__=!0,haxe_Log.trace=function(e,t){js_Boot.__trace(e,t)};var haxe__$Unserializer_DefaultResolver=$hxClasses["haxe._Unserializer.DefaultResolver"]=function(){};haxe__$Unserializer_DefaultResolver.__name__=!0,haxe__$Unserializer_DefaultResolver.prototype={resolveClass:function(e){return Type.resolveClass(e)},resolveEnum:function(e){return Type.resolveEnum(e)},__class__:haxe__$Unserializer_DefaultResolver};var haxe_Unserializer=$hxClasses["haxe.Unserializer"]=function(e){this.buf=e,this.length=e.length,this.pos=0,this.scache=[],this.cache=[];var t=haxe_Unserializer.DEFAULT_RESOLVER;null==t&&(t=new haxe__$Unserializer_DefaultResolver,haxe_Unserializer.DEFAULT_RESOLVER=t),this.resolver=t};haxe_Unserializer.__name__=!0,haxe_Unserializer.initCodes=function(){for(var e=[],t=0,a=haxe_Unserializer.BASE64.length;t<a;){var r=t++;e[haxe_Unserializer.BASE64.charCodeAt(r)]=r}return e},haxe_Unserializer.run=function(e){return new haxe_Unserializer(e).unserialize()},haxe_Unserializer.prototype={buf:null,pos:null,length:null,cache:null,scache:null,resolver:null,readDigits:function(){for(var e=0,t=!1,a=this.pos;;){var r=this.buf.charCodeAt(this.pos);if(r!=r)break;if(45!=r){if(r<48||r>57)break;e=10*e+(r-48),this.pos++}else{if(this.pos!=a)break;t=!0,this.pos++}}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(t!=t)break;if(!(t>=43&&t<58||101==t||69==t))break;this.pos++}return parseFloat(HxOverrides.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw new js__$Boot_HaxeError("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw new js__$Boot_HaxeError("Invalid object key");var a=this.unserialize();e[t]=a}this.pos++},unserializeEnum:function(e,t){if(58!=this.buf.charCodeAt(this.pos++))throw new js__$Boot_HaxeError("Invalid enum format");var a=this.readDigits();if(0==a)return Type.createEnum(e,t);for(var r=[];a-- >0;)r.push(this.unserialize());return Type.createEnum(e,t,r)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize(),t=this.resolver.resolveClass(e);if(null==t)throw new js__$Boot_HaxeError("Class not found "+e);return t;case 66:var a=this.unserialize(),r=this.resolver.resolveEnum(a);if(null==r)throw new js__$Boot_HaxeError("Enum not found "+a);return r;case 67:var i=this.unserialize(),s=this.resolver.resolveClass(i);if(null==s)throw new js__$Boot_HaxeError("Class not found "+i);var n=Type.createEmptyInstance(s);if(this.cache.push(n),n.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw new js__$Boot_HaxeError("Invalid custom data");return n;case 77:var _=new haxe_ds_ObjectMap;this.cache.push(_);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var o=this.unserialize();_.set(o,this.unserialize())}return this.pos++,_;case 82:var h=this.readDigits();if(h<0||h>=this.scache.length)throw new js__$Boot_HaxeError("Invalid string reference");return this.scache[h];case 97:this.buf;var l=[];for(this.cache.push(l);;){var c=this.buf.charCodeAt(this.pos);if(104==c){this.pos++;break}if(117==c){this.pos++;var u=this.readDigits();l[l.length+u-1]=null}else l.push(this.unserialize())}return l;case 98:var d=new haxe_ds_StringMap;this.cache.push(d);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var g=this.unserialize(),p=this.unserialize();null!=__map_reserved[g]?d.setReserved(g,p):d.h[g]=p}return this.pos++,d;case 99:var f=this.unserialize(),v=this.resolver.resolveClass(f);if(null==v)throw new js__$Boot_HaxeError("Class not found "+f);var k=Type.createEmptyInstance(v);return this.cache.push(k),this.unserializeObject(k),k;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:var m=this.unserialize(),S=this.resolver.resolveEnum(m);if(null==S)throw new js__$Boot_HaxeError("Enum not found "+m);this.pos++;var b=this.readDigits(),y=S.__constructs__.slice()[b];if(null==y)throw new js__$Boot_HaxeError("Unknown enum index "+m+"@"+b);var x=this.unserializeEnum(S,y);return this.cache.push(x),x;case 107:return NaN;case 108:var B=new List;this.cache.push(B);for(this.buf;104!=this.buf.charCodeAt(this.pos);)B.add(this.unserialize());return this.pos++,B;case 109:return-1/0;case 110:return null;case 111:var w={};return this.cache.push(w),this.unserializeObject(w),w;case 112:return 1/0;case 113:var I=new haxe_ds_IntMap;this.cache.push(I);this.buf;for(var T=this.buf.charCodeAt(this.pos++);58==T;){var E=this.readDigits(),C=this.unserialize();I.h[E]=C,T=this.buf.charCodeAt(this.pos++)}if(104!=T)throw new js__$Boot_HaxeError("Invalid IntMap format");return I;case 114:var P=this.readDigits();if(P<0||P>=this.cache.length)throw new js__$Boot_HaxeError("Invalid reference");return this.cache[P];case 115:var A=this.readDigits(),L=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<A)throw new js__$Boot_HaxeError("Invalid bytes length");var $=haxe_Unserializer.CODES;null==$&&($=haxe_Unserializer.initCodes(),haxe_Unserializer.CODES=$);for(var R=this.pos,F=3&A,N=R+(A-F),V=new haxe_io_Bytes(new ArrayBuffer(3*(A>>2)+(F>=2?F-1:0))),M=0;R<N;){var D=$[L.charCodeAt(R++)],O=$[L.charCodeAt(R++)];V.b[M++]=255&(D<<2|O>>4);var U=$[L.charCodeAt(R++)];V.b[M++]=255&(O<<4|U>>2);var H=$[L.charCodeAt(R++)];V.b[M++]=255&(U<<6|H)}if(F>=2){var G=$[L.charCodeAt(R++)],W=$[L.charCodeAt(R++)];if(V.b[M++]=255&(G<<2|W>>4),3==F){var z=$[L.charCodeAt(R++)];V.b[M++]=255&(W<<4|z>>2)}}return this.pos+=A,this.cache.push(V),V;case 116:return!0;case 118:var j;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4))j=HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19)),this.pos+=19;else{var K=this.readFloat();j=new Date(K)}return this.cache.push(j),j;case 119:var Y=this.unserialize(),X=this.resolver.resolveEnum(Y);if(null==X)throw new js__$Boot_HaxeError("Enum not found "+Y);var Z=this.unserializeEnum(X,this.unserialize());return this.cache.push(Z),Z;case 120:throw js__$Boot_HaxeError.wrap(this.unserialize());case 121:var Q=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<Q)throw new js__$Boot_HaxeError("Invalid string length");var q=HxOverrides.substr(this.buf,this.pos,Q);return this.pos+=Q,q=decodeURIComponent(q.split("+").join(" ")),this.scache.push(q),q;case 122:return 0}throw this.pos--,new js__$Boot_HaxeError("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:haxe_Unserializer};var haxe_ds_IntMap=$hxClasses["haxe.ds.IntMap"]=function(){this.h={}};haxe_ds_IntMap.__name__=!0,haxe_ds_IntMap.__interfaces__=[haxe_IMap],haxe_ds_IntMap.prototype={h:null,keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return HxOverrides.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},__class__:haxe_ds_IntMap};var haxe_ds_ObjectMap=$hxClasses["haxe.ds.ObjectMap"]=function(){this.h={__keys__:{}}};haxe_ds_ObjectMap.__name__=!0,haxe_ds_ObjectMap.__interfaces__=[haxe_IMap],haxe_ds_ObjectMap.prototype={h:null,set:function(e,t){var a=e.__id__||(e.__id__=++haxe_ds_ObjectMap.count);this.h[a]=t,this.h.__keys__[a]=e},keys:function(){var e=[];for(var t in this.h.__keys__)this.h.hasOwnProperty(t)&&e.push(this.h.__keys__[t]);return HxOverrides.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e.__id__]}}},__class__:haxe_ds_ObjectMap};var haxe_ds__$StringMap_StringMapIterator=$hxClasses["haxe.ds._StringMap.StringMapIterator"]=function(e,t){this.map=e,this.keys=t,this.index=0,this.count=t.length};haxe_ds__$StringMap_StringMapIterator.__name__=!0,haxe_ds__$StringMap_StringMapIterator.prototype={map:null,keys:null,index:null,count:null,hasNext:function(){return this.index<this.count},next:function(){var e=this.map,t=this.keys[this.index++];return null!=__map_reserved[t]?e.getReserved(t):e.h[t]},__class__:haxe_ds__$StringMap_StringMapIterator};var haxe_ds_StringMap=$hxClasses["haxe.ds.StringMap"]=function(){this.h={}};haxe_ds_StringMap.__name__=!0,haxe_ds_StringMap.__interfaces__=[haxe_IMap],haxe_ds_StringMap.prototype={h:null,rh:null,setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},existsReserved:function(e){return null!=this.rh&&this.rh.hasOwnProperty("$"+e)},arrayKeys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(t);if(null!=this.rh)for(var t in this.rh)36==t.charCodeAt(0)&&e.push(t.substr(1));return e},iterator:function(){return new haxe_ds__$StringMap_StringMapIterator(this,this.arrayKeys())},__class__:haxe_ds_StringMap};var haxe_io_Bytes=$hxClasses["haxe.io.Bytes"]=function(e){this.length=e.byteLength,this.b=new Uint8Array(e),this.b.bufferValue=e,e.hxBytes=this,e.bytes=this.b};haxe_io_Bytes.__name__=!0,haxe_io_Bytes.ofString=function(e){for(var t=[],a=0;a<e.length;){var r=e.charCodeAt(a++);55296<=r&&r<=56319&&(r=r-55232<<10|1023&e.charCodeAt(a++)),r<=127?t.push(r):r<=2047?(t.push(192|r>>6),t.push(128|63&r)):r<=65535?(t.push(224|r>>12),t.push(128|r>>6&63),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|r>>12&63),t.push(128|r>>6&63),t.push(128|63&r))}return new haxe_io_Bytes(new Uint8Array(t).buffer)},haxe_io_Bytes.ofData=function(e){var t=e.hxBytes;return null!=t?t:new haxe_io_Bytes(e)},haxe_io_Bytes.prototype={length:null,b:null,data:null,blit:function(e,t,a,r){if(e<0||a<0||r<0||e+r>this.length||a+r>t.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);0==a&&r==t.b.byteLength?this.b.set(t.b,e):this.b.set(t.b.subarray(a,a+r),e)},sub:function(e,t){if(e<0||t<0||e+t>this.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);return new haxe_io_Bytes(this.b.buffer.slice(e+this.b.byteOffset,e+this.b.byteOffset+t))},getDouble:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat64(e,!0)},getFloat:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat32(e,!0)},setDouble:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat64(e,t,!0)},setFloat:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat32(e,t,!0)},getUInt16:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getUint16(e,!0)},getInt32:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getInt32(e,!0)},setInt32:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(e,t,!0)},getString:function(e,t){if(e<0||t<0||e+t>this.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);for(var a="",r=this.b,i=String.fromCharCode,s=e,n=e+t;s<n;){var _=r[s++];if(_<128){if(0==_)break;a+=i(_)}else if(_<224)a+=i((63&_)<<6|127&r[s++]);else if(_<240){a+=i((31&_)<<12|(127&r[s++])<<6|127&r[s++])}else{var o=(15&_)<<18|(127&r[s++])<<12|(127&r[s++])<<6|127&r[s++];a+=i(55232+(o>>10)),a+=i(1023&o|56320)}}return a},toString:function(){return this.getString(0,this.length)},__class__:haxe_io_Bytes};var haxe_io_BytesBuffer=$hxClasses["haxe.io.BytesBuffer"]=function(){this.b=[]};haxe_io_BytesBuffer.__name__=!0,haxe_io_BytesBuffer.prototype={b:null,getBytes:function(){var e=new haxe_io_Bytes(new Uint8Array(this.b).buffer);return this.b=null,e},__class__:haxe_io_BytesBuffer};var haxe_io_Input=$hxClasses["haxe.io.Input"]=function(){};haxe_io_Input.__name__=!0,haxe_io_Input.prototype={bigEndian:null,readByte:function(){throw new js__$Boot_HaxeError("Not implemented")},readBytes:function(e,t,a){var r=a,i=e.b;if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);try{for(;r>0;)i[t]=this.readByte(),++t,--r}catch(e){if(e instanceof js__$Boot_HaxeError&&(e=e.val),!js_Boot.__instanceof(e,haxe_io_Eof))throw e}return a-r},readFullBytes:function(e,t,a){for(;a>0;){var r=this.readBytes(e,t,a);if(0==r)throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);t+=r,a-=r}},read:function(e){for(var t=new haxe_io_Bytes(new ArrayBuffer(e)),a=0;e>0;){var r=this.readBytes(t,a,e);if(0==r)throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);a+=r,e-=r}return t},readInt32:function(){var e=this.readByte(),t=this.readByte(),a=this.readByte(),r=this.readByte();return this.bigEndian?r|a<<8|t<<16|e<<24:e|t<<8|a<<16|r<<24},readString:function(e){var t=new haxe_io_Bytes(new ArrayBuffer(e));return this.readFullBytes(t,0,e),t.toString()},__class__:haxe_io_Input};var haxe_io_BytesInput=$hxClasses["haxe.io.BytesInput"]=function(e,t,a){if(null==t&&(t=0),null==a&&(a=e.length-t),t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);this.b=e.b,this.pos=t,this.len=a,this.totlen=a};haxe_io_BytesInput.__name__=!0,haxe_io_BytesInput.__super__=haxe_io_Input,haxe_io_BytesInput.prototype=$extend(haxe_io_Input.prototype,{b:null,pos:null,len:null,totlen:null,set_position:function(e){return e<0?e=0:e>this.totlen&&(e=this.totlen),this.len=this.totlen-e,this.pos=e},readByte:function(){if(0==this.len)throw new js__$Boot_HaxeError(new haxe_io_Eof);return this.len--,this.b[this.pos++]},readBytes:function(e,t,a){if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);if(0==this.len&&a>0)throw new js__$Boot_HaxeError(new haxe_io_Eof);this.len<a&&(a=this.len);for(var r=this.b,i=e.b,s=0,n=a;s<n;){var _=s++;i[t+_]=r[this.pos+_]}return this.pos+=a,this.len-=a,a},__class__:haxe_io_BytesInput});var haxe_io_Output=$hxClasses["haxe.io.Output"]=function(){};haxe_io_Output.__name__=!0,haxe_io_Output.prototype={bigEndian:null,writeByte:function(e){throw new js__$Boot_HaxeError("Not implemented")},writeBytes:function(e,t,a){if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);for(var r=e.b,i=a;i>0;)this.writeByte(r[t]),++t,--i;return a},write:function(e){for(var t=e.length,a=0;t>0;){var r=this.writeBytes(e,a,t);if(0==r)throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);a+=r,t-=r}},writeFloat:function(e){this.writeInt32(haxe_io_FPHelper.floatToI32(e))},writeInt32:function(e){this.bigEndian?(this.writeByte(e>>>24),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8&255),this.writeByte(e>>16&255),this.writeByte(e>>>24))},__class__:haxe_io_Output};var haxe_io_BytesOutput=$hxClasses["haxe.io.BytesOutput"]=function(){this.b=new haxe_io_BytesBuffer};haxe_io_BytesOutput.__name__=!0,haxe_io_BytesOutput.__super__=haxe_io_Output,haxe_io_BytesOutput.prototype=$extend(haxe_io_Output.prototype,{b:null,writeByte:function(e){this.b.b.push(e)},writeBytes:function(e,t,a){var r=this.b;if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);r.b;for(var i=e.b,s=t,n=t+a;s<n;){var _=s++;r.b.push(i[_])}return a},getBytes:function(){return this.b.getBytes()},__class__:haxe_io_BytesOutput});var haxe_io_Eof=$hxClasses["haxe.io.Eof"]=function(){};haxe_io_Eof.__name__=!0,haxe_io_Eof.prototype={toString:function(){return"Eof"},__class__:haxe_io_Eof};var haxe_io_Error=$hxClasses["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};haxe_io_Error.Blocked=["Blocked",0],haxe_io_Error.Blocked.toString=$estr,haxe_io_Error.Blocked.__enum__=haxe_io_Error,haxe_io_Error.Overflow=["Overflow",1],haxe_io_Error.Overflow.toString=$estr,haxe_io_Error.Overflow.__enum__=haxe_io_Error,haxe_io_Error.OutsideBounds=["OutsideBounds",2],haxe_io_Error.OutsideBounds.toString=$estr,haxe_io_Error.OutsideBounds.__enum__=haxe_io_Error,haxe_io_Error.Custom=function(e){var t=["Custom",3,e];return t.__enum__=haxe_io_Error,t.toString=$estr,t};var haxe_io_FPHelper=$hxClasses["haxe.io.FPHelper"]=function(){};haxe_io_FPHelper.__name__=!0,haxe_io_FPHelper.i32ToFloat=function(e){var t=e>>>23&255,a=8388607&e;return 0==a&&0==t?0:(1-(e>>>31<<1))*(1+Math.pow(2,-23)*a)*Math.pow(2,t-127)},haxe_io_FPHelper.floatToI32=function(e){if(0==e)return 0;var t=e<0?-e:e,a=Math.floor(Math.log(t)/.6931471805599453);a<-127?a=-127:a>128&&(a=128);var r=Math.round(8388608*(t/Math.pow(2,a)-1));return 8388608==r&&a<128&&(r=0,++a),(e<0?-2147483648:0)|a+127<<23|r},haxe_io_FPHelper.i64ToDouble=function(e,t){var a=(t>>20&2047)-1023,r=4294967296*(1048575&t)+2147483648*(e>>>31)+(2147483647&e);return 0==r&&-1023==a?0:(1-(t>>>31<<1))*(1+Math.pow(2,-52)*r)*Math.pow(2,a)},haxe_io_FPHelper.doubleToI64=function(e){var t=haxe_io_FPHelper.i64tmp;if(0==e)t.low=0,t.high=0;else if(isFinite(e)){var a=e<0?-e:e,r=Math.floor(Math.log(a)/.6931471805599453),i=Math.round(4503599627370496*(a/Math.pow(2,r)-1)),s=0|i,n=i/4294967296|0;t.low=s,t.high=(e<0?-2147483648:0)|r+1023<<20|n}else e>0?(t.low=0,t.high=2146435072):(t.low=0,t.high=-1048576);return t};var haxe_io_Path=$hxClasses["haxe.io.Path"]=function(){};haxe_io_Path.__name__=!0,haxe_io_Path.normalize=function(e){if("/"==(e=e.split("\\").join("/")))return"/";for(var t=[],a=0,r=e.split("/");a<r.length;){var i=r[a];++a,".."==i&&t.length>0&&".."!=t[t.length-1]?t.pop():"."!=i&&t.push(i)}for(var s=t.join("/"),n=new RegExp("([^:])/+","g".split("u").join("")),_=(s.replace(n,"$1/"),""),o=!1,h=!1,l=0,c=s.length;l<c;){var u=l++,d=s.charCodeAt(u);switch(d){case 47:if(o){var g=d;o=!1,h&&(_+="/",h=!1),_+=String.fromCharCode(g)}else h=!0;break;case 58:_+=":",o=!0;break;default:var p=d;o=!1,h&&(_+="/",h=!1),_+=String.fromCharCode(p)}}return _};var js__$Boot_HaxeError=$hxClasses["js._Boot.HaxeError"]=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,js__$Boot_HaxeError)};js__$Boot_HaxeError.__name__=!0,js__$Boot_HaxeError.wrap=function(e){return e instanceof Error?e:new js__$Boot_HaxeError(e)},js__$Boot_HaxeError.__super__=Error,js__$Boot_HaxeError.prototype=$extend(Error.prototype,{val:null,__class__:js__$Boot_HaxeError});var js_Boot=$hxClasses["js.Boot"]=function(){};js_Boot.__name__=!0,js_Boot.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},js_Boot.__trace=function(e,t){var a,r=null!=t?t.fileName+":"+t.lineNumber+": ":"";if(r+=js_Boot.__string_rec(e,""),null!=t&&null!=t.customParams)for(var i=0,s=t.customParams;i<s.length;){var n=s[i];++i,r+=","+js_Boot.__string_rec(n,"")}"undefined"!=typeof document&&null!=(a=document.getElementById("haxe:trace"))?a.innerHTML+=js_Boot.__unhtml(r)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(r)},js_Boot.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var a=js_Boot.__nativeClassName(e);return null!=a?js_Boot.__resolveNativeClass(a):null},js_Boot.__string_rec=function(e,t){if(null==e)return"null";if(t.length>=5)return"<...>";var a=typeof e;switch("function"==a&&(e.__name__||e.__ename__)&&(a="object"),a){case"function":return"<function>";case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var r=e[0]+"(";t+="\t";for(var i=2,s=e.length;i<s;){var n=i++;r+=2!=n?","+js_Boot.__string_rec(e[n],t):js_Boot.__string_rec(e[n],t)}return r+")"}var _="[";t+="\t";for(var o=0,h=e.length;o<h;){var l=o++;_+=(l>0?",":"")+js_Boot.__string_rec(e[l],t)}return _+="]"}var c;try{c=e.toString}catch(e){return"???"}if(null!=c&&c!=Object.toString&&"function"==typeof c){var u=e.toString();if("[object Object]"!=u)return u}var d=null,g="{\n";t+="\t";var p=null!=e.hasOwnProperty;for(var d in e)p&&!e.hasOwnProperty(d)||"prototype"!=d&&"__class__"!=d&&"__super__"!=d&&"__interfaces__"!=d&&"__properties__"!=d&&(2!=g.length&&(g+=", \n"),g+=t+d+" : "+js_Boot.__string_rec(e[d],t));return g+="\n"+(t=t.substring(1))+"}";case"string":return e;default:return String(e)}},js_Boot.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var a=e.__interfaces__;if(null!=a)for(var r=0,i=a.length;r<i;){var s=a[r++];if(s==t||js_Boot.__interfLoop(s,t))return!0}return js_Boot.__interfLoop(e.__super__,t)},js_Boot.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array&&null==e.__enum__;case Bool:return"boolean"==typeof e;case Dynamic:return!0;case Float:return"number"==typeof e;case Int:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(js_Boot.__interfLoop(js_Boot.getClass(e),t))return!0}else if("object"==typeof t&&js_Boot.__isNativeObj(t)&&e instanceof t)return!0;return t==Class&&null!=e.__name__||(t==Enum&&null!=e.__ename__||e.__enum__==t)}},js_Boot.__cast=function(e,t){if(js_Boot.__instanceof(e,t))return e;throw new js__$Boot_HaxeError("Cannot cast "+Std.string(e)+" to "+Std.string(t))},js_Boot.__nativeClassName=function(e){var t=js_Boot.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},js_Boot.__isNativeObj=function(e){return null!=js_Boot.__nativeClassName(e)},js_Boot.__resolveNativeClass=function(e){return $global[e]};var js_html_compat_ArrayBuffer=$hxClasses["js.html.compat.ArrayBuffer"]=function(e){if(e instanceof Array&&null==e.__enum__)this.a=e,this.byteLength=e.length;else{var t=e;this.a=[];for(var a=0,r=t;a<r;){var i=a++;this.a[i]=0}this.byteLength=t}};js_html_compat_ArrayBuffer.__name__=!0,js_html_compat_ArrayBuffer.sliceImpl=function(e,t){var a=new Uint8Array(this,e,null==t?null:t-e),r=new ArrayBuffer(a.byteLength);return new Uint8Array(r).set(a),r},js_html_compat_ArrayBuffer.prototype={byteLength:null,a:null,slice:function(e,t){return new js_html_compat_ArrayBuffer(this.a.slice(e,t))},__class__:js_html_compat_ArrayBuffer};var js_html_compat_DataView=$hxClasses["js.html.compat.DataView"]=function(e,t,a){if(this.buf=e,this.offset=null==t?0:t,this.length=null==a?e.byteLength-this.offset:a,this.offset<0||this.length<0||this.offset+this.length>e.byteLength)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);this.byteLength=this.length,this.byteOffset=this.offset,this.buffer=this.buf};js_html_compat_DataView.__name__=!0,js_html_compat_DataView.prototype={buf:null,offset:null,length:null,byteLength:null,byteOffset:null,buffer:null,getInt8:function(e){var t=this.buf.a[this.offset+e];return t>=128?t-256:t},getUint8:function(e){return this.buf.a[this.offset+e]},getInt16:function(e,t){var a=this.getUint16(e,t);return a>=32768?a-65536:a},getUint16:function(e,t){return t?this.buf.a[this.offset+e]|this.buf.a[this.offset+e+1]<<8:this.buf.a[this.offset+e]<<8|this.buf.a[this.offset+e+1]},getInt32:function(e,t){var a=this.offset+e,r=this.buf.a[a++],i=this.buf.a[a++],s=this.buf.a[a++],n=this.buf.a[a++];return t?r|i<<8|s<<16|n<<24:n|s<<8|i<<16|r<<24},getUint32:function(e,t){var a=this.getInt32(e,t);return a<0?a+4294967296:a},getFloat32:function(e,t){return haxe_io_FPHelper.i32ToFloat(this.getInt32(e,t))},getFloat64:function(e,t){var a=this.getInt32(e,t),r=this.getInt32(e+4,t);return haxe_io_FPHelper.i64ToDouble(t?a:r,t?r:a)},setInt8:function(e,t){this.buf.a[e+this.offset]=t<0?t+128&255:255&t},setUint8:function(e,t){this.buf.a[e+this.offset]=255&t},setInt16:function(e,t,a){this.setUint16(e,t<0?t+65536:t,a)},setUint16:function(e,t,a){var r=e+this.offset;a?(this.buf.a[r]=255&t,this.buf.a[r++]=t>>8&255):(this.buf.a[r++]=t>>8&255,this.buf.a[r]=255&t)},setInt32:function(e,t,a){this.setUint32(e,t,a)},setUint32:function(e,t,a){var r=e+this.offset;a?(this.buf.a[r++]=255&t,this.buf.a[r++]=t>>8&255,this.buf.a[r++]=t>>16&255,this.buf.a[r++]=t>>>24):(this.buf.a[r++]=t>>>24,this.buf.a[r++]=t>>16&255,this.buf.a[r++]=t>>8&255,this.buf.a[r++]=255&t)},setFloat32:function(e,t,a){this.setUint32(e,haxe_io_FPHelper.floatToI32(t),a)},setFloat64:function(e,t,a){var r=haxe_io_FPHelper.doubleToI64(t);a?(this.setUint32(e,r.low),this.setUint32(e,r.high)):(this.setUint32(e,r.high),this.setUint32(e,r.low))},__class__:js_html_compat_DataView};var js_html_compat_Float32Array=$hxClasses["js.html.compat.Float32Array"]=function(){};js_html_compat_Float32Array.__name__=!0,js_html_compat_Float32Array._new=function(e,t,a){var r;if("number"==typeof e){r=[];for(var i=0,s=e;i<s;){r[i++]=0}r.byteLength=r.length<<2,r.byteOffset=0;for(var n=[],_=0,o=r.length<<2;_<o;){_++;n.push(0)}r.buffer=new js_html_compat_ArrayBuffer(n)}else if(js_Boot.__instanceof(e,js_html_compat_ArrayBuffer)){var h=e;null==t&&(t=0),null==a&&(a=h.byteLength-t>>2),r=[];for(var l=0,c=a;l<c;){l++;var u=h.a[t++]|h.a[t++]<<8|h.a[t++]<<16|h.a[t++]<<24;r.push(haxe_io_FPHelper.i32ToFloat(u))}r.byteLength=r.length<<2,r.byteOffset=t,r.buffer=h}else{if(!(e instanceof Array&&null==e.__enum__))throw new js__$Boot_HaxeError("TODO "+Std.string(e));r=e.slice();for(var d=[],g=0;g<r.length;){var p=r[g];++g;var f=haxe_io_FPHelper.floatToI32(p);d.push(255&f),d.push(f>>8&255),d.push(f>>16&255),d.push(f>>>24)}r.byteLength=r.length<<2,r.byteOffset=0,r.buffer=new js_html_compat_ArrayBuffer(d)}return r.subarray=js_html_compat_Float32Array._subarray,r.set=js_html_compat_Float32Array._set,r},js_html_compat_Float32Array._set=function(e,t){if(js_Boot.__instanceof(e.buffer,js_html_compat_ArrayBuffer)){var a=e;if(e.byteLength+t>this.byteLength)throw new js__$Boot_HaxeError("set() outside of range");for(var r=0,i=e.byteLength;r<i;){var s=r++;this[s+t]=a[s]}}else{if(!(e instanceof Array&&null==e.__enum__))throw new js__$Boot_HaxeError("TODO");var n=e;if(n.length+t>this.byteLength)throw new js__$Boot_HaxeError("set() outside of range");for(var _=0,o=n.length;_<o;){var h=_++;this[h+t]=n[h]}}},js_html_compat_Float32Array._subarray=function(e,t){var a=js_html_compat_Float32Array._new(this.slice(e,t));return a.byteOffset=4*e,a};var js_html_compat_Uint8Array=$hxClasses["js.html.compat.Uint8Array"]=function(){};js_html_compat_Uint8Array.__name__=!0,js_html_compat_Uint8Array._new=function(e,t,a){var r;if("number"==typeof e){r=[];for(var i=0,s=e;i<s;){r[i++]=0}r.byteLength=r.length,r.byteOffset=0,r.buffer=new js_html_compat_ArrayBuffer(r)}else if(js_Boot.__instanceof(e,js_html_compat_ArrayBuffer)){var n=e;null==t&&(t=0),null==a&&(a=n.byteLength-t),(r=0==t?n.a:n.a.slice(t,t+a)).byteLength=r.length,r.byteOffset=t,r.buffer=n}else{if(!(e instanceof Array&&null==e.__enum__))throw new js__$Boot_HaxeError("TODO "+Std.string(e));(r=e.slice()).byteLength=r.length,r.byteOffset=0,r.buffer=new js_html_compat_ArrayBuffer(r)}return r.subarray=js_html_compat_Uint8Array._subarray,r.set=js_html_compat_Uint8Array._set,r},js_html_compat_Uint8Array._set=function(e,t){if(js_Boot.__instanceof(e.buffer,js_html_compat_ArrayBuffer)){var a=e;if(e.byteLength+t>this.byteLength)throw new js__$Boot_HaxeError("set() outside of range");for(var r=0,i=e.byteLength;r<i;){var s=r++;this[s+t]=a[s]}}else{if(!(e instanceof Array&&null==e.__enum__))throw new js__$Boot_HaxeError("TODO");var n=e;if(n.length+t>this.byteLength)throw new js__$Boot_HaxeError("set() outside of range");for(var _=0,o=n.length;_<o;){var h=_++;this[h+t]=n[h]}}},js_html_compat_Uint8Array._subarray=function(e,t){var a=js_html_compat_Uint8Array._new(this.slice(e,t));return a.byteOffset=e,a};var kha__$Assets_ImageList=$hxClasses["kha._Assets.ImageList"]=function(){this.names=["color_wheel"],this.color_wheelDescription={files:["color_wheel.png"],original_height:270,type:"image",original_width:360,name:"color_wheel"},this.color_wheelName="color_wheel",this.color_wheel=null};kha__$Assets_ImageList.__name__=!0,kha__$Assets_ImageList.prototype={get:function(e){return Reflect.field(this,e)},color_wheel:null,color_wheelName:null,color_wheelDescription:null,color_wheelLoad:function(e){kha_Assets.loadImage("color_wheel",function(t){e()})},color_wheelUnload:function(){this.color_wheel.unload(),this.color_wheel=null},names:null,__class__:kha__$Assets_ImageList};var kha__$Assets_SoundList=$hxClasses["kha._Assets.SoundList"]=function(){this.names=[]};kha__$Assets_SoundList.__name__=!0,kha__$Assets_SoundList.prototype={get:function(e){return Reflect.field(this,e)},names:null,__class__:kha__$Assets_SoundList};var kha__$Assets_BlobList=$hxClasses["kha._Assets.BlobList"]=function(){this.names=[]};kha__$Assets_BlobList.__name__=!0,kha__$Assets_BlobList.prototype={get:function(e){return Reflect.field(this,e)},names:null,__class__:kha__$Assets_BlobList};var kha__$Assets_FontList=$hxClasses["kha._Assets.FontList"]=function(){this.names=["DroidSans"],this.DroidSansDescription={files:["DroidSans.ttf"],type:"font",name:"DroidSans"},this.DroidSansName="DroidSans",this.DroidSans=null};kha__$Assets_FontList.__name__=!0,kha__$Assets_FontList.prototype={get:function(e){return Reflect.field(this,e)},DroidSans:null,DroidSansName:null,DroidSansDescription:null,DroidSansLoad:function(e){kha_Assets.loadFont("DroidSans",function(t){e()})},DroidSansUnload:function(){this.DroidSans.unload(),this.DroidSans=null},names:null,__class__:kha__$Assets_FontList};var kha__$Assets_VideoList=$hxClasses["kha._Assets.VideoList"]=function(){this.names=[]};kha__$Assets_VideoList.__name__=!0,kha__$Assets_VideoList.prototype={get:function(e){return Reflect.field(this,e)},names:null,__class__:kha__$Assets_VideoList};var kha_Assets=$hxClasses["kha.Assets"]=function(){};kha_Assets.__name__=!0,kha_Assets.loadEverything=function(e,t,a){for(var r=0,i=0,s=Type.getInstanceFields(kha__$Assets_BlobList);i<s.length;){var n=s[i];++i,StringTools.endsWith(n,"Load")&&(r+=1)}for(var _=0,o=Type.getInstanceFields(kha__$Assets_ImageList);_<o.length;){var h=o[_];++_,StringTools.endsWith(h,"Load")&&(r+=1)}for(var l=0,c=Type.getInstanceFields(kha__$Assets_SoundList);l<c.length;){var u=c[l];++l,StringTools.endsWith(u,"Load")&&(r+=1)}for(var d=0,g=Type.getInstanceFields(kha__$Assets_FontList);d<g.length;){var p=g[d];++d,StringTools.endsWith(p,"Load")&&(r+=1)}for(var f=0,v=Type.getInstanceFields(kha__$Assets_VideoList);f<v.length;){var k=v[f];++f,StringTools.endsWith(k,"Load")&&(r+=1)}if(0!=r){for(var m=r,S=0,b=Type.getInstanceFields(kha__$Assets_BlobList);S<b.length;){var y=b[S];if(++S,StringTools.endsWith(y,"Load")){var x=HxOverrides.substr(y,0,y.length-4),B=Reflect.field(kha_Assets.blobs,x+"Description");null==t||t(B)?Reflect.field(kha_Assets.blobs,y)(function(){m-=1,kha_Assets.progress=1-m/r,0==m&&e()}):(m-=1,kha_Assets.progress=1-m/r,0==m&&e())}}for(var w=0,I=Type.getInstanceFields(kha__$Assets_ImageList);w<I.length;){var T=I[w];if(++w,StringTools.endsWith(T,"Load")){var E=HxOverrides.substr(T,0,T.length-4),C=Reflect.field(kha_Assets.images,E+"Description");null==t||t(C)?Reflect.field(kha_Assets.images,T)(function(){m-=1,kha_Assets.progress=1-m/r,0==m&&e()}):(m-=1,kha_Assets.progress=1-m/r,0==m&&e())}}for(var P=0,A=Type.getInstanceFields(kha__$Assets_SoundList);P<A.length;){var L=[A[P]];if(++P,StringTools.endsWith(L[0],"Load")){var $=HxOverrides.substr(L[0],0,L[0].length-4),R=[Reflect.field(kha_Assets.sounds,$+"Description")];null==t||t(R[0])?Reflect.field(kha_Assets.sounds,L[0])(function(t,i){return function(){null==a||a(t[0])?Reflect.field(kha_Assets.sounds,i[0].substring(0,i[0].length-4)).uncompress(function(){m-=1,kha_Assets.progress=1-m/r,0==m&&e()}):(m-=1,kha_Assets.progress=1-m/r,0==m&&e())}}(R,L)):(m-=1,kha_Assets.progress=1-m/r,0==m&&e())}}for(var F=0,N=Type.getInstanceFields(kha__$Assets_FontList);F<N.length;){var V=N[F];if(++F,StringTools.endsWith(V,"Load")){var M=HxOverrides.substr(V,0,V.length-4),D=Reflect.field(kha_Assets.fonts,M+"Description");null==t||t(D)?Reflect.field(kha_Assets.fonts,V)(function(){m-=1,kha_Assets.progress=1-m/r,0==m&&e()}):(m-=1,kha_Assets.progress=1-m/r,0==m&&e())}}for(var O=0,U=Type.getInstanceFields(kha__$Assets_VideoList);O<U.length;){var H=U[O];if(++O,StringTools.endsWith(H,"Load")){var G=HxOverrides.substr(H,0,H.length-4),W=Reflect.field(kha_Assets.videos,G+"Description");null==t||t(W)?Reflect.field(kha_Assets.videos,H)(function(){m-=1,kha_Assets.progress=1-m/r,0==m&&e()}):(m-=1,kha_Assets.progress=1-m/r,0==m&&e())}}}else e()},kha_Assets.loadImage=function(e,t){var a=Reflect.field(kha_Assets.images,e+"Description");kha_LoaderImpl.loadImageFromDescription(a,function(a){kha_Assets.images[e]=a,t(a)})},kha_Assets.loadImageFromPath=function(e,t,a){var r={files:[e],readable:t};kha_LoaderImpl.loadImageFromDescription(r,a)},kha_Assets.get_imageFormats=function(){return kha_LoaderImpl.getImageFormats()},kha_Assets.loadBlob=function(e,t){var a=Reflect.field(kha_Assets.blobs,e+"Description");kha_LoaderImpl.loadBlobFromDescription(a,function(a){kha_Assets.blobs[e]=a,t(a)})},kha_Assets.loadBlobFromPath=function(e,t){var a={files:[e]};kha_LoaderImpl.loadBlobFromDescription(a,t)},kha_Assets.loadSound=function(e,t){var a=Reflect.field(kha_Assets.sounds,e+"Description");kha_LoaderImpl.loadSoundFromDescription(a,function(a){kha_Assets.sounds[e]=a,t(a)})},kha_Assets.loadSoundFromPath=function(e,t){var a={files:[e]};kha_LoaderImpl.loadSoundFromDescription(a,t)},kha_Assets.get_soundFormats=function(){return kha_LoaderImpl.getSoundFormats()},kha_Assets.loadFont=function(e,t){var a=Reflect.field(kha_Assets.fonts,e+"Description");kha_LoaderImpl.loadFontFromDescription(a,function(a){kha_Assets.fonts[e]=a,t(a)})},kha_Assets.loadFontFromPath=function(e,t){var a={files:[e]};kha_LoaderImpl.loadFontFromDescription(a,t)},kha_Assets.get_fontFormats=function(){return["ttf"]},kha_Assets.loadVideo=function(e,t){var a=Reflect.field(kha_Assets.videos,e+"Description");kha_LoaderImpl.loadVideoFromDescription(a,function(a){kha_Assets.videos[e]=a,t(a)})},kha_Assets.loadVideoFromPath=function(e,t){var a={files:[e]};kha_LoaderImpl.loadVideoFromDescription(a,t)},kha_Assets.get_videoFormats=function(){return kha_LoaderImpl.getVideoFormats()};var kha_Canvas=$hxClasses["kha.Canvas"]=function(){};kha_Canvas.__name__=!0,kha_Canvas.prototype={get_width:null,get_height:null,get_g1:null,get_g2:null,get_g4:null,width:null,height:null,g1:null,g2:null,g4:null,__class__:kha_Canvas};var kha__$Color_Color_$Impl_$=$hxClasses["kha._Color.Color_Impl_"]=$hx_exports.kha._Color.Color_Impl_={};kha__$Color_Color_$Impl_$.__name__=!0,kha__$Color_Color_$Impl_$.fromValue=function(e){return kha__$Color_Color_$Impl_$._new(e)},kha__$Color_Color_$Impl_$.fromBytes=function(e,t,a,r){return null==r&&(r=255),kha__$Color_Color_$Impl_$._new(r<<24|e<<16|t<<8|a)},kha__$Color_Color_$Impl_$.fromFloats=function(e,t,a,r){return null==r&&(r=1),kha__$Color_Color_$Impl_$._new((255*r|0)<<24|(255*e|0)<<16|(255*t|0)<<8|255*a|0)},kha__$Color_Color_$Impl_$.fromString=function(e){if(7!=e.length&&9!=e.length||35!=e.charCodeAt(0))throw new js__$Boot_HaxeError("Invalid Color string: '"+e+"'");var t=Std.parseInt("0x"+HxOverrides.substr(e,1,null));return 7==e.length&&(t+=-16777216),kha__$Color_Color_$Impl_$._new(t)},kha__$Color_Color_$Impl_$._new=function(e){return e},kha__$Color_Color_$Impl_$.get_value=function(e){return e},kha__$Color_Color_$Impl_$.set_value=function(e,t){return t},kha__$Color_Color_$Impl_$.get_Rb=function(e){return(16711680&e)>>>16},kha__$Color_Color_$Impl_$.get_Gb=function(e){return(65280&e)>>>8},kha__$Color_Color_$Impl_$.get_Bb=function(e){return 255&e},kha__$Color_Color_$Impl_$.get_Ab=function(e){return e>>>24},kha__$Color_Color_$Impl_$.set_Rb=function(e,t){return e=e>>>24<<24|t<<16|(65280&e)>>>8<<8|255&e,t},kha__$Color_Color_$Impl_$.set_Gb=function(e,t){return e=e>>>24<<24|(16711680&e)>>>16<<16|t<<8|255&e,t},kha__$Color_Color_$Impl_$.set_Bb=function(e,t){return e=e>>>24<<24|(16711680&e)>>>16<<16|(65280&e)>>>8<<8|t,t},kha__$Color_Color_$Impl_$.set_Ab=function(e,t){return e=t<<24|(16711680&e)>>>16<<16|(65280&e)>>>8<<8|255&e,t},kha__$Color_Color_$Impl_$.get_R=function(e){return.00392156862745098*((16711680&e)>>>16)},kha__$Color_Color_$Impl_$.get_G=function(e){return.00392156862745098*((65280&e)>>>8)},kha__$Color_Color_$Impl_$.get_B=function(e){return.00392156862745098*(255&e)},kha__$Color_Color_$Impl_$.get_A=function(e){return.00392156862745098*(e>>>24)},kha__$Color_Color_$Impl_$.set_R=function(e,t){return e=(.00392156862745098*(e>>>24)*255|0)<<24|(255*t|0)<<16|(.00392156862745098*((65280&e)>>>8)*255|0)<<8|.00392156862745098*(255&e)*255|0,t},kha__$Color_Color_$Impl_$.set_G=function(e,t){return e=(.00392156862745098*(e>>>24)*255|0)<<24|(.00392156862745098*((16711680&e)>>>16)*255|0)<<16|(255*t|0)<<8|.00392156862745098*(255&e)*255|0,t},kha__$Color_Color_$Impl_$.set_B=function(e,t){return e=(.00392156862745098*(e>>>24)*255|0)<<24|(.00392156862745098*((16711680&e)>>>16)*255|0)<<16|(.00392156862745098*((65280&e)>>>8)*255|0)<<8|255*t|0,t},kha__$Color_Color_$Impl_$.set_A=function(e,t){return e=(255*t|0)<<24|(.00392156862745098*((16711680&e)>>>16)*255|0)<<16|(.00392156862745098*((65280&e)>>>8)*255|0)<<8|.00392156862745098*(255&e)*255|0,t};var kha_Display=$hxClasses["kha.Display"]=function(){};kha_Display.__name__=!0,kha_Display.width=function(e){return kha_DisplayImpl.width(e)},kha_Display.height=function(e){return kha_DisplayImpl.height(e)},kha_Display.x=function(e){return kha_DisplayImpl.x(e)},kha_Display.y=function(e){return kha_DisplayImpl.y(e)},kha_Display.isPrimary=function(e){return kha_DisplayImpl.isPrimary(e)},kha_Display.get_count=function(){return kha_DisplayImpl.count()};var kha_DisplayImpl=$hxClasses["kha.DisplayImpl"]=function(){};kha_DisplayImpl.__name__=!0,kha_DisplayImpl.count=function(){return Krom.displayCount()},kha_DisplayImpl.width=function(e){return Krom.displayWidth(e)},kha_DisplayImpl.height=function(e){return Krom.displayHeight(e)},kha_DisplayImpl.x=function(e){return Krom.displayX(e)},kha_DisplayImpl.y=function(e){return Krom.displayY(e)},kha_DisplayImpl.isPrimary=function(e){return Krom.displayIsPrimary(e)};var kha_FontStyle=$hxClasses["kha.FontStyle"]=function(e,t,a){this.bold=e,this.italic=t,this.underlined=a};kha_FontStyle.__name__=!0,kha_FontStyle.prototype={bold:null,italic:null,underlined:null,getBold:function(){return this.bold},getItalic:function(){return this.italic},getUnderlined:function(){return this.underlined},__class__:kha_FontStyle};var kha_Framebuffer=$hxClasses["kha.Framebuffer"]=function(e,t,a,r){this.windowId=e,this.graphics1=t,this.graphics2=a,this.graphics4=r};kha_Framebuffer.__name__=!0,kha_Framebuffer.__interfaces__=[kha_Canvas],kha_Framebuffer.prototype={windowId:null,graphics1:null,graphics2:null,graphics4:null,init:function(e,t,a){this.graphics1=e,this.graphics2=t,this.graphics4=a},g1:null,get_g1:function(){return this.graphics1},g2:null,get_g2:function(){return this.graphics2},g4:null,get_g4:function(){return this.graphics4},width:null,get_width:function(){return kha_System.windowWidth(this.windowId)},height:null,get_height:function(){return kha_System.windowHeight(this.windowId)},__class__:kha_Framebuffer};var kha_Resource=$hxClasses["kha.Resource"]=function(){};kha_Resource.__name__=!0,kha_Resource.prototype={unload:null,__class__:kha_Resource};var kha_Image=$hxClasses["kha.Image"]=function(e){this.pixels=null,this.bytes=null,this.texture_=e};kha_Image.__name__=!0,kha_Image.__interfaces__=[kha_Resource,kha_Canvas],kha_Image.getRenderTargetFormat=function(e){switch(e[1]){case 0:return 0;case 1:return 5;case 2:return 3;case 3:return 4;case 4:return 1;case 5:return 2;case 6:return 6}},kha_Image.getDepthBufferBits=function(e){switch(e){case 0:return-1;case 1:case 2:case 3:return 24;case 4:return 32;case 5:return 16}},kha_Image.getStencilBufferBits=function(e){switch(e){case 0:case 1:return-1;case 2:case 3:case 4:return 8;case 5:return 0}},kha_Image.getTextureFormat=function(e){switch(e[1]){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;case 6:return 7;default:return 1}},kha_Image._fromTexture=function(e){return new kha_Image(e)},kha_Image.fromBytes=function(e,t,a,r,i){null==r&&(r=kha_graphics4_TextureFormat.RGBA32);var s=new kha_Image(null);return s.format=r,s.texture_=Krom.createTextureFromBytes(e.b.bufferValue,t,a,kha_Image.getTextureFormat(r),!0),s},kha_Image.fromBytes3D=function(e,t,a,r,i,s){null==i&&(i=kha_graphics4_TextureFormat.RGBA32);var n=new kha_Image(null);return n.format=i,n.texture_=Krom.createTextureFromBytes3D(e.b.bufferValue,t,a,r,kha_Image.getTextureFormat(i),!0),n},kha_Image.create=function(e,t,a,r){null==a&&(a=kha_graphics4_TextureFormat.RGBA32);var i=new kha_Image(null);return i.format=a,i.texture_=Krom.createTexture(e,t,kha_Image.getTextureFormat(a)),i},kha_Image.create3D=function(e,t,a,r,i){null==r&&(r=kha_graphics4_TextureFormat.RGBA32);var s=new kha_Image(null);return s.format=r,s.texture_=Krom.createTexture3D(e,t,a,kha_Image.getTextureFormat(r)),s},kha_Image.createRenderTarget=function(e,t,a,r,i,s){null==s&&(s=0),null==i&&(i=1),null==r&&(r=0),null==a&&(a=kha_graphics4_TextureFormat.RGBA32);var n=new kha_Image(null);return n.format=a,n.renderTarget_=Krom.createRenderTarget(e,t,kha_Image.getDepthBufferBits(r),kha_Image.getRenderTargetFormat(a),kha_Image.getStencilBufferBits(r),s),n},kha_Image.get_maxSize=function(){return 4096},kha_Image.get_nonPow2Supported=function(){return!0},kha_Image.formatByteSize=function(e){switch(e[1]){case 0:return 4;case 1:return 1;case 2:return 16;case 3:return 2;case 4:return 8;case 5:return 4;case 6:return 2}},kha_Image.prototype={texture_:null,renderTarget_:null,format:null,readable:null,graphics1:null,graphics2:null,graphics4:null,isOpaque:function(e,t){return!1},at:function(e,t){return-16777216},unload:function(){Krom.unloadImage(this),this.texture_=null,this.renderTarget_=null},bytes:null,lock:function(e){return null==e&&(e=0),this.bytes=new haxe_io_Bytes(new ArrayBuffer(this.format==kha_graphics4_TextureFormat.RGBA32?4*this.get_width()*this.get_height():this.get_width()*this.get_height())),this.bytes},unlock:function(){Krom.unlockTexture(this.texture_,this.bytes.b.bufferValue)},pixels:null,getPixels:function(){return null==this.renderTarget_?null:(null==this.pixels&&(this.pixels=new haxe_io_Bytes(new ArrayBuffer(kha_Image.formatByteSize(this.format)*this.get_width()*this.get_height()))),Krom.getRenderTargetPixels(this.renderTarget_,this.pixels.b.bufferValue),this.pixels)},generateMipmaps:function(e){null==this.texture_?Krom.generateRenderTargetMipmaps(this.renderTarget_,e):Krom.generateTextureMipmaps(this.texture_,e)},setMipmaps:function(e){Krom.setMipmaps(this.texture_,e)},setDepthStencilFrom:function(e){Krom.setDepthStencilFrom(this.renderTarget_,e.renderTarget_)},clear:function(e,t,a,r,i,s,n){Krom.clearTexture(this.texture_,e,t,a,r,i,s,n)},width:null,get_width:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.width},height:null,get_height:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.height},depth:null,get_depth:function(){return null!=this.texture_?this.texture_.depth:1},realWidth:null,get_realWidth:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.realWidth},realHeight:null,get_realHeight:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.realHeight},g1:null,get_g1:function(){return null==this.graphics1&&(this.graphics1=new kha_graphics2_Graphics1(this)),this.graphics1},g2:null,get_g2:function(){return null==this.graphics2&&(this.graphics2=new kha_graphics4_Graphics2(this)),this.graphics2},g4:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new kha_krom_Graphics(this)),this.graphics4},__class__:kha_Image};var kha_AlignedQuad=$hxClasses["kha.AlignedQuad"]=function(){};kha_AlignedQuad.__name__=!0,kha_AlignedQuad.prototype={x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,xadvance:null,__class__:kha_AlignedQuad};var kha_KravurImage=$hxClasses["kha.KravurImage"]=function(e,t,a,r,i,s,n,_){this.mySize=e,this.width=i,this.height=s,this.chars=n,this.baseline=t;for(var o=0;o<n.length;){var h=n[o];++o,h.yoff+=this.baseline}this.texture=kha_Image.create(i,s,kha_graphics4_TextureFormat.L8);for(var l=this.texture.lock(),c=0,u=0,d=s;u<d;){u++;for(var g=0,p=i;g<p;){g++;var f=_.readU8(c);l.b[c]=255&f,++c}}this.texture.unlock()};kha_KravurImage.__name__=!0,kha_KravurImage.prototype={mySize:null,chars:null,texture:null,width:null,height:null,baseline:null,getTexture:function(){return this.texture},getBakedQuad:function(e,t,a,r){if(t>=this.chars.length)return null;var i=1/this.width,s=1/this.height,n=this.chars[t];if(null==n)return null;var _=Math.round(a+n.xoff),o=Math.round(r+n.yoff);return e.x0=_,e.y0=o,e.x1=_+n.x1-n.x0,e.y1=o+n.y1-n.y0,e.s0=n.x0*i,e.t0=n.y0*s,e.s1=n.x1*i,e.t1=n.y1*s,e.xadvance=n.xadvance,e},getCharWidth:function(e){if(0==this.chars.length)return 0;var t=kha_KravurImage.gaps[0];if(e<t)return this.chars[0].xadvance;for(var a=1,r=kha_KravurImage.gaps.length/2|0;a<r;){var i=a++,s=kha_KravurImage.gaps[2*i-1],n=kha_KravurImage.gaps[2*i];e>n-1&&(t+=n-1-s)}return e-t>=this.chars.length?this.chars[0].xadvance:this.chars[e-t].xadvance},getHeight:function(){return this.mySize},stringWidth:function(e){for(var t=new String(e),a=0,r=0,i=t.length;r<i;){var s=r++;a+=this.getCharWidth(HxOverrides.cca(t,s))}return a},charactersWidth:function(e,t,a){for(var r=0,i=t,s=t+a;i<s;){var n=i++;r+=this.getCharWidth(e[n])}return r},getBaselinePosition:function(){return this.baseline},__class__:kha_KravurImage};var kha_Kravur=$hxClasses["kha.Kravur"]=function(e){this.images=new haxe_ds_IntMap,this.blob=e};kha_Kravur.__name__=!0,kha_Kravur.__interfaces__=[kha_Resource],kha_Kravur.fromBytes=function(e){return new kha_Kravur(kha_internal_BytesBlob.fromBytes(e))},kha_Kravur.prototype={oldGlyphs:null,blob:null,images:null,_get:function(e,t){if(null==t&&(t=kha_graphics2_Graphics._glyphs),t!=this.oldGlyphs){this.oldGlyphs=t,kha_KravurImage.gaps=[t[0]];for(var a=kha_KravurImage.gaps[0]+1,r=1,i=t.length;r<i;){var s=r++;t[s]!=a?(kha_KravurImage.gaps.push(t[s-1]),kha_KravurImage.gaps.push(t[s]),a=t[s]+1):++a}kha_KravurImage.gaps.push(t[t.length-1])}var n=null==t?e:1e4*e+t.length;if(!this.images.h.hasOwnProperty(n)){for(var _=64,o=32,h=t.length,l=new Array(h),c=0,u=l.length;c<u;){l[c++]=new kha_graphics2_truetype_Stbtt_$bakedchar}for(var d=null,g=-1;g<0;)o<_?o*=2:_*=2,d=kha_internal_BytesBlob.alloc(_*o),g=kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap(this.blob,0,e,d,_,o,t,l);var p=new kha_graphics2_truetype_Stbtt_$fontinfo;kha_graphics2_truetype_StbTruetype.stbtt_InitFont(p,this.blob,0);var f=kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics(p),v=kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(p,e),k=Math.round(f.ascent*v),m=Math.round(f.descent*v),S=Math.round(f.lineGap*v),b=new kha_KravurImage(0|e,k,m,S,_,o,l,d);return this.images.h[n]=b,b}return this.images.h[n]},height:function(e){return this._get(e).getHeight()},width:function(e,t){return this._get(e).stringWidth(t)},widthOfCharacters:function(e,t,a,r){return this._get(e).charactersWidth(t,a,r)},baseline:function(e){return this._get(e).getBaselinePosition()},unload:function(){this.blob=null,this.images=null},__class__:kha_Kravur};var kha_LoaderImpl=$hxClasses["kha.LoaderImpl"]=function(){};kha_LoaderImpl.__name__=!0,kha_LoaderImpl.getImageFormats=function(){return["png","jpg"]},kha_LoaderImpl.loadImageFromDescription=function(e,t){var a=Object.prototype.hasOwnProperty.call(e,"readable")&&e.readable;t(kha_Image._fromTexture(Krom.loadImage(e.files[0],a)))},kha_LoaderImpl.getSoundFormats=function(){return["wav","ogg"]},kha_LoaderImpl.loadSoundFromDescription=function(e,t){t(new kha_krom_Sound(haxe_io_Bytes.ofData(Krom.loadSound(e.files[0]))))},kha_LoaderImpl.getVideoFormats=function(){return["webm"]},kha_LoaderImpl.loadVideoFromDescription=function(e,t){},kha_LoaderImpl.loadBlobFromDescription=function(e,t){t(new kha_internal_BytesBlob(haxe_io_Bytes.ofData(Krom.loadBlob(e.files[0]))))},kha_LoaderImpl.loadFontFromDescription=function(e,t){kha_LoaderImpl.loadBlobFromDescription(e,function(e){t(new kha_Kravur(e))})};var kha_TimeTask=$hxClasses["kha.TimeTask"]=function(){};kha_TimeTask.__name__=!0,kha_TimeTask.prototype={task:null,start:null,period:null,duration:null,next:null,id:null,groupId:null,active:null,paused:null,__class__:kha_TimeTask};var kha_FrameTask=$hxClasses["kha.FrameTask"]=function(e,t,a){this.task=e,this.priority=t,this.id=a,this.active=!0,this.paused=!1};kha_FrameTask.__name__=!0,kha_FrameTask.prototype={task:null,priority:null,id:null,active:null,paused:null,__class__:kha_FrameTask};var kha_Scheduler=$hxClasses["kha.Scheduler"]=function(){};kha_Scheduler.__name__=!0,kha_Scheduler.init=function(){kha_Scheduler.deltas=[];for(var e=0,t=kha_Scheduler.DIF_COUNT;e<t;){var a=e++;kha_Scheduler.deltas[a]=0}kha_Scheduler.stopped=!0,kha_Scheduler.frame_tasks_sorted=!0,kha_Scheduler.current=kha_Scheduler.lastTime=kha_Scheduler.realTime(),kha_Scheduler.currentFrameTaskId=0,kha_Scheduler.currentTimeTaskId=0,kha_Scheduler.currentGroupId=0,kha_Scheduler.timeTasks=[],kha_Scheduler.pausedTimeTasks=[],kha_Scheduler.outdatedTimeTasks=[],kha_Scheduler.timeTasksScratchpad=[],kha_Scheduler.frameTasks=[],kha_Scheduler.toDeleteFrame=[]},kha_Scheduler.start=function(e){null==e&&(e=!1),kha_Scheduler.vsync=kha_System.get_vsync();var t=kha_System.get_refreshRate();t>=57&&t<=63&&(t=60),kha_Scheduler.onedifhz=1/t,kha_Scheduler.stopped=!1,kha_Scheduler.resetTime(),kha_Scheduler.lastTime=kha_Scheduler.realTime()-kha_Scheduler.startTime;for(var a=0,r=kha_Scheduler.DIF_COUNT;a<r;){var i=a++;kha_Scheduler.deltas[i]=0}if(e){for(var s=0,n=kha_Scheduler.timeTasks;s<n.length;){var _=n[s];++s,_.paused=!1}for(var o=0,h=kha_Scheduler.frameTasks;o<h.length;){var l=h[o];++o,l.paused=!1}}},kha_Scheduler.stop=function(){kha_Scheduler.stopped=!0},kha_Scheduler.isStopped=function(){return kha_Scheduler.stopped},kha_Scheduler.warpTimeTasksBack=function(e,t){for(var a=0;a<t.length;){var r=t[a];if(++a,r.start>=e)r.next=r.start;else if(r.period>0){var i=e-r.start,s=Math.ceil(i/r.period);r.next=r.start+s*r.period}}},kha_Scheduler.warp=function(e){if(e<kha_Scheduler.lastTime){kha_Scheduler.current=e,kha_Scheduler.lastTime=e,kha_Scheduler.warpTimeTasksBack(e,kha_Scheduler.outdatedTimeTasks),kha_Scheduler.warpTimeTasksBack(e,kha_Scheduler.timeTasks);for(var t=0,a=kha_Scheduler.outdatedTimeTasks;t<a.length;){var r=a[t];++t,r.next>=e&&kha_Scheduler.timeTasksScratchpad.push(r)}for(var i=0,s=kha_Scheduler.timeTasksScratchpad;i<s.length;){var n=s[i];++i,HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,n)}for(var _=0,o=kha_Scheduler.timeTasksScratchpad;_<o.length;){var h=o[_];++_,kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,h)}for(;kha_Scheduler.timeTasksScratchpad.length>0;)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0])}else e>kha_Scheduler.lastTime&&(kha_Scheduler.startTime-=e-kha_Scheduler.lastTime,kha_Scheduler.current=e,kha_Scheduler.lastTime=e,kha_Scheduler.executeTimeTasks(e))},kha_Scheduler.executeFrame=function(){var e=kha_Scheduler.realTime()-kha_Scheduler.startTime-kha_Scheduler.lastTime,t=kha_Scheduler.current;if(e>=0){if(null==kha_network_Session.the())if(e>kha_Scheduler.maxframetime)kha_Scheduler.startTime+=e-kha_Scheduler.maxframetime,t+=e=kha_Scheduler.maxframetime;else if(kha_Scheduler.vsync){for(var a=kha_Scheduler.onedifhz;a<e-kha_Scheduler.onedifhz;)a+=kha_Scheduler.onedifhz;e=a;for(var r=0,i=kha_Scheduler.DIF_COUNT-2;r<i;){var s=r++;e+=kha_Scheduler.deltas[s],kha_Scheduler.deltas[s]=kha_Scheduler.deltas[s+1]}e+=kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2],e/=kha_Scheduler.DIF_COUNT,kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2]=a,t+=e}else{for(var n=0,_=kha_Scheduler.DIF_COUNT-1;n<_;){var o=n++;kha_Scheduler.deltas[o]=kha_Scheduler.deltas[o+1]}kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-1]=e;for(var h=0,l=0,c=kha_Scheduler.DIF_COUNT;l<c;){var u=l++;h+=kha_Scheduler.deltas[u]}t+=h/=kha_Scheduler.DIF_COUNT}else t+=e;kha_Scheduler.lastTime=t,kha_Scheduler.stopped||(kha_Scheduler.current=t);for(var d=0,g=kha_Scheduler.pausedTimeTasks;d<g.length;){var p=g[d];++d,p.next+=e}if(kha_Scheduler.stopped)for(var f=0,v=kha_Scheduler.timeTasks;f<v.length;){var k=v[f];++f,k.next+=e}kha_Scheduler.executeTimeTasks(t);for(var m=0,S=kha_Scheduler.outdatedTimeTasks;m<S.length;){var b=S[m];++m,b.next<t-10&&kha_Scheduler.timeTasksScratchpad.push(b)}for(var y=0,x=kha_Scheduler.timeTasksScratchpad;y<x.length;){var B=x[y];++y,HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,B)}for(;kha_Scheduler.timeTasksScratchpad.length>0;)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0])}kha_Scheduler.sortFrameTasks();for(var w=0,I=kha_Scheduler.frameTasks;w<I.length;){var T=I[w];++w,kha_Scheduler.stopped||T.paused||!T.active||T.task()||(T.active=!1)}for(var E=0,C=kha_Scheduler.frameTasks;E<C.length;){var P=C[E];++E,P.active||kha_Scheduler.toDeleteFrame.push(P)}for(;kha_Scheduler.toDeleteFrame.length>0;)HxOverrides.remove(kha_Scheduler.frameTasks,kha_Scheduler.toDeleteFrame.pop())},kha_Scheduler.executeTimeTasks=function(e){for(;kha_Scheduler.timeTasks.length>0&&(kha_Scheduler.activeTimeTask=kha_Scheduler.timeTasks[0],kha_Scheduler.activeTimeTask.next<=e);)kha_Scheduler.activeTimeTask.next+=kha_Scheduler.activeTimeTask.period,HxOverrides.remove(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask),kha_Scheduler.activeTimeTask.active&&kha_Scheduler.activeTimeTask.task()?kha_Scheduler.activeTimeTask.period>0&&(0==kha_Scheduler.activeTimeTask.duration||kha_Scheduler.activeTimeTask.duration>=kha_Scheduler.activeTimeTask.start+kha_Scheduler.activeTimeTask.next)?kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask):kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,e):(kha_Scheduler.activeTimeTask.active=!1,kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,e));kha_Scheduler.activeTimeTask=null},kha_Scheduler.archiveTimeTask=function(e,t){},kha_Scheduler.time=function(){return kha_Scheduler.current},kha_Scheduler.realTime=function(){return kha_System.get_time()},kha_Scheduler.resetTime=function(){var e=kha_System.get_time(),t=e-kha_Scheduler.startTime;kha_Scheduler.startTime=e;for(var a=0,r=kha_Scheduler.timeTasks;a<r.length;){var i=r[a];++a,i.start-=t,i.next-=t}for(var s=0,n=kha_Scheduler.DIF_COUNT;s<n;){var _=s++;kha_Scheduler.deltas[_]=0}kha_Scheduler.current=0,kha_Scheduler.lastTime=0},kha_Scheduler.addBreakableFrameTask=function(e,t){return kha_Scheduler.frameTasks.push(new kha_FrameTask(e,t,++kha_Scheduler.currentFrameTaskId)),kha_Scheduler.frame_tasks_sorted=!1,kha_Scheduler.currentFrameTaskId},kha_Scheduler.addFrameTask=function(e,t){return kha_Scheduler.addBreakableFrameTask(function(){return e(),!0},t)},kha_Scheduler.pauseFrameTask=function(e,t){for(var a=0,r=kha_Scheduler.frameTasks;a<r.length;){var i=r[a];if(++a,i.id==e){i.paused=t;break}}},kha_Scheduler.removeFrameTask=function(e){for(var t=0,a=kha_Scheduler.frameTasks;t<a.length;){var r=a[t];if(++t,r.id==e){r.active=!1;break}}},kha_Scheduler.generateGroupId=function(){return++kha_Scheduler.currentGroupId},kha_Scheduler.addBreakableTimeTaskToGroup=function(e,t,a,r,i){null==i&&(i=0),null==r&&(r=0);var s=new kha_TimeTask;return s.active=!0,s.task=t,s.id=++kha_Scheduler.currentTimeTaskId,s.groupId=e,s.start=kha_Scheduler.current+a,s.period=0,0!=r&&(s.period=r),s.duration=0,0!=i&&(s.duration=s.start+i),s.next=s.start,kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,s),s.id},kha_Scheduler.addTimeTaskToGroup=function(e,t,a,r,i){return null==i&&(i=0),null==r&&(r=0),kha_Scheduler.addBreakableTimeTaskToGroup(e,function(){return t(),!0},a,r,i)},kha_Scheduler.addBreakableTimeTask=function(e,t,a,r){return null==r&&(r=0),null==a&&(a=0),kha_Scheduler.addBreakableTimeTaskToGroup(0,e,t,a,r)},kha_Scheduler.addTimeTask=function(e,t,a,r){return null==r&&(r=0),null==a&&(a=0),kha_Scheduler.addTimeTaskToGroup(0,e,t,a,r)},kha_Scheduler.getTimeTask=function(e){if(null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.id==e)return kha_Scheduler.activeTimeTask;for(var t=0,a=kha_Scheduler.timeTasks;t<a.length;){var r=a[t];if(++t,r.id==e)return r}for(var i=0,s=kha_Scheduler.pausedTimeTasks;i<s.length;){var n=s[i];if(++i,n.id==e)return n}return null},kha_Scheduler.pauseTimeTask=function(e,t){var a=kha_Scheduler.getTimeTask(e);null!=a&&kha_Scheduler.pauseRunningTimeTask(a,t),null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.id==e&&(kha_Scheduler.activeTimeTask.paused=t)},kha_Scheduler.pauseRunningTimeTask=function(e,t){e.paused=t,t?(HxOverrides.remove(kha_Scheduler.timeTasks,e),kha_Scheduler.pausedTimeTasks.push(e)):(kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,e),HxOverrides.remove(kha_Scheduler.pausedTimeTasks,e))},kha_Scheduler.pauseTimeTasks=function(e,t){for(var a=0,r=kha_Scheduler.timeTasks;a<r.length;){var i=r[a];++a,i.groupId==e&&kha_Scheduler.pauseRunningTimeTask(i,t)}null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.groupId==e&&(kha_Scheduler.activeTimeTask.paused=t)},kha_Scheduler.removeTimeTask=function(e){var t=kha_Scheduler.getTimeTask(e);null!=t&&(t.active=!1,HxOverrides.remove(kha_Scheduler.timeTasks,t))},kha_Scheduler.removeTimeTasks=function(e){for(var t=0,a=kha_Scheduler.timeTasks;t<a.length;){var r=a[t];++t,r.groupId==e&&(r.active=!1,kha_Scheduler.timeTasksScratchpad.push(r))}for(var i=0,s=kha_Scheduler.timeTasksScratchpad;i<s.length;){var n=s[i];++i,HxOverrides.remove(kha_Scheduler.timeTasks,n)}for(;kha_Scheduler.timeTasksScratchpad.length>0;)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0]);null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.groupId==e&&(kha_Scheduler.activeTimeTask.active=!1)},kha_Scheduler.numTasksInSchedule=function(){return kha_Scheduler.timeTasks.length+kha_Scheduler.frameTasks.length},kha_Scheduler.insertSorted=function(e,t){for(var a=0,r=e.length;a<r;){var i=a++;if(e[i].next>t.next)return void e.splice(i,0,t)}e.push(t)},kha_Scheduler.sortFrameTasks=function(){kha_Scheduler.frame_tasks_sorted||(kha_Scheduler.frameTasks.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}),kha_Scheduler.frame_tasks_sorted=!0)};var kha_ScreenRotation=$hxClasses["kha.ScreenRotation"]={__ename__:!0,__constructs__:["RotationNone","Rotation90","Rotation180","Rotation270"]};kha_ScreenRotation.RotationNone=["RotationNone",0],kha_ScreenRotation.RotationNone.toString=$estr,kha_ScreenRotation.RotationNone.__enum__=kha_ScreenRotation,kha_ScreenRotation.Rotation90=["Rotation90",1],kha_ScreenRotation.Rotation90.toString=$estr,kha_ScreenRotation.Rotation90.__enum__=kha_ScreenRotation,kha_ScreenRotation.Rotation180=["Rotation180",2],kha_ScreenRotation.Rotation180.toString=$estr,kha_ScreenRotation.Rotation180.__enum__=kha_ScreenRotation,kha_ScreenRotation.Rotation270=["Rotation270",3],kha_ScreenRotation.Rotation270.toString=$estr,kha_ScreenRotation.Rotation270.__enum__=kha_ScreenRotation;var kha_Shaders=$hxClasses["kha.Shaders"]=function(){};kha_Shaders.__name__=!0,kha_Shaders.init=function(){for(var e=[],t=0;t<1;){var a=t++,r=Reflect.field(kha_Shaders,"painter_colored_fragData"+a),i=haxe_Unserializer.run(r);e.push(kha_internal_BytesBlob.fromBytes(i))}kha_Shaders.painter_colored_frag=new kha_graphics4_FragmentShader(e,["painter-colored.frag.glsl"]);for(var s=[],n=0;n<1;){var _=n++,o=Reflect.field(kha_Shaders,"painter_colored_vertData"+_),h=haxe_Unserializer.run(o);s.push(kha_internal_BytesBlob.fromBytes(h))}kha_Shaders.painter_colored_vert=new kha_graphics4_VertexShader(s,["painter-colored.vert.glsl"]);for(var l=[],c=0;c<1;){var u=c++,d=Reflect.field(kha_Shaders,"painter_image_fragData"+u),g=haxe_Unserializer.run(d);l.push(kha_internal_BytesBlob.fromBytes(g))}kha_Shaders.painter_image_frag=new kha_graphics4_FragmentShader(l,["painter-image.frag.glsl"]);for(var p=[],f=0;f<1;){var v=f++,k=Reflect.field(kha_Shaders,"painter_image_vertData"+v),m=haxe_Unserializer.run(k);p.push(kha_internal_BytesBlob.fromBytes(m))}kha_Shaders.painter_image_vert=new kha_graphics4_VertexShader(p,["painter-image.vert.glsl"]);for(var S=[],b=0;b<1;){var y=b++,x=Reflect.field(kha_Shaders,"painter_text_vertData"+y),B=haxe_Unserializer.run(x);S.push(kha_internal_BytesBlob.fromBytes(B))}kha_Shaders.painter_text_vert=new kha_graphics4_VertexShader(S,["painter-text.vert.glsl"]);for(var w=[],I=0;I<1;){var T=I++,E=Reflect.field(kha_Shaders,"painter_text_fragData"+T),C=haxe_Unserializer.run(E);w.push(kha_internal_BytesBlob.fromBytes(C))}kha_Shaders.painter_text_frag=new kha_graphics4_FragmentShader(w,["painter-text.frag.glsl"]);for(var P=[],A=0;A<1;){var L=A++,$=Reflect.field(kha_Shaders,"painter_video_fragData"+L),R=haxe_Unserializer.run($);P.push(kha_internal_BytesBlob.fromBytes(R))}kha_Shaders.painter_video_frag=new kha_graphics4_FragmentShader(P,["painter-video.frag.glsl"]);for(var F=[],N=0;N<1;){var V=N++,M=Reflect.field(kha_Shaders,"painter_video_vertData"+V),D=haxe_Unserializer.run(M);F.push(kha_internal_BytesBlob.fromBytes(D))}kha_Shaders.painter_video_vert=new kha_graphics4_VertexShader(F,["painter-video.vert.glsl"])};var kha_Sound=$hxClasses["kha.Sound"]=function(){};kha_Sound.__name__=!0,kha_Sound.__interfaces__=[kha_Resource],kha_Sound.prototype={compressedData:null,uncompressedData:null,uncompress:function(e){var t=new haxe_io_BytesOutput,a=kha_audio2_ogg_vorbis_Reader.readAll(this.compressedData,t,!0),r=t.getBytes(),i=r.length/4|0;if(1==a.channel){var s=new Array(2*i);this.uncompressedData=s;for(var n=0,_=i;n<_;){var o=n++;this.uncompressedData[2*o]=r.getFloat(4*o),this.uncompressedData[2*o+1]=r.getFloat(4*o)}}else{var h=new Array(i);this.uncompressedData=h;for(var l=0,c=i;l<c;){var u=l++;this.uncompressedData[u]=r.getFloat(4*u)}}this.compressedData=null,e()},unload:function(){this.compressedData=null,this.uncompressedData=null},__class__:kha_Sound};var kha_System=$hxClasses["kha.System"]=function(){};kha_System.__name__=!0,kha_System.init=function(e,t){null==e.title&&(e.title="Kha"),null==e.width&&(e.width=800),null==e.height&&(e.height=600),null==e.samplesPerPixel&&(e.samplesPerPixel=1),null==e.vSync&&(e.vSync=!0),null==e.windowMode&&(e.windowMode=kha_WindowMode.Window),null==e.resizable&&(e.resizable=!1),null==e.maximizable&&(e.maximizable=!1),null==e.minimizable&&(e.minimizable=!0),kha_System.theTitle=e.title,kha_SystemImpl.init(e,t)},kha_System.initEx=function(e,t,a,r){kha_System.theTitle=e,kha_SystemImpl.initEx(e,t,a,r)},kha_System.get_title=function(){return kha_System.theTitle},kha_System.notifyOnRender=function(e,t){for(null==t&&(t=0);t>=kha_System.renderListeners.length;)kha_System.renderListeners.push([]);kha_System.renderListeners[t].push(e)},kha_System.removeRenderListener=function(e,t){null==t&&(t=0),HxOverrides.remove(kha_System.renderListeners[t],e)},kha_System.notifyOnApplicationState=function(e,t,a,r,i){null!=e&&kha_System.foregroundListeners.push(e),null!=t&&kha_System.resumeListeners.push(t),null!=a&&kha_System.pauseListeners.push(a),null!=r&&kha_System.backgroundListeners.push(r),null!=i&&kha_System.shutdownListeners.push(i)},kha_System.notifyOnDropFiles=function(e){kha_System.dropFilesListeners.push(e)},kha_System.notifyOnCutCopyPaste=function(e,t,a){kha_System.cutListener=e,kha_System.copyListener=t,kha_System.pasteListener=a},kha_System.render=function(e,t){if(0!=kha_System.renderListeners.length)for(var a=0,r=kha_System.renderListeners[e];a<r.length;){var i=r[a];++a,i(t)}},kha_System.foreground=function(){for(var e=0,t=kha_System.foregroundListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.resume=function(){for(var e=0,t=kha_System.resumeListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.pause=function(){for(var e=0,t=kha_System.pauseListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.background=function(){for(var e=0,t=kha_System.backgroundListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.shutdown=function(){for(var e=0,t=kha_System.shutdownListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.dropFiles=function(e){for(var t=0,a=kha_System.dropFilesListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_System.get_time=function(){return kha_SystemImpl.getTime()},kha_System.windowWidth=function(e){return null==e&&(e=0),kha_SystemImpl.windowWidth(e)},kha_System.windowHeight=function(e){return null==e&&(e=0),kha_SystemImpl.windowHeight(e)},kha_System.screenDpi=function(){return kha_SystemImpl.screenDpi()},kha_System.get_screenRotation=function(){return kha_SystemImpl.getScreenRotation()},kha_System.get_vsync=function(){return kha_SystemImpl.getVsync()},kha_System.get_refreshRate=function(){return kha_SystemImpl.getRefreshRate()},kha_System.get_systemId=function(){return kha_SystemImpl.getSystemId()},kha_System.requestShutdown=function(){kha_SystemImpl.requestShutdown()},kha_System.changeResolution=function(e,t){kha_SystemImpl.changeResolution(e,t)},kha_System.loadUrl=function(e){kha_SystemImpl.loadUrl(e)},kha_System.canSwitchFullscreen=function(){return kha_SystemImpl.canSwitchFullscreen()},kha_System.isFullscreen=function(){return kha_SystemImpl.isFullscreen()},kha_System.requestFullscreen=function(){kha_SystemImpl.requestFullscreen()},kha_System.exitFullscreen=function(){kha_SystemImpl.exitFullscreen()},kha_System.notifyOnFullscreenChange=function(e,t){kha_SystemImpl.notifyOfFullscreenChange(e,t)},kha_System.removeFullscreenListener=function(e,t){kha_SystemImpl.removeFromFullscreenChange(e,t)};var kha_SystemImpl=$hxClasses["kha.SystemImpl"]=function(){};kha_SystemImpl.__name__=!0,kha_SystemImpl.renderCallback=function(){kha_Scheduler.executeFrame(),kha_System.render(0,kha_SystemImpl.framebuffer)},kha_SystemImpl.dropFilesCallback=function(e){kha_System.dropFiles(e)},kha_SystemImpl.keyboardDownCallback=function(e){kha_SystemImpl.keyboard.sendDownEvent(e)},kha_SystemImpl.keyboardUpCallback=function(e){kha_SystemImpl.keyboard.sendUpEvent(e)},kha_SystemImpl.keyboardPressCallback=function(e){kha_SystemImpl.keyboard.sendPressEvent(String.fromCharCode(e))},kha_SystemImpl.mouseDownCallback=function(e,t,a){kha_SystemImpl.mouse.sendDownEvent(0,e,t,a)},kha_SystemImpl.mouseUpCallback=function(e,t,a){kha_SystemImpl.mouse.sendUpEvent(0,e,t,a)},kha_SystemImpl.mouseMoveCallback=function(e,t,a,r){kha_SystemImpl.mouse.sendMoveEvent(0,e,t,a,r)},kha_SystemImpl.mouseWheelCallback=function(e){kha_SystemImpl.mouse.sendWheelEvent(0,e)},kha_SystemImpl.penDownCallback=function(e,t,a){kha_SystemImpl.pen.sendDownEvent(0,e,t,a)},kha_SystemImpl.penUpCallback=function(e,t,a){kha_SystemImpl.pen.sendUpEvent(0,e,t,a)},kha_SystemImpl.penMoveCallback=function(e,t,a){kha_SystemImpl.pen.sendMoveEvent(0,e,t,a)},kha_SystemImpl.gamepadAxisCallback=function(e,t,a){kha_SystemImpl.gamepads[e].sendAxisEvent(t,a)},kha_SystemImpl.gamepadButtonCallback=function(e,t,a){kha_SystemImpl.gamepads[e].sendButtonEvent(t,a)},kha_SystemImpl.audioCallback=function(e){var t=new Array(e);kha_SystemImpl.audioOutputData=t,kha_audio2_Audio._callCallback(e);for(var a=0,r=e;a<r;){var i=a++,s=kha_audio2_Audio._readSample();kha_SystemImpl.audioOutputData[i]=s}for(var n=0,_=e;n<_;){var o=n++;Krom.writeAudioBuffer(kha_SystemImpl.audioOutputData[o])}},kha_SystemImpl.init=function(e,t){Krom.init(e.title,e.width,e.height,e.samplesPerPixel,e.vSync,kha_SystemImpl.translateWindowMode(e.windowMode),e.resizable,e.maximizable,e.minimizable),kha_SystemImpl.start=Krom.getTime(),haxe_Log.trace=function(e,t){Krom.log(e)},kha_Scheduler.init(),kha_Shaders.init();var a=new kha_krom_Graphics;kha_SystemImpl.framebuffer=new kha_Framebuffer(0,null,null,a),kha_SystemImpl.framebuffer.init(new kha_graphics2_Graphics1(kha_SystemImpl.framebuffer),new kha_graphics4_Graphics2(kha_SystemImpl.framebuffer),a),Krom.setCallback(kha_SystemImpl.renderCallback),Krom.setDropFilesCallback(kha_SystemImpl.dropFilesCallback),kha_SystemImpl.keyboard=new kha_input_Keyboard,kha_SystemImpl.mouse=new kha_input_MouseImpl,kha_SystemImpl.pen=new kha_input_Pen,kha_SystemImpl.gamepads=[];for(var r=0,i=kha_SystemImpl.maxGamepads;r<i;){var s=r++;kha_SystemImpl.gamepads[s]=new kha_input_Gamepad(s)}Krom.setKeyboardDownCallback(kha_SystemImpl.keyboardDownCallback),Krom.setKeyboardUpCallback(kha_SystemImpl.keyboardUpCallback),Krom.setKeyboardPressCallback(kha_SystemImpl.keyboardPressCallback),Krom.setMouseDownCallback(kha_SystemImpl.mouseDownCallback),Krom.setMouseUpCallback(kha_SystemImpl.mouseUpCallback),Krom.setMouseMoveCallback(kha_SystemImpl.mouseMoveCallback),Krom.setMouseWheelCallback(kha_SystemImpl.mouseWheelCallback),Krom.setPenDownCallback(kha_SystemImpl.penDownCallback),Krom.setPenUpCallback(kha_SystemImpl.penUpCallback),Krom.setPenMoveCallback(kha_SystemImpl.penMoveCallback),Krom.setGamepadAxisCallback(kha_SystemImpl.gamepadAxisCallback),Krom.setGamepadButtonCallback(kha_SystemImpl.gamepadButtonCallback),kha_audio2_Audio._init(),kha_audio2_Audio1._init(),Krom.setAudioCallback(kha_SystemImpl.audioCallback),kha_Scheduler.start(),t()},kha_SystemImpl.initEx=function(e,t,a,r){},kha_SystemImpl.translateWindowMode=function(e){if(null==e)return 0;switch(e[1]){case 0:return 0;case 1:return 1;case 2:return 2}},kha_SystemImpl.getScreenRotation=function(){return kha_ScreenRotation.RotationNone},kha_SystemImpl.getTime=function(){return Krom.getTime()-kha_SystemImpl.start},kha_SystemImpl.windowWidth=function(e){return Krom.windowWidth(e)},kha_SystemImpl.windowHeight=function(e){return Krom.windowHeight(e)},kha_SystemImpl.screenDpi=function(){return Krom.screenDpi()},kha_SystemImpl.getVsync=function(){return!0},kha_SystemImpl.getRefreshRate=function(){return 60},kha_SystemImpl.getSystemId=function(){return Krom.systemId()},kha_SystemImpl.requestShutdown=function(){Krom.requestShutdown()},kha_SystemImpl.getMouse=function(e){return kha_SystemImpl.mouse},kha_SystemImpl.getPen=function(e){return kha_SystemImpl.pen},kha_SystemImpl.getKeyboard=function(e){return kha_SystemImpl.keyboard},kha_SystemImpl.lockMouse=function(){if(!kha_SystemImpl.isMouseLocked()){Krom.lockMouse();for(var e=0,t=kha_SystemImpl.mouseLockListeners;e<t.length;){var a=t[e];++e,a()}}},kha_SystemImpl.unlockMouse=function(){if(kha_SystemImpl.isMouseLocked()){Krom.unlockMouse();for(var e=0,t=kha_SystemImpl.mouseLockListeners;e<t.length;){var a=t[e];++e,a()}}},kha_SystemImpl.canLockMouse=function(){return Krom.canLockMouse()},kha_SystemImpl.isMouseLocked=function(){return Krom.isMouseLocked()},kha_SystemImpl.notifyOfMouseLockChange=function(e,t){kha_SystemImpl.canLockMouse()&&null!=e&&kha_SystemImpl.mouseLockListeners.push(e)},kha_SystemImpl.removeFromMouseLockChange=function(e,t){kha_SystemImpl.canLockMouse()&&null!=e&&HxOverrides.remove(kha_SystemImpl.mouseLockListeners,e)},kha_SystemImpl.unload=function(){},kha_SystemImpl.canSwitchFullscreen=function(){return!1},kha_SystemImpl.isFullscreen=function(){return!1},kha_SystemImpl.requestFullscreen=function(){},kha_SystemImpl.exitFullscreen=function(){},kha_SystemImpl.notifyOfFullscreenChange=function(e,t){},kha_SystemImpl.removeFromFullscreenChange=function(e,t){},kha_SystemImpl.changeResolution=function(e,t){},kha_SystemImpl.setKeepScreenOn=function(e){},kha_SystemImpl.loadUrl=function(e){},kha_SystemImpl.getGamepadId=function(e){return"unkown"};var kha_Video=$hxClasses["kha.Video"]=function(){};kha_Video.__name__=!0,kha_Video.__interfaces__=[kha_Resource],kha_Video.prototype={width:function(){return 100},height:function(){return 100},play:function(e){null==e&&(e=!1)},pause:function(){},stop:function(){},getLength:function(){return 0},getCurrentPos:function(){return 0},get_position:function(){return 0},set_position:function(e){return 0},getVolume:function(){return 1},setVolume:function(e){},isFinished:function(){return this.getCurrentPos()>=this.getLength()},unload:function(){},__class__:kha_Video};var kha_WindowMode=$hxClasses["kha.WindowMode"]={__ename__:!0,__constructs__:["Window","BorderlessWindow","Fullscreen"]};kha_WindowMode.Window=["Window",0],kha_WindowMode.Window.toString=$estr,kha_WindowMode.Window.__enum__=kha_WindowMode,kha_WindowMode.BorderlessWindow=["BorderlessWindow",1],kha_WindowMode.BorderlessWindow.toString=$estr,kha_WindowMode.BorderlessWindow.__enum__=kha_WindowMode,kha_WindowMode.Fullscreen=["Fullscreen",2],kha_WindowMode.Fullscreen.toString=$estr,kha_WindowMode.Fullscreen.__enum__=kha_WindowMode;var kha_Position=$hxClasses["kha.Position"]={__ename__:!0,__constructs__:["Center","Fixed"]};kha_Position.Center=["Center",0],kha_Position.Center.toString=$estr,kha_Position.Center.__enum__=kha_Position,kha_Position.Fixed=function(e){var t=["Fixed",1,e];return t.__enum__=kha_Position,t.toString=$estr,t};var kha_TargetDisplay=$hxClasses["kha.TargetDisplay"]={__ename__:!0,__constructs__:["Primary","ById"]};kha_TargetDisplay.Primary=["Primary",0],kha_TargetDisplay.Primary.toString=$estr,kha_TargetDisplay.Primary.__enum__=kha_TargetDisplay,kha_TargetDisplay.ById=function(e){var t=["ById",1,e];return t.__enum__=kha_TargetDisplay,t.toString=$estr,t};var kha_RendererOptions=$hxClasses["kha.RendererOptions"]=function(e,t,a){this.textureFormat=e,this.depthStencilFormat=t,this.samplesPerPixel=a};kha_RendererOptions.__name__=!0,kha_RendererOptions.prototype={textureFormat:null,depthStencilFormat:null,samplesPerPixel:null,__class__:kha_RendererOptions};var kha_WindowedModeOptions=$hxClasses["kha.WindowedModeOptions"]=function(e,t,a){this.minimizable=e,this.maximizable=t,this.resizable=a};kha_WindowedModeOptions.__name__=!0,kha_WindowedModeOptions.prototype={minimizable:null,maximizable:null,resizable:null,__class__:kha_WindowedModeOptions};var kha_WindowOptions=$hxClasses["kha.WindowOptions"]=function(e,t,a,r,i,s,n,_,o){this.width=e,this.height=t,this.mode=a,this.title=r,this.x=i,this.y=s,this.targetDisplay=n,this.rendererOptions=_,this.windowedModeOptions=o};kha_WindowOptions.__name__=!0,kha_WindowOptions.prototype={width:null,height:null,mode:null,title:null,x:null,y:null,targetDisplay:null,rendererOptions:null,windowedModeOptions:null,__class__:kha_WindowOptions};var kha_arrays__$Float32Array_Float32Array_$Impl_$=$hxClasses["kha.arrays._Float32Array.Float32Array_Impl_"]={};kha_arrays__$Float32Array_Float32Array_$Impl_$.__name__=!0,kha_arrays__$Float32Array_Float32Array_$Impl_$._new=function(e){return new Float32Array(e)},kha_arrays__$Float32Array_Float32Array_$Impl_$.get_length=function(e){return e.length},kha_arrays__$Float32Array_Float32Array_$Impl_$.set=function(e,t,a){return e[t]=a},kha_arrays__$Float32Array_Float32Array_$Impl_$.get=function(e,t){return e[t]},kha_arrays__$Float32Array_Float32Array_$Impl_$.data=function(e){return e},kha_arrays__$Float32Array_Float32Array_$Impl_$.arrayRead=function(e,t){return e[t]},kha_arrays__$Float32Array_Float32Array_$Impl_$.arrayWrite=function(e,t,a){return e[t]=a},kha_arrays__$Float32Array_Float32Array_$Impl_$.subarray=function(e,t,a){return e.subarray(t,a)};var kha_arrays__$Uint32Array_Uint32Array_$Impl_$=$hxClasses["kha.arrays._Uint32Array.Uint32Array_Impl_"]={};kha_arrays__$Uint32Array_Uint32Array_$Impl_$.__name__=!0,kha_arrays__$Uint32Array_Uint32Array_$Impl_$._new=function(e){return new Uint32Array(e)},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.get_length=function(e){return e.length},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.set=function(e,t,a){return e[t]=a},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.get=function(e,t){return e[t]},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.data=function(e){return e},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.arrayRead=function(e,t){return e[t]},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.arrayWrite=function(e,t,a){return e[t]=a},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.subarray=function(e,t,a){return e.subarray(t,a)};var kha_audio1_AudioChannel=$hxClasses["kha.audio1.AudioChannel"]=function(){};kha_audio1_AudioChannel.__name__=!0,kha_audio1_AudioChannel.prototype={play:null,pause:null,stop:null,length:null,get_length:null,position:null,get_position:null,get_volume:null,set_volume:null,finished:null,get_finished:null,__class__:kha_audio1_AudioChannel};var kha_audio2_Audio=$hxClasses["kha.audio2.Audio"]=function(){};kha_audio2_Audio.__name__=!0,kha_audio2_Audio._init=function(){kha_audio2_Audio.buffer=new kha_audio2_Buffer(8192,2,44100)},kha_audio2_Audio._callCallback=function(e){if(null!=kha_audio2_Audio.buffer)if(null!=kha_audio2_Audio.audioCallback)kha_audio2_Audio.audioCallback(e,kha_audio2_Audio.buffer);else for(var t=0,a=e;t<a;){t++;kha_audio2_Audio.buffer.data[kha_audio2_Audio.buffer.writeLocation]=0,kha_audio2_Audio.buffer.writeLocation+=1,kha_audio2_Audio.buffer.writeLocation>=kha_audio2_Audio.buffer.size&&(kha_audio2_Audio.buffer.writeLocation=0)}},kha_audio2_Audio._readSample=function(){if(null==kha_audio2_Audio.buffer)return 0;var e=kha_audio2_Audio.buffer.data[kha_audio2_Audio.buffer.readLocation];return kha_audio2_Audio.buffer.readLocation+=1,kha_audio2_Audio.buffer.readLocation>=kha_audio2_Audio.buffer.size&&(kha_audio2_Audio.buffer.readLocation=0),e},kha_audio2_Audio.play=function(e,t){return null==t&&(t=!1),null},kha_audio2_Audio.stream=function(e,t){return null==t&&(t=!1),null};var kha_audio2_Audio1=$hxClasses["kha.audio2.Audio1"]=function(){};kha_audio2_Audio1.__name__=!0,kha_audio2_Audio1._init=function(){var e=new Array(16);kha_audio2_Audio1.soundChannels=e;var t=new Array(16);kha_audio2_Audio1.streamChannels=t;var a=new Array(16);kha_audio2_Audio1.internalSoundChannels=a;var r=new Array(16);kha_audio2_Audio1.internalStreamChannels=r;var i=new Array(512);kha_audio2_Audio1.sampleCache1=i;var s=new Array(512);kha_audio2_Audio1.sampleCache2=s,kha_audio2_Audio.audioCallback=kha_audio2_Audio1.mix},kha_audio2_Audio1.max=function(e,t){return e>t?e:t},kha_audio2_Audio1.min=function(e,t){return e<t?e:t},kha_audio2_Audio1.mix=function(e,t){if(kha_audio2_Audio1.sampleCache1.length<e){var a=new Array(e);kha_audio2_Audio1.sampleCache1=a;var r=new Array(e);kha_audio2_Audio1.sampleCache2=r}for(var i=0,s=e;i<s;){var n=i++;kha_audio2_Audio1.sampleCache2[n]=0}for(var _=0;_<16;){var o=_++;kha_audio2_Audio1.internalSoundChannels[o]=kha_audio2_Audio1.soundChannels[o]}for(var h=0;h<16;){var l=h++;kha_audio2_Audio1.internalStreamChannels[l]=kha_audio2_Audio1.streamChannels[l]}for(var c=0,u=kha_audio2_Audio1.internalSoundChannels;c<u.length;){var d=u[c];if(++c,null!=d&&!d.get_finished()){d.nextSamples(kha_audio2_Audio1.sampleCache1,e,t.samplesPerSecond);for(var g=0,p=e;g<p;){var f=g++,v=f,k=kha_audio2_Audio1.sampleCache2,m=kha_audio2_Audio1.sampleCache1[f]*d.get_volume();k[v]=k[v]+m}}}for(var S=0,b=kha_audio2_Audio1.internalStreamChannels;S<b.length;){var y=b[S];if(++S,null!=y&&!y.get_finished()){y.nextSamples(kha_audio2_Audio1.sampleCache1,e,t.samplesPerSecond);for(var x=0,B=e;x<B;){var w=x++,I=w,T=kha_audio2_Audio1.sampleCache2,E=kha_audio2_Audio1.sampleCache1[w]*y.get_volume();T[I]=T[I]+E}}}for(var C=0,P=e;C<P;){var A=C++,L=kha_audio2_Audio1.sampleCache2[A],$=L<1?L:1;t.data[t.writeLocation]=$>-1?$:-1,t.writeLocation+=1,t.writeLocation>=t.size&&(t.writeLocation=0)}},kha_audio2_Audio1.play=function(e,t){null==t&&(t=!1);for(var a=null,r=0;r<16;){var i=r++;if(null==kha_audio2_Audio1.soundChannels[i]||kha_audio2_Audio1.soundChannels[i].get_finished()){(a=new kha_audio2_AudioChannel(t)).data=e.uncompressedData,kha_audio2_Audio1.soundChannels[i]=a;break}}return a},kha_audio2_Audio1._playAgain=function(e){for(var t=0;t<16;){var a=t++;if(null==kha_audio2_Audio1.soundChannels[a]||kha_audio2_Audio1.soundChannels[a].get_finished()||kha_audio2_Audio1.soundChannels[a]==e){kha_audio2_Audio1.soundChannels[a]=e;break}}},kha_audio2_Audio1.stream=function(e,t){null==t&&(t=!1);var a=kha_audio2_Audio.stream(e,t);if(null!=a)return a;for(var r=null,i=0;i<16;){var s=i++;if(null==kha_audio2_Audio1.streamChannels[s]||kha_audio2_Audio1.streamChannels[s].get_finished()){r=new kha_audio2_StreamChannel(e.compressedData,t),kha_audio2_Audio1.streamChannels[s]=r;break}}return r};var kha_audio2_AudioChannel=$hxClasses["kha.audio2.AudioChannel"]=function(e){this.paused=!1,this.looping=e,this.myVolume=1,this.myPosition=0};kha_audio2_AudioChannel.__name__=!0,kha_audio2_AudioChannel.__interfaces__=[kha_audio1_AudioChannel],kha_audio2_AudioChannel.prototype={data:null,myVolume:null,myPosition:null,paused:null,looping:null,nextSamples:function(e,t,a){if(this.paused)for(var r=0,i=t;r<i;){e[r++]=0}else{for(var s=0,n=0;s<t;){for(var _=this.data.length-this.myPosition,o=_<t-s?_:t-s;n<o;)e[s]=this.data[this.myPosition],++this.myPosition,++n,++s;if(!this.looping)break;n=0,this.myPosition>=this.data.length&&(this.myPosition=0)}for(;s<t;)e[s]=0,++s}},play:function(){this.paused=!1,this.get_finished()&&(this.myPosition=0,kha_audio2_Audio1._playAgain(this))},pause:function(){this.paused=!0},stop:function(){this.myPosition=this.data.length},length:null,get_length:function(){return this.data.length/44100/2},position:null,get_position:function(){return this.myPosition/44100/2},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},finished:null,get_finished:function(){return this.myPosition>=this.data.length},__class__:kha_audio2_AudioChannel};var kha_audio2_Buffer=$hxClasses["kha.audio2.Buffer"]=function(e,t,a){this.size=e;var r=new Array(e);this.data=r,this.channels=t,this.samplesPerSecond=a,this.readLocation=0,this.writeLocation=0};kha_audio2_Buffer.__name__=!0,kha_audio2_Buffer.prototype={channels:null,samplesPerSecond:null,data:null,size:null,readLocation:null,writeLocation:null,__class__:kha_audio2_Buffer};var kha_audio2_StreamChannel=$hxClasses["kha.audio2.StreamChannel"]=function(e,t){this.paused=!1,this.atend=!1,this.myVolume=1,this.loop=t,this.reader=kha_audio2_ogg_vorbis_Reader.openFromBytes(e)};kha_audio2_StreamChannel.__name__=!0,kha_audio2_StreamChannel.__interfaces__=[kha_audio1_AudioChannel],kha_audio2_StreamChannel.prototype={reader:null,atend:null,loop:null,myVolume:null,paused:null,nextSamples:function(e,t,a){if(this.paused)for(var r=0,i=t;r<i;){e[r++]=0}else{var s=2*this.reader.read(e,t/2|0,2,a,!0);if(s<t){this.loop?this.reader.set_currentMillisecond(0):this.atend=!0;for(var n=s,_=t;n<_;){e[n++]=0}}}},play:function(){this.paused=!1},pause:function(){this.paused=!0},stop:function(){this.atend=!0},length:null,get_length:function(){return this.reader.get_totalMillisecond()/1e3},position:null,get_position:function(){return this.reader.get_currentMillisecond()/1e3},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},finished:null,get_finished:function(){return this.atend},__class__:kha_audio2_StreamChannel};var kha_audio2_ogg_tools_Crc32=$hxClasses["kha.audio2.ogg.tools.Crc32"]=function(){};kha_audio2_ogg_tools_Crc32.__name__=!0,kha_audio2_ogg_tools_Crc32.init=function(){if(null==kha_audio2_ogg_tools_Crc32.table){var e=new Array(256);kha_audio2_ogg_tools_Crc32.table=e;for(var t=0;t<256;){for(var a=t++,r=a<<24,i=0;i<8;){i++;r=r<<1^(_$UInt_UInt_$Impl_$.gte(r,1<<31)?79764919:0)}kha_audio2_ogg_tools_Crc32.table[a]=r}}},kha_audio2_ogg_tools_Crc32.update=function(e,t){return e<<8^kha_audio2_ogg_tools_Crc32.table[t^e>>>24]};var kha_audio2_ogg_tools_MathTools=$hxClasses["kha.audio2.ogg.tools.MathTools"]=function(){};kha_audio2_ogg_tools_MathTools.__name__=!0,kha_audio2_ogg_tools_MathTools.ilog=function(e){var t=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];return e<16384?e<16?t[e]:e<512?5+t[e>>5]:10+t[e>>10]:e<16777216?e<524288?15+t[e>>15]:20+t[e>>20]:e<536870912?25+t[e>>25]:e<-2147483648?30+t[e>>30]:0};var kha_audio2_ogg_tools_Mdct=$hxClasses["kha.audio2.ogg.tools.Mdct"]=function(){};kha_audio2_ogg_tools_Mdct.__name__=!0,kha_audio2_ogg_tools_Mdct.inverseTransform=function(e,t,a,r,i,s){for(var n=t>>1,_=t>>2,o=t>>3,h=new Array(n),l=n-2,c=0,u=0,d=n;u!=d;)h[l+1]=e[u]*a[c]-e[u+2]*a[c+1],h[l]=e[u]*a[c+1]+e[u+2]*a[c],l-=2,c+=2,u+=4;for(u=n-3;l>=0;)h[l+1]=-e[u+2]*a[c]- -e[u]*a[c+1],h[l]=-e[u+2]*a[c+1]+-e[u]*a[c],l-=2,c+=2,u-=4;for(var g=e,p=h,f=n-8,v=_,k=0,m=_,S=0;f>=0;){var b=p[v+1]-p[k+1],y=p[v]-p[k];g[m+1]=p[v+1]+p[k+1],g[m]=p[v]+p[k],g[S+1]=b*a[f+4]-y*a[f+5],g[S]=y*a[f+4]+b*a[f+5],b=p[v+3]-p[k+3],y=p[v+2]-p[k+2],g[m+3]=p[v+3]+p[k+3],g[m+2]=p[v+2]+p[k+2],g[S+3]=b*a[f]-y*a[f+1],g[S+2]=y*a[f]+b*a[f+1],f-=8,m+=4,S+=4,v+=4,k+=4}for(var x=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],B=(t<16384?t<16?x[t]:t<512?5+x[t>>5]:10+x[t>>10]:t<16777216?t<524288?15+x[t>>15]:20+x[t>>20]:t<536870912?25+x[t>>25]:t<-2147483648?30+x[t>>30]:0)-1,w=n-1-0*_,I=w,T=w+-(t>>3),E=0,C=1+(t>>4>>2);--C>0;){var P=g[I]-g[T],A=g[I+-1]-g[T+-1],L=I,$=g;$[L]=$[L]+g[T];var R=I+-1,F=g;F[R]=F[R]+g[T+-1],g[T]=P*a[E]-A*a[E+1],g[T+-1]=A*a[E]+P*a[E+1],E+=8,P=g[I+-2]-g[T+-2],A=g[I+-3]-g[T+-3];var N=I+-2,V=g;V[N]=V[N]+g[T+-2];var M=I+-3,D=g;D[M]=D[M]+g[T+-3],g[T+-2]=P*a[E]-A*a[E+1],g[T+-3]=A*a[E]+P*a[E+1],E+=8,P=g[I+-4]-g[T+-4],A=g[I+-5]-g[T+-5];var O=I+-4,U=g;U[O]=U[O]+g[T+-4];var H=I+-5,G=g;G[H]=G[H]+g[T+-5],g[T+-4]=P*a[E]-A*a[E+1],g[T+-5]=A*a[E]+P*a[E+1],E+=8,P=g[I+-6]-g[T+-6],A=g[I+-7]-g[T+-7];var W=I+-6,z=g;z[W]=z[W]+g[T+-6];var j=I+-7,K=g;K[j]=K[j]+g[T+-7],g[T+-6]=P*a[E]-A*a[E+1],g[T+-7]=A*a[E]+P*a[E+1],E+=8,I-=8,T-=8}for(var Y=n-1-_,X=Y,Z=Y+-(t>>3),Q=0,q=1+(t>>4>>2);--q>0;){var J=g[X]-g[Z],ee=g[X+-1]-g[Z+-1],te=X,ae=g;ae[te]=ae[te]+g[Z];var re=X+-1,ie=g;ie[re]=ie[re]+g[Z+-1],g[Z]=J*a[Q]-ee*a[Q+1],g[Z+-1]=ee*a[Q]+J*a[Q+1],Q+=8,J=g[X+-2]-g[Z+-2],ee=g[X+-3]-g[Z+-3];var se=X+-2,ne=g;ne[se]=ne[se]+g[Z+-2];var _e=X+-3,oe=g;oe[_e]=oe[_e]+g[Z+-3],g[Z+-2]=J*a[Q]-ee*a[Q+1],g[Z+-3]=ee*a[Q]+J*a[Q+1],Q+=8,J=g[X+-4]-g[Z+-4],ee=g[X+-5]-g[Z+-5];var he=X+-4,le=g;le[he]=le[he]+g[Z+-4];var ce=X+-5,ue=g;ue[ce]=ue[ce]+g[Z+-5],g[Z+-4]=J*a[Q]-ee*a[Q+1],g[Z+-5]=ee*a[Q]+J*a[Q+1],Q+=8,J=g[X+-6]-g[Z+-6],ee=g[X+-7]-g[Z+-7];var de=X+-6,ge=g;ge[de]=ge[de]+g[Z+-6];var pe=X+-7,fe=g;fe[pe]=fe[pe]+g[Z+-7],g[Z+-6]=J*a[Q]-ee*a[Q+1],g[Z+-7]=ee*a[Q]+J*a[Q+1],Q+=8,X-=8,Z-=8}for(var ve=n-1-0*o,ke=0,me=ve,Se=ve+-(t>>4),be=1+(t>>5>>2);--be>0;){var ye=g[me]-g[Se],xe=g[me+-1]-g[Se+-1],Be=me,we=g;we[Be]=we[Be]+g[Se];var Ie=me+-1,Te=g;Te[Ie]=Te[Ie]+g[Se+-1],g[Se]=ye*a[ke]-xe*a[ke+1],g[Se+-1]=xe*a[ke]+ye*a[ke+1],ke+=16,ye=g[me+-2]-g[Se+-2],xe=g[me+-3]-g[Se+-3];var Ee=me+-2,Ce=g;Ce[Ee]=Ce[Ee]+g[Se+-2];var Pe=me+-3,Ae=g;Ae[Pe]=Ae[Pe]+g[Se+-3],g[Se+-2]=ye*a[ke]-xe*a[ke+1],g[Se+-3]=xe*a[ke]+ye*a[ke+1],ke+=16,ye=g[me+-4]-g[Se+-4],xe=g[me+-5]-g[Se+-5];var Le=me+-4,$e=g;$e[Le]=$e[Le]+g[Se+-4];var Re=me+-5,Fe=g;Fe[Re]=Fe[Re]+g[Se+-5],g[Se+-4]=ye*a[ke]-xe*a[ke+1],g[Se+-5]=xe*a[ke]+ye*a[ke+1],ke+=16,ye=g[me+-6]-g[Se+-6],xe=g[me+-7]-g[Se+-7];var Ne=me+-6,Ve=g;Ve[Ne]=Ve[Ne]+g[Se+-6];var Me=me+-7,De=g;De[Me]=De[Me]+g[Se+-7],g[Se+-6]=ye*a[ke]-xe*a[ke+1],g[Se+-7]=xe*a[ke]+ye*a[ke+1],me-=8,Se-=8,ke+=16}for(var Oe=n-1-o,Ue=0,He=Oe,Ge=Oe+-(t>>4),We=1+(t>>5>>2);--We>0;){var ze=g[He]-g[Ge],je=g[He+-1]-g[Ge+-1],Ke=He,Ye=g;Ye[Ke]=Ye[Ke]+g[Ge];var Xe=He+-1,Ze=g;Ze[Xe]=Ze[Xe]+g[Ge+-1],g[Ge]=ze*a[Ue]-je*a[Ue+1],g[Ge+-1]=je*a[Ue]+ze*a[Ue+1],Ue+=16,ze=g[He+-2]-g[Ge+-2],je=g[He+-3]-g[Ge+-3];var Qe=He+-2,qe=g;qe[Qe]=qe[Qe]+g[Ge+-2];var Je=He+-3,et=g;et[Je]=et[Je]+g[Ge+-3],g[Ge+-2]=ze*a[Ue]-je*a[Ue+1],g[Ge+-3]=je*a[Ue]+ze*a[Ue+1],Ue+=16,ze=g[He+-4]-g[Ge+-4],je=g[He+-5]-g[Ge+-5];var tt=He+-4,at=g;at[tt]=at[tt]+g[Ge+-4];var rt=He+-5,it=g;it[rt]=it[rt]+g[Ge+-5],g[Ge+-4]=ze*a[Ue]-je*a[Ue+1],g[Ge+-5]=je*a[Ue]+ze*a[Ue+1],Ue+=16,ze=g[He+-6]-g[Ge+-6],je=g[He+-7]-g[Ge+-7];var st=He+-6,nt=g;nt[st]=nt[st]+g[Ge+-6];var _t=He+-7,ot=g;ot[_t]=ot[_t]+g[Ge+-7],g[Ge+-6]=ze*a[Ue]-je*a[Ue+1],g[Ge+-7]=je*a[Ue]+ze*a[Ue+1],He-=8,Ge-=8,Ue+=16}for(var ht=n-1-2*o,lt=0,ct=ht,ut=ht+-(t>>4),dt=1+(t>>5>>2);--dt>0;){var gt=g[ct]-g[ut],pt=g[ct+-1]-g[ut+-1],ft=ct,vt=g;vt[ft]=vt[ft]+g[ut];var kt=ct+-1,mt=g;mt[kt]=mt[kt]+g[ut+-1],g[ut]=gt*a[lt]-pt*a[lt+1],g[ut+-1]=pt*a[lt]+gt*a[lt+1],lt+=16,gt=g[ct+-2]-g[ut+-2],pt=g[ct+-3]-g[ut+-3];var St=ct+-2,bt=g;bt[St]=bt[St]+g[ut+-2];var yt=ct+-3,xt=g;xt[yt]=xt[yt]+g[ut+-3],g[ut+-2]=gt*a[lt]-pt*a[lt+1],g[ut+-3]=pt*a[lt]+gt*a[lt+1],lt+=16,gt=g[ct+-4]-g[ut+-4],pt=g[ct+-5]-g[ut+-5];var Bt=ct+-4,wt=g;wt[Bt]=wt[Bt]+g[ut+-4];var It=ct+-5,Tt=g;Tt[It]=Tt[It]+g[ut+-5],g[ut+-4]=gt*a[lt]-pt*a[lt+1],g[ut+-5]=pt*a[lt]+gt*a[lt+1],lt+=16,gt=g[ct+-6]-g[ut+-6],pt=g[ct+-7]-g[ut+-7];var Et=ct+-6,Ct=g;Ct[Et]=Ct[Et]+g[ut+-6];var Pt=ct+-7,At=g;At[Pt]=At[Pt]+g[ut+-7],g[ut+-6]=gt*a[lt]-pt*a[lt+1],g[ut+-7]=pt*a[lt]+gt*a[lt+1],ct-=8,ut-=8,lt+=16}for(var Lt=n-1-3*o,$t=0,Rt=Lt,Ft=Lt+-(t>>4),Nt=1+(t>>5>>2);--Nt>0;){var Vt=g[Rt]-g[Ft],Mt=g[Rt+-1]-g[Ft+-1],Dt=Rt,Ot=g;Ot[Dt]=Ot[Dt]+g[Ft];var Ut=Rt+-1,Ht=g;Ht[Ut]=Ht[Ut]+g[Ft+-1],g[Ft]=Vt*a[$t]-Mt*a[$t+1],g[Ft+-1]=Mt*a[$t]+Vt*a[$t+1],$t+=16,Vt=g[Rt+-2]-g[Ft+-2],Mt=g[Rt+-3]-g[Ft+-3];var Gt=Rt+-2,Wt=g;Wt[Gt]=Wt[Gt]+g[Ft+-2];var zt=Rt+-3,jt=g;jt[zt]=jt[zt]+g[Ft+-3],g[Ft+-2]=Vt*a[$t]-Mt*a[$t+1],g[Ft+-3]=Mt*a[$t]+Vt*a[$t+1],$t+=16,Vt=g[Rt+-4]-g[Ft+-4],Mt=g[Rt+-5]-g[Ft+-5];var Kt=Rt+-4,Yt=g;Yt[Kt]=Yt[Kt]+g[Ft+-4];var Xt=Rt+-5,Zt=g;Zt[Xt]=Zt[Xt]+g[Ft+-5],g[Ft+-4]=Vt*a[$t]-Mt*a[$t+1],g[Ft+-5]=Mt*a[$t]+Vt*a[$t+1],$t+=16,Vt=g[Rt+-6]-g[Ft+-6],Mt=g[Rt+-7]-g[Ft+-7];var Qt=Rt+-6,qt=g;qt[Qt]=qt[Qt]+g[Ft+-6];var Jt=Rt+-7,ea=g;ea[Jt]=ea[Jt]+g[Ft+-7],g[Ft+-6]=Vt*a[$t]-Mt*a[$t+1],g[Ft+-7]=Mt*a[$t]+Vt*a[$t+1],Rt-=8,Ft-=8,$t+=16}for(var ta=2,aa=B-3>>1;ta<aa;)for(var ra=ta++,ia=t>>ra+2,sa=ia>>1,na=0,_a=1<<ra+1;na<_a;)for(var oa=n-1-ia*na++,ha=1<<ra+3,la=0,ca=oa,ua=oa+-sa,da=1+(t>>ra+4>>2);--da>0;){var ga=g[ca]-g[ua],pa=g[ca+-1]-g[ua+-1],fa=ca,va=g;va[fa]=va[fa]+g[ua];var ka=ca+-1,ma=g;ma[ka]=ma[ka]+g[ua+-1],g[ua]=ga*a[la]-pa*a[la+1],g[ua+-1]=pa*a[la]+ga*a[la+1],la+=ha,ga=g[ca+-2]-g[ua+-2],pa=g[ca+-3]-g[ua+-3];var Sa=ca+-2,ba=g;ba[Sa]=ba[Sa]+g[ua+-2];var ya=ca+-3,xa=g;xa[ya]=xa[ya]+g[ua+-3],g[ua+-2]=ga*a[la]-pa*a[la+1],g[ua+-3]=pa*a[la]+ga*a[la+1],la+=ha,ga=g[ca+-4]-g[ua+-4],pa=g[ca+-5]-g[ua+-5];var Ba=ca+-4,wa=g;wa[Ba]=wa[Ba]+g[ua+-4];var Ia=ca+-5,Ta=g;Ta[Ia]=Ta[Ia]+g[ua+-5],g[ua+-4]=ga*a[la]-pa*a[la+1],g[ua+-5]=pa*a[la]+ga*a[la+1],la+=ha,ga=g[ca+-6]-g[ua+-6],pa=g[ca+-7]-g[ua+-7];var Ea=ca+-6,Ca=g;Ca[Ea]=Ca[Ea]+g[ua+-6];var Pa=ca+-7,Aa=g;Aa[Pa]=Aa[Pa]+g[ua+-7],g[ua+-6]=ga*a[la]-pa*a[la+1],g[ua+-7]=pa*a[la]+ga*a[la+1],ca-=8,ua-=8,la+=ha}for(var La=B-3>>1,$a=B-6;La<$a;)for(var Ra=La++,Fa=t>>Ra+2,Na=1<<Ra+3,Va=Fa>>1,Ma=1<<Ra+1,Da=0,Oa=n-1,Ua=(t>>Ra+6)+1;--Ua>0;){for(var Ha=a[Da],Ga=a[Da+1],Wa=a[Da+Na],za=a[Da+Na+1],ja=a[Da+2*Na],Ka=a[Da+2*Na+1],Ya=a[Da+3*Na],Xa=a[Da+3*Na+1],Za=Oa,Qa=Oa+-Va,qa=Ma+1;--qa>0;){var Ja=g[Za]-g[Qa],er=g[Za+-1]-g[Qa+-1];g[Za]=g[Za]+g[Qa],g[Za+-1]=g[Za+-1]+g[Qa+-1],g[Qa]=Ja*Ha-er*Ga,g[Qa+-1]=er*Ha+Ja*Ga,Ja=g[Za+-2]-g[Qa+-2],er=g[Za+-3]-g[Qa+-3],g[Za+-2]=g[Za+-2]+g[Qa+-2],g[Za+-3]=g[Za+-3]+g[Qa+-3],g[Qa+-2]=Ja*Wa-er*za,g[Qa+-3]=er*Wa+Ja*za,Ja=g[Za+-4]-g[Qa+-4],er=g[Za+-5]-g[Qa+-5],g[Za+-4]=g[Za+-4]+g[Qa+-4],g[Za+-5]=g[Za+-5]+g[Qa+-5],g[Qa+-4]=Ja*ja-er*Ka,g[Qa+-5]=er*ja+Ja*Ka,Ja=g[Za+-6]-g[Qa+-6],er=g[Za+-7]-g[Qa+-7],g[Za+-6]=g[Za+-6]+g[Qa+-6],g[Za+-7]=g[Za+-7]+g[Qa+-7],g[Qa+-6]=Ja*Ya-er*Xa,g[Qa+-7]=er*Ya+Ja*Xa,Za-=Fa,Qa-=Fa}Da+=4*Na,Oa-=8}for(var tr=n-1,ar=a[t>>3],rr=tr,ir=tr-16*(t>>5);rr>ir;){var sr=g[rr],nr=g[rr+-8];g[rr+-8]=sr-nr,g[rr]=sr+nr,sr=g[rr+-1],nr=g[rr+-9],g[rr+-9]=sr-nr,g[rr+-1]=sr+nr;var _r=(sr=g[rr+-2])-(nr=g[rr+-10]);g[rr+-2]=sr+nr;var or=(sr=g[rr+-3])-(nr=g[rr+-11]);g[rr+-3]=sr+nr,g[rr+-10]=(_r+or)*ar,g[rr+-11]=(or-_r)*ar,sr=g[rr+-4],_r=(nr=g[rr+-12])-sr,g[rr+-4]=sr+nr,or=(sr=g[rr+-5])-(nr=g[rr+-13]),g[rr+-5]=sr+nr,g[rr+-12]=or,g[rr+-13]=_r,sr=g[rr+-6],_r=(nr=g[rr+-14])-sr,g[rr+-6]=sr+nr,or=(sr=g[rr+-7])-(nr=g[rr+-15]),g[rr+-7]=sr+nr,g[rr+-14]=(_r+or)*ar,g[rr+-15]=(_r-or)*ar;var hr=g[rr],lr=g[rr+-4],cr=hr-lr,ur=hr+lr,dr=(hr=g[rr+-2])+(lr=g[rr+-6]),gr=hr-lr;g[rr]=ur+dr,g[rr+-2]=ur-dr;var pr=g[rr+-3]-g[rr+-7];g[rr+-4]=cr+pr,g[rr+-6]=cr-pr;var fr=(hr=g[rr+-1])-(lr=g[rr+-5]),vr=hr+lr,kr=g[rr+-3]+g[rr+-7];g[rr+-1]=vr+kr,g[rr+-3]=vr-kr,g[rr+-5]=fr-gr,g[rr+-7]=fr+gr;var mr=rr-8,Sr=g[mr],br=g[mr+-4],yr=Sr-br,xr=Sr+br,Br=(Sr=g[mr+-2])+(br=g[mr+-6]),wr=Sr-br;g[mr]=xr+Br,g[mr+-2]=xr-Br;var Ir=g[mr+-3]-g[mr+-7];g[mr+-4]=yr+Ir,g[mr+-6]=yr-Ir;var Tr=(Sr=g[mr+-1])-(br=g[mr+-5]),Er=Sr+br,Cr=g[mr+-3]+g[mr+-7];g[mr+-1]=Er+Cr,g[mr+-3]=Er-Cr,g[mr+-5]=Tr-wr,g[mr+-7]=Tr+wr,rr-=16}for(var Pr=0,Ar=_-4,Lr=n-4;Ar>=0;){var $r=s[Pr];p[Lr+3]=g[$r],p[Lr+2]=g[$r+1],p[Ar+3]=g[$r+2],p[Ar+2]=g[$r+3],$r=s[Pr+1],p[Lr+1]=g[$r],p[Lr]=g[$r+1],p[Ar+1]=g[$r+2],p[Ar]=g[$r+3],Ar-=4,Lr-=4,Pr+=2}for(var Rr=0,Fr=0,Nr=n-4;Fr<Nr;){var Vr=p[Fr]-p[Nr+2],Mr=p[Fr+1]+p[Nr+3],Dr=i[Rr+1]*Vr+i[Rr]*Mr,Or=i[Rr+1]*Mr-i[Rr]*Vr,Ur=p[Fr]+p[Nr+2],Hr=p[Fr+1]-p[Nr+3];p[Fr]=Ur+Dr,p[Fr+1]=Hr+Or,p[Nr+2]=Ur-Dr,p[Nr+3]=Or-Hr,Vr=p[Fr+2]-p[Nr],Mr=p[Fr+3]+p[Nr+1],Dr=i[Rr+3]*Vr+i[Rr+2]*Mr,Or=i[Rr+3]*Mr-i[Rr+2]*Vr,Ur=p[Fr+2]+p[Nr],Hr=p[Fr+3]-p[Nr+1],p[Fr+2]=Ur+Dr,p[Fr+3]=Hr+Or,p[Nr]=Ur-Dr,p[Nr+1]=Or-Hr,Rr+=4,Fr+=4,Nr-=4}for(var Gr=n-8,Wr=n-8,zr=0,jr=n-4,Kr=n,Yr=t-4;Wr>=0;){var Xr=h[Wr+6]*r[Gr+7]-h[Wr+7]*r[Gr+6],Zr=-h[Wr+6]*r[Gr+6]-h[Wr+7]*r[Gr+7];e[zr]=Xr,e[jr+3]=-Xr,e[Kr]=Zr,e[Yr+3]=Zr;var Qr=h[Wr+4]*r[Gr+5]-h[Wr+5]*r[Gr+4],qr=-h[Wr+4]*r[Gr+4]-h[Wr+5]*r[Gr+5];e[zr+1]=Qr,e[jr+2]=-Qr,e[Kr+1]=qr,e[Yr+2]=qr,Xr=h[Wr+2]*r[Gr+3]-h[Wr+3]*r[Gr+2],Zr=-h[Wr+2]*r[Gr+2]-h[Wr+3]*r[Gr+3],e[zr+2]=Xr,e[jr+1]=-Xr,e[Kr+2]=Zr,e[Yr+1]=Zr,Qr=h[Wr]*r[Gr+1]-h[Wr+1]*r[Gr],qr=-h[Wr]*r[Gr]-h[Wr+1]*r[Gr+1],e[zr+3]=Qr,e[jr]=-Qr,e[Kr+3]=qr,e[Yr]=qr,Gr-=8,Wr-=8,zr+=4,Kr+=4,jr-=4,Yr-=4}},kha_audio2_ogg_tools_Mdct.step3Iter0Loop=function(e,t,a,r,i){for(var s=a,n=a+r,_=0,o=1+(e>>2);--o>0;){var h=t[s]-t[n],l=t[s+-1]-t[n+-1],c=s,u=t;u[c]=u[c]+t[n];var d=s+-1,g=t;g[d]=g[d]+t[n+-1],t[n]=h*i[_]-l*i[_+1],t[n+-1]=l*i[_]+h*i[_+1],_+=8,h=t[s+-2]-t[n+-2],l=t[s+-3]-t[n+-3];var p=s+-2,f=t;f[p]=f[p]+t[n+-2];var v=s+-3,k=t;k[v]=k[v]+t[n+-3],t[n+-2]=h*i[_]-l*i[_+1],t[n+-3]=l*i[_]+h*i[_+1],_+=8,h=t[s+-4]-t[n+-4],l=t[s+-5]-t[n+-5];var m=s+-4,S=t;S[m]=S[m]+t[n+-4];var b=s+-5,y=t;y[b]=y[b]+t[n+-5],t[n+-4]=h*i[_]-l*i[_+1],t[n+-5]=l*i[_]+h*i[_+1],_+=8,h=t[s+-6]-t[n+-6],l=t[s+-7]-t[n+-7];var x=s+-6,B=t;B[x]=B[x]+t[n+-6];var w=s+-7,I=t;I[w]=I[w]+t[n+-7],t[n+-6]=h*i[_]-l*i[_+1],t[n+-7]=l*i[_]+h*i[_+1],_+=8,s-=8,n-=8}},kha_audio2_ogg_tools_Mdct.step3InnerRLoop=function(e,t,a,r,i,s){for(var n=0,_=a,o=a+r,h=1+(e>>2);--h>0;){var l=t[_]-t[o],c=t[_+-1]-t[o+-1],u=_,d=t;d[u]=d[u]+t[o];var g=_+-1,p=t;p[g]=p[g]+t[o+-1],t[o]=l*i[n]-c*i[n+1],t[o+-1]=c*i[n]+l*i[n+1],n+=s,l=t[_+-2]-t[o+-2],c=t[_+-3]-t[o+-3];var f=_+-2,v=t;v[f]=v[f]+t[o+-2];var k=_+-3,m=t;m[k]=m[k]+t[o+-3],t[o+-2]=l*i[n]-c*i[n+1],t[o+-3]=c*i[n]+l*i[n+1],n+=s,l=t[_+-4]-t[o+-4],c=t[_+-5]-t[o+-5];var S=_+-4,b=t;b[S]=b[S]+t[o+-4];var y=_+-5,x=t;x[y]=x[y]+t[o+-5],t[o+-4]=l*i[n]-c*i[n+1],t[o+-5]=c*i[n]+l*i[n+1],n+=s,l=t[_+-6]-t[o+-6],c=t[_+-7]-t[o+-7];var B=_+-6,w=t;w[B]=w[B]+t[o+-6];var I=_+-7,T=t;T[I]=T[I]+t[o+-7],t[o+-6]=l*i[n]-c*i[n+1],t[o+-7]=c*i[n]+l*i[n+1],_-=8,o-=8,n+=s}},kha_audio2_ogg_tools_Mdct.step3InnerSLoop=function(e,t,a,r,i,s,n,_){for(var o=i[s],h=i[s+1],l=i[s+n],c=i[s+n+1],u=i[s+2*n],d=i[s+2*n+1],g=i[s+3*n],p=i[s+3*n+1],f=a,v=a+r,k=e+1;--k>0;){var m=t[f]-t[v],S=t[f+-1]-t[v+-1];t[f]=t[f]+t[v],t[f+-1]=t[f+-1]+t[v+-1],t[v]=m*o-S*h,t[v+-1]=S*o+m*h,m=t[f+-2]-t[v+-2],S=t[f+-3]-t[v+-3],t[f+-2]=t[f+-2]+t[v+-2],t[f+-3]=t[f+-3]+t[v+-3],t[v+-2]=m*l-S*c,t[v+-3]=S*l+m*c,m=t[f+-4]-t[v+-4],S=t[f+-5]-t[v+-5],t[f+-4]=t[f+-4]+t[v+-4],t[f+-5]=t[f+-5]+t[v+-5],t[v+-4]=m*u-S*d,t[v+-5]=S*u+m*d,m=t[f+-6]-t[v+-6],S=t[f+-7]-t[v+-7],t[f+-6]=t[f+-6]+t[v+-6],t[f+-7]=t[f+-7]+t[v+-7],t[v+-6]=m*g-S*p,t[v+-7]=S*g+m*p,f-=_,v-=_}},kha_audio2_ogg_tools_Mdct.iter54=function(e,t){var a=e[t],r=e[t+-4],i=a-r,s=a+r,n=(a=e[t+-2])+(r=e[t+-6]),_=a-r;e[t]=s+n,e[t+-2]=s-n;var o=e[t+-3]-e[t+-7];e[t+-4]=i+o,e[t+-6]=i-o;var h=(a=e[t+-1])-(r=e[t+-5]),l=a+r,c=e[t+-3]+e[t+-7];e[t+-1]=l+c,e[t+-3]=l-c,e[t+-5]=h-_,e[t+-7]=h+_},kha_audio2_ogg_tools_Mdct.step3InnerSLoopLd654=function(e,t,a,r,i){for(var s=r[i>>3],n=a,_=a-16*e;n>_;){var o=t[n],h=t[n+-8];t[n+-8]=o-h,t[n]=o+h,o=t[n+-1],h=t[n+-9],t[n+-9]=o-h,t[n+-1]=o+h;var l=(o=t[n+-2])-(h=t[n+-10]);t[n+-2]=o+h;var c=(o=t[n+-3])-(h=t[n+-11]);t[n+-3]=o+h,t[n+-10]=(l+c)*s,t[n+-11]=(c-l)*s,o=t[n+-4],l=(h=t[n+-12])-o,t[n+-4]=o+h,c=(o=t[n+-5])-(h=t[n+-13]),t[n+-5]=o+h,t[n+-12]=c,t[n+-13]=l,o=t[n+-6],l=(h=t[n+-14])-o,t[n+-6]=o+h,c=(o=t[n+-7])-(h=t[n+-15]),t[n+-7]=o+h,t[n+-14]=(l+c)*s,t[n+-15]=(l-c)*s;var u=t[n],d=t[n+-4],g=u-d,p=u+d,f=(u=t[n+-2])+(d=t[n+-6]),v=u-d;t[n]=p+f,t[n+-2]=p-f;var k=t[n+-3]-t[n+-7];t[n+-4]=g+k,t[n+-6]=g-k;var m=(u=t[n+-1])-(d=t[n+-5]),S=u+d,b=t[n+-3]+t[n+-7];t[n+-1]=S+b,t[n+-3]=S-b,t[n+-5]=m-v,t[n+-7]=m+v;var y=n-8,x=t[y],B=t[y+-4],w=x-B,I=x+B,T=(x=t[y+-2])+(B=t[y+-6]),E=x-B;t[y]=I+T,t[y+-2]=I-T;var C=t[y+-3]-t[y+-7];t[y+-4]=w+C,t[y+-6]=w-C;var P=(x=t[y+-1])-(B=t[y+-5]),A=x+B,L=t[y+-3]+t[y+-7];t[y+-1]=A+L,t[y+-3]=A-L,t[y+-5]=P-E,t[y+-7]=P+E,n-=16}};var kha_audio2_ogg_vorbis_Reader=$hxClasses["kha.audio2.ogg.vorbis.Reader"]=function(e,t,a){this.seekFunc=t,this.inputLength=a,this.decoder=kha_audio2_ogg_vorbis_VorbisDecoder.start(e),this.decoder.setupSampleNumber(t,a),this.loopStart=this.get_header().comment.get_loopStart(),this.loopLength=this.get_header().comment.get_loopLength()};kha_audio2_ogg_vorbis_Reader.__name__=!0,kha_audio2_ogg_vorbis_Reader.openFromBytes=function(e){var t=new haxe_io_BytesInput(e),a=t;return new kha_audio2_ogg_vorbis_Reader(t,function(e){kha_audio2_ogg_vorbis_Reader.seekBytes(a,e)},e.length)},kha_audio2_ogg_vorbis_Reader.seekBytes=function(e,t){e.set_position(t)},kha_audio2_ogg_vorbis_Reader.readAll=function(e,t,a){null==a&&(a=!1);var r=new haxe_io_BytesInput(e),i=kha_audio2_ogg_vorbis_VorbisDecoder.start(r),s=r;i.setupSampleNumber(function(e){kha_audio2_ogg_vorbis_Reader.seekBytes(s,e)},e.length);for(var n=i.header,_=4096*n.channel,o=new Array(_);;){for(var h=i.read(o,4096,n.channel,n.sampleRate,a),l=0,c=h*n.channel;l<c;){var u=l++;t.writeFloat(o[u])}if(0==h)break;h}return i.header},kha_audio2_ogg_vorbis_Reader.prototype={decoder:null,get_header:function(){return this.decoder.header},get_totalSample:function(){return this.decoder.totalSample},get_totalMillisecond:function(){var e=this.decoder.totalSample,t=this.get_header().sampleRate;return _$UInt_UInt_$Impl_$.toFloat(e)/_$UInt_UInt_$Impl_$.toFloat(t)*1e3},get_currentSample:function(){return this.decoder.currentSample},set_currentSample:function(e){return this.decoder.seek(this.seekFunc,this.inputLength,e),this.decoder.currentSample},get_currentMillisecond:function(){var e=this.get_currentSample(),t=this.get_header().sampleRate;return _$UInt_UInt_$Impl_$.toFloat(e)/_$UInt_UInt_$Impl_$.toFloat(t)*1e3},set_currentMillisecond:function(e){var t=e/1e3,a=this.get_header().sampleRate;return this.set_currentSample(Math.floor(_$UInt_UInt_$Impl_$.toFloat(a)*t)),this.get_currentMillisecond()},loopStart:null,loopLength:null,seekFunc:null,inputLength:null,read:function(e,t,a,r,i){return null==i&&(i=!1),this.decoder.ensurePosition(this.seekFunc),null==t&&(t=this.decoder.totalSample),null==a&&(a=this.get_header().channel),null==r&&(r=this.get_header().sampleRate),this.decoder.read(e,t,a,r,i)},clone:function(){var e=Type.createEmptyInstance(kha_audio2_ogg_vorbis_Reader);return e.seekFunc=this.seekFunc,e.inputLength=this.inputLength,e.decoder=this.decoder.clone(this.seekFunc),e.loopStart=this.loopStart,e.loopLength=this.loopLength,e},sampleToMillisecond:function(e){var t=this.get_header().sampleRate;return _$UInt_UInt_$Impl_$.toFloat(e)/_$UInt_UInt_$Impl_$.toFloat(t)*1e3},millisecondToSample:function(e){var t=e/1e3,a=this.get_header().sampleRate;return Math.floor(_$UInt_UInt_$Impl_$.toFloat(a)*t)},__class__:kha_audio2_ogg_vorbis_Reader};var kha_audio2_ogg_vorbis_VorbisDecodeState=$hxClasses["kha.audio2.ogg.vorbis.VorbisDecodeState"]=function(e){this.nextSeg=0,this.firstDecode=!1,this.bytesInSeg=0,this.validBits=0,this.input=e,this.inputPosition=0,this.page=new kha_audio2_ogg_vorbis_data_Page,kha_audio2_ogg_tools_Crc32.init()};kha_audio2_ogg_vorbis_VorbisDecodeState.__name__=!0,kha_audio2_ogg_vorbis_VorbisDecodeState.prototype={page:null,eof:null,pFirst:null,pLast:null,validBits:null,inputPosition:null,input:null,discardSamplesDeferred:null,segments:null,bytesInSeg:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,currentSample:null,previousWindow:null,previousLength:null,finalY:null,firstDecode:null,nextSeg:null,acc:null,lastSeg:null,lastSegWhich:null,endSegWithKnownLoc:null,knownLocForPacket:null,error:null,currentLoc:null,currentLocValid:null,firstAudioPageOffset:null,setup:function(e,t){this.inputPosition+=1;var a=this.input.readByte();this.inputPosition+=a;for(var r=new Array(a),i=0,s=a;i<s;){r[i++]=this.input.readByte()}if(this.segments=r,this.endSegWithKnownLoc=-2,-1!=e||-1!=t)for(var n=a-1;n>=0&&!(this.segments[n]<255);)n>=0&&(this.endSegWithKnownLoc=n,this.knownLocForPacket=e),--n;if(this.firstDecode){for(var _=0,o=new kha_audio2_ogg_vorbis_data_ProbedPage,h=0,l=a;h<l;){var c=h++;_+=this.segments[c]}_+=27+a,o.pageStart=this.firstAudioPageOffset,o.pageEnd=o.pageStart+_,o.firstDecodedSample=0,o.lastDecodedSample=e,this.pFirst=o}this.nextSeg=0},clone:function(e){var t=Type.createEmptyInstance(kha_audio2_ogg_vorbis_VorbisDecodeState);return e(this.inputPosition),t.input=this.input,t.eof=this.eof,t.validBits=this.validBits,t.discardSamplesDeferred=this.discardSamplesDeferred,t.firstDecode=this.firstDecode,t.nextSeg=this.nextSeg,t.bytesInSeg=this.bytesInSeg,t.acc=t.acc,t.lastSeg=this.lastSeg,t.lastSegWhich=this.lastSegWhich,t.currentLoc=this.currentLoc,t.currentLocValid=this.currentLocValid,t.inputPosition=this.inputPosition,t.firstAudioPageOffset=this.firstAudioPageOffset,t.error=this.error,t.segments=this.segments,t.pFirst=this.pFirst,t.pLast=this.pLast,t.page=this.page.clone(),t},next:function(){if(this.lastSeg)return 0;if(-1==this.nextSeg){this.lastSegWhich=this.segments.length-1;try{this.page.start(this)}catch(e){if(e instanceof js__$Boot_HaxeError&&(e=e.val),js_Boot.__instanceof(e,kha_audio2_ogg_vorbis_data_ReaderError))return this.lastSeg=!0,this.error=e,0;throw e}if(0==(1&this.page.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CONTINUED_PACKET_FLAG_INVALID,null,{fileName:"VorbisDecodeState.hx",lineNumber:171,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}))}var e=this.segments[this.nextSeg++];if(e<255&&(this.lastSeg=!0,this.lastSegWhich=this.nextSeg-1),this.nextSeg>=this.segments.length&&(this.nextSeg=-1),0!=this.bytesInSeg)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"VorbisDecodeState.hx",lineNumber:184,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}));return this.bytesInSeg=e,e},startPacket:function(){for(;-1==this.nextSeg;)if(this.page.start(this),0!=(1&this.page.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"VorbisDecodeState.hx",lineNumber:193,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"startPacket"}));this.lastSeg=!1,this.validBits=0,this.bytesInSeg=0},maybeStartPacket:function(){if(-1==this.nextSeg){var e,t,a,r,i=!1;try{this.inputPosition+=1,e=this.input.readByte()}catch(t){if(t instanceof js__$Boot_HaxeError&&(t=t.val),!js_Boot.__instanceof(t,haxe_io_Eof))throw t;i=!0,e=0}if(i)return!1;if(79==e?(this.inputPosition+=1,r=103!=this.input.readByte()):r=!0,r?a=!0:(this.inputPosition+=1,a=103!=this.input.readByte()),a?t=!0:(this.inputPosition+=1,t=83!=this.input.readByte()),t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"VorbisDecodeState.hx",lineNumber:218,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"maybeStartPacket"}));this.page.startWithoutCapturePattern(this)}return this.startPacket(),!0},readBits:function(e){if(this.validBits<0)return 0;if(this.validBits<e){if(e>24)return this.readBits(24)+(this.readBits(e-24)<<24);for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next())){this.validBits=-1;break}if(this.bytesInSeg--,this.inputPosition+=1,this.acc=this.acc+(this.input.readByte()<<this.validBits),this.validBits+=8,!(this.validBits<e))break}if(this.validBits<0)return 0;var t=this.acc&(1<<e)-1;return this.acc=this.acc>>>e,this.validBits-=e,t}var a=this.acc&(1<<e)-1;return this.acc=this.acc>>>e,this.validBits-=e,a},readPacketRaw:function(){return 0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1},readPacket:function(){var e;return 0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,e=this.input.readByte()):e=-1,this.validBits=0,e},flushPacket:function(){for(;0!=this.bytesInSeg||!this.lastSeg&&0!=this.next();)this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()},vorbisValidate:function(){for(var e=new haxe_io_Bytes(new ArrayBuffer(6)),t=0;t<6;){var a,r=t++;0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,a=this.input.readByte()):a=-1,this.validBits=0,e.b[r]=255&a}if("vorbis"!=e.toString())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"VorbisDecodeState.hx",lineNumber:300,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}))},firstPageValidate:function(){if(1!=this.segments.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"segmentCount",{fileName:"VorbisDecodeState.hx",lineNumber:307,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}));if(30!=this.segments[0])throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{fileName:"VorbisDecodeState.hx",lineNumber:310,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}))},startFirstDecode:function(){this.firstAudioPageOffset=this.inputPosition,this.firstDecode=!0},capturePattern:function(){var e,t,a;if(this.inputPosition+=1,79==this.input.readByte()?(this.inputPosition+=1,a=103!=this.input.readByte()):a=!0,a?t=!0:(this.inputPosition+=1,t=103!=this.input.readByte()),t?e=!0:(this.inputPosition+=1,e=83!=this.input.readByte()),e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"VorbisDecodeState.hx",lineNumber:323,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}))},skip:function(e){this.inputPosition+=e;for(var t=new Array(e),a=0,r=e;a<r;){t[a++]=this.input.readByte()}},prepHuffman:function(){if(this.validBits<=24)for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next()))return;if(this.bytesInSeg--,this.inputPosition+=1,this.acc=this.acc+(this.input.readByte()<<this.validBits),this.validBits+=8,!(this.validBits<=24))break}},decode:function(e){this.validBits<10&&this.prepHuffman();var t,a=e.fastHuffman[1023&this.acc];if(a>=0){var r=e.codewordLengths[a];this.acc=this.acc>>>r,this.validBits-=r,this.validBits<0?(this.validBits=0,t=-1):t=a}else t=this.decodeScalarRaw(e);return e.sparse&&(t=e.sortedValues[t]),t},decodeRaw:function(e){this.validBits<10&&this.prepHuffman();var t=e.fastHuffman[1023&this.acc];if(t>=0){var a=e.codewordLengths[t];return this.acc=this.acc>>>a,this.validBits-=a,this.validBits<0?(this.validBits=0,-1):t}return this.decodeScalarRaw(e)},isLastByte:function(){return 0==this.bytesInSeg&&this.lastSeg},finishDecodePacket:function(e,t,a){var r=a.left.start,i=!1,s=t>>1;if(this.firstDecode)this.currentLoc=-s,this.discardSamplesDeferred=t-a.right.end,i=!0,this.firstDecode=!1;else if(0!=this.discardSamplesDeferred)a.left.start+=this.discardSamplesDeferred,r=a.left.start,this.discardSamplesDeferred=0;else;if(this.lastSegWhich==this.endSegWithKnownLoc){if(i&&0!=(4&this.page.flag)){var n=this.knownLocForPacket-(t-a.right.end);if(n<this.currentLoc+a.right.end){var _=n<this.currentLoc?0:n-this.currentLoc;return _+=a.left.start,this.currentLoc+=_,{len:_,left:r,right:a.right.start}}}this.currentLoc=this.knownLocForPacket-(s-a.left.start),i=!0}return i&&(this.currentLoc+=a.right.start-a.left.start),{len:a.right.end,left:r,right:a.right.start}},readInt32:function(){return this.inputPosition+=4,this.input.readInt32()},readByte:function(){return this.inputPosition+=1,this.input.readByte()},read:function(e){this.inputPosition+=e;for(var t=new Array(e),a=0,r=e;a<r;){t[a++]=this.input.readByte()}return t},readBytes:function(e){return this.inputPosition+=e,this.input.read(e)},readString:function(e){return this.inputPosition+=e,this.input.readString(e)},getSampleNumber:function(e,t){var a=this.inputPosition,r=_$UInt_UInt_$Impl_$.gte(t,65536)&&_$UInt_UInt_$Impl_$.gte(t-65536,this.firstAudioPageOffset)?t-65536:this.firstAudioPageOffset;e(this.inputPosition=r);var i=0,s=!1,n=this.findPage(e,t);switch(n[1]){case 0:var _=n[3];i=n[2],s=_;break;case 1:throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"VorbisDecodeState.hx",lineNumber:518,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}))}var o=this.inputPosition;try{for(;!s;){e(this.inputPosition=i);var h=this.findPage(e,t);switch(h[1]){case 0:var l=h[3];i=h[2],s=l;break;case 1:throw"__break__"}r=o+1,o=this.inputPosition}}catch(e){if("__break__"!=e)throw e}e(this.inputPosition=o),this.inputPosition+=6;for(var c=new Array(6),u=0;u<6;){c[u++]=this.input.readByte()}this.inputPosition+=4;var d=this.input.readInt32();this.inputPosition+=4;var g=this.input.readInt32();if(-1==d&&-1==g||g>0)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"VorbisDecodeState.hx",lineNumber:552,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}));return this.pLast=new kha_audio2_ogg_vorbis_data_ProbedPage,this.pLast.pageStart=o,this.pLast.pageEnd=i,this.pLast.lastDecodedSample=d,this.pLast.firstDecodedSample=null,this.pLast.afterPreviousPageStart=r,e(this.inputPosition=a),d},forcePageResync:function(){this.nextSeg=-1},setInputOffset:function(e,t){e(this.inputPosition=t)},findPage:function(e,t){try{for(;;){if(this.inputPosition+=1,79==this.input.readByte()){var a,r,i=this.inputPosition;if(i-25>t)return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound;if(this.inputPosition+=1,103==this.input.readByte()?(this.inputPosition+=1,r=103!=this.input.readByte()):r=!0,r?a=!0:(this.inputPosition+=1,a=83!=this.input.readByte()),a)continue;var s=new Array(27);s[0]=79,s[1]=103,s[2]=103,s[3]=83;for(var n=4;n<27;){var _=n++;this.inputPosition+=1,s[_]=this.input.readByte()}if(0!=s[4]){e(this.inputPosition=i);continue}for(var o=s[22]+(s[23]<<8)+(s[24]<<16)+(s[25]<<24),h=22;h<26;){s[h++]=0}for(var l=0,c=0;c<27;){var u=c++;l=l<<8^kha_audio2_ogg_tools_Crc32.table[s[u]^l>>>24]}var d=0;try{for(var g=0,p=s[26];g<p;){g++;this.inputPosition+=1;var f=this.input.readByte();l=l<<8^kha_audio2_ogg_tools_Crc32.table[f^l>>>24],d+=f}for(var v=0,k=d;v<k;){v++;this.inputPosition+=1;var m=this.input.readByte();l=l<<8^kha_audio2_ogg_tools_Crc32.table[m^l>>>24]}}catch(e){if(e instanceof js__$Boot_HaxeError&&(e=e.val),js_Boot.__instanceof(e,haxe_io_Eof))return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound;throw e}if(l==o){var S=this.inputPosition;return e(this.inputPosition=i-1),kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.Found(S,0!=(4&s[5]))}}}}catch(e){if(e instanceof js__$Boot_HaxeError&&(e=e.val),js_Boot.__instanceof(e,haxe_io_Eof))return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound;throw e}},analyzePage:function(e,t){var a=new kha_audio2_ogg_vorbis_data_ProbedPage,r=new Array(255);a.pageStart=this.inputPosition,this.inputPosition+=27;for(var i=new Array(27),s=0;s<27;){i[s++]=this.input.readByte()}var n=i;if(79!=n[0]||103!=n[1]||103!=n[2]||83!=n[3])throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"VorbisDecodeState.hx",lineNumber:660,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"analyzePage"}));var _=n[26];this.inputPosition+=_;for(var o=new Array(_),h=0,l=_;h<l;){o[h++]=this.input.readByte()}for(var c=o,u=0,d=0,g=n[26];d<g;){u+=c[d++]}if(a.pageEnd=a.pageStart+27+n[26]+u,a.lastDecodedSample=n[6]+(n[7]<<8)+(n[8]<<16)+(n[9]<<16),0!=(4&n[5]))return a.firstDecodedSample=null,e(this.inputPosition=a.pageStart),a;for(var p=0,f=0==(1&n[5]),v=t.modes.length,k=0,m=n[26];k<m;){var S=k++;if(f){if(0==c[S])return e(this.inputPosition=a.pageStart),null;this.inputPosition+=1;var b=this.input.readByte();if(0!=(1&b))return e(this.inputPosition=a.pageStart),null;b>>=1;var y=v-1,x=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];if((b&=(1<<(y<16384?y<16?x[y]:y<512?5+x[y>>5]:10+x[y>>10]:y<16777216?y<524288?15+x[y>>15]:20+x[y>>20]:y<536870912?25+x[y>>25]:y<-2147483648?30+x[y>>30]:0))-1)>=v)return e(this.inputPosition=a.pageStart),null;r[p++]=t.modes[b].blockflag;var B=c[S]-1;this.inputPosition+=B;for(var w=new Array(B),I=0,T=B;I<T;){w[I++]=this.input.readByte()}}else{var E=c[S];this.inputPosition+=E;for(var C=new Array(E),P=0,A=E;P<A;){C[P++]=this.input.readByte()}}f=c[S]<255}var L=0;p>1&&(L+=r[p-1]?t.blocksize1:t.blocksize0);for(var $=p-2;$>=1;)r[--$]?r[$+1]?L+=t.blocksize1>>1:L+=(t.blocksize1-t.blocksize0>>2)+(t.blocksize0>>1):L+=t.blocksize0>>1,--$;return a.firstDecodedSample=a.lastDecodedSample-L,e(this.inputPosition=a.pageStart),a},decodeScalarRaw:function(e){if(this.prepHuffman(),null==e.sortedCodewords&&null==e.codewords)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"VorbisDecodeState.hx",lineNumber:787,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}));var t=e.codewordLengths,a=e.codewords,r=e.sortedCodewords;if(e.entries>8?null!=r:null!=a){for(var i=this.acc,s=(i=(-16711936&(i=(-252645136&(i=(-858993460&(i=(-1431655766&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8)>>>16|i<<16,n=0,_=e.sortedEntries;_>1;){var o=n+(_>>1);_$UInt_UInt_$Impl_$.gte(s,r[o])?(n=o,_-=_>>1):_>>=1}e.sparse||(n=e.sortedValues[n]);var h=t[n];return this.validBits>=h?(this.acc=this.acc>>>h,this.validBits-=h,n):(this.validBits=0,-1)}if(e.sparse)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"VorbisDecodeState.hx",lineNumber:829,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}));for(var l=0,c=e.entries;l<c;){var u=l++,d=t[u];if(255!=d&&a[u]==(this.acc&(1<<d)-1))return this.validBits>=d?(this.acc=this.acc>>>d,this.validBits-=d,u):(this.validBits=0,-1)}return this.error=new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"VorbisDecodeState.hx",lineNumber:846,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}),this.validBits=0,-1},__class__:kha_audio2_ogg_vorbis_VorbisDecodeState};var kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult=$hxClasses["kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult"]={__ename__:!0,__constructs__:["Found","NotFound"]};kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.Found=function(e,t){var a=["Found",0,e,t];return a.__enum__=kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult,a.toString=$estr,a},kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound=["NotFound",1],kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound.toString=$estr,kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound.__enum__=kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult;var kha_audio2_ogg_vorbis_VorbisDecoder=$hxClasses["kha.audio2.ogg.vorbis.VorbisDecoder"]=function(e,t){this.header=e,this.decodeState=t,this.totalSample=null,this.currentSample=0,this.previousLength=0;var a=e.channel,r=new Array(a);this.channelBuffers=r;var i=e.channel,s=new Array(i);this.previousWindow=s;var n=e.channel,_=new Array(n);this.finalY=_;for(var o=0,h=e.channel;o<h;){var l=o++,c=this.channelBuffers,u=e.blocksize1,d=new Array(u);c[l]=d;var g=this.previousWindow,p=e.blocksize1/2|0,f=new Array(p);g[l]=f,this.finalY[l]=[]}var v=new Array(2);this.a=v;var k=new Array(2);this.b=k;var m=new Array(2);this.c=m;var S=new Array(2);this.window=S;var b=new Array(2);this.bitReverseData=b,this.initBlocksize(0,e.blocksize0),this.initBlocksize(1,e.blocksize1)};kha_audio2_ogg_vorbis_VorbisDecoder.__name__=!0,kha_audio2_ogg_vorbis_VorbisDecoder.start=function(e){var t=new kha_audio2_ogg_vorbis_VorbisDecodeState(e),a=kha_audio2_ogg_vorbis_data_Header.read(t),r=new kha_audio2_ogg_vorbis_VorbisDecoder(a,t);return t.startFirstDecode(),r.pumpFirstFrame(),r},kha_audio2_ogg_vorbis_VorbisDecoder.prototype={previousWindow:null,previousLength:null,finalY:null,a:null,b:null,c:null,window:null,bitReverseData:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,header:null,currentSample:null,totalSample:null,decodeState:null,read:function(e,t,a,r,i){var s=this.header.sampleRate;if(0!=(_$UInt_UInt_$Impl_$.toFloat(r)%_$UInt_UInt_$Impl_$.toFloat(s)|0))throw new js__$Boot_HaxeError("Unsupported sampleRate : can't convert "+Std.string(_$UInt_UInt_$Impl_$.toFloat(this.header.sampleRate))+" to "+r);if(a%this.header.channel!=0)throw new js__$Boot_HaxeError("Unsupported channels : can't convert "+this.header.channel+" to "+a);var n=this.header.sampleRate,_=_$UInt_UInt_$Impl_$.toFloat(r)/_$UInt_UInt_$Impl_$.toFloat(n)|0,o=a/this.header.channel|0,h=0,l=Math.floor(t/_);null!=this.totalSample&&l>this.totalSample-this.currentSample&&(l=this.totalSample-this.currentSample);for(var c=0;h<l;){var u=this.channelBufferEnd-this.channelBufferStart;u>=l-h&&(u=l-h);for(var d=this.channelBufferStart,g=this.channelBufferStart+u;d<g;)for(var p=d++,f=0,v=_;f<v;){f++;for(var k=0,m=this.header.channel;k<m;)for(var S=k++,b=0,y=o;b<y;){b++;var x=this.channelBuffers[S][p];x>1?x=1:x<-1&&(x=-1),i&&(e[c]=x,++c)}}if(h+=u,this.channelBufferStart+=u,h==l||0==this.getFrameFloat())break}for(var B=h,w=l;B<w;){B++;for(var I=0,T=_;I<T;){I++;for(var E=0,C=this.header.channel;E<C;){E++;for(var P=0,A=o;P<A;){P++;i&&(e[c]=0,++c)}}}}return this.currentSample+=l,l*_},skipSamples:function(e){var t=0;for(null!=this.totalSample&&e>this.totalSample-this.currentSample&&(e=this.totalSample-this.currentSample);t<e;){var a=this.channelBufferEnd-this.channelBufferStart;if(a>=e-t&&(a=e-t),t+=a,this.channelBufferStart+=a,t==e||0==this.getFrameFloat())break}return this.currentSample+=e,e},setupSampleNumber:function(e,t){null==this.totalSample&&(this.totalSample=this.decodeState.getSampleNumber(e,t))},seek:function(e,t,a){if(this.currentSample!=a){if(null==this.totalSample&&(this.setupSampleNumber(e,t),0==this.totalSample))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"VorbisDecoder.hx",lineNumber:187,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));a<0&&(a=0);var r=this.decodeState.pFirst,i=this.decodeState.pLast;if(a>=i.lastDecodedSample&&(a=i.lastDecodedSample-1),a<r.lastDecodedSample)this.seekFrameFromPage(e,r.pageStart,0,a);else{for(var s=0;r.pageEnd<i.pageStart;){var n=r.pageEnd,_=i.afterPreviousPageStart,o=r.lastDecodedSample,h=i.lastDecodedSample;if(null==o||null==h)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"VorbisDecoder.hx",lineNumber:219,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));_$UInt_UInt_$Impl_$.gt(_,n+4e3)&&(_-=4e3);var l=n+Math.floor(_$UInt_UInt_$Impl_$.toFloat(_-n)/_$UInt_UInt_$Impl_$.toFloat(h-o)*(a-o));if(s>=4){var c=n+(_-n>>>1);s>=8?l=c:_$UInt_UInt_$Impl_$.gt(c,l)?l+=c-l>>>1:l=c+(l-c>>>1)}switch(++s,e(this.decodeState.inputPosition=l),this.decodeState.findPage(e,t)[1]){case 0:break;case 1:throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"VorbisDecoder.hx",lineNumber:249,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}var u=this.decodeState.analyzePage(e,this.header);if(null==u)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"VorbisDecoder.hx",lineNumber:255,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));u.afterPreviousPageStart=l,u.pageStart!=i.pageStart?a<u.lastDecodedSample?i=u:r=u:i=u}if(!(r.lastDecodedSample<=a&&a<i.lastDecodedSample))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"VorbisDecoder.hx",lineNumber:275,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));this.seekFrameFromPage(e,i.pageStart,r.lastDecodedSample,a)}}},seekFrameFromPage:function(e,t,a,r){var i=0,s=a;e(this.decodeState.inputPosition=t),this.decodeState.nextSeg=-1;for(var n=0,_=0,o=null,h=null;;){o=h,h=this.decodeState.clone(e);var l=this.decodeInitial();if(null==l){h=o;break}_=l.left.start,n=l.left.end;var c=0==i?n:_;if(r<s+l.right.start-c)break;for(var u=this.decodeState;0!=u.bytesInSeg||!u.lastSeg&&0!=u.next();)u.bytesInSeg--,u.inputPosition+=1,u.input.readByte();s+=l.right.start-c,++i}this.decodeState=h,e(this.decodeState.inputPosition),this.previousLength=0,this.pumpFirstFrame(),this.currentSample=s,this.skipSamples(r-s)},clone:function(e){var t=Type.createEmptyInstance(kha_audio2_ogg_vorbis_VorbisDecoder);t.currentSample=this.currentSample,t.totalSample=this.totalSample,t.previousLength=this.previousLength,t.channelBufferStart=this.channelBufferStart,t.channelBufferEnd=this.channelBufferEnd,t.a=this.a,t.b=this.b,t.c=this.c,t.window=this.window,t.bitReverseData=this.bitReverseData,t.header=this.header,t.decodeState=this.decodeState.clone(e);var a=this.header.channel,r=new Array(a);t.channelBuffers=r;var i=this.header.channel,s=new Array(i);t.previousWindow=s;var n=this.header.channel,_=new Array(n);t.finalY=_;for(var o=0,h=this.header.channel;o<h;){var l=o++;t.channelBuffers[l]=kha_audio2_ogg_vorbis_VorbisTools.copyVector(this.channelBuffers[l]),t.previousWindow[l]=kha_audio2_ogg_vorbis_VorbisTools.copyVector(this.previousWindow[l]),t.finalY[l]=Lambda.array(this.finalY[l])}return t},ensurePosition:function(e){e(this.decodeState.inputPosition)},getFrameFloat:function(){var e=this.decodePacket();if(null==e)return this.channelBufferStart=this.channelBufferEnd=0,0;var t=this.finishFrame(e);return this.channelBufferStart=e.left,this.channelBufferEnd=e.left+t,t},pumpFirstFrame:function(){this.finishFrame(this.decodePacket())},finishFrame:function(e){var t=e.len,a=e.right,r=e.left;if(0!=this.previousLength)for(var i=this.previousLength,s=this.getWindow(i),n=0,_=this.header.channel;n<_;)for(var o=n++,h=this.channelBuffers[o],l=this.previousWindow[o],c=0,u=i;c<u;){var d=c++;h[r+d]=h[r+d]*s[d]+l[d]*s[i-1-d]}var g=this.previousLength;this.previousLength=t-a;for(var p=0,f=this.header.channel;p<f;)for(var v=p++,k=this.previousWindow[v],m=this.channelBuffers[v],S=0,b=t-a;S<b;){var y=S++;k[y]=m[a+y]}return 0==g?0:(t<a&&(a=t),a-r)},getWindow:function(e){if((e<<=1)==this.header.blocksize0)return this.window[0];if(e==this.header.blocksize1)return this.window[1];throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"VorbisDecoder.hx",lineNumber:466,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"getWindow"}))},initBlocksize:function(e,t){var a=t>>1,r=t>>2,i=t>>3,s=this.a,n=new Array(a);s[e]=n;var _=this.b,o=new Array(a);_[e]=o;var h=this.c,l=new Array(r);h[e]=l;var c=this.window,u=new Array(a);c[e]=u;var d=this.bitReverseData,g=new Array(i);d[e]=g,kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors(t,this.a[e],this.b[e],this.c[e]),kha_audio2_ogg_vorbis_VorbisTools.computeWindow(t,this.window[e]),kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse(t,this.bitReverseData[e])},inverseMdct:function(e,t,a){for(var r=a?1:0,i=this.a[r],s=this.b[r],n=this.c[r],_=this.bitReverseData[r],o=t>>1,h=t>>2,l=t>>3,c=new Array(o),u=o-2,d=0,g=0,p=o;g!=p;)c[u+1]=e[g]*i[d]-e[g+2]*i[d+1],c[u]=e[g]*i[d+1]+e[g+2]*i[d],u-=2,d+=2,g+=4;for(g=o-3;u>=0;)c[u+1]=-e[g+2]*i[d]- -e[g]*i[d+1],c[u]=-e[g+2]*i[d+1]+-e[g]*i[d],u-=2,d+=2,g-=4;for(var f=e,v=c,k=o-8,m=h,S=0,b=h,y=0;k>=0;){var x=v[m+1]-v[S+1],B=v[m]-v[S];f[b+1]=v[m+1]+v[S+1],f[b]=v[m]+v[S],f[y+1]=x*i[k+4]-B*i[k+5],f[y]=B*i[k+4]+x*i[k+5],x=v[m+3]-v[S+3],B=v[m+2]-v[S+2],f[b+3]=v[m+3]+v[S+3],f[b+2]=v[m+2]+v[S+2],f[y+3]=x*i[k]-B*i[k+1],f[y+2]=B*i[k]+x*i[k+1],k-=8,b+=4,y+=4,m+=4,S+=4}for(var w=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],I=(t<16384?t<16?w[t]:t<512?5+w[t>>5]:10+w[t>>10]:t<16777216?t<524288?15+w[t>>15]:20+w[t>>20]:t<536870912?25+w[t>>25]:t<-2147483648?30+w[t>>30]:0)-1,T=o-1-0*h,E=T,C=T+-(t>>3),P=0,A=1+(t>>4>>2);--A>0;){var L=f[E]-f[C],$=f[E+-1]-f[C+-1],R=E,F=f;F[R]=F[R]+f[C];var N=E+-1,V=f;V[N]=V[N]+f[C+-1],f[C]=L*i[P]-$*i[P+1],f[C+-1]=$*i[P]+L*i[P+1],P+=8,L=f[E+-2]-f[C+-2],$=f[E+-3]-f[C+-3];var M=E+-2,D=f;D[M]=D[M]+f[C+-2];var O=E+-3,U=f;U[O]=U[O]+f[C+-3],f[C+-2]=L*i[P]-$*i[P+1],f[C+-3]=$*i[P]+L*i[P+1],P+=8,L=f[E+-4]-f[C+-4],$=f[E+-5]-f[C+-5];var H=E+-4,G=f;G[H]=G[H]+f[C+-4];var W=E+-5,z=f;z[W]=z[W]+f[C+-5],f[C+-4]=L*i[P]-$*i[P+1],f[C+-5]=$*i[P]+L*i[P+1],P+=8,L=f[E+-6]-f[C+-6],$=f[E+-7]-f[C+-7];var j=E+-6,K=f;K[j]=K[j]+f[C+-6];var Y=E+-7,X=f;X[Y]=X[Y]+f[C+-7],f[C+-6]=L*i[P]-$*i[P+1],f[C+-7]=$*i[P]+L*i[P+1],P+=8,E-=8,C-=8}for(var Z=o-1-h,Q=Z,q=Z+-(t>>3),J=0,ee=1+(t>>4>>2);--ee>0;){var te=f[Q]-f[q],ae=f[Q+-1]-f[q+-1],re=Q,ie=f;ie[re]=ie[re]+f[q];var se=Q+-1,ne=f;ne[se]=ne[se]+f[q+-1],f[q]=te*i[J]-ae*i[J+1],f[q+-1]=ae*i[J]+te*i[J+1],J+=8,te=f[Q+-2]-f[q+-2],ae=f[Q+-3]-f[q+-3];var _e=Q+-2,oe=f;oe[_e]=oe[_e]+f[q+-2];var he=Q+-3,le=f;le[he]=le[he]+f[q+-3],f[q+-2]=te*i[J]-ae*i[J+1],f[q+-3]=ae*i[J]+te*i[J+1],J+=8,te=f[Q+-4]-f[q+-4],ae=f[Q+-5]-f[q+-5];var ce=Q+-4,ue=f;ue[ce]=ue[ce]+f[q+-4];var de=Q+-5,ge=f;ge[de]=ge[de]+f[q+-5],f[q+-4]=te*i[J]-ae*i[J+1],f[q+-5]=ae*i[J]+te*i[J+1],J+=8,te=f[Q+-6]-f[q+-6],ae=f[Q+-7]-f[q+-7];var pe=Q+-6,fe=f;fe[pe]=fe[pe]+f[q+-6];var ve=Q+-7,ke=f;ke[ve]=ke[ve]+f[q+-7],f[q+-6]=te*i[J]-ae*i[J+1],f[q+-7]=ae*i[J]+te*i[J+1],J+=8,Q-=8,q-=8}for(var me=o-1-0*l,Se=0,be=me,ye=me+-(t>>4),xe=1+(t>>5>>2);--xe>0;){var Be=f[be]-f[ye],we=f[be+-1]-f[ye+-1],Ie=be,Te=f;Te[Ie]=Te[Ie]+f[ye];var Ee=be+-1,Ce=f;Ce[Ee]=Ce[Ee]+f[ye+-1],f[ye]=Be*i[Se]-we*i[Se+1],f[ye+-1]=we*i[Se]+Be*i[Se+1],Se+=16,Be=f[be+-2]-f[ye+-2],we=f[be+-3]-f[ye+-3];var Pe=be+-2,Ae=f;Ae[Pe]=Ae[Pe]+f[ye+-2];var Le=be+-3,$e=f;$e[Le]=$e[Le]+f[ye+-3],f[ye+-2]=Be*i[Se]-we*i[Se+1],f[ye+-3]=we*i[Se]+Be*i[Se+1],Se+=16,Be=f[be+-4]-f[ye+-4],we=f[be+-5]-f[ye+-5];var Re=be+-4,Fe=f;Fe[Re]=Fe[Re]+f[ye+-4];var Ne=be+-5,Ve=f;Ve[Ne]=Ve[Ne]+f[ye+-5],f[ye+-4]=Be*i[Se]-we*i[Se+1],f[ye+-5]=we*i[Se]+Be*i[Se+1],Se+=16,Be=f[be+-6]-f[ye+-6],we=f[be+-7]-f[ye+-7];var Me=be+-6,De=f;De[Me]=De[Me]+f[ye+-6];var Oe=be+-7,Ue=f;Ue[Oe]=Ue[Oe]+f[ye+-7],f[ye+-6]=Be*i[Se]-we*i[Se+1],f[ye+-7]=we*i[Se]+Be*i[Se+1],be-=8,ye-=8,Se+=16}for(var He=o-1-l,Ge=0,We=He,ze=He+-(t>>4),je=1+(t>>5>>2);--je>0;){var Ke=f[We]-f[ze],Ye=f[We+-1]-f[ze+-1],Xe=We,Ze=f;Ze[Xe]=Ze[Xe]+f[ze];var Qe=We+-1,qe=f;qe[Qe]=qe[Qe]+f[ze+-1],f[ze]=Ke*i[Ge]-Ye*i[Ge+1],f[ze+-1]=Ye*i[Ge]+Ke*i[Ge+1],Ge+=16,Ke=f[We+-2]-f[ze+-2],Ye=f[We+-3]-f[ze+-3];var Je=We+-2,et=f;et[Je]=et[Je]+f[ze+-2];var tt=We+-3,at=f;at[tt]=at[tt]+f[ze+-3],f[ze+-2]=Ke*i[Ge]-Ye*i[Ge+1],f[ze+-3]=Ye*i[Ge]+Ke*i[Ge+1],Ge+=16,Ke=f[We+-4]-f[ze+-4],Ye=f[We+-5]-f[ze+-5];var rt=We+-4,it=f;it[rt]=it[rt]+f[ze+-4];var st=We+-5,nt=f;nt[st]=nt[st]+f[ze+-5],f[ze+-4]=Ke*i[Ge]-Ye*i[Ge+1],f[ze+-5]=Ye*i[Ge]+Ke*i[Ge+1],Ge+=16,Ke=f[We+-6]-f[ze+-6],Ye=f[We+-7]-f[ze+-7];var _t=We+-6,ot=f;ot[_t]=ot[_t]+f[ze+-6];var ht=We+-7,lt=f;lt[ht]=lt[ht]+f[ze+-7],f[ze+-6]=Ke*i[Ge]-Ye*i[Ge+1],f[ze+-7]=Ye*i[Ge]+Ke*i[Ge+1],We-=8,ze-=8,Ge+=16}for(var ct=o-1-2*l,ut=0,dt=ct,gt=ct+-(t>>4),pt=1+(t>>5>>2);--pt>0;){var ft=f[dt]-f[gt],vt=f[dt+-1]-f[gt+-1],kt=dt,mt=f;mt[kt]=mt[kt]+f[gt];var St=dt+-1,bt=f;bt[St]=bt[St]+f[gt+-1],f[gt]=ft*i[ut]-vt*i[ut+1],f[gt+-1]=vt*i[ut]+ft*i[ut+1],ut+=16,ft=f[dt+-2]-f[gt+-2],vt=f[dt+-3]-f[gt+-3];var yt=dt+-2,xt=f;xt[yt]=xt[yt]+f[gt+-2];var Bt=dt+-3,wt=f;wt[Bt]=wt[Bt]+f[gt+-3],f[gt+-2]=ft*i[ut]-vt*i[ut+1],f[gt+-3]=vt*i[ut]+ft*i[ut+1],ut+=16,ft=f[dt+-4]-f[gt+-4],vt=f[dt+-5]-f[gt+-5];var It=dt+-4,Tt=f;Tt[It]=Tt[It]+f[gt+-4];var Et=dt+-5,Ct=f;Ct[Et]=Ct[Et]+f[gt+-5],f[gt+-4]=ft*i[ut]-vt*i[ut+1],f[gt+-5]=vt*i[ut]+ft*i[ut+1],ut+=16,ft=f[dt+-6]-f[gt+-6],vt=f[dt+-7]-f[gt+-7];var Pt=dt+-6,At=f;At[Pt]=At[Pt]+f[gt+-6];var Lt=dt+-7,$t=f;$t[Lt]=$t[Lt]+f[gt+-7],f[gt+-6]=ft*i[ut]-vt*i[ut+1],f[gt+-7]=vt*i[ut]+ft*i[ut+1],dt-=8,gt-=8,ut+=16}for(var Rt=o-1-3*l,Ft=0,Nt=Rt,Vt=Rt+-(t>>4),Mt=1+(t>>5>>2);--Mt>0;){var Dt=f[Nt]-f[Vt],Ot=f[Nt+-1]-f[Vt+-1],Ut=Nt,Ht=f;Ht[Ut]=Ht[Ut]+f[Vt];var Gt=Nt+-1,Wt=f;Wt[Gt]=Wt[Gt]+f[Vt+-1],f[Vt]=Dt*i[Ft]-Ot*i[Ft+1],f[Vt+-1]=Ot*i[Ft]+Dt*i[Ft+1],Ft+=16,Dt=f[Nt+-2]-f[Vt+-2],Ot=f[Nt+-3]-f[Vt+-3];var zt=Nt+-2,jt=f;jt[zt]=jt[zt]+f[Vt+-2];var Kt=Nt+-3,Yt=f;Yt[Kt]=Yt[Kt]+f[Vt+-3],f[Vt+-2]=Dt*i[Ft]-Ot*i[Ft+1],f[Vt+-3]=Ot*i[Ft]+Dt*i[Ft+1],Ft+=16,Dt=f[Nt+-4]-f[Vt+-4],Ot=f[Nt+-5]-f[Vt+-5];var Xt=Nt+-4,Zt=f;Zt[Xt]=Zt[Xt]+f[Vt+-4];var Qt=Nt+-5,qt=f;qt[Qt]=qt[Qt]+f[Vt+-5],f[Vt+-4]=Dt*i[Ft]-Ot*i[Ft+1],f[Vt+-5]=Ot*i[Ft]+Dt*i[Ft+1],Ft+=16,Dt=f[Nt+-6]-f[Vt+-6],Ot=f[Nt+-7]-f[Vt+-7];var Jt=Nt+-6,ea=f;ea[Jt]=ea[Jt]+f[Vt+-6];var ta=Nt+-7,aa=f;aa[ta]=aa[ta]+f[Vt+-7],f[Vt+-6]=Dt*i[Ft]-Ot*i[Ft+1],f[Vt+-7]=Ot*i[Ft]+Dt*i[Ft+1],Nt-=8,Vt-=8,Ft+=16}for(var ra=2,ia=I-3>>1;ra<ia;)for(var sa=ra++,na=t>>sa+2,_a=na>>1,oa=0,ha=1<<sa+1;oa<ha;)for(var la=o-1-na*oa++,ca=1<<sa+3,ua=0,da=la,ga=la+-_a,pa=1+(t>>sa+4>>2);--pa>0;){var fa=f[da]-f[ga],va=f[da+-1]-f[ga+-1],ka=da,ma=f;ma[ka]=ma[ka]+f[ga];var Sa=da+-1,ba=f;ba[Sa]=ba[Sa]+f[ga+-1],f[ga]=fa*i[ua]-va*i[ua+1],f[ga+-1]=va*i[ua]+fa*i[ua+1],ua+=ca,fa=f[da+-2]-f[ga+-2],va=f[da+-3]-f[ga+-3];var ya=da+-2,xa=f;xa[ya]=xa[ya]+f[ga+-2];var Ba=da+-3,wa=f;wa[Ba]=wa[Ba]+f[ga+-3],f[ga+-2]=fa*i[ua]-va*i[ua+1],f[ga+-3]=va*i[ua]+fa*i[ua+1],ua+=ca,fa=f[da+-4]-f[ga+-4],va=f[da+-5]-f[ga+-5];var Ia=da+-4,Ta=f;Ta[Ia]=Ta[Ia]+f[ga+-4];var Ea=da+-5,Ca=f;Ca[Ea]=Ca[Ea]+f[ga+-5],f[ga+-4]=fa*i[ua]-va*i[ua+1],f[ga+-5]=va*i[ua]+fa*i[ua+1],ua+=ca,fa=f[da+-6]-f[ga+-6],va=f[da+-7]-f[ga+-7];var Pa=da+-6,Aa=f;Aa[Pa]=Aa[Pa]+f[ga+-6];var La=da+-7,$a=f;$a[La]=$a[La]+f[ga+-7],f[ga+-6]=fa*i[ua]-va*i[ua+1],f[ga+-7]=va*i[ua]+fa*i[ua+1],da-=8,ga-=8,ua+=ca}for(var Ra=I-3>>1,Fa=I-6;Ra<Fa;)for(var Na=Ra++,Va=t>>Na+2,Ma=1<<Na+3,Da=Va>>1,Oa=1<<Na+1,Ua=0,Ha=o-1,Ga=(t>>Na+6)+1;--Ga>0;){for(var Wa=i[Ua],za=i[Ua+1],ja=i[Ua+Ma],Ka=i[Ua+Ma+1],Ya=i[Ua+2*Ma],Xa=i[Ua+2*Ma+1],Za=i[Ua+3*Ma],Qa=i[Ua+3*Ma+1],qa=Ha,Ja=Ha+-Da,er=Oa+1;--er>0;){var tr=f[qa]-f[Ja],ar=f[qa+-1]-f[Ja+-1];f[qa]=f[qa]+f[Ja],f[qa+-1]=f[qa+-1]+f[Ja+-1],f[Ja]=tr*Wa-ar*za,f[Ja+-1]=ar*Wa+tr*za,tr=f[qa+-2]-f[Ja+-2],ar=f[qa+-3]-f[Ja+-3],f[qa+-2]=f[qa+-2]+f[Ja+-2],f[qa+-3]=f[qa+-3]+f[Ja+-3],f[Ja+-2]=tr*ja-ar*Ka,f[Ja+-3]=ar*ja+tr*Ka,tr=f[qa+-4]-f[Ja+-4],ar=f[qa+-5]-f[Ja+-5],f[qa+-4]=f[qa+-4]+f[Ja+-4],f[qa+-5]=f[qa+-5]+f[Ja+-5],f[Ja+-4]=tr*Ya-ar*Xa,f[Ja+-5]=ar*Ya+tr*Xa,tr=f[qa+-6]-f[Ja+-6],ar=f[qa+-7]-f[Ja+-7],f[qa+-6]=f[qa+-6]+f[Ja+-6],f[qa+-7]=f[qa+-7]+f[Ja+-7],f[Ja+-6]=tr*Za-ar*Qa,f[Ja+-7]=ar*Za+tr*Qa,qa-=Va,Ja-=Va}Ua+=4*Ma,Ha-=8}for(var rr=o-1,ir=i[t>>3],sr=rr,nr=rr-16*(t>>5);sr>nr;){var _r=f[sr],or=f[sr+-8];f[sr+-8]=_r-or,f[sr]=_r+or,_r=f[sr+-1],or=f[sr+-9],f[sr+-9]=_r-or,f[sr+-1]=_r+or;var hr=(_r=f[sr+-2])-(or=f[sr+-10]);f[sr+-2]=_r+or;var lr=(_r=f[sr+-3])-(or=f[sr+-11]);f[sr+-3]=_r+or,f[sr+-10]=(hr+lr)*ir,f[sr+-11]=(lr-hr)*ir,_r=f[sr+-4],hr=(or=f[sr+-12])-_r,f[sr+-4]=_r+or,lr=(_r=f[sr+-5])-(or=f[sr+-13]),f[sr+-5]=_r+or,f[sr+-12]=lr,f[sr+-13]=hr,_r=f[sr+-6],hr=(or=f[sr+-14])-_r,f[sr+-6]=_r+or,lr=(_r=f[sr+-7])-(or=f[sr+-15]),f[sr+-7]=_r+or,f[sr+-14]=(hr+lr)*ir,f[sr+-15]=(hr-lr)*ir;var cr=f[sr],ur=f[sr+-4],dr=cr-ur,gr=cr+ur,pr=(cr=f[sr+-2])+(ur=f[sr+-6]),fr=cr-ur;f[sr]=gr+pr,f[sr+-2]=gr-pr;var vr=f[sr+-3]-f[sr+-7];f[sr+-4]=dr+vr,f[sr+-6]=dr-vr;var kr=(cr=f[sr+-1])-(ur=f[sr+-5]),mr=cr+ur,Sr=f[sr+-3]+f[sr+-7];f[sr+-1]=mr+Sr,f[sr+-3]=mr-Sr,f[sr+-5]=kr-fr,f[sr+-7]=kr+fr;var br=sr-8,yr=f[br],xr=f[br+-4],Br=yr-xr,wr=yr+xr,Ir=(yr=f[br+-2])+(xr=f[br+-6]),Tr=yr-xr;f[br]=wr+Ir,f[br+-2]=wr-Ir;var Er=f[br+-3]-f[br+-7];f[br+-4]=Br+Er,f[br+-6]=Br-Er;var Cr=(yr=f[br+-1])-(xr=f[br+-5]),Pr=yr+xr,Ar=f[br+-3]+f[br+-7];f[br+-1]=Pr+Ar,f[br+-3]=Pr-Ar,f[br+-5]=Cr-Tr,f[br+-7]=Cr+Tr,sr-=16}for(var Lr=0,$r=h-4,Rr=o-4;$r>=0;){var Fr=_[Lr];v[Rr+3]=f[Fr],v[Rr+2]=f[Fr+1],v[$r+3]=f[Fr+2],v[$r+2]=f[Fr+3],Fr=_[Lr+1],v[Rr+1]=f[Fr],v[Rr]=f[Fr+1],v[$r+1]=f[Fr+2],v[$r]=f[Fr+3],$r-=4,Rr-=4,Lr+=2}for(var Nr=0,Vr=0,Mr=o-4;Vr<Mr;){var Dr=v[Vr]-v[Mr+2],Or=v[Vr+1]+v[Mr+3],Ur=n[Nr+1]*Dr+n[Nr]*Or,Hr=n[Nr+1]*Or-n[Nr]*Dr,Gr=v[Vr]+v[Mr+2],Wr=v[Vr+1]-v[Mr+3];v[Vr]=Gr+Ur,v[Vr+1]=Wr+Hr,v[Mr+2]=Gr-Ur,v[Mr+3]=Hr-Wr,Dr=v[Vr+2]-v[Mr],Or=v[Vr+3]+v[Mr+1],Ur=n[Nr+3]*Dr+n[Nr+2]*Or,Hr=n[Nr+3]*Or-n[Nr+2]*Dr,Gr=v[Vr+2]+v[Mr],Wr=v[Vr+3]-v[Mr+1],v[Vr+2]=Gr+Ur,v[Vr+3]=Wr+Hr,v[Mr]=Gr-Ur,v[Mr+1]=Hr-Wr,Nr+=4,Vr+=4,Mr-=4}for(var zr=o-8,jr=o-8,Kr=0,Yr=o-4,Xr=o,Zr=t-4;jr>=0;){var Qr=c[jr+6]*s[zr+7]-c[jr+7]*s[zr+6],qr=-c[jr+6]*s[zr+6]-c[jr+7]*s[zr+7];e[Kr]=Qr,e[Yr+3]=-Qr,e[Xr]=qr,e[Zr+3]=qr;var Jr=c[jr+4]*s[zr+5]-c[jr+5]*s[zr+4],ei=-c[jr+4]*s[zr+4]-c[jr+5]*s[zr+5];e[Kr+1]=Jr,e[Yr+2]=-Jr,e[Xr+1]=ei,e[Zr+2]=ei,Qr=c[jr+2]*s[zr+3]-c[jr+3]*s[zr+2],qr=-c[jr+2]*s[zr+2]-c[jr+3]*s[zr+3],e[Kr+2]=Qr,e[Yr+1]=-Qr,e[Xr+2]=qr,e[Zr+1]=qr,Jr=c[jr]*s[zr+1]-c[jr+1]*s[zr],ei=-c[jr]*s[zr]-c[jr+1]*s[zr+1],e[Kr+3]=Jr,e[Yr]=-Jr,e[Xr+3]=ei,e[Zr]=ei,zr-=8,jr-=8,Kr+=4,Xr+=4,Yr-=4,Zr-=4}},decodePacket:function(){var e=this.decodeInitial();return null==e?null:this.decodePacketRest(e)},decodeInitial:function(){for(this.channelBufferStart=this.channelBufferEnd=0;;){if(!this.decodeState.maybeStartPacket())return null;var e,t=this.decodeState;if(t.validBits<0)e=0;else if(t.validBits<1){for(0==t.validBits&&(t.acc=0);;){if(0==t.bytesInSeg&&(t.lastSeg||0==t.next())){t.validBits=-1;break}if(t.bytesInSeg--,t.inputPosition+=1,t.acc=t.acc+(t.input.readByte()<<t.validBits),t.validBits+=8,!(t.validBits<1))break}if(t.validBits<0)e=0;else{var a=1&t.acc;t.acc=t.acc>>>1,t.validBits-=1,e=a}}else{var r=1&t.acc;t.acc=t.acc>>>1,t.validBits-=1,e=r}if(0==e)break;for(;;){var i,s=this.decodeState;if(0!=s.bytesInSeg||!s.lastSeg&&0!=s.next()?(s.bytesInSeg--,s.inputPosition+=1,i=s.input.readByte()):i=-1,s.validBits=0,-1==i)break}}var n,_=this.decodeState,o=this.header.modes.length-1,h=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],l=o<16384?o<16?h[o]:o<512?5+h[o>>5]:10+h[o>>10]:o<16777216?o<524288?15+h[o>>15]:20+h[o>>20]:o<536870912?25+h[o>>25]:o<-2147483648?30+h[o>>30]:0;if(_.validBits<0)n=0;else if(_.validBits<l)if(l>24)n=_.readBits(24)+(_.readBits(l-24)<<24);else{for(0==_.validBits&&(_.acc=0);;){if(0==_.bytesInSeg&&(_.lastSeg||0==_.next())){_.validBits=-1;break}if(_.bytesInSeg--,_.inputPosition+=1,_.acc=_.acc+(_.input.readByte()<<_.validBits),_.validBits+=8,!(_.validBits<l))break}if(_.validBits<0)n=0;else{var c=_.acc&(1<<l)-1;_.acc=_.acc>>>l,_.validBits-=l,n=c}}else{var u=_.acc&(1<<l)-1;_.acc=_.acc>>>l,_.validBits-=l,n=u}if(-1==n||n>=this.header.modes.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"VorbisDecoder.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodeInitial"}));var d,g,p,f=this.header.modes[n];if(f.blockflag){d=this.header.blocksize1;var v=this.decodeState;if(v.validBits<0)g=0;else if(v.validBits<1){for(0==v.validBits&&(v.acc=0);;){if(0==v.bytesInSeg&&(v.lastSeg||0==v.next())){v.validBits=-1;break}if(v.bytesInSeg--,v.inputPosition+=1,v.acc=v.acc+(v.input.readByte()<<v.validBits),v.validBits+=8,!(v.validBits<1))break}if(v.validBits<0)g=0;else{var k=1&v.acc;v.acc=v.acc>>>1,v.validBits-=1,g=k}}else{var m=1&v.acc;v.acc=v.acc>>>1,v.validBits-=1,g=m}var S=this.decodeState;if(S.validBits<0)p=0;else if(S.validBits<1){for(0==S.validBits&&(S.acc=0);;){if(0==S.bytesInSeg&&(S.lastSeg||0==S.next())){S.validBits=-1;break}if(S.bytesInSeg--,S.inputPosition+=1,S.acc=S.acc+(S.input.readByte()<<S.validBits),S.validBits+=8,!(S.validBits<1))break}if(S.validBits<0)p=0;else{var b=1&S.acc;S.acc=S.acc>>>1,S.validBits-=1,p=b}}else{var y=1&S.acc;S.acc=S.acc>>>1,S.validBits-=1,p=y}}else g=p=0,d=this.header.blocksize0;var x=d>>1;return{mode:n,left:f.blockflag&&0==g?{start:d-this.header.blocksize0>>2,end:d+this.header.blocksize0>>2}:{start:0,end:x},right:f.blockflag&&0==p?{start:3*d-this.header.blocksize0>>2,end:3*d+this.header.blocksize0>>2}:{start:x,end:d}}},decodePacketRest:function(e){for(var t=this.header.modes[e.mode],a=new Array(256),r=new Array(256),i=t.blockflag?this.header.blocksize1:this.header.blocksize0,s=this.header.mapping[t.mapping],n=i>>1,_=[256,128,86,64],o=this.header.codebooks,h=0,l=this.header.channel;h<l;){var c=h++,u=s.chan[c].mux;a[c]=!1;var d=this.header.floorConfig[s.submapFloor[u]];if(0==d.type)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"VorbisDecoder.hx",lineNumber:581,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodePacketRest"}));var g,p=d.floor1,f=this.decodeState;if(f.validBits<0)g=0;else if(f.validBits<1){for(0==f.validBits&&(f.acc=0);;){if(0==f.bytesInSeg&&(f.lastSeg||0==f.next())){f.validBits=-1;break}if(f.bytesInSeg--,f.inputPosition+=1,f.acc=f.acc+(f.input.readByte()<<f.validBits),f.validBits+=8,!(f.validBits<1))break}if(f.validBits<0)g=0;else{var v=1&f.acc;f.acc=f.acc>>>1,f.validBits-=1,g=v}}else{var k=1&f.acc;f.acc=f.acc>>>1,f.validBits-=1,g=k}if(0!=g){var m=[],S=new Array(256),b=_[p.floor1Multiplier-1],y=2;m=this.finalY[c];var x,B=this.decodeState,w=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],I=(b<16384?b<16?w[b]:b<512?5+w[b>>5]:10+w[b>>10]:b<16777216?b<524288?15+w[b>>15]:20+w[b>>20]:b<536870912?25+w[b>>25]:b<-2147483648?30+w[b>>30]:0)-1;if(B.validBits<0)x=0;else if(B.validBits<I)if(I>24)x=B.readBits(24)+(B.readBits(I-24)<<24);else{for(0==B.validBits&&(B.acc=0);;){if(0==B.bytesInSeg&&(B.lastSeg||0==B.next())){B.validBits=-1;break}if(B.bytesInSeg--,B.inputPosition+=1,B.acc=B.acc+(B.input.readByte()<<B.validBits),B.validBits+=8,!(B.validBits<I))break}if(B.validBits<0)x=0;else{var T=B.acc&(1<<I)-1;B.acc=B.acc>>>I,B.validBits-=I,x=T}}else{var E=B.acc&(1<<I)-1;B.acc=B.acc>>>I,B.validBits-=I,x=E}m[0]=x;var C,P=this.decodeState,A=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],L=(b<16384?b<16?A[b]:b<512?5+A[b>>5]:10+A[b>>10]:b<16777216?b<524288?15+A[b>>15]:20+A[b>>20]:b<536870912?25+A[b>>25]:b<-2147483648?30+A[b>>30]:0)-1;if(P.validBits<0)C=0;else if(P.validBits<L)if(L>24)C=P.readBits(24)+(P.readBits(L-24)<<24);else{for(0==P.validBits&&(P.acc=0);;){if(0==P.bytesInSeg&&(P.lastSeg||0==P.next())){P.validBits=-1;break}if(P.bytesInSeg--,P.inputPosition+=1,P.acc=P.acc+(P.input.readByte()<<P.validBits),P.validBits+=8,!(P.validBits<L))break}if(P.validBits<0)C=0;else{var $=P.acc&(1<<L)-1;P.acc=P.acc>>>L,P.validBits-=L,C=$}}else{var R=P.acc&(1<<L)-1;P.acc=P.acc>>>L,P.validBits-=L,C=R}m[1]=C;for(var F=0,N=p.partitions;F<N;){var V=F++,M=p.partitionClassList[V],D=p.classDimensions[M],O=p.classSubclasses[M],U=(1<<O)-1,H=0;if(0!=O){var G=o[p.classMasterbooks[M]],W=this.decodeState;W.validBits<10&&W.prepHuffman();var z,j=G.fastHuffman[1023&W.acc];if(j>=0){var K=G.codewordLengths[j];W.acc=W.acc>>>K,W.validBits-=K,W.validBits<0?(W.validBits=0,z=-1):z=j}else z=W.decodeScalarRaw(G);G.sparse&&(z=G.sortedValues[z]),H=z}for(var Y=p.subclassBooks[M],X=0,Z=D;X<Z;){X++;var Q=Y[H&U];H>>=O;var q,J=y++;if(Q>=0){var ee=this.decodeState,te=o[Q];ee.validBits<10&&ee.prepHuffman();var ae,re=te.fastHuffman[1023&ee.acc];if(re>=0){var ie=te.codewordLengths[re];ee.acc=ee.acc>>>ie,ee.validBits-=ie,ee.validBits<0?(ee.validBits=0,ae=-1):ae=re}else ae=ee.decodeScalarRaw(te);te.sparse&&(ae=te.sortedValues[ae]),q=ae}else q=0;m[J]=q}}if(-1==this.decodeState.validBits){a[c]=!0;continue}S[0]=S[1]=!0;for(var se=p.neighbors,ne=p.xlist,_e=2,oe=p.values;_e<oe;){var he=_e++,le=se[he][0],ce=se[he][1],ue=ne[le],de=m[le],ge=m[ce]-de,pe=ne[ce]-ue,fe=Math.abs(ge)*(ne[he]-ue)/pe|0,ve=ge<0?de-fe:de+fe,ke=m[he],me=b-ve,Se=me<ve?2*me:2*ve;0!=ke?(S[le]=S[ce]=!0,S[he]=!0,m[he]=ke>=Se?me>ve?ke-ve+ve:ve-ke+me-1:0!=(1&ke)?ve-(ke+1>>1):ve+(ke>>1)):(S[he]=!1,m[he]=ve)}for(var be=0,ye=p.values;be<ye;){var xe=be++;S[xe]||(m[xe]=-1)}}else a[c]=!0}for(var Be=0,we=this.header.channel;Be<we;){var Ie=Be++;r[Ie]=a[Ie]}for(var Te=0,Ee=s.couplingSteps;Te<Ee;){var Ce=Te++;a[s.chan[Ce].magnitude]&&a[s.chan[Ce].angle]||(a[s.chan[Ce].magnitude]=a[s.chan[Ce].angle]=!1)}for(var Pe=0,Ae=s.submaps;Pe<Ae;){for(var Le=Pe++,$e=this.header.channel,Re=new Array($e),Fe=new Array(256),Ne=0,Ve=0,Me=this.header.channel;Ve<Me;){var De=Ve++;s.chan[De].mux==Le&&(a[De]?(Fe[Ne]=!0,Re[Ne]=null):(Fe[Ne]=!1,Re[Ne]=this.channelBuffers[De]),++Ne)}var Oe=s.submapResidue[Le];this.header.residueConfig[Oe].decode(this.decodeState,this.header,Re,Ne,n,Fe,this.channelBuffers)}for(var Ue=s.couplingSteps,He=i>>1;--Ue>=0;)for(var Ge=this.channelBuffers[s.chan[Ue].magnitude],We=this.channelBuffers[s.chan[Ue].angle],ze=0,je=He;ze<je;){var Ke,Ye,Xe=ze++;Ge[Xe]>0?We[Xe]>0?(Ye=Ge[Xe],Ke=Ge[Xe]-We[Xe]):(Ke=Ge[Xe],Ye=Ge[Xe]+We[Xe]):We[Xe]>0?(Ye=Ge[Xe],Ke=Ge[Xe]+We[Xe]):(Ke=Ge[Xe],Ye=Ge[Xe]-We[Xe]),Ge[Xe]=Ye,We[Xe]=Ke}for(var Ze=0,Qe=this.header.channel;Ze<Qe;){var qe=Ze++;if(r[qe])for(var Je=0,et=He;Je<et;){var tt=Je++;this.channelBuffers[qe][tt]=0}else s.doFloor(this.header.floorConfig,qe,i,this.channelBuffers[qe],this.finalY[qe],null)}for(var at=0,rt=this.header.channel;at<rt;){var it=at++;this.inverseMdct(this.channelBuffers[it],i,t.blockflag)}for(var st=this.decodeState;0!=st.bytesInSeg||!st.lastSeg&&0!=st.next();)st.bytesInSeg--,st.inputPosition+=1,st.input.readByte();return this.decodeState.finishDecodePacket(this.previousLength,i,e)},__class__:kha_audio2_ogg_vorbis_VorbisDecoder};var kha_audio2_ogg_vorbis_VorbisTools=$hxClasses["kha.audio2.ogg.vorbis.VorbisTools"]=function(){};kha_audio2_ogg_vorbis_VorbisTools.__name__=!0,kha_audio2_ogg_vorbis_VorbisTools.assert=function(e,t){if(!e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",t))},kha_audio2_ogg_vorbis_VorbisTools.neighbors=function(e,t){for(var a=-1,r=65536,i=0,s=0,n=0,_=t;n<_;){var o=n++;e[o]>a&&e[o]<e[t]&&(i=o,a=e[o]),e[o]<r&&e[o]>e[t]&&(s=o,r=e[o])}return{low:i,high:s}},kha_audio2_ogg_vorbis_VorbisTools.floatUnpack=function(e){var t=_$UInt_UInt_$Impl_$.toFloat(2097151&e),a=(2145386496&e)>>>21;return(0!=(-2147483648&e)?-t:t)*Math.pow(2,a-788)},kha_audio2_ogg_vorbis_VorbisTools.bitReverse=function(e){return(e=(-16711936&(e=(-252645136&(e=(-858993460&(e=(-1431655766&e)>>>1|(1431655765&e)<<1))>>>2|(858993459&e)<<2))>>>4|(252645135&e)<<4))>>>8|(16711935&e)<<8)>>>16|e<<16},kha_audio2_ogg_vorbis_VorbisTools.pointCompare=function(e,t){return e.x<t.x?-1:e.x>t.x?1:0},kha_audio2_ogg_vorbis_VorbisTools.uintAsc=function(e,t){return _$UInt_UInt_$Impl_$.gt(t,e)?-1:e==t?0:1},kha_audio2_ogg_vorbis_VorbisTools.lookup1Values=function(e,t){var a=0|Math.exp(Math.log(e)/t);if((0|Math.pow(a+1,t))<=e&&++a,!(Math.pow(a+1,t)>e))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"VorbisTools.hx",lineNumber:155,className:"kha.audio2.ogg.vorbis.VorbisTools",methodName:"lookup1Values"}));if((0|Math.pow(a,t))>e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"VorbisTools.hx",lineNumber:156,className:"kha.audio2.ogg.vorbis.VorbisTools",methodName:"lookup1Values"}));return a},kha_audio2_ogg_vorbis_VorbisTools.computeWindow=function(e,t){for(var a=e>>1,r=0,i=a;r<i;){var s=r++;t[s]=Math.sin(1.5707963267948966*kha_audio2_ogg_vorbis_VorbisTools.square(Math.sin((s+.5)/a*.5*3.141592653589793)))}},kha_audio2_ogg_vorbis_VorbisTools.square=function(e){return e*e},kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse=function(e,t){for(var a=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],r=(e<16384?e<16?a[e]:e<512?5+a[e>>5]:10+a[e>>10]:e<16777216?e<524288?15+a[e>>15]:20+a[e>>20]:e<536870912?25+a[e>>25]:e<-2147483648?30+a[e>>30]:0)-1,i=0,s=e>>3;i<s;){var n=i++,_=n;_=(-16711936&(_=(-252645136&(_=(-858993460&(_=(-1431655766&_)>>>1|(1431655765&_)<<1))>>>2|(858993459&_)<<2))>>>4|(252645135&_)<<4))>>>8|(16711935&_)<<8,t[n]=(_>>>16|_<<16)>>>32-r+3<<2}},kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors=function(e,t,a,r){for(var i=e>>3,s=0,n=0,_=e>>2;n<_;){var o=n++;t[s]=Math.cos(4*o*3.141592653589793/e),t[s+1]=-Math.sin(4*o*3.141592653589793/e),a[s]=.5*Math.cos(3.141592653589793*(s+1)/e/2),a[s+1]=.5*Math.sin(3.141592653589793*(s+1)/e/2),s+=2}for(var h=0,l=0,c=i;l<c;){l++;r[h]=Math.cos(2*(h+1)*3.141592653589793/e),r[h+1]=-Math.sin(2*(h+1)*3.141592653589793/e),h+=2}},kha_audio2_ogg_vorbis_VorbisTools.drawLine=function(e,t,a,r,i,s){if(null==kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable){var n=new Array(32);kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable=n;for(var _=0;_<32;){var o=_++,h=kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable,l=new Array(64);h[o]=l;for(var c=1;c<64;){var u=c++;kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[o][u]=o/u|0}}}var d,g,p=i-a,f=r-t,v=p<0?-p:p,k=t,m=a,S=0;f<64&&v<32?g=p<0?(d=-kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[v][f])-1:(d=kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[v][f])+1:(d=p/f|0,g=p<0?d-1:d+1),v-=(d<0?-d:d)*f,r>s&&(r=s);var b=k,y=e;y[b]=y[b]*kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[m];for(var x=k+1,B=r;x<B;){(S+=v)>=f?(S-=f,m+=g):m+=d;var w=x++,I=e;I[w]=I[w]*kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[m]}},kha_audio2_ogg_vorbis_VorbisTools.predictPoint=function(e,t,a,r,i){var s=i-r,n=a-t,_=Math.abs(s)*(e-t)/n|0;return s<0?r-_:r+_},kha_audio2_ogg_vorbis_VorbisTools.emptyFloatVector=function(e){return new Array(e)},kha_audio2_ogg_vorbis_VorbisTools.copyVector=function(e){for(var t=e.length,a=new Array(t),r=0,i=e.length;r<i;){var s=r++;a[s]=e[s]}return a};var kha_audio2_ogg_vorbis_data_Codebook=$hxClasses["kha.audio2.ogg.vorbis.data.Codebook"]=function(){};kha_audio2_ogg_vorbis_data_Codebook.__name__=!0,kha_audio2_ogg_vorbis_data_Codebook.read=function(e){var t,a,r,i,s,n,_,o,h,l,c=new kha_audio2_ogg_vorbis_data_Codebook;if(e.validBits<0)r=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)r=0;else{var u=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,r=u}}else{var d=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,r=d}if(66==r){var g;if(e.validBits<0)g=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)g=0;else{var p=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,g=p}}else{var f=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,g=f}a=67!=g}else a=!0;if(a)t=!0;else{var v;if(e.validBits<0)v=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)v=0;else{var k=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,v=k}}else{var m=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,v=m}t=86!=v}if(t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Codebook.hx",lineNumber:40,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(e.validBits<0)i=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)i=0;else{var S=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,i=S}}else{var b=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,i=b}if(e.validBits<0)s=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)s=0;else{var y=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,s=y}}else{var x=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,s=x}if(c.dimensions=(s<<8)+i,e.validBits<0)n=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)n=0;else{var B=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,n=B}}else{var w=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,n=w}if(e.validBits<0)_=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)_=0;else{var I=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,_=I}}else{var T=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,_=T}if(e.validBits<0)o=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)o=0;else{var E=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,o=E}}else{var C=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,o=C}if(c.entries=(o<<16)+(_<<8)+n,e.validBits<0)h=0;else if(e.validBits<1){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<1))break}if(e.validBits<0)h=0;else{var P=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,h=P}}else{var A=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,h=A}if(0!=h)l=!1;else{var L;if(e.validBits<0)L=0;else if(e.validBits<1){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<1))break}if(e.validBits<0)L=0;else{var $=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,L=$}}else{var R=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,L=R}l=0!=L}c.sparse=l;var F=c.entries,N=new Array(F);c.sparse||(c.codewordLengths=N);var V,M=0;if(0!=h){var D,O=0;if(e.validBits<0)D=0;else if(e.validBits<5){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<5))break}if(e.validBits<0)D=0;else{var U=31&e.acc;e.acc=e.acc>>>5,e.validBits-=5,D=U}}else{var H=31&e.acc;e.acc=e.acc>>>5,e.validBits-=5,D=H}for(var G=D+1;O<c.entries;){var W,z=c.entries-O,j=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],K=z<16384?z<16?j[z]:z<512?5+j[z>>5]:10+j[z>>10]:z<16777216?z<524288?15+j[z>>15]:20+j[z>>20]:z<536870912?25+j[z>>25]:z<-2147483648?30+j[z>>30]:0;if(e.validBits<0)W=0;else if(e.validBits<K)if(K>24)W=e.readBits(24)+(e.readBits(K-24)<<24);else{for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<K))break}if(e.validBits<0)W=0;else{var Y=e.acc&(1<<K)-1;e.acc=e.acc>>>K,e.validBits-=K,W=Y}}else{var X=e.acc&(1<<K)-1;e.acc=e.acc>>>K,e.validBits-=K,W=X}if(O+W>c.entries)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook entrys",{fileName:"Codebook.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));for(var Z=0,Q=W;Z<Q;){N[O+Z++]=G}O+=W,++G}}else for(var q=0,J=c.entries;q<J;){var ee,te=q++;if(c.sparse)if(e.validBits<0)ee=0;else if(e.validBits<1){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<1))break}if(e.validBits<0)ee=0;else{var ae=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,ee=ae}}else{var re=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,ee=re}else ee=1;if(0!=ee){var ie;if(e.validBits<0)ie=0;else if(e.validBits<5){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<5))break}if(e.validBits<0)ie=0;else{var se=31&e.acc;e.acc=e.acc>>>5,e.validBits-=5,ie=se}}else{var ne=31&e.acc;e.acc=e.acc>>>5,e.validBits-=5,ie=ne}N[te]=ie+1,++M}else N[te]=255}if(c.sparse&&M>=c.entries>>2&&(c.codewordLengths=N,c.sparse=!1),c.sparse)V=M;else{for(var _e=0,oe=0,he=c.entries;oe<he;){var le=N[oe++];le>10&&255!=le&&++_e}V=_e}c.sortedEntries=V;var ce,ue=null;if(c.sparse){if(0!=c.sortedEntries){var de=c.sortedEntries,ge=new Array(de);c.codewordLengths=ge;var pe=c.entries,fe=new Array(pe);c.codewords=fe;var ve=c.entries;ue=new Array(ve)}c.entries,c.sortedEntries}else{var ke=c.entries,me=new Array(ke);c.codewords=me}if(!c.computeCodewords(N,c.entries,ue))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"compute codewords",{fileName:"Codebook.hx",lineNumber:120,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0!=c.sortedEntries){c.sortedCodewords=[];var Se=c.sortedEntries,be=new Array(Se);c.sortedValues=be,c.computeSortedHuffman(N,ue)}if(c.sparse&&(ue=null,c.codewords=null,N=null),c.computeAcceleratedHuffman(),e.validBits<0)ce=0;else if(e.validBits<4){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<4))break}if(e.validBits<0)ce=0;else{var ye=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,ce=ye}}else{var xe=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,ce=xe}if(c.lookupType=ce,c.lookupType>2)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook lookup type",{fileName:"Codebook.hx",lineNumber:143,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(c.lookupType>0){var Be;if(e.validBits<0)Be=0;else if(e.validBits<32)Be=e.readBits(24)+(e.readBits(8)<<24);else{var we=0&e.acc;e.acc=e.acc>>>32,e.validBits-=32,Be=we}var Ie,Te=_$UInt_UInt_$Impl_$.toFloat(2097151&Be),Ee=(2145386496&Be)>>>21,Ce=0!=(-2147483648&Be)?-Te:Te;if(c.minimumValue=Ce*Math.pow(2,Ee-788),e.validBits<0)Ie=0;else if(e.validBits<32)Ie=e.readBits(24)+(e.readBits(8)<<24);else{var Pe=0&e.acc;e.acc=e.acc>>>32,e.validBits-=32,Ie=Pe}var Ae,Le,$e=_$UInt_UInt_$Impl_$.toFloat(2097151&Ie),Re=(2145386496&Ie)>>>21,Fe=0!=(-2147483648&Ie)?-$e:$e;if(c.deltaValue=Fe*Math.pow(2,Re-788),e.validBits<0)Ae=0;else if(e.validBits<4){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<4))break}if(e.validBits<0)Ae=0;else{var Ne=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,Ae=Ne}}else{var Ve=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,Ae=Ve}if(c.valueBits=Ae+1,e.validBits<0)Le=0;else if(e.validBits<1){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<1))break}if(e.validBits<0)Le=0;else{var Me=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,Le=Me}}else{var De=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,Le=De}c.sequenceP=0!=Le,1==c.lookupType?c.lookupValues=kha_audio2_ogg_vorbis_VorbisTools.lookup1Values(c.entries,c.dimensions):c.lookupValues=c.entries*c.dimensions;for(var Oe=c.lookupValues,Ue=new Array(Oe),He=0,Ge=c.lookupValues;He<Ge;){var We,ze=He++,je=c.valueBits;if(e.validBits<0)We=0;else if(e.validBits<je)if(je>24)We=e.readBits(24)+(e.readBits(je-24)<<24);else{for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<je))break}if(e.validBits<0)We=0;else{var Ke=e.acc&(1<<je)-1;e.acc=e.acc>>>je,e.validBits-=je,We=Ke}}else{var Ye=e.acc&(1<<je)-1;e.acc=e.acc>>>je,e.validBits-=je,We=Ye}if(-1==We)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"fail lookup",{fileName:"Codebook.hx",lineNumber:161,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));Ue[ze]=We}var Xe=c.lookupValues,Ze=new Array(Xe);c.multiplicands=Ze;for(var Qe=0,qe=c.lookupValues;Qe<qe;){var Je=Qe++;c.multiplicands[Je]=Ue[Je]*c.deltaValue+c.minimumValue}if(2==c.lookupType&&c.sequenceP){for(var et=1,tt=c.lookupValues;et<tt;){var at=et++;c.multiplicands[at]=c.multiplicands[at-1]}c.sequenceP=!1}}return c},kha_audio2_ogg_vorbis_data_Codebook.prototype={dimensions:null,entries:null,codewordLengths:null,minimumValue:null,deltaValue:null,valueBits:null,lookupType:null,sequenceP:null,sparse:null,lookupValues:null,multiplicands:null,codewords:null,fastHuffman:null,sortedCodewords:null,sortedValues:null,sortedEntries:null,addEntry:function(e,t,a,r,i){this.sparse?(this.codewords[a]=e,this.codewordLengths[a]=r,i[a]=t):this.codewords[t]=e},includeInSort:function(e){if(this.sparse){if(255==e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"Codebook.hx",lineNumber:201,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"includeInSort"}));return!0}return 255!=e&&e>10},computeCodewords:function(e,t,a){for(var r=new Array(32),i=0;i<32;){r[i++]=0}for(var s=0;s<t&&!(e[s]<255);)++s;if(s==t){if(0!=this.sortedEntries)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"Codebook.hx",lineNumber:228,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"computeCodewords"}));return!0}var n=0,_=n++;this.sparse?(this.codewords[_]=0,this.codewordLengths[_]=e[s],a[_]=s):this.codewords[s]=0;for(var o=0;++o<=e[s];)r[o]=1<<32-o;for(o=s;++o<t;){var h=e[o];if(255!=h){for(;h>0&&0==r[h];)--h;if(0==h)return!1;var l=r[h];r[h]=0;var c=l,u=(c=(-16711936&(c=(-252645136&(c=(-858993460&(c=(-1431655766&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8)>>>16|c<<16,d=n++;if(this.sparse?(this.codewords[d]=u,this.codewordLengths[d]=e[o],a[d]=o):this.codewords[o]=u,h!=e[o])for(var g=e[o];g>h;){if(0!=r[g])throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"Codebook.hx",lineNumber:272,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"computeCodewords"}));r[g]=l+(1<<32-g),--g}}}return!0},computeSortedHuffman:function(e,t){if(this.sparse)for(var a=0,r=this.sortedEntries;a<r;){var i=a++,s=this.codewords[i];s=(-16711936&(s=(-252645136&(s=(-858993460&(s=(-1431655766&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,this.sortedCodewords[i]=s>>>16|s<<16}else{for(var n=0,_=0,o=this.entries;_<o;){var h,l=_++,c=e[l];if(this.sparse){if(255==c)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"Codebook.hx",lineNumber:201,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"includeInSort"}));h=!0}else h=255!=c&&c>10;if(h){var u=this.codewords[l];u=(-16711936&(u=(-252645136&(u=(-858993460&(u=(-1431655766&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,this.sortedCodewords[n++]=u>>>16|u<<16}}if(n!=this.sortedEntries)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"Codebook.hx",lineNumber:296,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"computeSortedHuffman"}))}this.sortedCodewords[this.sortedEntries]=-1,this.sortedCodewords.sort(kha_audio2_ogg_vorbis_VorbisTools.uintAsc);for(var d=0,g=this.sparse?this.sortedEntries:this.entries;d<g;){var p,f=d++,v=this.sparse?e[t[f]]:e[f];if(this.sparse){if(255==v)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"Codebook.hx",lineNumber:201,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"includeInSort"}));p=!0}else p=255!=v&&v>10;if(p){for(var k=this.codewords[f],m=(k=(-16711936&(k=(-252645136&(k=(-858993460&(k=(-1431655766&k)>>>1|(1431655765&k)<<1))>>>2|(858993459&k)<<2))>>>4|(252645135&k)<<4))>>>8|(16711935&k)<<8)>>>16|k<<16,S=0,b=this.sortedEntries;b>1;){var y=S+(b>>1);_$UInt_UInt_$Impl_$.gte(m,this.sortedCodewords[y])?(S=y,b-=b>>1):b>>=1}this.sparse?(this.sortedValues[S]=t[f],this.codewordLengths[S]=v):this.sortedValues[S]=f}}},computeAcceleratedHuffman:function(){var e=new Array(1024);this.fastHuffman=e,this.fastHuffman[0]=-1;for(var t=0;t<1024;){var a=t++;this.fastHuffman[a]=-1}for(var r=0,i=this.sparse?this.sortedEntries:this.entries;r<i;){var s=r++;if(this.codewordLengths[s]<=10){var n;if(this.sparse){var _=this.sortedCodewords[s];n=(_=(-16711936&(_=(-252645136&(_=(-858993460&(_=(-1431655766&_)>>>1|(1431655765&_)<<1))>>>2|(858993459&_)<<2))>>>4|(252645135&_)<<4))>>>8|(16711935&_)<<8)>>>16|_<<16}else n=this.codewords[s];for(;n<1024;)this.fastHuffman[n]=s,n+=1<<this.codewordLengths[s]}}},codebookDecode:function(e,t,a,r){e.validBits<10&&e.prepHuffman();var i,s=this.fastHuffman[1023&e.acc];if(s>=0){var n=this.codewordLengths[s];e.acc=e.acc>>>n,e.validBits-=n,e.validBits<0?(e.validBits=0,i=-1):i=s}else i=e.decodeScalarRaw(this);this.sparse&&(i=this.sortedValues[i]);var _=i,o=this.lookupValues,h=this.sequenceP,l=this.multiplicands,c=this.minimumValue;if(_<0)return!1;if(r>this.dimensions&&(r=this.dimensions),1==this.lookupType){for(var u=1,d=0,g=0,p=r;g<p;){var f=g++,v=l[_$UInt_UInt_$Impl_$.toFloat(_/u|0)%_$UInt_UInt_$Impl_$.toFloat(o)|0]+d,k=a+f,m=t;m[k]=m[k]+v,h&&(d=v+c),u*=o}return!0}if(_*=this.dimensions,h)for(var S=0,b=0,y=r;b<y;){var x=b++,B=l[_+x]+S,w=a+x,I=t;I[w]=I[w]+B,S=B+c}else for(var T=0,E=r;T<E;){var C=T++,P=a+C,A=t;A[P]=A[P]+(l[_+C]+0)}return!0},codebookDecodeStep:function(e,t,a,r,i){e.validBits<10&&e.prepHuffman();var s,n=this.fastHuffman[1023&e.acc];if(n>=0){var _=this.codewordLengths[n];e.acc=e.acc>>>_,e.validBits-=_,e.validBits<0?(e.validBits=0,s=-1):s=n}else s=e.decodeScalarRaw(this);this.sparse&&(s=this.sortedValues[s]);var o=s,h=0;if(o<0)return!1;r>this.dimensions&&(r=this.dimensions);var l=this.lookupValues,c=this.sequenceP,u=this.multiplicands;if(1==this.lookupType){for(var d=1,g=0,p=r;g<p;){var f=g++,v=u[_$UInt_UInt_$Impl_$.toFloat(o/d|0)%_$UInt_UInt_$Impl_$.toFloat(l)|0]+h,k=a+f*i,m=t;m[k]=m[k]+v,c&&(h=v),d*=l}return!0}o*=this.dimensions;for(var S=0,b=r;S<b;){var y=S++,x=u[o+y]+h,B=a+y*i,w=t;w[B]=w[B]+x,c&&(h=x)}return!0},decodeStart:function(e){e.validBits<10&&e.prepHuffman();var t,a=this.fastHuffman[1023&e.acc];if(a>=0){var r=this.codewordLengths[a];e.acc=e.acc>>>r,e.validBits-=r,e.validBits<0?(e.validBits=0,t=-1):t=a}else t=e.decodeScalarRaw(this);return this.sparse&&(t=this.sortedValues[t]),t},decodeDeinterleaveRepeat:function(e,t,a,r,i,s,n){var _=this.dimensions;if(0==this.lookupType)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"Codebook.hx",lineNumber:488,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}));for(var o=this.multiplicands,h=this.sequenceP,l=this.lookupValues;n>0;){var c=0;e.validBits<10&&e.prepHuffman();var u,d=this.fastHuffman[1023&e.acc];if(d>=0){var g=this.codewordLengths[d];e.acc=e.acc>>>g,e.validBits-=g,e.validBits<0?(e.validBits=0,u=-1):u=d}else u=e.decodeScalarRaw(this);this.sparse&&(u=this.sortedValues[u]);var p=u;if(p<0){if(0==e.bytesInSeg&&e.lastSeg)return null;throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"Codebook.hx",lineNumber:503,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}))}if(r+i*a+_>s*a&&(_=s*a-(i*a-r)),1==this.lookupType){var f=1;if(h)for(var v=0,k=_;v<k;){v++;var m=o[_$UInt_UInt_$Impl_$.toFloat(p/f|0)%_$UInt_UInt_$Impl_$.toFloat(l)|0]+c,S=i,b=t[r];b[S]=b[S]+m,++r==a&&(r=0,++i),c=m,f*=l}else for(var y=0,x=_;y<x;){y++;var B=o[_$UInt_UInt_$Impl_$.toFloat(p/f|0)%_$UInt_UInt_$Impl_$.toFloat(l)|0]+c,w=i,I=t[r];I[w]=I[w]+B,++r==a&&(r=0,++i),f*=l}}else if(p*=this.dimensions,h)for(var T=0,E=_;T<E;){var C=o[p+T++]+c,P=i,A=t[r];A[P]=A[P]+C,++r==a&&(r=0,++i),c=C}else for(var L=0,$=_;L<$;){var R=o[p+L++]+c,F=i,N=t[r];N[F]=N[F]+R,++r==a&&(r=0,++i)}n-=_}return{cInter:r,pInter:i}},residueDecode:function(e,t,a,r,i){if(0==i)for(var s=r/this.dimensions|0,n=0,_=s;n<_;){var o=n++;if(!this.codebookDecodeStep(e,t,a+o,r-a-o,s))return!1}else for(var h=0;h<r;){if(!this.codebookDecode(e,t,a,r-h))return!1;h+=this.dimensions,a+=this.dimensions}return!0},__class__:kha_audio2_ogg_vorbis_data_Codebook};var kha_audio2_ogg_vorbis_data_Comment=$hxClasses["kha.audio2.ogg.vorbis.data.Comment"]=function(){this.data=new haxe_ds_StringMap};kha_audio2_ogg_vorbis_data_Comment.__name__=!0,kha_audio2_ogg_vorbis_data_Comment.prototype={data:null,get_title:function(){return this.getString("title")},get_loopStart:function(){return Std.parseInt(this.getString("loopstart"))},get_loopLength:function(){return Std.parseInt(this.getString("looplength"))},get_version:function(){return this.getString("version")},get_album:function(){return this.getString("album")},get_organization:function(){return this.getString("organization")},get_tracknumber:function(){return this.getString("tracknumber")},get_performer:function(){return this.getString("performer")},get_copyright:function(){return this.getString("copyright")},get_license:function(){return this.getString("license")},get_artist:function(){return this.getString("artist")},get_description:function(){return this.getString("description")},get_genre:function(){return this.getString("genre")},get_date:function(){return this.getString("date")},get_location:function(){return this.getString("location")},get_contact:function(){return this.getString("contact")},get_isrc:function(){return this.getString("isrc")},get_artists:function(){return this.getArray("artist")},add:function(e,t){e=e.toLowerCase();var a=this.data;if(null!=__map_reserved[e]?a.existsReserved(e):a.h.hasOwnProperty(e)){var r=this.data;(null!=__map_reserved[e]?r.getReserved(e):r.h[e]).push(t)}else{var i=[t],s=this.data;null!=__map_reserved[e]?s.setReserved(e,i):s.h[e]=i}},getString:function(e){e=e.toLowerCase();var t=this.data;if(null!=__map_reserved[e]?t.existsReserved(e):t.h.hasOwnProperty(e)){var a=this.data;return(null!=__map_reserved[e]?a.getReserved(e):a.h[e])[0]}return null},getArray:function(e){e=e.toLowerCase();var t=this.data;if(null!=__map_reserved[e]?t.existsReserved(e):t.h.hasOwnProperty(e)){var a=this.data;return null!=__map_reserved[e]?a.getReserved(e):a.h[e]}return null},__class__:kha_audio2_ogg_vorbis_data_Comment};var kha_audio2_ogg_vorbis_data_Floor=$hxClasses["kha.audio2.ogg.vorbis.data.Floor"]=function(){};kha_audio2_ogg_vorbis_data_Floor.__name__=!0,kha_audio2_ogg_vorbis_data_Floor.read=function(e,t){var a,r=new kha_audio2_ogg_vorbis_data_Floor;if(e.validBits<0)a=0;else if(e.validBits<16){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<16))break}if(e.validBits<0)a=0;else{var i=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,a=i}}else{var s=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,a=s}if(r.type=a,r.type>1)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Floor.hx",lineNumber:28,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));if(0==r.type){var n,_,o,h,l,c,u=r.floor0=new kha_audio2_ogg_vorbis_data_Floor0;if(e.validBits<0)n=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)n=0;else{var d=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,n=d}}else{var g=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,n=g}if(u.order=n,e.validBits<0)_=0;else if(e.validBits<16){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<16))break}if(e.validBits<0)_=0;else{var p=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,_=p}}else{var f=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,_=f}if(u.rate=_,e.validBits<0)o=0;else if(e.validBits<16){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<16))break}if(e.validBits<0)o=0;else{var v=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,o=v}}else{var k=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,o=k}if(u.barkMapSize=o,e.validBits<0)h=0;else if(e.validBits<6){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<6))break}if(e.validBits<0)h=0;else{var m=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,h=m}}else{var S=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,h=S}if(u.amplitudeBits=h,e.validBits<0)l=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)l=0;else{var b=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,l=b}}else{var y=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,l=y}if(u.amplitudeOffset=l,e.validBits<0)c=0;else if(e.validBits<4){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<4))break}if(e.validBits<0)c=0;else{var x=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,c=x}}else{var B=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,c=B}u.numberOfBooks=c+1;for(var w=0,I=u.numberOfBooks;w<I;){var T,E=w++,C=u.bookList;if(e.validBits<0)T=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)T=0;else{var P=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,T=P}}else{var A=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,T=A}C[E]=T}throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.FEATURE_NOT_SUPPORTED,null,{fileName:"Floor.hx",lineNumber:41,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}var L,$=[],R=r.floor1=new kha_audio2_ogg_vorbis_data_Floor1,F=-1;if(e.validBits<0)L=0;else if(e.validBits<5){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<5))break}if(e.validBits<0)L=0;else{var N=31&e.acc;e.acc=e.acc>>>5,e.validBits-=5,L=N}}else{var V=31&e.acc;e.acc=e.acc>>>5,e.validBits-=5,L=V}R.partitions=L;var M=R.partitions,D=new Array(M);R.partitionClassList=D;for(var O=0,U=R.partitions;O<U;){var H,G=O++,W=R.partitionClassList;if(e.validBits<0)H=0;else if(e.validBits<4){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<4))break}if(e.validBits<0)H=0;else{var z=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,H=z}}else{var j=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,H=j}W[G]=H,R.partitionClassList[G]>F&&(F=R.partitionClassList[G])}var K=new Array(F+1);R.classDimensions=K;var Y=new Array(F+1);R.classMasterbooks=Y;var X=new Array(F+1);R.classSubclasses=X;var Z=new Array(F+1);R.subclassBooks=Z;for(var Q,q,J=0,ee=F+1;J<ee;){var te,ae=J++,re=R.classDimensions;if(e.validBits<0)te=0;else if(e.validBits<3){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<3))break}if(e.validBits<0)te=0;else{var ie=7&e.acc;e.acc=e.acc>>>3,e.validBits-=3,te=ie}}else{var se=7&e.acc;e.acc=e.acc>>>3,e.validBits-=3,te=se}re[ae]=te+1;var ne,_e=R.classSubclasses;if(e.validBits<0)ne=0;else if(e.validBits<2){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<2))break}if(e.validBits<0)ne=0;else{var oe=3&e.acc;e.acc=e.acc>>>2,e.validBits-=2,ne=oe}}else{var he=3&e.acc;e.acc=e.acc>>>2,e.validBits-=2,ne=he}if(_e[ae]=ne,0!=R.classSubclasses[ae]){var le,ce=R.classMasterbooks;if(e.validBits<0)le=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)le=0;else{var ue=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,le=ue}}else{var de=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,le=de}if(ce[ae]=le,R.classMasterbooks[ae]>=t.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Floor.hx",lineNumber:64,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}var ge=1<<R.classSubclasses[ae],pe=R.subclassBooks,fe=new Array(ge);pe[ae]=fe;for(var ve=0,ke=ge;ve<ke;){var me,Se=ve++,be=R.subclassBooks[ae];if(e.validBits<0)me=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)me=0;else{var ye=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,me=ye}}else{var xe=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,me=xe}if(be[Se]=me-1,R.subclassBooks[ae][Se]>=t.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Floor.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}}if(e.validBits<0)Q=0;else if(e.validBits<2){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<2))break}if(e.validBits<0)Q=0;else{var Be=3&e.acc;e.acc=e.acc>>>2,e.validBits-=2,Q=Be}}else{var we=3&e.acc;e.acc=e.acc>>>2,e.validBits-=2,Q=we}if(R.floor1Multiplier=Q+1,e.validBits<0)q=0;else if(e.validBits<4){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<4))break}if(e.validBits<0)q=0;else{var Ie=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,q=Ie}}else{var Te=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,q=Te}R.rangebits=q;var Ee=new Array(250);R.xlist=Ee,R.xlist[0]=0,R.xlist[1]=1<<R.rangebits,R.values=2;for(var Ce=0,Pe=R.partitions;Ce<Pe;)for(var Ae=Ce++,Le=R.partitionClassList[Ae],$e=0,Re=R.classDimensions[Le];$e<Re;){$e++;var Fe,Ne=R.xlist,Ve=R.values,Me=R.rangebits;if(e.validBits<0)Fe=0;else if(e.validBits<Me)if(Me>24)Fe=e.readBits(24)+(e.readBits(Me-24)<<24);else{for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<Me))break}if(e.validBits<0)Fe=0;else{var De=e.acc&(1<<Me)-1;e.acc=e.acc>>>Me,e.validBits-=Me,Fe=De}}else{var Oe=e.acc&(1<<Me)-1;e.acc=e.acc>>>Me,e.validBits-=Me,Fe=Oe}Ne[Ve]=Fe,R.values++}for(var Ue=0,He=R.values;Ue<He;){var Ge=Ue++;$.push(new kha_audio2_ogg_vorbis_data_IntPoint),$[Ge].x=R.xlist[Ge],$[Ge].y=Ge}$.sort(kha_audio2_ogg_vorbis_VorbisTools.pointCompare);var We=R.values,ze=new Array(We);R.sortedOrder=ze;for(var je=0,Ke=R.values;je<Ke;){var Ye=je++;R.sortedOrder[Ye]=$[Ye].y}var Xe=R.values,Ze=new Array(Xe);R.neighbors=Ze;for(var Qe=2,qe=R.values;Qe<qe;){for(var Je,et,tt=Qe++,at=R.xlist,rt=-1,it=65536,st=0,nt=0,_t=0,ot=tt;_t<ot;){var ht=_t++;at[ht]>rt&&at[ht]<at[tt]&&(st=ht,rt=at[ht]),at[ht]<it&&at[ht]>at[tt]&&(nt=ht,it=at[ht])}Je=st,et=nt;var lt=R.neighbors,ct=R.values,ut=new Array(ct);lt[tt]=ut,R.neighbors[tt][0]=Je,R.neighbors[tt][1]=et}return r},kha_audio2_ogg_vorbis_data_Floor.prototype={floor0:null,floor1:null,type:null,__class__:kha_audio2_ogg_vorbis_data_Floor};var kha_audio2_ogg_vorbis_data_Floor0=$hxClasses["kha.audio2.ogg.vorbis.data.Floor0"]=function(){};kha_audio2_ogg_vorbis_data_Floor0.__name__=!0,kha_audio2_ogg_vorbis_data_Floor0.prototype={order:null,rate:null,barkMapSize:null,amplitudeBits:null,amplitudeOffset:null,numberOfBooks:null,bookList:null,__class__:kha_audio2_ogg_vorbis_data_Floor0};var kha_audio2_ogg_vorbis_data_Floor1=$hxClasses["kha.audio2.ogg.vorbis.data.Floor1"]=function(){};kha_audio2_ogg_vorbis_data_Floor1.__name__=!0,kha_audio2_ogg_vorbis_data_Floor1.prototype={partitions:null,partitionClassList:null,classDimensions:null,classSubclasses:null,classMasterbooks:null,subclassBooks:null,xlist:null,sortedOrder:null,neighbors:null,floor1Multiplier:null,rangebits:null,values:null,__class__:kha_audio2_ogg_vorbis_data_Floor1};var kha_audio2_ogg_vorbis_data_Header=$hxClasses["kha.audio2.ogg.vorbis.data.Header"]=function(){};kha_audio2_ogg_vorbis_data_Header.__name__=!0,kha_audio2_ogg_vorbis_data_Header.read=function(e){var t=e.page;if(t.start(e),0==(2&t.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"not firstPage",{fileName:"Header.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(4&t.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"lastPage",{fileName:"Header.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(1&t.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"continuedPacket",{fileName:"Header.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.firstPageValidate(),e.inputPosition+=1,1!=e.input.readByte())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{fileName:"Header.hx",lineNumber:57,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));for(var a=new haxe_io_Bytes(new ArrayBuffer(6)),r=0;r<6;){var i,s=r++;0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,i=e.input.readByte()):i=-1,e.validBits=0,a.b[s]=255&i}if("vorbis"!=a.toString())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"VorbisDecodeState.hx",lineNumber:300,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));e.inputPosition+=4;var n=e.input.readInt32();if(0!=n)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"vorbis version : "+n,{fileName:"Header.hx",lineNumber:66,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var _=new kha_audio2_ogg_vorbis_data_Header;if(e.inputPosition+=1,_.channel=e.input.readByte(),0==_.channel)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no channel",{fileName:"Header.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(_.channel>16)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.TOO_MANY_CHANNELS,"too many channels",{fileName:"Header.hx",lineNumber:75,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.inputPosition+=4,_.sampleRate=e.input.readInt32(),0==_.sampleRate)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no sampling rate",{fileName:"Header.hx",lineNumber:80,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.inputPosition+=4,_.maximumBitRate=e.input.readInt32(),e.inputPosition+=4,_.nominalBitRate=e.input.readInt32(),e.inputPosition+=4,_.minimumBitRate=e.input.readInt32(),e.inputPosition+=1;var o=e.input.readByte(),h=15&o,l=o>>4;if(_.blocksize0=1<<h,_.blocksize1=1<<l,h<6||h>13)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Header.hx",lineNumber:93,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(l<6||l>13)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Header.hx",lineNumber:96,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(h>l)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Header.hx",lineNumber:99,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.inputPosition+=1;var c=e.input.readByte();if(0==(1&c))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,null,{fileName:"Header.hx",lineNumber:105,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.page.start(e),e.startPacket();for(var u=0,d=new haxe_io_BytesOutput;0!=(u=e.next());)e.inputPosition+=u,d.write(e.input.read(u)),e.bytesInSeg=0;var g=new haxe_io_BytesInput(d.getBytes());g.readByte(),g.read(6);var p,f=g.readInt32();_.vendor=g.readString(f),_.comment=new kha_audio2_ogg_vorbis_data_Comment;for(var v=0,k=g.readInt32();v<k;){v++;var m=g.readInt32(),S=g.readString(m),b=S.indexOf("=");-1!=b&&_.comment.add(S.substring(0,b),S.substring(b+1))}if(0==(1&g.readByte()))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Header.hx",lineNumber:141,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.startPacket(),0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,p=e.input.readByte()):p=-1,e.validBits=0,5!=p)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"setup packet",{fileName:"Header.hx",lineNumber:149,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));for(var y,x=new haxe_io_Bytes(new ArrayBuffer(6)),B=0;B<6;){var w,I=B++;0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,w=e.input.readByte()):w=-1,e.validBits=0,x.b[I]=255&w}if("vorbis"!=x.toString())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"VorbisDecodeState.hx",lineNumber:300,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));if(e.validBits<0)y=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)y=0;else{var T=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,y=T}}else{var E=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,y=E}var C=y+1,P=new Array(C);_.codebooks=P;for(var A,L=0,$=C;L<$;){var R=L++;_.codebooks[R]=kha_audio2_ogg_vorbis_data_Codebook.read(e)}if(e.validBits<0)A=0;else if(e.validBits<6){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<6))break}if(e.validBits<0)A=0;else{var F=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,A=F}}else{var N=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,A=N}for(var V,M=0,D=c=A+1;M<D;){var O;M++;if(e.validBits<0)O=0;else if(e.validBits<16){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<16))break}if(e.validBits<0)O=0;else{var U=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,O=U}}else{var H=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,O=H}if(0!=O)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Header.hx",lineNumber:165,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if(e.validBits<0)V=0;else if(e.validBits<6){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<6))break}if(e.validBits<0)V=0;else{var G=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,V=G}}else{var W=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,V=W}var z=V+1,j=new Array(z);_.floorConfig=j;for(var K,Y=0,X=z;Y<X;){var Z=Y++;_.floorConfig[Z]=kha_audio2_ogg_vorbis_data_Floor.read(e,_.codebooks)}if(e.validBits<0)K=0;else if(e.validBits<6){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<6))break}if(e.validBits<0)K=0;else{var Q=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,K=Q}}else{var q=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,K=q}var J=K+1,ee=new Array(J);_.residueConfig=ee;for(var te,ae=0,re=J;ae<re;){var ie=ae++;_.residueConfig[ie]=kha_audio2_ogg_vorbis_data_Residue.read(e,_.codebooks)}if(e.validBits<0)te=0;else if(e.validBits<6){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<6))break}if(e.validBits<0)te=0;else{var se=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,te=se}}else{var ne=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,te=ne}var _e=te+1,oe=new Array(_e);_.mapping=oe;for(var he,le=0,ce=_e;le<ce;){var ue=le++,de=kha_audio2_ogg_vorbis_data_Mapping.read(e,_.channel);_.mapping[ue]=de;for(var ge=0,pe=de.submaps;ge<pe;){var fe=ge++;if(de.submapFloor[fe]>=_.floorConfig.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Header.hx",lineNumber:191,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(de.submapResidue[fe]>=_.residueConfig.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Header.hx",lineNumber:194,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}}if(e.validBits<0)he=0;else if(e.validBits<6){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<6))break}if(e.validBits<0)he=0;else{var ve=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,he=ve}}else{var ke=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,he=ke}var me=he+1,Se=new Array(me);_.modes=Se;for(var be=0,ye=me;be<ye;){var xe=be++,Be=kha_audio2_ogg_vorbis_data_Mode.read(e);if(_.modes[xe]=Be,Be.mapping>=_.mapping.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Header.hx",lineNumber:205,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}for(;0!=e.bytesInSeg||!e.lastSeg&&0!=e.next();)e.bytesInSeg--,e.inputPosition+=1,e.input.readByte();return _},kha_audio2_ogg_vorbis_data_Header.prototype={maximumBitRate:null,nominalBitRate:null,minimumBitRate:null,sampleRate:null,channel:null,blocksize0:null,blocksize1:null,codebooks:null,floorConfig:null,residueConfig:null,mapping:null,modes:null,comment:null,vendor:null,__class__:kha_audio2_ogg_vorbis_data_Header};var kha_audio2_ogg_vorbis_data_IntPoint=$hxClasses["kha.audio2.ogg.vorbis.data.IntPoint"]=function(){};kha_audio2_ogg_vorbis_data_IntPoint.__name__=!0,kha_audio2_ogg_vorbis_data_IntPoint.prototype={x:null,y:null,__class__:kha_audio2_ogg_vorbis_data_IntPoint};var kha_audio2_ogg_vorbis_data_Mapping=$hxClasses["kha.audio2.ogg.vorbis.data.Mapping"]=function(){};kha_audio2_ogg_vorbis_data_Mapping.__name__=!0,kha_audio2_ogg_vorbis_data_Mapping.read=function(e,t){var a,r=new kha_audio2_ogg_vorbis_data_Mapping;if(e.validBits<0)a=0;else if(e.validBits<16){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<16))break}if(e.validBits<0)a=0;else{var i=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,a=i}}else{var s=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,a=s}if(0!=a)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"mapping type "+a,{fileName:"Mapping.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));var n=new Array(t);r.chan=n;for(var _,o,h,l=0,c=t;l<c;){var u=l++;r.chan[u]=new kha_audio2_ogg_vorbis_data_MappingChannel}if(e.validBits<0)_=0;else if(e.validBits<1){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<1))break}if(e.validBits<0)_=0;else{var d=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,_=d}}else{var g=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,_=g}if(0!=_){var p;if(e.validBits<0)p=0;else if(e.validBits<4){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<4))break}if(e.validBits<0)p=0;else{var f=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,p=f}}else{var v=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,p=v}r.submaps=p+1}else r.submaps=1;if(e.validBits<0)o=0;else if(e.validBits<1){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<1))break}if(e.validBits<0)o=0;else{var k=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,o=k}}else{var m=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,o=m}if(0!=o){var S;if(e.validBits<0)S=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)S=0;else{var b=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,S=b}}else{var y=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,S=y}r.couplingSteps=S+1;for(var x=0,B=r.couplingSteps;x<B;){var w,I=x++,T=r.chan[I],E=t-1,C=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],P=E<16384?E<16?C[E]:E<512?5+C[E>>5]:10+C[E>>10]:E<16777216?E<524288?15+C[E>>15]:20+C[E>>20]:E<536870912?25+C[E>>25]:E<-2147483648?30+C[E>>30]:0;if(e.validBits<0)w=0;else if(e.validBits<P)if(P>24)w=e.readBits(24)+(e.readBits(P-24)<<24);else{for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<P))break}if(e.validBits<0)w=0;else{var A=e.acc&(1<<P)-1;e.acc=e.acc>>>P,e.validBits-=P,w=A}}else{var L=e.acc&(1<<P)-1;e.acc=e.acc>>>P,e.validBits-=P,w=L}T.magnitude=w;var $,R=r.chan[I],F=t-1,N=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],V=F<16384?F<16?N[F]:F<512?5+N[F>>5]:10+N[F>>10]:F<16777216?F<524288?15+N[F>>15]:20+N[F>>20]:F<536870912?25+N[F>>25]:F<-2147483648?30+N[F>>30]:0;if(e.validBits<0)$=0;else if(e.validBits<V)if(V>24)$=e.readBits(24)+(e.readBits(V-24)<<24);else{for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<V))break}if(e.validBits<0)$=0;else{var M=e.acc&(1<<V)-1;e.acc=e.acc>>>V,e.validBits-=V,$=M}}else{var D=e.acc&(1<<V)-1;e.acc=e.acc>>>V,e.validBits-=V,$=D}if(R.angle=$,r.chan[I].magnitude>=t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Mapping.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(r.chan[I].angle>=t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Mapping.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(r.chan[I].magnitude==r.chan[I].angle)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Mapping.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}}else r.couplingSteps=0;if(e.validBits<0)h=0;else if(e.validBits<2){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<2))break}if(e.validBits<0)h=0;else{var O=3&e.acc;e.acc=e.acc>>>2,e.validBits-=2,h=O}}else{var U=3&e.acc;e.acc=e.acc>>>2,e.validBits-=2,h=U}if(0!=h)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Mapping.hx",lineNumber:61,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(r.submaps>1)for(var H=0,G=t;H<G;){var W,z=H++,j=r.chan[z];if(e.validBits<0)W=0;else if(e.validBits<4){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<4))break}if(e.validBits<0)W=0;else{var K=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,W=K}}else{var Y=15&e.acc;e.acc=e.acc>>>4,e.validBits-=4,W=Y}if(j.mux=W,r.chan[z].mux>=r.submaps)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Mapping.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}else for(var X=0,Z=t;X<Z;){var Q=X++;r.chan[Q].mux=0}var q=r.submaps,J=new Array(q);r.submapFloor=J;var ee=r.submaps,te=new Array(ee);r.submapResidue=te;for(var ae=0,re=r.submaps;ae<re;){var ie=ae++;if(e.validBits>=0)if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits>=0){e.acc;e.acc=e.acc>>>8,e.validBits-=8}}else{e.acc;e.acc=e.acc>>>8,e.validBits-=8}var se,ne=r.submapFloor;if(e.validBits<0)se=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)se=0;else{var _e=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,se=_e}}else{var oe=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,se=oe}ne[ie]=se;var he,le=r.submapResidue;if(e.validBits<0)he=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)he=0;else{var ce=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,he=ce}}else{var ue=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,he=ue}le[ie]=he}return r},kha_audio2_ogg_vorbis_data_Mapping.prototype={couplingSteps:null,chan:null,submaps:null,submapFloor:null,submapResidue:null,doFloor:function(e,t,a,r,i,s){var n=a>>1,_=this.chan[t].mux,o=e[this.submapFloor[_]];if(0==o.type)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"Mapping.hx",lineNumber:94,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"doFloor"}));for(var h=o.floor1,l=0,c=i[0]*h.floor1Multiplier,u=1,d=h.values;u<d;){var g=u++,p=h.sortedOrder[g];if(i[p]>=0){var f=i[p]*h.floor1Multiplier,v=h.xlist[p];kha_audio2_ogg_vorbis_VorbisTools.drawLine(r,l,c,v,f,n),l=v,c=f}}if(l<n)for(var k=l,m=n;k<m;){var S=k++,b=r;b[S]=b[S]*kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[c]}},__class__:kha_audio2_ogg_vorbis_data_Mapping};var kha_audio2_ogg_vorbis_data_MappingChannel=$hxClasses["kha.audio2.ogg.vorbis.data.MappingChannel"]=function(){};kha_audio2_ogg_vorbis_data_MappingChannel.__name__=!0,kha_audio2_ogg_vorbis_data_MappingChannel.prototype={magnitude:null,angle:null,mux:null,__class__:kha_audio2_ogg_vorbis_data_MappingChannel};var kha_audio2_ogg_vorbis_data_Mode=$hxClasses["kha.audio2.ogg.vorbis.data.Mode"]=function(){};kha_audio2_ogg_vorbis_data_Mode.__name__=!0,kha_audio2_ogg_vorbis_data_Mode.read=function(e){var t,a,r,i,s=new kha_audio2_ogg_vorbis_data_Mode;if(e.validBits<0)t=0;else if(e.validBits<1){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<1))break}if(e.validBits<0)t=0;else{var n=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,t=n}}else{var _=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,t=_}if(s.blockflag=0!=t,e.validBits<0)a=0;else if(e.validBits<16){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<16))break}if(e.validBits<0)a=0;else{var o=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,a=o}}else{var h=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,a=h}if(s.windowtype=a,e.validBits<0)r=0;else if(e.validBits<16){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<16))break}if(e.validBits<0)r=0;else{var l=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,r=l}}else{var c=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,r=c}if(s.transformtype=r,e.validBits<0)i=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)i=0;else{var u=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,i=u}}else{var d=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,i=d}if(s.mapping=i,0!=s.windowtype)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Mode.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));if(0!=s.transformtype)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Mode.hx",lineNumber:25,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));return s},kha_audio2_ogg_vorbis_data_Mode.prototype={blockflag:null,mapping:null,windowtype:null,transformtype:null,__class__:kha_audio2_ogg_vorbis_data_Mode};var kha_audio2_ogg_vorbis_data_Page=$hxClasses["kha.audio2.ogg.vorbis.data.Page"]=function(){};kha_audio2_ogg_vorbis_data_Page.__name__=!0,kha_audio2_ogg_vorbis_data_Page.prototype={flag:null,clone:function(){var e=new kha_audio2_ogg_vorbis_data_Page;return e.flag=this.flag,e},start:function(e){var t,a,r;if(e.inputPosition+=1,79==e.input.readByte()?(e.inputPosition+=1,r=103!=e.input.readByte()):r=!0,r?a=!0:(e.inputPosition+=1,a=103!=e.input.readByte()),a?t=!0:(e.inputPosition+=1,t=83!=e.input.readByte()),t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"VorbisDecodeState.hx",lineNumber:323,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}));this.startWithoutCapturePattern(e)},startWithoutCapturePattern:function(e){e.inputPosition+=1;var t=e.input.readByte();if(0!=t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM_STRUCTURE_VERSION,""+t,{fileName:"Page.hx",lineNumber:34,className:"kha.audio2.ogg.vorbis.data.Page",methodName:"startWithoutCapturePattern"}));e.inputPosition+=1,this.flag=e.input.readByte(),e.inputPosition+=4;var a=e.input.readInt32();e.inputPosition+=4;var r=e.input.readInt32();e.inputPosition+=4,e.input.readInt32(),e.inputPosition+=4,e.input.readInt32(),e.inputPosition+=4,e.input.readInt32(),e.setup(a,r)},__class__:kha_audio2_ogg_vorbis_data_Page};var kha_audio2_ogg_vorbis_data_PageFlag=$hxClasses["kha.audio2.ogg.vorbis.data.PageFlag"]=function(){};kha_audio2_ogg_vorbis_data_PageFlag.__name__=!0;var kha_audio2_ogg_vorbis_data_ProbedPage=$hxClasses["kha.audio2.ogg.vorbis.data.ProbedPage"]=function(){};kha_audio2_ogg_vorbis_data_ProbedPage.__name__=!0,kha_audio2_ogg_vorbis_data_ProbedPage.prototype={pageStart:null,pageEnd:null,afterPreviousPageStart:null,firstDecodedSample:null,lastDecodedSample:null,__class__:kha_audio2_ogg_vorbis_data_ProbedPage};var kha_audio2_ogg_vorbis_data_ReaderError=$hxClasses["kha.audio2.ogg.vorbis.data.ReaderError"]=function(e,t,a){null==t&&(t=""),this.type=e,this.message=t,this.posInfos=a};kha_audio2_ogg_vorbis_data_ReaderError.__name__=!0,kha_audio2_ogg_vorbis_data_ReaderError.prototype={type:null,message:null,posInfos:null,__class__:kha_audio2_ogg_vorbis_data_ReaderError};var kha_audio2_ogg_vorbis_data_ReaderErrorType=$hxClasses["kha.audio2.ogg.vorbis.data.ReaderErrorType"]={__ename__:!0,__constructs__:["NEED_MORE_DATA","INVALID_API_MIXING","OUTOFMEM","FEATURE_NOT_SUPPORTED","TOO_MANY_CHANNELS","FILE_OPEN_FAILURE","SEEK_WITHOUT_LENGTH","UNEXPECTED_EOF","SEEK_INVALID","INVALID_SETUP","INVALID_STREAM","MISSING_CAPTURE_PATTERN","INVALID_STREAM_STRUCTURE_VERSION","CONTINUED_PACKET_FLAG_INVALID","INCORRECT_STREAM_SERIAL_NUMBER","INVALID_FIRST_PAGE","BAD_PACKET_TYPE","CANT_FIND_LAST_PAGE","SEEK_FAILED","OTHER"]};kha_audio2_ogg_vorbis_data_ReaderErrorType.NEED_MORE_DATA=["NEED_MORE_DATA",0],kha_audio2_ogg_vorbis_data_ReaderErrorType.NEED_MORE_DATA.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.NEED_MORE_DATA.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_API_MIXING=["INVALID_API_MIXING",1],kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_API_MIXING.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_API_MIXING.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.OUTOFMEM=["OUTOFMEM",2],kha_audio2_ogg_vorbis_data_ReaderErrorType.OUTOFMEM.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.OUTOFMEM.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.FEATURE_NOT_SUPPORTED=["FEATURE_NOT_SUPPORTED",3],kha_audio2_ogg_vorbis_data_ReaderErrorType.FEATURE_NOT_SUPPORTED.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.FEATURE_NOT_SUPPORTED.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.TOO_MANY_CHANNELS=["TOO_MANY_CHANNELS",4],kha_audio2_ogg_vorbis_data_ReaderErrorType.TOO_MANY_CHANNELS.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.TOO_MANY_CHANNELS.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.FILE_OPEN_FAILURE=["FILE_OPEN_FAILURE",5],kha_audio2_ogg_vorbis_data_ReaderErrorType.FILE_OPEN_FAILURE.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.FILE_OPEN_FAILURE.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_WITHOUT_LENGTH=["SEEK_WITHOUT_LENGTH",6],kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_WITHOUT_LENGTH.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_WITHOUT_LENGTH.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.UNEXPECTED_EOF=["UNEXPECTED_EOF",7],kha_audio2_ogg_vorbis_data_ReaderErrorType.UNEXPECTED_EOF.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.UNEXPECTED_EOF.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_INVALID=["SEEK_INVALID",8],kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_INVALID.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_INVALID.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP=["INVALID_SETUP",9],kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM=["INVALID_STREAM",10],kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN=["MISSING_CAPTURE_PATTERN",11],kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM_STRUCTURE_VERSION=["INVALID_STREAM_STRUCTURE_VERSION",12],kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM_STRUCTURE_VERSION.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM_STRUCTURE_VERSION.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.CONTINUED_PACKET_FLAG_INVALID=["CONTINUED_PACKET_FLAG_INVALID",13],kha_audio2_ogg_vorbis_data_ReaderErrorType.CONTINUED_PACKET_FLAG_INVALID.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.CONTINUED_PACKET_FLAG_INVALID.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.INCORRECT_STREAM_SERIAL_NUMBER=["INCORRECT_STREAM_SERIAL_NUMBER",14],kha_audio2_ogg_vorbis_data_ReaderErrorType.INCORRECT_STREAM_SERIAL_NUMBER.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.INCORRECT_STREAM_SERIAL_NUMBER.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE=["INVALID_FIRST_PAGE",15],kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.BAD_PACKET_TYPE=["BAD_PACKET_TYPE",16],kha_audio2_ogg_vorbis_data_ReaderErrorType.BAD_PACKET_TYPE.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.BAD_PACKET_TYPE.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE=["CANT_FIND_LAST_PAGE",17],kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED=["SEEK_FAILED",18],kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType,kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER=["OTHER",19],kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER.toString=$estr,kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER.__enum__=kha_audio2_ogg_vorbis_data_ReaderErrorType;var kha_audio2_ogg_vorbis_data_Residue=$hxClasses["kha.audio2.ogg.vorbis.data.Residue"]=function(){};kha_audio2_ogg_vorbis_data_Residue.__name__=!0,kha_audio2_ogg_vorbis_data_Residue.read=function(e,t){var a,r=new kha_audio2_ogg_vorbis_data_Residue;if(e.validBits<0)a=0;else if(e.validBits<16){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<16))break}if(e.validBits<0)a=0;else{var i=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,a=i}}else{var s=65535&e.acc;e.acc=e.acc>>>16,e.validBits-=16,a=s}if(r.type=a,r.type>2)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Residue.hx",lineNumber:29,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}));var n,_,o,h,l=new Array(64);if(e.validBits<0)n=0;else if(e.validBits<24){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<24))break}if(e.validBits<0)n=0;else{var c=16777215&e.acc;e.acc=e.acc>>>24,e.validBits-=24,n=c}}else{var u=16777215&e.acc;e.acc=e.acc>>>24,e.validBits-=24,n=u}if(r.begin=n,e.validBits<0)_=0;else if(e.validBits<24){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<24))break}if(e.validBits<0)_=0;else{var d=16777215&e.acc;e.acc=e.acc>>>24,e.validBits-=24,_=d}}else{var g=16777215&e.acc;e.acc=e.acc>>>24,e.validBits-=24,_=g}if(r.end=_,e.validBits<0)o=0;else if(e.validBits<24){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<24))break}if(e.validBits<0)o=0;else{var p=16777215&e.acc;e.acc=e.acc>>>24,e.validBits-=24,o=p}}else{var f=16777215&e.acc;e.acc=e.acc>>>24,e.validBits-=24,o=f}if(r.partSize=o+1,e.validBits<0)h=0;else if(e.validBits<6){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<6))break}if(e.validBits<0)h=0;else{var v=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,h=v}}else{var k=63&e.acc;e.acc=e.acc>>>6,e.validBits-=6,h=k}var m,S=r.classifications=h+1;if(e.validBits<0)m=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)m=0;else{var b=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,m=b}}else{var y=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,m=y}r.classbook=m;for(var x=0,B=r.classifications;x<B;){var w,I,T=x++,E=0;if(e.validBits<0)w=0;else if(e.validBits<3){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<3))break}if(e.validBits<0)w=0;else{var C=7&e.acc;e.acc=e.acc>>>3,e.validBits-=3,w=C}}else{var P=7&e.acc;e.acc=e.acc>>>3,e.validBits-=3,w=P}if(e.validBits<0)I=0;else if(e.validBits<1){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<1))break}if(e.validBits<0)I=0;else{var A=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,I=A}}else{var L=1&e.acc;e.acc=e.acc>>>1,e.validBits-=1,I=L}if(0!=I)if(e.validBits<0)E=0;else if(e.validBits<5){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<5))break}if(e.validBits<0)E=0;else{var $=31&e.acc;e.acc=e.acc>>>5,e.validBits-=5,E=$}}else{var R=31&e.acc;e.acc=e.acc>>>5,e.validBits-=5,E=R}l[T]=8*E+w}var F=r.classifications,N=new Array(F);r.residueBooks=N;for(var V=0,M=r.classifications;V<M;){var D=V++,O=r.residueBooks,U=new Array(8);O[D]=U;for(var H=0;H<8;){var G=H++;if(0!=(l[D]&1<<G)){var W,z=r.residueBooks[D];if(e.validBits<0)W=0;else if(e.validBits<8){for(0==e.validBits&&(e.acc=0);;){if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())){e.validBits=-1;break}if(e.bytesInSeg--,e.inputPosition+=1,e.acc=e.acc+(e.input.readByte()<<e.validBits),e.validBits+=8,!(e.validBits<8))break}if(e.validBits<0)W=0;else{var j=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,W=j}}else{var K=255&e.acc;e.acc=e.acc>>>8,e.validBits-=8,W=K}if(z[G]=W,r.residueBooks[D][G]>=t.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"Residue.hx",lineNumber:55,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}))}else r.residueBooks[D][G]=-1}}var Y=t[r.classbook].entries,X=t[r.classbook].dimensions,Z=new Array(Y);r.classdata=Z;for(var Q=0,q=Y;Q<q;)for(var J=Q++,ee=J,te=X,ae=r.classdata,re=new Array(X),ie=ae[J]=re;--te>=0;)ie[te]=ee%S,ee=ee/S|0;return r},kha_audio2_ogg_vorbis_data_Residue.prototype={begin:null,end:null,partSize:null,classifications:null,classbook:null,classdata:null,residueBooks:null,type:null,decode:function(e,t,a,r,i,s,n){for(var _=t.codebooks,o=_[this.classbook].dimensions,h=this.end-this.begin,l=this.partSize,c=_$UInt_UInt_$Impl_$.toFloat(h)/_$UInt_UInt_$Impl_$.toFloat(l)|0,u=t.channel*c+1,d=new Array(u),g=0,p=r;g<p;){var f=g++;if(!s[f])for(var v=a[f],k=0,m=v.length;k<m;){v[k++]=0}}if(2!=this.type||1==r)for(var S=0;S<8;)for(var b=S++,y=0;y<c;){if(0==b)for(var x=0,B=r;x<B;){var w=x++;if(!s[w]){var I=_[this.classbook];e.validBits<10&&e.prepHuffman();var T,E=I.fastHuffman[1023&e.acc];if(E>=0){var C=I.codewordLengths[E];e.acc=e.acc>>>C,e.validBits-=C,e.validBits<0?(e.validBits=0,T=-1):T=E}else T=e.decodeScalarRaw(I);I.sparse&&(T=I.sortedValues[T]);var P=T;if(-1==P)return;for(var A=o;--A>=0;)d[w*c+A+y]=P%this.classifications,P=P/this.classifications|0}}for(var L=0,$=o;L<$;){L++;if(y>=c)break;for(var R=0,F=r;R<F;){var N=R++;if(!s[N]){var V=d[N*c+y],M=this.residueBooks[V][b];if(M>=0){var D=a[N],O=this.begin+y*l,U=l;if(!_[M].residueDecode(e,D,O,U,this.type))return}}}++y}}else{for(var H=0,G=r;H<G;){var W=H++;if(!s[W])break;if(W==r-1)return}for(var z=0;z<8;){var j=z++,K=0;if(2==r)for(;K<c;){var Y=this.begin+K*l,X=1&Y,Z=Y>>>1;if(0==j){var Q=_[this.classbook];e.validBits<10&&e.prepHuffman();var q,J=Q.fastHuffman[1023&e.acc];if(J>=0){var ee=Q.codewordLengths[J];e.acc=e.acc>>>ee,e.validBits-=ee,e.validBits<0?(e.validBits=0,q=-1):q=J}else q=e.decodeScalarRaw(Q);Q.sparse&&(q=Q.sortedValues[q]);var te=q;if(-1==te)return;for(var ae=o;--ae>=0;)d[ae+K]=te%this.classifications,te=te/this.classifications|0}for(var re=0,ie=o;re<ie;){re++;if(K>=c)break;var se=this.begin+K*l,ne=d[K],_e=this.residueBooks[ne][j];if(_e>=0){var oe=_[_e].decodeDeinterleaveRepeat(e,a,r,X,Z,i,l);if(null==oe)return;X=oe.cInter,Z=oe.pInter}else X=1&(se+=l),Z=se>>>1;++K}}else if(1==r)for(;K<c;){var he=0,le=this.begin+K*l;if(0==j){var ce=_[this.classbook];e.validBits<10&&e.prepHuffman();var ue,de=ce.fastHuffman[1023&e.acc];if(de>=0){var ge=ce.codewordLengths[de];e.acc=e.acc>>>ge,e.validBits-=ge,e.validBits<0?(e.validBits=0,ue=-1):ue=de}else ue=e.decodeScalarRaw(ce);ce.sparse&&(ue=ce.sortedValues[ue]);var pe=ue;if(-1==pe)return;for(var fe=o;--fe>=0;)d[fe+K]=pe%this.classifications,pe=pe/this.classifications|0}for(var ve=0,ke=o;ve<ke;){ve++;if(K>=c)break;var me=this.begin+K*l,Se=this.residueBooks[d[K]][j];if(Se>=0){var be=_[Se].decodeDeinterleaveRepeat(e,a,r,he,le,i,l);if(null==be)return;he=be.cInter,le=be.pInter}else he=0,le=me+=l;++K}}else for(;K<c;){var ye=this.begin+K*l,xe=_$UInt_UInt_$Impl_$.toFloat(ye)%_$UInt_UInt_$Impl_$.toFloat(r)|0,Be=_$UInt_UInt_$Impl_$.toFloat(ye)/_$UInt_UInt_$Impl_$.toFloat(r)|0;if(0==j){var we=_[this.classbook];e.validBits<10&&e.prepHuffman();var Ie,Te=we.fastHuffman[1023&e.acc];if(Te>=0){var Ee=we.codewordLengths[Te];e.acc=e.acc>>>Ee,e.validBits-=Ee,e.validBits<0?(e.validBits=0,Ie=-1):Ie=Te}else Ie=e.decodeScalarRaw(we);we.sparse&&(Ie=we.sortedValues[Ie]);var Ce=Ie;if(-1==Ce)return;for(var Pe=o;--Pe>=0;)d[Pe+K]=Ce%this.classifications,Ce=Ce/this.classifications|0}for(var Ae=0,Le=o;Ae<Le;){Ae++;if(K>=c)break;var $e=this.begin+K*l,Re=this.residueBooks[d[K]][j];if(Re>=0){var Fe=_[Re].decodeDeinterleaveRepeat(e,a,r,xe,Be,i,l);if(null==Fe)return;xe=Fe.cInter,Be=Fe.pInter}else $e+=l,xe=_$UInt_UInt_$Impl_$.toFloat($e)%_$UInt_UInt_$Impl_$.toFloat(r)|0,Be=_$UInt_UInt_$Impl_$.toFloat($e)/_$UInt_UInt_$Impl_$.toFloat(r)|0;++K}}}}},__class__:kha_audio2_ogg_vorbis_data_Residue};var kha_audio2_ogg_vorbis_data_Setting=$hxClasses["kha.audio2.ogg.vorbis.data.Setting"]=function(){};kha_audio2_ogg_vorbis_data_Setting.__name__=!0;var kha_compute_ConstantLocation=$hxClasses["kha.compute.ConstantLocation"]=function(){};kha_compute_ConstantLocation.__name__=!0,kha_compute_ConstantLocation.prototype={__class__:kha_compute_ConstantLocation};var kha_compute_TextureUnit=$hxClasses["kha.compute.TextureUnit"]=function(){};kha_compute_TextureUnit.__name__=!0,kha_compute_TextureUnit.prototype={__class__:kha_compute_TextureUnit};var kha_graphics1_Graphics=$hxClasses["kha.graphics1.Graphics"]=function(){};kha_graphics1_Graphics.__name__=!0,kha_graphics1_Graphics.prototype={begin:null,end:null,setPixel:null,__class__:kha_graphics1_Graphics};var kha_graphics2_Graphics=$hxClasses["kha.graphics2.Graphics"]=function(){this.transformations=[],this.transformations.push(new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1)),this.opacities=[],this.opacities.push(1),this.myFontSize=12,this.pipe=null};kha_graphics2_Graphics.__name__=!0,kha_graphics2_Graphics.prototype={begin:function(e,t){null==e&&(e=!0)},end:function(){},flush:function(){},clear:function(e){},drawImage:function(e,t,a){this.drawSubImage(e,t,a,0,0,e.get_width(),e.get_height())},drawSubImage:function(e,t,a,r,i,s,n){this.drawScaledSubImage(e,r,i,s,n,t,a,s,n)},drawScaledImage:function(e,t,a,r,i){this.drawScaledSubImage(e,0,0,e.get_width(),e.get_height(),t,a,r,i)},drawScaledSubImage:function(e,t,a,r,i,s,n,_,o){},drawRect:function(e,t,a,r,i){null==i&&(i=1)},fillRect:function(e,t,a,r){},drawString:function(e,t,a){},drawCharacters:function(e,t,a,r,i){},drawLine:function(e,t,a,r,i){null==i&&(i=1)},drawVideo:function(e,t,a,r,i){},fillTriangle:function(e,t,a,r,i,s){},get_imageScaleQuality:function(){return kha_graphics2_ImageScaleQuality.Low},set_imageScaleQuality:function(e){return kha_graphics2_ImageScaleQuality.High},get_mipmapScaleQuality:function(){return kha_graphics2_ImageScaleQuality.Low},set_mipmapScaleQuality:function(e){return kha_graphics2_ImageScaleQuality.High},get_color:function(){return-16777216},set_color:function(e){return-16777216},get_font:function(){return null},set_font:function(e){return null},get_fontSize:function(){return this.myFontSize},set_fontSize:function(e){return this.myFontSize=e},get_fontGlyphs:function(){return kha_graphics2_Graphics._glyphs},set_fontGlyphs:function(e){return kha_graphics2_Graphics._glyphs=e},pushTransformation:function(e){var t=new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);t._00=e._00,t._10=e._10,t._20=e._20,t._01=e._01,t._11=e._11,t._21=e._21,t._02=e._02,t._12=e._12,t._22=e._22,this.setTransformation(t),this.transformations.push(t)},popTransformation:function(){var e=this.transformations.pop();return this.setTransformation(this.transformations[this.transformations.length-1]),e},get_transformation:function(){return this.transformations[this.transformations.length-1]},set_transformation:function(e){this.setTransformation(e);var t=this.transformations[this.transformations.length-1];return t._00=e._00,t._10=e._10,t._20=e._20,t._01=e._01,t._11=e._11,t._21=e._21,t._02=e._02,t._12=e._12,t._22=e._22,e},translation:function(e,t){var a,r;r=e,a=t;var i=this.transformations[this.transformations.length-1];return new kha_math_FastMatrix3(1*i._00+0*i._01+r*i._02,1*i._10+0*i._11+r*i._12,1*i._20+0*i._21+r*i._22,0*i._00+1*i._01+a*i._02,0*i._10+1*i._11+a*i._12,0*i._20+1*i._21+a*i._22,0*i._00+0*i._01+1*i._02,0*i._10+0*i._11+1*i._12,0*i._20+0*i._21+1*i._22)},translate:function(e,t){var a,r;r=e,a=t;var i=this.transformations[this.transformations.length-1],s=new kha_math_FastMatrix3(1*i._00+0*i._01+r*i._02,1*i._10+0*i._11+r*i._12,1*i._20+0*i._21+r*i._22,0*i._00+1*i._01+a*i._02,0*i._10+1*i._11+a*i._12,0*i._20+1*i._21+a*i._22,0*i._00+0*i._01+1*i._02,0*i._10+0*i._11+1*i._12,0*i._20+0*i._21+1*i._22);this.setTransformation(s);var n=this.transformations[this.transformations.length-1];n._00=s._00,n._10=s._10,n._20=s._20,n._01=s._01,n._11=s._11,n._21=s._21,n._02=s._02,n._12=s._12,n._22=s._22},pushTranslation:function(e,t){var a,r;r=e,a=t;var i=this.transformations[this.transformations.length-1];this.pushTransformation(new kha_math_FastMatrix3(1*i._00+0*i._01+r*i._02,1*i._10+0*i._11+r*i._12,1*i._20+0*i._21+r*i._22,0*i._00+1*i._01+a*i._02,0*i._10+1*i._11+a*i._12,0*i._20+1*i._21+a*i._22,0*i._00+0*i._01+1*i._02,0*i._10+0*i._11+1*i._12,0*i._20+0*i._21+1*i._22))},rotation:function(e,t,a){var r,i,s,n,_,o,h,l,c,u,d,g,p,f,v,k,m,S,b,y,x,B;b=t,S=a;var w,I,T=Math.cos(e);x=-Math.sin(e);c=1*(m=1*T+0*(B=Math.sin(e))+0*b)+0*(f=1*x+0*(y=Math.cos(e))+0*b)+0*(d=0+1*b),o=0*m+1*f+0*d,s=m*(I=-t)+f*(w=-a)+1*d,l=1*(k=0*T+1*B+0*S)+0*(p=0*x+1*y+0*S)+0*(u=0+1*S),_=0*k+1*p+0*u,i=k*I+p*w+1*u,h=1*(v=0*T+0*B+0)+0*(g=0*x+0*y+0)+0,n=0*v+1*g+0,r=v*I+g*w+1;var E=this.transformations[this.transformations.length-1];return new kha_math_FastMatrix3(c*E._00+o*E._01+s*E._02,c*E._10+o*E._11+s*E._12,c*E._20+o*E._21+s*E._22,l*E._00+_*E._01+i*E._02,l*E._10+_*E._11+i*E._12,l*E._20+_*E._21+i*E._22,h*E._00+n*E._01+r*E._02,h*E._10+n*E._11+r*E._12,h*E._20+n*E._21+r*E._22)},rotate:function(e,t,a){var r,i,s,n,_,o,h,l,c,u,d,g,p,f,v,k,m,S,b,y,x,B,w,I,T,E,C,P,A,L,$;P=t,C=a;var R,F,N=Math.cos(e);L=-Math.sin(e);S=1*(E=1*N+0*($=Math.sin(e))+0*P)+0*(w=1*L+0*(A=Math.cos(e))+0*P)+0*(y=0+1*P),v=0*E+1*w+0*y,g=E*(F=-t)+w*(R=-a)+1*y,m=1*(T=0*N+1*$+0*C)+0*(B=0*L+1*A+0*C)+0*(b=0+1*C),f=0*T+1*B+0*b,d=T*F+B*R+1*b,k=1*(I=0*N+0*$+0)+0*(x=0*L+0*A+0)+0,p=0*I+1*x+0,u=I*F+x*R+1;var V=this.transformations[this.transformations.length-1];c=S*V._00+v*V._01+g*V._02,o=S*V._10+v*V._11+g*V._12,s=S*V._20+v*V._21+g*V._22,l=m*V._00+f*V._01+d*V._02,_=m*V._10+f*V._11+d*V._12,i=m*V._20+f*V._21+d*V._22,h=k*V._00+p*V._01+u*V._02,n=k*V._10+p*V._11+u*V._12,r=k*V._20+p*V._21+u*V._22,this.transformations[this.transformations.length-1]._00=c,this.transformations[this.transformations.length-1]._01=l,this.transformations[this.transformations.length-1]._02=h,this.transformations[this.transformations.length-1]._10=o,this.transformations[this.transformations.length-1]._11=_,this.transformations[this.transformations.length-1]._12=n,this.transformations[this.transformations.length-1]._20=s,this.transformations[this.transformations.length-1]._21=i,this.transformations[this.transformations.length-1]._22=r},pushRotation:function(e,t,a){var r,i,s,n,_,o,h,l,c,u,d,g,p,f,v,k,m,S,b,y,x,B;b=t,S=a;var w,I,T=Math.cos(e);x=-Math.sin(e);c=1*(m=1*T+0*(B=Math.sin(e))+0*b)+0*(f=1*x+0*(y=Math.cos(e))+0*b)+0*(d=0+1*b),o=0*m+1*f+0*d,s=m*(I=-t)+f*(w=-a)+1*d,l=1*(k=0*T+1*B+0*S)+0*(p=0*x+1*y+0*S)+0*(u=0+1*S),_=0*k+1*p+0*u,i=k*I+p*w+1*u,h=1*(v=0*T+0*B+0)+0*(g=0*x+0*y+0)+0,n=0*v+1*g+0,r=v*I+g*w+1;var E=this.transformations[this.transformations.length-1];this.pushTransformation(new kha_math_FastMatrix3(c*E._00+o*E._01+s*E._02,c*E._10+o*E._11+s*E._12,c*E._20+o*E._21+s*E._22,l*E._00+_*E._01+i*E._02,l*E._10+_*E._11+i*E._12,l*E._20+_*E._21+i*E._22,h*E._00+n*E._01+r*E._02,h*E._10+n*E._11+r*E._12,h*E._20+n*E._21+r*E._22))},pushOpacity:function(e){this.setOpacity(e),this.opacities.push(e)},popOpacity:function(){var e=this.opacities.pop();return this.setOpacity(this.get_opacity()),e},get_opacity:function(){return this.opacities[this.opacities.length-1]},set_opacity:function(e){return this.setOpacity(e),this.opacities[this.opacities.length-1]=e},scissor:function(e,t,a,r){},disableScissor:function(){},pipe:null,get_pipeline:function(){return this.pipe},set_pipeline:function(e){return this.setPipeline(e),this.pipe=e},transformations:null,opacities:null,myFontSize:null,setTransformation:function(e){},setOpacity:function(e){},setPipeline:function(e){},__class__:kha_graphics2_Graphics};var kha_graphics2_Graphics1=$hxClasses["kha.graphics2.Graphics1"]=function(e){this.canvas=e};kha_graphics2_Graphics1.__name__=!0,kha_graphics2_Graphics1.__interfaces__=[kha_graphics1_Graphics],kha_graphics2_Graphics1.prototype={canvas:null,texture:null,pixels:null,begin:function(){null==this.texture&&(this.texture=kha_Image.create(this.canvas.get_width(),this.canvas.get_height(),kha_graphics4_TextureFormat.RGBA32,kha_graphics4_Usage.ReadableUsage)),this.pixels=this.texture.lock()},end:function(){this.texture.unlock(),this.canvas.get_g2().begin(),this.canvas.get_g2().drawImage(this.texture,0,0),this.canvas.get_g2().end()},setPixel:function(e,t,a){this.pixels.setInt32(t*this.texture.get_realWidth()*4+4*e,a)},__class__:kha_graphics2_Graphics1};var kha_graphics2_ImageScaleQuality=$hxClasses["kha.graphics2.ImageScaleQuality"]={__ename__:!0,__constructs__:["Low","High"]};kha_graphics2_ImageScaleQuality.Low=["Low",0],kha_graphics2_ImageScaleQuality.Low.toString=$estr,kha_graphics2_ImageScaleQuality.Low.__enum__=kha_graphics2_ImageScaleQuality,kha_graphics2_ImageScaleQuality.High=["High",1],kha_graphics2_ImageScaleQuality.High.toString=$estr,kha_graphics2_ImageScaleQuality.High.__enum__=kha_graphics2_ImageScaleQuality;var kha_graphics2_truetype_VectorOfIntPointer=$hxClasses["kha.graphics2.truetype.VectorOfIntPointer"]=function(){};kha_graphics2_truetype_VectorOfIntPointer.__name__=!0,kha_graphics2_truetype_VectorOfIntPointer.prototype={value:null,__class__:kha_graphics2_truetype_VectorOfIntPointer};var kha_graphics2_truetype_Stbtt_$temp_$rect=$hxClasses["kha.graphics2.truetype.Stbtt_temp_rect"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$rect.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$rect.prototype={x0:null,y0:null,x1:null,y1:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$rect};var kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics=$hxClasses["kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.prototype={advanceWidth:null,leftSideBearing:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics};var kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics=$hxClasses["kha.graphics2.truetype.Stbtt_temp_font_v_metrics"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.prototype={ascent:null,descent:null,lineGap:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics};var kha_graphics2_truetype_Stbtt_$temp_$region=$hxClasses["kha.graphics2.truetype.Stbtt_temp_region"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$region.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$region.prototype={width:null,height:null,xoff:null,yoff:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$region};var kha_graphics2_truetype_Stbtt_$bakedchar=$hxClasses["kha.graphics2.truetype.Stbtt_bakedchar"]=function(){};kha_graphics2_truetype_Stbtt_$bakedchar.__name__=!0,kha_graphics2_truetype_Stbtt_$bakedchar.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,__class__:kha_graphics2_truetype_Stbtt_$bakedchar};var kha_graphics2_truetype_Stbtt_$aligned_$quad=$hxClasses["kha.graphics2.truetype.Stbtt_aligned_quad"]=function(){};kha_graphics2_truetype_Stbtt_$aligned_$quad.__name__=!0,kha_graphics2_truetype_Stbtt_$aligned_$quad.prototype={x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,__class__:kha_graphics2_truetype_Stbtt_$aligned_$quad};var kha_graphics2_truetype_Stbtt_$packedchar=$hxClasses["kha.graphics2.truetype.Stbtt_packedchar"]=function(){};kha_graphics2_truetype_Stbtt_$packedchar.__name__=!0,kha_graphics2_truetype_Stbtt_$packedchar.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,xoff2:null,yoff2:null,__class__:kha_graphics2_truetype_Stbtt_$packedchar};var kha_graphics2_truetype_Stbtt_$pack_$range=$hxClasses["kha.graphics2.truetype.Stbtt_pack_range"]=function(){};kha_graphics2_truetype_Stbtt_$pack_$range.__name__=!0,kha_graphics2_truetype_Stbtt_$pack_$range.prototype={font_size:null,first_unicode_codepoint_in_range:null,array_of_unicode_codepoints:null,num_chars:null,chardata_for_range:null,h_oversample:null,v_oversample:null,__class__:kha_graphics2_truetype_Stbtt_$pack_$range};var kha_graphics2_truetype_Stbtt_$pack_$context=$hxClasses["kha.graphics2.truetype.Stbtt_pack_context"]=function(){};kha_graphics2_truetype_Stbtt_$pack_$context.__name__=!0,kha_graphics2_truetype_Stbtt_$pack_$context.prototype={width:null,height:null,stride_in_bytes:null,padding:null,h_oversample:null,v_oversample:null,pixels:null,__class__:kha_graphics2_truetype_Stbtt_$pack_$context};var kha_graphics2_truetype_Stbtt_$fontinfo=$hxClasses["kha.graphics2.truetype.Stbtt_fontinfo"]=function(){};kha_graphics2_truetype_Stbtt_$fontinfo.__name__=!0,kha_graphics2_truetype_Stbtt_$fontinfo.prototype={data:null,fontstart:null,numGlyphs:null,loca:null,head:null,glyf:null,hhea:null,hmtx:null,kern:null,index_map:null,indexToLocFormat:null,__class__:kha_graphics2_truetype_Stbtt_$fontinfo};var kha_graphics2_truetype_Stbtt_$vertex=$hxClasses["kha.graphics2.truetype.Stbtt_vertex"]=function(){};kha_graphics2_truetype_Stbtt_$vertex.__name__=!0,kha_graphics2_truetype_Stbtt_$vertex.prototype={x:null,y:null,cx:null,cy:null,type:null,padding:null,__class__:kha_graphics2_truetype_Stbtt_$vertex};var kha_graphics2_truetype_Stbtt_$_$bitmap=$hxClasses["kha.graphics2.truetype.Stbtt__bitmap"]=function(){};kha_graphics2_truetype_Stbtt_$_$bitmap.__name__=!0,kha_graphics2_truetype_Stbtt_$_$bitmap.prototype={w:null,h:null,stride:null,pixels:null,pixels_offset:null,__class__:kha_graphics2_truetype_Stbtt_$_$bitmap};var kha_graphics2_truetype_Stbtt_$_$edge=$hxClasses["kha.graphics2.truetype.Stbtt__edge"]=function(){};kha_graphics2_truetype_Stbtt_$_$edge.__name__=!0,kha_graphics2_truetype_Stbtt_$_$edge.prototype={x0:null,y0:null,x1:null,y1:null,invert:null,__class__:kha_graphics2_truetype_Stbtt_$_$edge};var kha_graphics2_truetype_Stbtt_$_$active_$edge=$hxClasses["kha.graphics2.truetype.Stbtt__active_edge"]=function(){};kha_graphics2_truetype_Stbtt_$_$active_$edge.__name__=!0,kha_graphics2_truetype_Stbtt_$_$active_$edge.prototype={next:null,fx:null,fdx:null,fdy:null,direction:null,sy:null,ey:null,__class__:kha_graphics2_truetype_Stbtt_$_$active_$edge};var kha_graphics2_truetype_Stbtt_$_$point=$hxClasses["kha.graphics2.truetype.Stbtt__point"]=function(){};kha_graphics2_truetype_Stbtt_$_$point.__name__=!0,kha_graphics2_truetype_Stbtt_$_$point.prototype={x:null,y:null,__class__:kha_graphics2_truetype_Stbtt_$_$point};var kha_graphics2_truetype_StbTruetype=$hxClasses["kha.graphics2.truetype.StbTruetype"]=function(){};kha_graphics2_truetype_StbTruetype.__name__=!0,kha_graphics2_truetype_StbTruetype.STBTT_assert=function(e){if(!e)throw new js__$Boot_HaxeError("Error")},kha_graphics2_truetype_StbTruetype.STBTT_POINT_SIZE=function(e){return-e},kha_graphics2_truetype_StbTruetype.ttBYTE=function(e,t){return null==t&&(t=0),e.readU8(t)},kha_graphics2_truetype_StbTruetype.ttCHAR=function(e,t){null==t&&(t=0);var a=e.readU8(t);return a>=128?a-256:a},kha_graphics2_truetype_StbTruetype.ttUSHORT=function(e,t){null==t&&(t=0);var a=e.readU8(t);return e.readU8(t+1)|a<<8},kha_graphics2_truetype_StbTruetype.ttSHORT=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1)|a<<8;return 0!=(32768&r)?r-65536:r},kha_graphics2_truetype_StbTruetype.ttULONG=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1),i=e.readU8(t+2);return e.readU8(t+3)|i<<8|r<<16|a<<24},kha_graphics2_truetype_StbTruetype.ttLONG=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1),i=e.readU8(t+2);return e.readU8(t+3)|i<<8|r<<16|a<<24},kha_graphics2_truetype_StbTruetype.ttFixed=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1),i=e.readU8(t+2);return e.readU8(t+3)|i<<8|r<<16|a<<24},kha_graphics2_truetype_StbTruetype.stbtt_tag4=function(e,t,a,r,i,s){return e.readU8(t)==a&&e.readU8(t+1)==r&&e.readU8(t+2)==i&&e.readU8(t+3)==s},kha_graphics2_truetype_StbTruetype.stbtt_tag=function(e,t,a){var r=HxOverrides.cca(a,0),i=HxOverrides.cca(a,1),s=HxOverrides.cca(a,2),n=HxOverrides.cca(a,3);return e.readU8(t)==r&&e.readU8(t+1)==i&&e.readU8(t+2)==s&&e.readU8(t+3)==n},kha_graphics2_truetype_StbTruetype.stbtt__isfont=function(e){var t=HxOverrides.cca("1",0);if(e.readU8(0)==t&&0==e.readU8(1)&&0==e.readU8(2)&&0==e.readU8(3))return!0;var a=HxOverrides.cca("typ1",0),r=HxOverrides.cca("typ1",1),i=HxOverrides.cca("typ1",2),s=HxOverrides.cca("typ1",3);if(e.readU8(0)==a&&e.readU8(1)==r&&e.readU8(2)==i&&e.readU8(3)==s)return!0;var n=HxOverrides.cca("OTTO",0),_=HxOverrides.cca("OTTO",1),o=HxOverrides.cca("OTTO",2),h=HxOverrides.cca("OTTO",3);return e.readU8(0)==n&&e.readU8(1)==_&&e.readU8(2)==o&&e.readU8(3)==h||0==e.readU8(0)&&1==e.readU8(1)&&0==e.readU8(2)&&0==e.readU8(3)},kha_graphics2_truetype_StbTruetype.stbtt__find_table=function(e,t,a){for(var r=t+4,i=e.readU8(r),s=t+12,n=0,_=e.readU8(r+1)|i<<8;n<_;){var o=s+16*n++,h=HxOverrides.cca(a,0),l=HxOverrides.cca(a,1),c=HxOverrides.cca(a,2),u=HxOverrides.cca(a,3);if(e.readU8(o)==h&&e.readU8(o+1)==l&&e.readU8(o+2)==c&&e.readU8(o+3)==u){var d=o+8,g=e.readU8(d),p=e.readU8(d+1),f=e.readU8(d+2);return e.readU8(d+3)|f<<8|p<<16|g<<24}}return 0},kha_graphics2_truetype_StbTruetype.stbtt_GetFontOffsetForIndex=function(e,t){if(kha_graphics2_truetype_StbTruetype.stbtt__isfont(e))return 0==t?0:-1;var a=HxOverrides.cca("ttcf",0),r=HxOverrides.cca("ttcf",1),i=HxOverrides.cca("ttcf",2),s=HxOverrides.cca("ttcf",3);if(e.readU8(0)==a&&e.readU8(1)==r&&e.readU8(2)==i&&e.readU8(3)==s){var n,_=e.readU8(4),o=e.readU8(5),h=e.readU8(6);if(65536!=(e.readU8(7)|h<<8|o<<16|_<<24)){var l=e.readU8(4),c=e.readU8(5),u=e.readU8(6);n=131072==(e.readU8(7)|u<<8|c<<16|l<<24)}else n=!0;if(n){var d=e.readU8(8),g=e.readU8(9),p=e.readU8(10);if(t>=(e.readU8(11)|p<<8|g<<16|d<<24))return-1;var f=12+4*t,v=e.readU8(f),k=e.readU8(f+1),m=e.readU8(f+2);return e.readU8(f+3)|m<<8|k<<16|v<<24}}return-1},kha_graphics2_truetype_StbTruetype.stbtt_InitFont=function(e,t,a){var r,i,s;if(e.data=t,e.fontstart=a,r=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"cmap"),e.loca=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"loca"),e.head=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"head"),e.glyf=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"glyf"),e.hhea=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"hhea"),e.hmtx=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"hmtx"),e.kern=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"kern"),0==r||0==e.loca||0==e.head||0==e.glyf||0==e.hhea||0==e.hmtx)return!1;if(0!=(i=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"maxp"))){var n=i+4,_=t.readU8(n),o=t.readU8(n+1);e.numGlyphs=o|_<<8}else e.numGlyphs=65535;var h=r+2,l=t.readU8(h);s=t.readU8(h+1)|l<<8,e.index_map=0;for(var c=0,u=s;c<u;){var d=r+4+8*c++,g=t.readU8(d);switch(t.readU8(d+1)|g<<8){case 0:var p=d+4,f=t.readU8(p),v=t.readU8(p+1),k=t.readU8(p+2),m=t.readU8(p+3);e.index_map=r+(m|k<<8|v<<16|f<<24);break;case 3:var S=d+2,b=t.readU8(S);switch(t.readU8(S+1)|b<<8){case 1:case 10:var y=d+4,x=t.readU8(y),B=t.readU8(y+1),w=t.readU8(y+2),I=t.readU8(y+3);e.index_map=r+(I|w<<8|B<<16|x<<24)}}}if(0==e.index_map)return!1;var T=e.head+50,E=t.readU8(T),C=t.readU8(T+1);return e.indexToLocFormat=C|E<<8,!0},kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex=function(e,t){var a=e.data,r=e.index_map,i=a.readU8(r),s=a.readU8(r+1)|i<<8;if(0==s){var n=r+2,_=a.readU8(n);return t<(a.readU8(n+1)|_<<8)-6?a.readU8(r+6+t):0}if(6==s){var o=r+6,h=a.readU8(o),l=a.readU8(o+1)|h<<8,c=r+8,u=a.readU8(c),d=a.readU8(c+1);if(t>=l&&t<l+(d|u<<8)){var g=r+10+2*(t-l),p=a.readU8(g);return a.readU8(g+1)|p<<8}return 0}if(2==s)throw new js__$Boot_HaxeError("Error");if(4==s){var f=r+6,v=a.readU8(f),k=(a.readU8(f+1)|v<<8)>>1,m=r+8,S=a.readU8(m),b=(a.readU8(m+1)|S<<8)>>1,y=r+10,x=a.readU8(y),B=a.readU8(y+1)|x<<8,w=r+12,I=a.readU8(w),T=(a.readU8(w+1)|I<<8)>>1,E=r+14,C=E;if(t>65535)return 0;var P,A,L=C+2*T,$=a.readU8(L);for(t>=(a.readU8(L+1)|$<<8)&&(C+=2*T),C-=2;0!=B;){var R=C+2*(b>>=1),F=a.readU8(R);t>(a.readU8(R+1)|F<<8)&&(C+=2*b),--B}var N=(C+=2)-E>>1,V=E+2*N,M=a.readU8(V);if(t>(a.readU8(V+1)|M<<8))throw new js__$Boot_HaxeError("Error");var D=r+14+2*k+2+2*N,O=a.readU8(D);if(t<(A=a.readU8(D+1)|O<<8))return 0;var U=r+14+6*k+2+2*N,H=a.readU8(U);if(0==(P=a.readU8(U+1)|H<<8)){var G=r+14+4*k+2+2*N,W=a.readU8(G),z=a.readU8(G+1)|W<<8;return t+(0!=(32768&z)?z-65536:z)}var j=P+2*(t-A)+r+14+6*k+2+2*N,K=a.readU8(j);return a.readU8(j+1)|K<<8}if(12==s||13==s){var Y,X,Z=r+12,Q=a.readU8(Z),q=a.readU8(Z+1),J=a.readU8(Z+2);for(Y=0,X=a.readU8(Z+3)|J<<8|q<<16|Q<<24;Y<X;){var ee=Y+(X-Y>>1),te=r+16+12*ee,ae=a.readU8(te),re=a.readU8(te+1),ie=a.readU8(te+2),se=a.readU8(te+3)|ie<<8|re<<16|ae<<24,ne=r+16+12*ee+4,_e=a.readU8(ne),oe=a.readU8(ne+1),he=a.readU8(ne+2),le=a.readU8(ne+3);if(t<se)X=ee;else{if(!(t>(le|he<<8|oe<<16|_e<<24))){var ce=r+16+12*ee+8,ue=a.readU8(ce),de=a.readU8(ce+1),ge=a.readU8(ce+2),pe=a.readU8(ce+3)|ge<<8|de<<16|ue<<24;return 12==s?pe+t-se:pe}Y=ee+1}}return 0}throw new js__$Boot_HaxeError("Error")},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointShape=function(e,t){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t))},kha_graphics2_truetype_StbTruetype.stbtt_setvertex=function(e,t,a,r,i,s){e.type=t,e.x=a,e.y=r,e.cx=i,e.cy=s},kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset=function(e,t){var a,r;if(t>=e.numGlyphs)return-1;if(e.indexToLocFormat>=2)return-1;if(0==e.indexToLocFormat){var i=e.glyf,s=e.data,n=e.loca+2*t,_=s.readU8(n);a=i+2*(s.readU8(n+1)|_<<8);var o=e.glyf,h=e.data,l=e.loca+2*t+2,c=h.readU8(l);r=o+2*(h.readU8(l+1)|c<<8)}else{var u=e.glyf,d=e.data,g=e.loca+4*t,p=d.readU8(g),f=d.readU8(g+1),v=d.readU8(g+2);a=u+(d.readU8(g+3)|v<<8|f<<16|p<<24);var k=e.glyf,m=e.data,S=e.loca+4*t+4,b=m.readU8(S),y=m.readU8(S+1),x=m.readU8(S+2);r=k+(m.readU8(S+3)|x<<8|y<<16|b<<24)}return a==r?-1:a},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox=function(e,t,a){var r=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(e,t);if(r<0)return!1;var i=e.data,s=r+2,n=i.readU8(s),_=i.readU8(s+1)|n<<8;a.x0=0!=(32768&_)?_-65536:_;var o=e.data,h=r+4,l=o.readU8(h),c=o.readU8(h+1)|l<<8;a.y0=0!=(32768&c)?c-65536:c;var u=e.data,d=r+6,g=u.readU8(d),p=u.readU8(d+1)|g<<8;a.x1=0!=(32768&p)?p-65536:p;var f=e.data,v=r+8,k=f.readU8(v),m=f.readU8(v+1)|k<<8;return a.y1=0!=(32768&m)?m-65536:m,!0},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBox=function(e,t,a){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t),a)},kha_graphics2_truetype_StbTruetype.stbtt_IsGlyphEmpty=function(e,t){var a=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(e,t);if(a<0)return!0;var r=e.data,i=r.readU8(a),s=r.readU8(a+1)|i<<8;return 0==(0!=(32768&s)?s-65536:s)},kha_graphics2_truetype_StbTruetype.stbtt__close_shape=function(e,t,a,r,i,s,n,_,o,h){return r?(a&&kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],3,o+n>>1,h+_>>1,o,h),kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],3,i,s,n,_)):a?kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],3,i,s,o,h):kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],2,i,s,0,0),t},kha_graphics2_truetype_StbTruetype.copyVertices=function(e,t,a,r){for(var i=0,s=r;i<s;){var n=i++;t[a+n]=e[n]}},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape=function(e,t){var a,r,i=e.data,s=null,n=0,_=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(e,t);if(_<0)return null;var o=i.readU8(_),h=i.readU8(_+1)|o<<8;if((a=0!=(32768&h)?h-65536:h)>0){var l,c,u,d,g,p,f,v,k,m,S,b,y,x,B=0,w=0,I=0,T=!1,E=!1,C=0;r=i.sub(_+10,i.get_length()-(_+10));var P=_+10+2*a,A=i.readU8(P);c=i.readU8(P+1)|A<<8,x=i.sub(_+10+2*a+2+c,i.get_length()-(_+10+2*a+2+c));var L=2*a-2,$=r.readU8(L);if(u=(d=1+(r.readU8(L+1)|$<<8))+2*a,null==(s=new Array(u)))return null;for(var R=0,F=s.length;R<F;){s[R++]=new kha_graphics2_truetype_Stbtt_$vertex}I=0,l=0,g=u-d;for(var N=0,V=d;N<V;){var M=N++;0==l?0!=(8&(B=x.readU8(C++)))&&(l=x.readU8(C++)):--l,s[g+M].type=B}p=0;for(var D=0,O=d;D<O;){var U=D++;if(0!=(2&(B=s[g+U].type))){var H=x.readU8(C++);p+=0!=(16&B)?H:-H}else if(0==(16&B)){var G=x.readU8(C),W=x.readU8(C+1)|G<<8;p+=0!=(32768&W)?W-65536:W,C+=2}s[g+U].x=p}f=0;for(var z=0,j=d;z<j;){var K=z++;if(0!=(4&(B=s[g+K].type))){var Y=x.readU8(C++);f+=0!=(32&B)?Y:-Y}else if(0==(32&B)){var X=x.readU8(C),Z=x.readU8(C+1)|X<<8;f+=0!=(32768&Z)?Z-65536:Z,C+=2}s[g+K].y=f}n=0,m=S=v=k=b=y=0;for(var Q=0;Q<d;){if(B=s[g+Q].type,p=s[g+Q].x,f=s[g+Q].y,I==Q){0!=Q&&(n=kha_graphics2_truetype_StbTruetype.stbtt__close_shape(s,n,T,E,m,S,b,y,v,k)),(E=0==(1&B))?(b=p,y=f,0==(1&s[g+Q+1].type)?(m=p+s[g+Q+1].x>>1,S=f+s[g+Q+1].y>>1):(m=s[g+Q+1].x,S=s[g+Q+1].y,++Q)):(m=p,S=f),kha_graphics2_truetype_StbTruetype.stbtt_setvertex(s[n++],1,m,S,0,0),T=!1;var q=2*w,J=r.readU8(q);I=1+(r.readU8(q+1)|J<<8),++w}else 0==(1&B)?(T&&kha_graphics2_truetype_StbTruetype.stbtt_setvertex(s[n++],3,v+p>>1,k+f>>1,v,k),v=p,k=f,T=!0):(T?kha_graphics2_truetype_StbTruetype.stbtt_setvertex(s[n++],3,p,f,v,k):kha_graphics2_truetype_StbTruetype.stbtt_setvertex(s[n++],2,p,f,0,0),T=!1);++Q}n=kha_graphics2_truetype_StbTruetype.stbtt__close_shape(s,n,T,E,m,S,b,y,v,k)}else if(-1==a){var ee=1,te=i.sub(_+10,i.get_length()-(_+10)),ae=0;for(n=0,s=null;0!=ee;){var re,ie,se,ne,_e,oe=0,he=null,le=1,ce=0,ue=0,de=1,ge=0,pe=0,fe=te.readU8(ae),ve=te.readU8(ae+1)|fe<<8;re=0!=(32768&ve)?ve-65536:ve,ae+=2;var ke=te.readU8(ae),me=te.readU8(ae+1)|ke<<8;if(ie=0!=(32768&me)?me-65536:me,ae+=2,0==(2&re))throw new js__$Boot_HaxeError("Error");if(0!=(1&re)){var Se=te.readU8(ae),be=te.readU8(ae+1)|Se<<8;ge=0!=(32768&be)?be-65536:be,ae+=2;var ye=te.readU8(ae),xe=te.readU8(ae+1)|ye<<8;pe=0!=(32768&xe)?xe-65536:xe,ae+=2}else{var Be=te.readU8(ae);ge=Be>=128?Be-256:Be,++ae;var we=te.readU8(ae);pe=we>=128?we-256:we,++ae}if(0!=(8&re)){var Ie=te.readU8(ae),Te=te.readU8(ae+1)|Ie<<8;le=de=(0!=(32768&Te)?Te-65536:Te)/16384,ae+=2,ce=ue=0}else if(0!=(64&re)){var Ee=te.readU8(ae),Ce=te.readU8(ae+1)|Ee<<8;le=(0!=(32768&Ce)?Ce-65536:Ce)/16384,ae+=2,ce=ue=0;var Pe=te.readU8(ae),Ae=te.readU8(ae+1)|Pe<<8;de=(0!=(32768&Ae)?Ae-65536:Ae)/16384,ae+=2}else if(0!=(128&re)){var Le=te.readU8(ae),$e=te.readU8(ae+1)|Le<<8;le=(0!=(32768&$e)?$e-65536:$e)/16384,ae+=2;var Re=te.readU8(ae),Fe=te.readU8(ae+1)|Re<<8;ce=(0!=(32768&Fe)?Fe-65536:Fe)/16384,ae+=2;var Ne=te.readU8(ae),Ve=te.readU8(ae+1)|Ne<<8;ue=(0!=(32768&Ve)?Ve-65536:Ve)/16384,ae+=2;var Me=te.readU8(ae),De=te.readU8(ae+1)|Me<<8;de=(0!=(32768&De)?De-65536:De)/16384,ae+=2}if(ne=Math.sqrt(le*le+ce*ce),_e=Math.sqrt(ue*ue+de*de),(oe=null==(se=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,ie))?0:se.length)>0){for(var Oe=0,Ue=oe;Oe<Ue;){var He,Ge,We=se[Oe++];He=We.x,Ge=We.y,We.x=ne*(le*He+ue*Ge+ge)|0,We.y=_e*(ce*He+de*Ge+pe)|0,He=We.cx,Ge=We.cy,We.cx=ne*(le*He+ue*Ge+ge)|0,We.cy=_e*(ce*He+de*Ge+pe)|0}if(null==(he=new Array(n+oe)))return null;n>0&&kha_graphics2_truetype_StbTruetype.copyVertices(s,he,0,n),kha_graphics2_truetype_StbTruetype.copyVertices(se,he,n,oe),s=he,n+=oe}ee=32&re}}else if(a<0)throw new js__$Boot_HaxeError("Error");if(null==s)return null;if(s.length<n)throw new js__$Boot_HaxeError("Error");if(n<s.length){var ze=new Array(n);return kha_graphics2_truetype_StbTruetype.copyVertices(s,ze,0,n),ze}return s},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics=function(e,t){var a=e.data,r=e.hhea+34,i=a.readU8(r),s=a.readU8(r+1)|i<<8,n=new kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics;if(t<s){var _=e.data,o=e.hmtx+4*t,h=_.readU8(o),l=_.readU8(o+1)|h<<8;n.advanceWidth=0!=(32768&l)?l-65536:l;var c=e.data,u=e.hmtx+4*t+2,d=c.readU8(u),g=c.readU8(u+1)|d<<8;n.leftSideBearing=0!=(32768&g)?g-65536:g}else{var p=e.data,f=e.hmtx+4*(s-1),v=p.readU8(f),k=p.readU8(f+1)|v<<8;n.advanceWidth=0!=(32768&k)?k-65536:k;var m=e.data,S=e.hmtx+4*s+2*(t-s),b=m.readU8(S),y=m.readU8(S+1)|b<<8;n.leftSideBearing=0!=(32768&y)?y-65536:y}return n},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphKernAdvance=function(e,t,a){var r,i,s,n,_,o=e.data.sub(e.kern,e.data.get_length()-e.kern);if(0==e.kern)return 0;var h=o.readU8(2);if((o.readU8(3)|h<<8)<1)return 0;var l=o.readU8(8);if(1!=(o.readU8(9)|l<<8))return 0;s=0;var c=o.readU8(10);for(n=(o.readU8(11)|c<<8)-1,r=t<<16|a;s<=n;){var u=18+6*(_=s+n>>1),d=o.readU8(u),g=o.readU8(u+1),p=o.readU8(u+2);if(r<(i=o.readU8(u+3)|p<<8|g<<16|d<<24))n=_-1;else{if(!(r>i)){var f=22+6*_,v=o.readU8(f),k=o.readU8(f+1)|v<<8;return 0!=(32768&k)?k-65536:k}s=_+1}}return 0},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointKernAdvance=function(e,t,a){return 0==e.kern?0:kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphKernAdvance(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t),kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,a))},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointHMetrics=function(e,t){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t))},kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics=function(e){var t=new kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics,a=e.data,r=e.hhea+4,i=a.readU8(r),s=a.readU8(r+1)|i<<8;t.ascent=0!=(32768&s)?s-65536:s;var n=e.data,_=e.hhea+6,o=n.readU8(_),h=n.readU8(_+1)|o<<8;t.descent=0!=(32768&h)?h-65536:h;var l=e.data,c=e.hhea+8,u=l.readU8(c),d=l.readU8(c+1)|u<<8;return t.lineGap=0!=(32768&d)?d-65536:d,t},kha_graphics2_truetype_StbTruetype.stbtt_GetFontBoundingBox=function(e){var t=new kha_graphics2_truetype_Stbtt_$temp_$rect,a=e.data,r=e.head+36,i=a.readU8(r),s=a.readU8(r+1)|i<<8;t.x0=0!=(32768&s)?s-65536:s;var n=e.data,_=e.head+38,o=n.readU8(_),h=n.readU8(_+1)|o<<8;t.y0=0!=(32768&h)?h-65536:h;var l=e.data,c=e.head+40,u=l.readU8(c),d=l.readU8(c+1)|u<<8;t.x1=0!=(32768&d)?d-65536:d;var g=e.data,p=e.head+42,f=g.readU8(p),v=g.readU8(p+1)|f<<8;return t.y1=0!=(32768&v)?v-65536:v,t},kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight=function(e,t){var a=e.data,r=e.hhea+4,i=a.readU8(r),s=a.readU8(r+1)|i<<8,n=e.data,_=e.hhea+6,o=n.readU8(_),h=n.readU8(_+1)|o<<8;return t/((0!=(32768&s)?s-65536:s)-(0!=(32768&h)?h-65536:h))},kha_graphics2_truetype_StbTruetype.stbtt_ScaleForMappingEmToPixels=function(e,t){var a=e.data,r=e.head+18,i=a.readU8(r);return t/(a.readU8(r+1)|i<<8)},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel=function(e,t,a,r,i,s){var n=new kha_graphics2_truetype_Stbtt_$temp_$rect;if(kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox(e,t,n)){var _=n.x0,o=n.x1,h=n.y0,l=n.y1;n.x0=Math.floor(_*a+i),n.y0=Math.floor(-l*r+s),n.x1=Math.ceil(o*a+i),n.y1=Math.ceil(-h*r+s)}else n.x0=0,n.y0=0,n.x1=0,n.y1=0;return n},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox=function(e,t,a,r){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,t,a,r,0,0)},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBoxSubpixel=function(e,t,a,r,i,s){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t),a,r,i,s)},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBox=function(e,t,a,r){return kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBoxSubpixel(e,t,a,r,0,0)},kha_graphics2_truetype_StbTruetype.stbtt__new_active=function(e,t,a,r){var i=new kha_graphics2_truetype_Stbtt_$_$active_$edge,s=(e[t].x1-e[t].x0)/(e[t].y1-e[t].y0);return null==i?i:(i.fdx=s,i.fdy=0!=s?1/s:0,i.fx=e[t].x0+s*(r-e[t].y0),i.fx-=a,i.direction=e[t].invert?1:-1,i.sy=e[t].y0,i.ey=e[t].y1,i.next=null,i)},kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge=function(e,t,a,r,i,s,n,_){if(s!=_){if(!(s<_))throw new js__$Boot_HaxeError("Error");if(!(r.sy<=r.ey))throw new js__$Boot_HaxeError("Error");if(!(s>r.ey||_<r.sy)){if(s<r.sy&&(i+=(n-i)*(r.sy-s)/(_-s),s=r.sy),_>r.ey&&(n+=(n-i)*(r.ey-_)/(_-s),_=r.ey),i==a){if(!(n<=a+1))throw new js__$Boot_HaxeError("Error")}else if(i==a+1){if(!(n>=a))throw new js__$Boot_HaxeError("Error")}else if(i<=a){if(!(n<=a))throw new js__$Boot_HaxeError("Error")}else if(i>=a+1){if(!(n>=a+1))throw new js__$Boot_HaxeError("Error")}else if(!(n>=a&&n<=a+1))throw new js__$Boot_HaxeError("Error");if(i<=a&&n<=a){var o=t+a,h=e;h[o]=h[o]+r.direction*(_-s)}else if(!(i>=a+1&&n>=a+1)){if(!(i>=a&&i<=a+1&&n>=a&&n<=a+1))throw new js__$Boot_HaxeError("Error");var l=t+a,c=e;c[l]=c[l]+r.direction*(_-s)*(1-(i-a+(n-a))/2)}}}},kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new=function(e,t,a,r,i,s){for(var n=s+1;null!=i;){if(!(i.ey>=s))throw new js__$Boot_HaxeError("Error");if(0==i.fdx){var _=i.fx;_<r&&(_>=0?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,0|_,i,_,s,_,n),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(t,a-1,_+1|0,i,_,s,_,n)):kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(t,a-1,0,i,_,s,_,n))}else{var o,h,l,c,u=i.fx,d=i.fdx,g=u+d,p=i.fdy;if(!(i.sy<=n&&i.ey>=s))throw new js__$Boot_HaxeError("Error");if(i.sy>s?(o=u+d*(i.sy-s),l=i.sy):(o=u,l=s),i.ey<n?(h=u+d*(i.ey-s),c=i.ey):(h=g,c=n),o>=0&&h>=0&&o<r&&h<r)if((0|o)==(0|h)){var f,v=0|o;if(f=c-l,!(v>=0&&v<r))throw new js__$Boot_HaxeError("Error");var k=v,m=e;m[k]=m[k]+i.direction*(1-(o-v+(h-v))/2)*f;var S=a+v,b=t;b[S]=b[S]+i.direction*f}else{var y,x,B,w,I,T,E;if(o>h)E=l=n-(l-s),l=c=n-(c-s),c=E,E=h,h=o,o=E,d=-d,p=-p,E=u,u=g,g=E;x=0|h,B=((y=0|o)+1-u)*p+s,T=(I=i.direction)*(B-l);var C=y,P=e;P[C]=P[C]+T*(1-(o-y+(y+1-y))/2),w=I*p;for(var A=y+1,L=x;A<L;){var $=A++,R=e;R[$]=R[$]+(T+w/2),T+=w}if(B+=p*(x-(y+1)),!(Math.abs(T)<=1.01))throw new js__$Boot_HaxeError("Error");var F=x,N=e;N[F]=N[F]+(T+I*(1-(x-x+(h-x))/2)*(c-B));var V=a+x,M=t;M[V]=M[V]+I*(c-l)}else for(var D=0,O=r;D<O;){var U,H,G=D++,W=s,z=G,j=G+1,K=g,Y=n;U=(G-u)/d+s,H=(G+1-u)/d+s,u<z&&K>j?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,u,W,z,U),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,z,U,j,H),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,j,H,K,Y)):K<z&&u>j?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,u,W,j,H),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,j,H,z,U),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,z,U,K,Y)):u<z&&K>z?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,u,W,z,U),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,z,U,K,Y)):K<z&&u>z?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,u,W,z,U),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,z,U,K,Y)):u<j&&K>j?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,u,W,j,H),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,j,H,K,Y)):K<j&&u>j?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,u,W,j,H),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,j,H,K,Y)):kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,G,i,u,W,K,Y)}}i=i.next}},kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges=function(e,t,a,r,i,s){var n,_,o,h,l=null,c=0,u=0;if(e.w>64){var d=2*e.w+1;_=new Array(d)}else{_=new Array(129)}for(o=_,h=e.w,n=s,t[u+a].y0=s+e.h+1;c<e.h;){var g,p,f=n+0,v=n+1;g=l,p=null;for(var k=0,m=e.w;k<m;){_[k++]=0}for(var S=0,b=e.w+1;S<b;){o[h+S++]=0}for(;null!=g;){var y=g;if(y.ey<=f){if(null==p?(l=y.next,g=y.next):(p.next=y.next,g=y.next),0==y.direction)throw new js__$Boot_HaxeError("Error");y.direction=0}else p=g,g=g.next}for(;t[u].y0<=v;){if(t[u].y0!=t[u].y1){var x=kha_graphics2_truetype_StbTruetype.stbtt__new_active(t,u,i,f);if(!(x.ey>=f))throw new js__$Boot_HaxeError("Error");x.next=l,l=x}++u}null!=l&&kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new(_,o,h+1,e.w,l,f);for(var B=0,w=0,I=e.w;w<I;){var T,E,C=w++;B+=o[h+C],T=_[C]+B,(E=0|(T=255*Math.abs(T)+.5))>255&&(E=255),e.pixels.writeU8(e.pixels_offset+c*e.stride+C,E)}for(p=null,g=l;null!=g;){var P=g;P.fx+=P.fdx,p=g,g=g.next}++n,++c}},kha_graphics2_truetype_StbTruetype.STBTT__COMPARE=function(e,t){return e.y0<t.y0},kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort=function(e,t){for(var a,r=1,i=t;r<i;){var s=r++,n=e[s],_=n;for(a=s;a>0;){var o=e[a-1];if(!kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(_,o))break;e[a]=e[a-1],--a}s!=a&&(e[a]=n)}},kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort=function(e,t,a){for(;a>12;){var r,i,s,n,_,o;if(s=a>>1,kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t],e[t+s])!=(i=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t+s],e[t+a-1])))r=e[t+(o=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t],e[t+a-1])==i?0:a-1)],e[t+o]=e[t+s],e[t+s]=r;for(r=e[t],e[t]=e[t+s],e[t+s]=r,n=1,_=a-1;;){for(;kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t+n],e[t]);)++n;for(;kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t],e[t+_]);)--_;if(n>=_)break;r=e[t+n],e[t+n]=e[t+_],e[t+_]=r,++n,--_}_<a-n?(kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(e,t,_),t+=n,a-=n):(kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(e,t+n,a-n),a=_)}},kha_graphics2_truetype_StbTruetype.stbtt__sort_edges=function(e,t){kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(e,0,t),kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort(e,t)},kha_graphics2_truetype_StbTruetype.stbtt__rasterize=function(e,t,a,r,i,s,n,_,o,h,l){var c,u,d,g,p=l?-s:s;u=0;for(var f=0,v=r;f<v;){u+=a[f++]}if(null!=(c=new Array(u+1))){for(var k=0,m=c.length;k<m;){c[k++]=new kha_graphics2_truetype_Stbtt_$_$edge}u=0,g=0;for(var S=0,b=r;S<b;){var y=S++,x=t,B=0+g;g+=a[y],d=a[y]-1;for(var w=0,I=a[y];w<I;){var T=w++,E=T,C=d;x[B+d].y!=x[B+T].y?(c[u].invert=!1,(l?x[B+d].y>x[B+T].y:x[B+d].y<x[B+T].y)&&(c[u].invert=!0,E=d,C=T),c[u].x0=x[B+E].x*i+n,c[u].y0=1*(x[B+E].y*p+_),c[u].x1=x[B+C].x*i+n,c[u].y1=1*(x[B+C].y*p+_),++u,d=T):d=T}}kha_graphics2_truetype_StbTruetype.stbtt__sort_edges(c,u),kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges(e,c,u,1,o,h)}},kha_graphics2_truetype_StbTruetype.stbtt__add_point=function(e,t,a,r){null!=e&&(e[t].x=a,e[t].y=r)},kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve=function(e,t,a,r,i,s,n,_,o,h){var l=(a+2*i+n)/4,c=(r+2*s+_)/4,u=(a+n)/2-l,d=(r+_)/2-c;return h>16?1:(u*u+d*d>o?(kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(e,t,a,r,(a+i)/2,(r+s)/2,l,c,o,h+1),kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(e,t,l,c,(i+n)/2,(s+_)/2,n,_,o,h+1)):(kha_graphics2_truetype_StbTruetype.stbtt__add_point(e,t.value,n,_),t.value+=1),1)},kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves=function(e,t,a,r,i){for(var s=null,n=0,_=a*a,o=0,h=0,l=0,c=t;l<c;){1==e[l++].type&&++o}if(i.value=o,0==o)return null;var u=new Array(o);if(r.value=u,null==r.value)return i.value=0,null;for(var d=0;d<2;){var g=0,p=0;if(1==d++){if(null==(s=new Array(n)))return r.value=null,i.value=0,null;for(var f=0,v=s.length;f<v;){s[f++]=new kha_graphics2_truetype_Stbtt_$_$point}}n=0,o=-1;for(var k=0,m=t;k<m;){var S=k++;switch(e[S].type){case 1:o>=0&&(r.value[o]=n-h),++o,h=n,g=e[S].x,p=e[S].y,kha_graphics2_truetype_StbTruetype.stbtt__add_point(s,n++,g,p);break;case 2:g=e[S].x,p=e[S].y,kha_graphics2_truetype_StbTruetype.stbtt__add_point(s,n++,g,p);break;case 3:var b={value:n};kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(s,b,g,p,e[S].cx,e[S].cy,e[S].x,e[S].y,_,0),n=b.value,g=e[S].x,p=e[S].y}}r.value[o]=n-h}return s},kha_graphics2_truetype_StbTruetype.stbtt_Rasterize=function(e,t,a,r,i,s,n,_,o,h,l){var c,u=i>s?s:i,d=0,g={value:d},p=new kha_graphics2_truetype_VectorOfIntPointer,f=kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves(a,r,t/u,p,g);d=g.value,c=p.value,null!=f&&kha_graphics2_truetype_StbTruetype.stbtt__rasterize(e,f,c,d,i,s,n,_,o,h,l)},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel=function(e,t,a,r,i,s,n){var _,o,h,l,c=new kha_graphics2_truetype_Stbtt_$_$bitmap,u=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,s),d=u.length;if(0==t&&(t=a),0==a){if(0==t)return null;a=t}var g=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,s,t,a,r,i);return _=g.x0,o=g.y0,h=g.x1,l=g.y1,c.w=h-_,c.h=l-o,c.pixels=null,n.width=c.w,n.height=c.h,n.xoff=_,n.yoff=o,0!=c.w&&0!=c.h&&(c.pixels=kha_internal_BytesBlob.alloc(c.w*c.h),null!=c.pixels&&(c.stride=c.w,kha_graphics2_truetype_StbTruetype.stbtt_Rasterize(c,.35,u,d,t,a,r,i,_,o,!0))),c.pixels},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmap=function(e,t,a,r,i){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel(e,t,a,0,0,r,i)},kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel=function(e,t,a,r,i,s,n,_,o,h,l){var c,u,d=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,l),g=null==d?0:d.length,p=new kha_graphics2_truetype_Stbtt_$_$bitmap,f=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,l,n,_,o,h);c=f.x0,u=f.y0,p.pixels=t,p.pixels_offset=a,p.w=r,p.h=i,p.stride=s,0!=p.w&&0!=p.h&&kha_graphics2_truetype_StbTruetype.stbtt_Rasterize(p,.35,d,g,n,_,o,h,c,u,!0)},kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap=function(e,t,a,r,i,s,n,_,o){kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel(e,t,a,r,i,s,n,_,0,0,o)},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapSubpixel=function(e,t,a,r,i,s,n){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel(e,t,a,r,i,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,s),n)},kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmapSubpixel=function(e,t,a,r,i,s,n,_,o,h,l){kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel(e,t,a,r,i,s,n,_,o,h,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,l))},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmap=function(e,t,a,r,i){return kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapSubpixel(e,t,a,0,0,r,i)},kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmap=function(e,t,a,r,i,s,n,_,o){kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmapSubpixel(e,t,a,r,i,s,n,_,0,0,o)},kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap=function(e,t,a,r,i,s,n,_){var o,h,l,c,u=new kha_graphics2_truetype_Stbtt_$fontinfo;if(!kha_graphics2_truetype_StbTruetype.stbtt_InitFont(u,e,t))return-1;for(var d=0,g=i*s;d<g;){var p=d++;r.writeU8(p,0)}h=l=1,c=1,o=kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(u,a);for(var f=0,v=0;v<n.length;){var k,m,S,b,y,x=n[v];++v;var B=kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(u,x),w=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics(u,B);k=w.advanceWidth,w.leftSideBearing;var I=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox(u,B,o,o);if(m=I.x0,S=I.y0,h+(b=I.x1-m)+1>=i&&(l=c,h=1),l+(y=I.y1-S)+1>=s)return-f;if(h+b>=i)throw new js__$Boot_HaxeError("Error");if(l+y>=s)throw new js__$Boot_HaxeError("Error");kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap(u,r,h+l*i,b,y,i,o,o,B),_[f].x0=h,_[f].y0=l,_[f].x1=h+b,_[f].y1=l+y,_[f].xadvance=o*k,_[f].xoff=m,_[f].yoff=S,h=h+b+1,l+y+1>c&&(c=l+y+1),++f}return c},kha_graphics2_truetype_StbTruetype.stbtt_GetBakedQuad=function(e,t,a,r,i,s,n,_){var o=_?0:-.5,h=1/t,l=1/a,c=e[r],u=Math.floor(i.value+c.xoff+.5),d=Math.floor(s.value+c.yoff+.5);n.x0=u+o,n.y0=d+o,n.x1=u+c.x1-c.x0+o,n.y1=d+c.y1-c.y0+o,n.s0=c.x0*h,n.t0=c.y0*l,n.s1=c.x1*h,n.t1=c.y1*l,i.value+=c.xadvance};var kha_graphics4_BlendingFactor=$hxClasses["kha.graphics4.BlendingFactor"]={__ename__:!0,__constructs__:["Undefined","BlendOne","BlendZero","SourceAlpha","DestinationAlpha","InverseSourceAlpha","InverseDestinationAlpha","SourceColor","DestinationColor","InverseSourceColor","InverseDestinationColor"]};kha_graphics4_BlendingFactor.Undefined=["Undefined",0],kha_graphics4_BlendingFactor.Undefined.toString=$estr,kha_graphics4_BlendingFactor.Undefined.__enum__=kha_graphics4_BlendingFactor,kha_graphics4_BlendingFactor.BlendOne=["BlendOne",1],kha_graphics4_BlendingFactor.BlendOne.toString=$estr,kha_graphics4_BlendingFactor.BlendOne.__enum__=kha_graphics4_BlendingFactor,kha_graphics4_BlendingFactor.BlendZero=["BlendZero",2],kha_graphics4_BlendingFactor.BlendZero.toString=$estr,kha_graphics4_BlendingFactor.BlendZero.__enum__=kha_graphics4_BlendingFactor,kha_graphics4_BlendingFactor.SourceAlpha=["SourceAlpha",3],kha_graphics4_BlendingFactor.SourceAlpha.toString=$estr,kha_graphics4_BlendingFactor.SourceAlpha.__enum__=kha_graphics4_BlendingFactor,kha_graphics4_BlendingFactor.DestinationAlpha=["DestinationAlpha",4],kha_graphics4_BlendingFactor.DestinationAlpha.toString=$estr,kha_graphics4_BlendingFactor.DestinationAlpha.__enum__=kha_graphics4_BlendingFactor,kha_graphics4_BlendingFactor.InverseSourceAlpha=["InverseSourceAlpha",5],kha_graphics4_BlendingFactor.InverseSourceAlpha.toString=$estr,kha_graphics4_BlendingFactor.InverseSourceAlpha.__enum__=kha_graphics4_BlendingFactor,kha_graphics4_BlendingFactor.InverseDestinationAlpha=["InverseDestinationAlpha",6],kha_graphics4_BlendingFactor.InverseDestinationAlpha.toString=$estr,kha_graphics4_BlendingFactor.InverseDestinationAlpha.__enum__=kha_graphics4_BlendingFactor,kha_graphics4_BlendingFactor.SourceColor=["SourceColor",7],kha_graphics4_BlendingFactor.SourceColor.toString=$estr,kha_graphics4_BlendingFactor.SourceColor.__enum__=kha_graphics4_BlendingFactor,kha_graphics4_BlendingFactor.DestinationColor=["DestinationColor",8],kha_graphics4_BlendingFactor.DestinationColor.toString=$estr,kha_graphics4_BlendingFactor.DestinationColor.__enum__=kha_graphics4_BlendingFactor,kha_graphics4_BlendingFactor.InverseSourceColor=["InverseSourceColor",9],kha_graphics4_BlendingFactor.InverseSourceColor.toString=$estr,kha_graphics4_BlendingFactor.InverseSourceColor.__enum__=kha_graphics4_BlendingFactor,kha_graphics4_BlendingFactor.InverseDestinationColor=["InverseDestinationColor",10],kha_graphics4_BlendingFactor.InverseDestinationColor.toString=$estr,kha_graphics4_BlendingFactor.InverseDestinationColor.__enum__=kha_graphics4_BlendingFactor;var kha_graphics4_BlendingOperation=$hxClasses["kha.graphics4.BlendingOperation"]={__ename__:!0,__constructs__:["Add","Subtract","ReverseSubtract","Min","Max"]};kha_graphics4_BlendingOperation.Add=["Add",0],kha_graphics4_BlendingOperation.Add.toString=$estr,kha_graphics4_BlendingOperation.Add.__enum__=kha_graphics4_BlendingOperation,kha_graphics4_BlendingOperation.Subtract=["Subtract",1],kha_graphics4_BlendingOperation.Subtract.toString=$estr,kha_graphics4_BlendingOperation.Subtract.__enum__=kha_graphics4_BlendingOperation,kha_graphics4_BlendingOperation.ReverseSubtract=["ReverseSubtract",2],kha_graphics4_BlendingOperation.ReverseSubtract.toString=$estr,kha_graphics4_BlendingOperation.ReverseSubtract.__enum__=kha_graphics4_BlendingOperation,kha_graphics4_BlendingOperation.Min=["Min",3],kha_graphics4_BlendingOperation.Min.toString=$estr,kha_graphics4_BlendingOperation.Min.__enum__=kha_graphics4_BlendingOperation,kha_graphics4_BlendingOperation.Max=["Max",4],kha_graphics4_BlendingOperation.Max.toString=$estr,kha_graphics4_BlendingOperation.Max.__enum__=kha_graphics4_BlendingOperation;var kha_graphics4_CompareMode=$hxClasses["kha.graphics4.CompareMode"]={__ename__:!0,__constructs__:["Always","Never","Equal","NotEqual","Less","LessEqual","Greater","GreaterEqual"]};kha_graphics4_CompareMode.Always=["Always",0],kha_graphics4_CompareMode.Always.toString=$estr,kha_graphics4_CompareMode.Always.__enum__=kha_graphics4_CompareMode,kha_graphics4_CompareMode.Never=["Never",1],kha_graphics4_CompareMode.Never.toString=$estr,kha_graphics4_CompareMode.Never.__enum__=kha_graphics4_CompareMode,kha_graphics4_CompareMode.Equal=["Equal",2],kha_graphics4_CompareMode.Equal.toString=$estr,kha_graphics4_CompareMode.Equal.__enum__=kha_graphics4_CompareMode,kha_graphics4_CompareMode.NotEqual=["NotEqual",3],kha_graphics4_CompareMode.NotEqual.toString=$estr,kha_graphics4_CompareMode.NotEqual.__enum__=kha_graphics4_CompareMode,kha_graphics4_CompareMode.Less=["Less",4],kha_graphics4_CompareMode.Less.toString=$estr,kha_graphics4_CompareMode.Less.__enum__=kha_graphics4_CompareMode,kha_graphics4_CompareMode.LessEqual=["LessEqual",5],kha_graphics4_CompareMode.LessEqual.toString=$estr,kha_graphics4_CompareMode.LessEqual.__enum__=kha_graphics4_CompareMode,kha_graphics4_CompareMode.Greater=["Greater",6],kha_graphics4_CompareMode.Greater.toString=$estr,kha_graphics4_CompareMode.Greater.__enum__=kha_graphics4_CompareMode,kha_graphics4_CompareMode.GreaterEqual=["GreaterEqual",7],kha_graphics4_CompareMode.GreaterEqual.toString=$estr,kha_graphics4_CompareMode.GreaterEqual.__enum__=kha_graphics4_CompareMode;var kha_graphics4_ConstantLocation=$hxClasses["kha.graphics4.ConstantLocation"]=function(){};kha_graphics4_ConstantLocation.__name__=!0;var kha_graphics4_CubeMap=$hxClasses["kha.graphics4.CubeMap"]=function(e){this.texture_=e};kha_graphics4_CubeMap.__name__=!0,kha_graphics4_CubeMap.__interfaces__=[kha_Resource,kha_Canvas],kha_graphics4_CubeMap.getRenderTargetFormat=function(e){switch(e[1]){case 0:return 0;case 2:return 3;case 3:return 4;case 4:return 1;default:return 0}},kha_graphics4_CubeMap.getDepthBufferBits=function(e){switch(e){case 0:return-1;case 1:case 2:case 3:return 24;case 4:return 32;case 5:return 16}},kha_graphics4_CubeMap.getStencilBufferBits=function(e){switch(e){case 0:case 1:return-1;case 2:case 3:case 4:return 8;case 5:return 0}},kha_graphics4_CubeMap.getTextureFormat=function(e){switch(e[1]){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;default:return 1}},kha_graphics4_CubeMap.createRenderTarget=function(e,t,a,r){null==r&&(r=0),null==a&&(a=0),null==t&&(t=kha_graphics4_TextureFormat.RGBA32);var i=new kha_graphics4_CubeMap(null);return i.format=t,i.renderTarget_=Krom.createRenderTargetCubeMap(e,kha_graphics4_CubeMap.getDepthBufferBits(a),kha_graphics4_CubeMap.getRenderTargetFormat(t),kha_graphics4_CubeMap.getStencilBufferBits(a),r),i},kha_graphics4_CubeMap.prototype={texture_:null,renderTarget_:null,format:null,graphics4:null,unload:function(){},lock:function(e){return null==e&&(e=0),null},unlock:function(){},width:null,get_width:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.width},height:null,get_height:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.height},g1:null,get_g1:function(){return null},g2:null,get_g2:function(){return null},g4:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new kha_krom_Graphics(this)),this.graphics4},__class__:kha_graphics4_CubeMap};var kha_graphics4_CullMode=$hxClasses["kha.graphics4.CullMode"]={__ename__:!0,__constructs__:["Clockwise","CounterClockwise","None"]};kha_graphics4_CullMode.Clockwise=["Clockwise",0],kha_graphics4_CullMode.Clockwise.toString=$estr,kha_graphics4_CullMode.Clockwise.__enum__=kha_graphics4_CullMode,kha_graphics4_CullMode.CounterClockwise=["CounterClockwise",1],kha_graphics4_CullMode.CounterClockwise.toString=$estr,kha_graphics4_CullMode.CounterClockwise.__enum__=kha_graphics4_CullMode,kha_graphics4_CullMode.None=["None",2],kha_graphics4_CullMode.None.toString=$estr,kha_graphics4_CullMode.None.__enum__=kha_graphics4_CullMode;var kha_graphics4_FragmentShader=$hxClasses["kha.graphics4.FragmentShader"]=function(e,t){null!=e&&(this.shader=Krom.createFragmentShader(e[0].bytes.b.bufferValue,t[0]))};kha_graphics4_FragmentShader.__name__=!0,kha_graphics4_FragmentShader.fromSource=function(e){var t=new kha_graphics4_FragmentShader(null,null);return t.shader=Krom.createFragmentShaderFromSource(e),t},kha_graphics4_FragmentShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_FragmentShader};var kha_graphics4_GeometryShader=$hxClasses["kha.graphics4.GeometryShader"]=function(e,t){this.shader=Krom.createGeometryShader(e[0].bytes.b.bufferValue,t[0])};kha_graphics4_GeometryShader.__name__=!0,kha_graphics4_GeometryShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_GeometryShader};var kha_graphics4_Graphics=$hxClasses["kha.graphics4.Graphics"]=function(){};kha_graphics4_Graphics.__name__=!0,kha_graphics4_Graphics.prototype={begin:null,beginFace:null,beginEye:null,end:null,vsynced:null,refreshRate:null,clear:null,viewport:null,scissor:null,disableScissor:null,setVertexBuffer:null,setVertexBuffers:null,setIndexBuffer:null,setTexture:null,setTextureDepth:null,setTextureArray:null,setVideoTexture:null,setImageTexture:null,setTextureParameters:null,setTexture3DParameters:null,setCubeMap:null,setCubeMapDepth:null,renderTargetsInvertedY:null,instancedRenderingAvailable:null,setPipeline:null,setBool:null,setInt:null,setFloat:null,setFloat2:null,setFloat3:null,setFloat4:null,setFloats:null,setVector2:null,setVector3:null,setVector4:null,setMatrix:null,setMatrix3:null,drawIndexedVertices:null,drawIndexedVerticesInstanced:null,flush:null,__class__:kha_graphics4_Graphics};var kha_graphics4_ImageShaderPainter=$hxClasses["kha.graphics4.ImageShaderPainter"]=function(e){this.destinationBlend=kha_graphics4_BlendingFactor.Undefined,this.sourceBlend=kha_graphics4_BlendingFactor.Undefined,this.myPipeline=null,this.bilinearMipmaps=!1,this.bilinear=!1,this.g=e,kha_graphics4_ImageShaderPainter.bufferIndex=0,kha_graphics4_ImageShaderPainter.initShaders(),this.initBuffers(),this.projectionLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getTextureUnit("tex")};kha_graphics4_ImageShaderPainter.__name__=!0,kha_graphics4_ImageShaderPainter.initShaders=function(){null==kha_graphics4_ImageShaderPainter.structure&&(kha_graphics4_ImageShaderPainter.structure=kha_graphics4_Graphics2.createImageVertexStructure()),null==kha_graphics4_ImageShaderPainter.shaderPipeline&&(kha_graphics4_ImageShaderPainter.shaderPipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_ImageShaderPainter.structure),kha_graphics4_ImageShaderPainter.shaderPipeline.compile())},kha_graphics4_ImageShaderPainter.prototype={projectionMatrix:null,bilinear:null,bilinearMipmaps:null,g:null,myPipeline:null,projectionLocation:null,textureLocation:null,sourceBlend:null,destinationBlend:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return null==e?(this.projectionLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getTextureUnit("tex")):(this.projectionLocation=e.getConstantLocation("projectionMatrix"),this.textureLocation=e.getTextureUnit("tex")),this.myPipeline=e},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==kha_graphics4_ImageShaderPainter.rectVertexBuffer){kha_graphics4_ImageShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(6e3,kha_graphics4_ImageShaderPainter.structure,kha_graphics4_Usage.DynamicUsage),kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock(),kha_graphics4_ImageShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(9e3,kha_graphics4_Usage.StaticUsage);for(var e=kha_graphics4_ImageShaderPainter.indexBuffer.lock(),t=0;t<1500;){var a=t++;e[3*a*2]=4*a,e[3*a*2+1]=4*a+1,e[3*a*2+2]=4*a+2,e[3*a*2+3]=4*a,e[3*a*2+4]=4*a+2,e[3*a*2+5]=4*a+3}kha_graphics4_ImageShaderPainter.indexBuffer.unlock()}},setRectVertices:function(e,t,a,r,i,s,n,_){var o=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[o]=e,kha_graphics4_ImageShaderPainter.rectVertices[o+1]=t,kha_graphics4_ImageShaderPainter.rectVertices[o+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[o+9]=a,kha_graphics4_ImageShaderPainter.rectVertices[o+10]=r,kha_graphics4_ImageShaderPainter.rectVertices[o+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[o+18]=i,kha_graphics4_ImageShaderPainter.rectVertices[o+19]=s,kha_graphics4_ImageShaderPainter.rectVertices[o+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[o+27]=n,kha_graphics4_ImageShaderPainter.rectVertices[o+28]=_,kha_graphics4_ImageShaderPainter.rectVertices[o+29]=-5},setRectTexCoords:function(e,t,a,r){var i=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[i+3]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+4]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+12]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+13]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+21]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+22]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+30]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+31]=r},setRectColor:function(e,t,a,r){var i=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[i+5]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+6]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+7]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+8]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+14]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+15]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+16]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+17]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+23]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+24]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+25]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+26]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+32]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+33]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+34]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+35]=r},drawBuffer:function(){kha_graphics4_ImageShaderPainter.rectVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_ImageShaderPainter.rectVertexBuffer),this.g.setIndexBuffer(kha_graphics4_ImageShaderPainter.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_ImageShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setTexture(this.textureLocation,kha_graphics4_ImageShaderPainter.lastTexture),this.g.setTextureParameters(this.textureLocation,kha_graphics4_TextureAddressing.Clamp,kha_graphics4_TextureAddressing.Clamp,this.bilinear?kha_graphics4_TextureFilter.LinearFilter:kha_graphics4_TextureFilter.PointFilter,this.bilinear?kha_graphics4_TextureFilter.LinearFilter:kha_graphics4_TextureFilter.PointFilter,this.bilinearMipmaps?kha_graphics4_MipMapFilter.LinearMipFilter:kha_graphics4_MipMapFilter.NoMipFilter),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,2*kha_graphics4_ImageShaderPainter.bufferIndex*3),this.g.setTexture(this.textureLocation,null),kha_graphics4_ImageShaderPainter.bufferIndex=0,kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock()},setBilinearFilter:function(e){this.end(),this.bilinear=e},setBilinearMipmapFilter:function(e){this.end(),this.bilinearMipmaps=e},drawImage:function(e,t,a,r,i,s,n,_,o,h,l){var c=e;(kha_graphics4_ImageShaderPainter.bufferIndex+1>=1500||null!=kha_graphics4_ImageShaderPainter.lastTexture&&c!=kha_graphics4_ImageShaderPainter.lastTexture)&&this.drawBuffer();var u=.00392156862745098*((16711680&l)>>>16),d=.00392156862745098*((65280&l)>>>8),g=.00392156862745098*(255&l),p=.00392156862745098*(l>>>24)*h,f=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[f+5]=u,kha_graphics4_ImageShaderPainter.rectVertices[f+6]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+7]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+8]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+14]=u,kha_graphics4_ImageShaderPainter.rectVertices[f+15]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+16]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+17]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+23]=u,kha_graphics4_ImageShaderPainter.rectVertices[f+24]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+25]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+26]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+32]=u,kha_graphics4_ImageShaderPainter.rectVertices[f+33]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+34]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+35]=p;var v=c.get_width()/c.get_realWidth(),k=c.get_height()/c.get_realHeight(),m=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[m+3]=0,kha_graphics4_ImageShaderPainter.rectVertices[m+4]=k,kha_graphics4_ImageShaderPainter.rectVertices[m+12]=0,kha_graphics4_ImageShaderPainter.rectVertices[m+13]=0,kha_graphics4_ImageShaderPainter.rectVertices[m+21]=v,kha_graphics4_ImageShaderPainter.rectVertices[m+22]=0,kha_graphics4_ImageShaderPainter.rectVertices[m+30]=v,kha_graphics4_ImageShaderPainter.rectVertices[m+31]=k;var S=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[S]=t,kha_graphics4_ImageShaderPainter.rectVertices[S+1]=a,kha_graphics4_ImageShaderPainter.rectVertices[S+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[S+9]=r,kha_graphics4_ImageShaderPainter.rectVertices[S+10]=i,kha_graphics4_ImageShaderPainter.rectVertices[S+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[S+18]=s,kha_graphics4_ImageShaderPainter.rectVertices[S+19]=n,kha_graphics4_ImageShaderPainter.rectVertices[S+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[S+27]=_,kha_graphics4_ImageShaderPainter.rectVertices[S+28]=o,kha_graphics4_ImageShaderPainter.rectVertices[S+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=c},drawImage2:function(e,t,a,r,i,s,n,_,o,h,l,c,u,d,g){var p=e;(kha_graphics4_ImageShaderPainter.bufferIndex+1>=1500||null!=kha_graphics4_ImageShaderPainter.lastTexture&&p!=kha_graphics4_ImageShaderPainter.lastTexture)&&this.drawBuffer();var f=t/p.get_realWidth(),v=a/p.get_realHeight(),k=(t+r)/p.get_realWidth(),m=(a+i)/p.get_realHeight(),S=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[S+3]=f,kha_graphics4_ImageShaderPainter.rectVertices[S+4]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+12]=f,kha_graphics4_ImageShaderPainter.rectVertices[S+13]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+21]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+22]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+30]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+31]=m;var b=.00392156862745098*((16711680&g)>>>16),y=.00392156862745098*((65280&g)>>>8),x=.00392156862745098*(255&g),B=.00392156862745098*(g>>>24)*d,w=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[w+5]=b,kha_graphics4_ImageShaderPainter.rectVertices[w+6]=y,kha_graphics4_ImageShaderPainter.rectVertices[w+7]=x,kha_graphics4_ImageShaderPainter.rectVertices[w+8]=B,kha_graphics4_ImageShaderPainter.rectVertices[w+14]=b,kha_graphics4_ImageShaderPainter.rectVertices[w+15]=y,kha_graphics4_ImageShaderPainter.rectVertices[w+16]=x,kha_graphics4_ImageShaderPainter.rectVertices[w+17]=B,kha_graphics4_ImageShaderPainter.rectVertices[w+23]=b,kha_graphics4_ImageShaderPainter.rectVertices[w+24]=y,kha_graphics4_ImageShaderPainter.rectVertices[w+25]=x,kha_graphics4_ImageShaderPainter.rectVertices[w+26]=B,kha_graphics4_ImageShaderPainter.rectVertices[w+32]=b,kha_graphics4_ImageShaderPainter.rectVertices[w+33]=y,kha_graphics4_ImageShaderPainter.rectVertices[w+34]=x,kha_graphics4_ImageShaderPainter.rectVertices[w+35]=B;var I=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[I]=s,kha_graphics4_ImageShaderPainter.rectVertices[I+1]=n,kha_graphics4_ImageShaderPainter.rectVertices[I+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[I+9]=_,kha_graphics4_ImageShaderPainter.rectVertices[I+10]=o,kha_graphics4_ImageShaderPainter.rectVertices[I+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[I+18]=h,kha_graphics4_ImageShaderPainter.rectVertices[I+19]=l,kha_graphics4_ImageShaderPainter.rectVertices[I+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[I+27]=c,kha_graphics4_ImageShaderPainter.rectVertices[I+28]=u,kha_graphics4_ImageShaderPainter.rectVertices[I+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=p},drawImageScale:function(e,t,a,r,i,s,n,_,o,h,l){var c=e;(kha_graphics4_ImageShaderPainter.bufferIndex+1>=1500||null!=kha_graphics4_ImageShaderPainter.lastTexture&&c!=kha_graphics4_ImageShaderPainter.lastTexture)&&this.drawBuffer();var u=t/c.get_realWidth(),d=a/c.get_realHeight(),g=(t+r)/c.get_realWidth(),p=(a+i)/c.get_realHeight(),f=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[f+3]=u,kha_graphics4_ImageShaderPainter.rectVertices[f+4]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+12]=u,kha_graphics4_ImageShaderPainter.rectVertices[f+13]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+21]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+22]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+30]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+31]=p;var v=.00392156862745098*((16711680&l)>>>16),k=.00392156862745098*((65280&l)>>>8),m=.00392156862745098*(255&l),S=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[S+5]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+6]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+7]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+8]=h,kha_graphics4_ImageShaderPainter.rectVertices[S+14]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+15]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+16]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+17]=h,kha_graphics4_ImageShaderPainter.rectVertices[S+23]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+24]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+25]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+26]=h,kha_graphics4_ImageShaderPainter.rectVertices[S+32]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+33]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+34]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+35]=h;var b=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[b]=s,kha_graphics4_ImageShaderPainter.rectVertices[b+1]=o,kha_graphics4_ImageShaderPainter.rectVertices[b+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[b+9]=s,kha_graphics4_ImageShaderPainter.rectVertices[b+10]=n,kha_graphics4_ImageShaderPainter.rectVertices[b+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[b+18]=_,kha_graphics4_ImageShaderPainter.rectVertices[b+19]=n,kha_graphics4_ImageShaderPainter.rectVertices[b+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[b+27]=_,kha_graphics4_ImageShaderPainter.rectVertices[b+28]=o,kha_graphics4_ImageShaderPainter.rectVertices[b+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=c},end:function(){kha_graphics4_ImageShaderPainter.bufferIndex>0&&this.drawBuffer(),kha_graphics4_ImageShaderPainter.lastTexture=null},__class__:kha_graphics4_ImageShaderPainter};var kha_graphics4_ColoredShaderPainter=$hxClasses["kha.graphics4.ColoredShaderPainter"]=function(e){this.destinationBlend=kha_graphics4_BlendingFactor.Undefined,this.sourceBlend=kha_graphics4_BlendingFactor.Undefined,this.myPipeline=null,this.g=e,kha_graphics4_ColoredShaderPainter.bufferIndex=0,kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0,kha_graphics4_ColoredShaderPainter.initShaders(),this.initBuffers(),this.projectionLocation=kha_graphics4_ColoredShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix")};kha_graphics4_ColoredShaderPainter.__name__=!0,kha_graphics4_ColoredShaderPainter.initShaders=function(){null==kha_graphics4_ColoredShaderPainter.structure&&(kha_graphics4_ColoredShaderPainter.structure=kha_graphics4_Graphics2.createColoredVertexStructure()),null==kha_graphics4_ColoredShaderPainter.shaderPipeline&&(kha_graphics4_ColoredShaderPainter.shaderPipeline=kha_graphics4_Graphics2.createColoredPipeline(kha_graphics4_ColoredShaderPainter.structure),kha_graphics4_ColoredShaderPainter.shaderPipeline.compile())},kha_graphics4_ColoredShaderPainter.prototype={projectionMatrix:null,g:null,myPipeline:null,projectionLocation:null,sourceBlend:null,destinationBlend:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return this.projectionLocation=null==e?kha_graphics4_ColoredShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"):e.getConstantLocation("projectionMatrix"),this.myPipeline=e},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==kha_graphics4_ColoredShaderPainter.rectVertexBuffer){kha_graphics4_ColoredShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(400,kha_graphics4_ColoredShaderPainter.structure,kha_graphics4_Usage.DynamicUsage),kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock(),kha_graphics4_ColoredShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(600,kha_graphics4_Usage.StaticUsage);for(var e=kha_graphics4_ColoredShaderPainter.indexBuffer.lock(),t=0;t<100;){var a=t++;e[3*a*2]=4*a,e[3*a*2+1]=4*a+1,e[3*a*2+2]=4*a+2,e[3*a*2+3]=4*a,e[3*a*2+4]=4*a+2,e[3*a*2+5]=4*a+3}kha_graphics4_ColoredShaderPainter.indexBuffer.unlock(),kha_graphics4_ColoredShaderPainter.triangleVertexBuffer=new kha_graphics4_VertexBuffer(300,kha_graphics4_ColoredShaderPainter.structure,kha_graphics4_Usage.DynamicUsage),kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock(),kha_graphics4_ColoredShaderPainter.triangleIndexBuffer=new kha_graphics4_IndexBuffer(300,kha_graphics4_Usage.StaticUsage);for(var r=kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.lock(),i=0;i<100;){var s=i++;r[3*s]=3*s,r[3*s+1]=3*s+1,r[3*s+2]=3*s+2}kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.unlock()}},setRectVertices:function(e,t,a,r,i,s,n,_){var o=7*kha_graphics4_ColoredShaderPainter.bufferIndex*4;kha_graphics4_ColoredShaderPainter.rectVertices[o]=e,kha_graphics4_ColoredShaderPainter.rectVertices[o+1]=t,kha_graphics4_ColoredShaderPainter.rectVertices[o+2]=-5,kha_graphics4_ColoredShaderPainter.rectVertices[o+7]=a,kha_graphics4_ColoredShaderPainter.rectVertices[o+8]=r,kha_graphics4_ColoredShaderPainter.rectVertices[o+9]=-5,kha_graphics4_ColoredShaderPainter.rectVertices[o+14]=i,kha_graphics4_ColoredShaderPainter.rectVertices[o+15]=s,kha_graphics4_ColoredShaderPainter.rectVertices[o+16]=-5,kha_graphics4_ColoredShaderPainter.rectVertices[o+21]=n,kha_graphics4_ColoredShaderPainter.rectVertices[o+22]=_,kha_graphics4_ColoredShaderPainter.rectVertices[o+23]=-5},setRectColors:function(e,t){var a=7*kha_graphics4_ColoredShaderPainter.bufferIndex*4,r=e*(.00392156862745098*(t>>>24));kha_graphics4_ColoredShaderPainter.rectVertices[a+3]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+4]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+5]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+6]=r,kha_graphics4_ColoredShaderPainter.rectVertices[a+10]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+11]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+12]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+13]=r,kha_graphics4_ColoredShaderPainter.rectVertices[a+17]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+18]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+19]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+20]=r,kha_graphics4_ColoredShaderPainter.rectVertices[a+24]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+25]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+26]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+27]=r},setTriVertices:function(e,t,a,r,i,s){var n=7*kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3;kha_graphics4_ColoredShaderPainter.triangleVertices[n]=e,kha_graphics4_ColoredShaderPainter.triangleVertices[n+1]=t,kha_graphics4_ColoredShaderPainter.triangleVertices[n+2]=-5,kha_graphics4_ColoredShaderPainter.triangleVertices[n+7]=a,kha_graphics4_ColoredShaderPainter.triangleVertices[n+8]=r,kha_graphics4_ColoredShaderPainter.triangleVertices[n+9]=-5,kha_graphics4_ColoredShaderPainter.triangleVertices[n+14]=i,kha_graphics4_ColoredShaderPainter.triangleVertices[n+15]=s,kha_graphics4_ColoredShaderPainter.triangleVertices[n+16]=-5},setTriColors:function(e,t){var a=7*kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3,r=e*(.00392156862745098*(t>>>24));kha_graphics4_ColoredShaderPainter.triangleVertices[a+3]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.triangleVertices[a+4]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.triangleVertices[a+5]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.triangleVertices[a+6]=r,kha_graphics4_ColoredShaderPainter.triangleVertices[a+10]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.triangleVertices[a+11]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.triangleVertices[a+12]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.triangleVertices[a+13]=r,kha_graphics4_ColoredShaderPainter.triangleVertices[a+17]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.triangleVertices[a+18]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.triangleVertices[a+19]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.triangleVertices[a+20]=r},drawBuffer:function(e){e||kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0&&this.drawTriBuffer(!0),kha_graphics4_ColoredShaderPainter.rectVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.rectVertexBuffer),this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_ColoredShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,2*kha_graphics4_ColoredShaderPainter.bufferIndex*3),kha_graphics4_ColoredShaderPainter.bufferIndex=0,kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock()},drawTriBuffer:function(e){e||kha_graphics4_ColoredShaderPainter.bufferIndex>0&&this.drawBuffer(!0),kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.triangleVertexBuffer),this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.triangleIndexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_ColoredShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,3*kha_graphics4_ColoredShaderPainter.triangleBufferIndex),kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0,kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock()},fillRect:function(e,t,a,r,i,s,n,_,o,h){kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0&&this.drawTriBuffer(!0),kha_graphics4_ColoredShaderPainter.bufferIndex+1>=100&&this.drawBuffer(!1),this.setRectColors(e,t),this.setRectVertices(a,r,i,s,n,_,o,h),++kha_graphics4_ColoredShaderPainter.bufferIndex},fillTriangle:function(e,t,a,r,i,s,n,_){kha_graphics4_ColoredShaderPainter.bufferIndex>0&&this.drawBuffer(!0),kha_graphics4_ColoredShaderPainter.triangleBufferIndex+1>=100&&this.drawTriBuffer(!1),this.setTriColors(e,t),this.setTriVertices(a,r,i,s,n,_),++kha_graphics4_ColoredShaderPainter.triangleBufferIndex},endTris:function(e){kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0&&this.drawTriBuffer(e)},endRects:function(e){kha_graphics4_ColoredShaderPainter.bufferIndex>0&&this.drawBuffer(e)},end:function(){kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0&&this.drawTriBuffer(!1),kha_graphics4_ColoredShaderPainter.bufferIndex>0&&this.drawBuffer(!1)},__class__:kha_graphics4_ColoredShaderPainter};var kha_graphics4_TextShaderPainter=$hxClasses["kha.graphics4.TextShaderPainter"]=function(e){this.bakedQuadCache=new kha_AlignedQuad,this.destinationBlend=kha_graphics4_BlendingFactor.Undefined,this.sourceBlend=kha_graphics4_BlendingFactor.Undefined,this.bilinear=!1,this.myPipeline=null,this.g=e,kha_graphics4_TextShaderPainter.bufferIndex=0,kha_graphics4_TextShaderPainter.initShaders(),this.initBuffers(),this.projectionLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getTextureUnit("tex")};kha_graphics4_TextShaderPainter.__name__=!0,kha_graphics4_TextShaderPainter.initShaders=function(){null==kha_graphics4_TextShaderPainter.structure&&(kha_graphics4_TextShaderPainter.structure=kha_graphics4_Graphics2.createTextVertexStructure()),null==kha_graphics4_TextShaderPainter.shaderPipeline&&(kha_graphics4_TextShaderPainter.shaderPipeline=kha_graphics4_Graphics2.createTextPipeline(kha_graphics4_TextShaderPainter.structure),kha_graphics4_TextShaderPainter.shaderPipeline.compile())},kha_graphics4_TextShaderPainter.findIndex=function(e,t){for(var a=0,r=t.length;a<r;){var i=a++;if(t[i]==e)return i}return 0},kha_graphics4_TextShaderPainter.prototype={projectionMatrix:null,font:null,g:null,myPipeline:null,projectionLocation:null,textureLocation:null,fontSize:null,bilinear:null,sourceBlend:null,destinationBlend:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return null==e?(this.projectionLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getTextureUnit("tex")):(this.projectionLocation=e.getConstantLocation("projectionMatrix"),this.textureLocation=e.getTextureUnit("tex")),this.myPipeline=e},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==kha_graphics4_TextShaderPainter.rectVertexBuffer){kha_graphics4_TextShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(400,kha_graphics4_TextShaderPainter.structure,kha_graphics4_Usage.DynamicUsage),kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock(),kha_graphics4_TextShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(600,kha_graphics4_Usage.StaticUsage);for(var e=kha_graphics4_TextShaderPainter.indexBuffer.lock(),t=0;t<100;){var a=t++;e[3*a*2]=4*a,e[3*a*2+1]=4*a+1,e[3*a*2+2]=4*a+2,e[3*a*2+3]=4*a,e[3*a*2+4]=4*a+2,e[3*a*2+5]=4*a+3}kha_graphics4_TextShaderPainter.indexBuffer.unlock()}},setRectVertices:function(e,t,a,r,i,s,n,_){var o=9*kha_graphics4_TextShaderPainter.bufferIndex*4;kha_graphics4_TextShaderPainter.rectVertices[o]=e,kha_graphics4_TextShaderPainter.rectVertices[o+1]=t,kha_graphics4_TextShaderPainter.rectVertices[o+2]=-5,kha_graphics4_TextShaderPainter.rectVertices[o+9]=a,kha_graphics4_TextShaderPainter.rectVertices[o+10]=r,kha_graphics4_TextShaderPainter.rectVertices[o+11]=-5,kha_graphics4_TextShaderPainter.rectVertices[o+18]=i,kha_graphics4_TextShaderPainter.rectVertices[o+19]=s,kha_graphics4_TextShaderPainter.rectVertices[o+20]=-5,kha_graphics4_TextShaderPainter.rectVertices[o+27]=n,kha_graphics4_TextShaderPainter.rectVertices[o+28]=_,kha_graphics4_TextShaderPainter.rectVertices[o+29]=-5},setRectTexCoords:function(e,t,a,r){var i=9*kha_graphics4_TextShaderPainter.bufferIndex*4;kha_graphics4_TextShaderPainter.rectVertices[i+3]=e,kha_graphics4_TextShaderPainter.rectVertices[i+4]=r,kha_graphics4_TextShaderPainter.rectVertices[i+12]=e,kha_graphics4_TextShaderPainter.rectVertices[i+13]=t,kha_graphics4_TextShaderPainter.rectVertices[i+21]=a,kha_graphics4_TextShaderPainter.rectVertices[i+22]=t,kha_graphics4_TextShaderPainter.rectVertices[i+30]=a,kha_graphics4_TextShaderPainter.rectVertices[i+31]=r},setRectColors:function(e,t){var a=9*kha_graphics4_TextShaderPainter.bufferIndex*4,r=e*(.00392156862745098*(t>>>24));kha_graphics4_TextShaderPainter.rectVertices[a+5]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+6]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+7]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+8]=r,kha_graphics4_TextShaderPainter.rectVertices[a+14]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+15]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+16]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+17]=r,kha_graphics4_TextShaderPainter.rectVertices[a+23]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+24]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+25]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+26]=r,kha_graphics4_TextShaderPainter.rectVertices[a+32]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+33]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+34]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+35]=r},drawBuffer:function(){kha_graphics4_TextShaderPainter.rectVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_TextShaderPainter.rectVertexBuffer),this.g.setIndexBuffer(kha_graphics4_TextShaderPainter.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_TextShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setTexture(this.textureLocation,kha_graphics4_TextShaderPainter.lastTexture),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.setTextureParameters(this.textureLocation,kha_graphics4_TextureAddressing.Clamp,kha_graphics4_TextureAddressing.Clamp,this.bilinear?kha_graphics4_TextureFilter.LinearFilter:kha_graphics4_TextureFilter.PointFilter,this.bilinear?kha_graphics4_TextureFilter.LinearFilter:kha_graphics4_TextureFilter.PointFilter,kha_graphics4_MipMapFilter.NoMipFilter),this.g.drawIndexedVertices(0,2*kha_graphics4_TextShaderPainter.bufferIndex*3),this.g.setTexture(this.textureLocation,null),kha_graphics4_TextShaderPainter.bufferIndex=0,kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock()},setBilinearFilter:function(e){this.end(),this.bilinear=e},setFont:function(e){this.font=js_Boot.__cast(e,kha_Kravur)},text:null,startString:function(e){this.text=e},charCodeAt:function(e){return HxOverrides.cca(this.text,e)},stringLength:function(){return this.text.length},endString:function(){this.text=null},bakedQuadCache:null,drawString:function(e,t,a,r,i,s,n){var _=this.font._get(this.fontSize,n),o=_.getTexture();null!=kha_graphics4_TextShaderPainter.lastTexture&&o!=kha_graphics4_TextShaderPainter.lastTexture&&this.drawBuffer(),kha_graphics4_TextShaderPainter.lastTexture=o;var h=r,l=i;this.startString(e);for(var c=0,u=this.stringLength();c<u;){var d=c++,g=_.getBakedQuad(this.bakedQuadCache,kha_graphics4_TextShaderPainter.findIndex(this.charCodeAt(d),n),h,l);if(null!=g){var p,f,v;kha_graphics4_TextShaderPainter.bufferIndex+1>=100&&this.drawBuffer(),this.setRectColors(t,a),this.setRectTexCoords(g.s0*o.get_width()/o.get_realWidth(),g.t0*o.get_height()/o.get_realHeight(),g.s1*o.get_width()/o.get_realWidth(),g.t1*o.get_height()/o.get_realHeight());var k=g.x0;v=g.y1;var m,S,b,y=s._02*k+s._12*v+s._22;f=(s._00*k+s._10*v+s._20)/y,p=(s._01*k+s._11*v+s._21)/y;var x=g.x0;b=g.y0;var B,w,I,T=s._02*x+s._12*b+s._22;S=(s._00*x+s._10*b+s._20)/T,m=(s._01*x+s._11*b+s._21)/T;var E=g.x1;I=g.y0;var C,P,A,L=s._02*E+s._12*I+s._22;w=(s._00*E+s._10*I+s._20)/L,B=(s._01*E+s._11*I+s._21)/L;var $=g.x1;A=g.y1;var R=s._02*$+s._12*A+s._22;P=(s._00*$+s._10*A+s._20)/R,C=(s._01*$+s._11*A+s._21)/R,this.setRectVertices(f,p,S,m,w,B,P,C),h+=g.xadvance,++kha_graphics4_TextShaderPainter.bufferIndex}}this.endString()},drawCharacters:function(e,t,a,r,i,s,n,_,o){var h=this.font._get(this.fontSize,o),l=h.getTexture();null!=kha_graphics4_TextShaderPainter.lastTexture&&l!=kha_graphics4_TextShaderPainter.lastTexture&&this.drawBuffer(),kha_graphics4_TextShaderPainter.lastTexture=l;for(var c=s,u=n,d=t,g=t+a;d<g;){var p=d++,f=h.getBakedQuad(this.bakedQuadCache,kha_graphics4_TextShaderPainter.findIndex(e[p],o),c,u);if(null!=f){var v,k,m;kha_graphics4_TextShaderPainter.bufferIndex+1>=100&&this.drawBuffer(),this.setRectColors(r,i),this.setRectTexCoords(f.s0*l.get_width()/l.get_realWidth(),f.t0*l.get_height()/l.get_realHeight(),f.s1*l.get_width()/l.get_realWidth(),f.t1*l.get_height()/l.get_realHeight());var S=f.x0;m=f.y1;var b,y,x,B=_._02*S+_._12*m+_._22;k=(_._00*S+_._10*m+_._20)/B,v=(_._01*S+_._11*m+_._21)/B;var w=f.x0;x=f.y0;var I,T,E,C=_._02*w+_._12*x+_._22;y=(_._00*w+_._10*x+_._20)/C,b=(_._01*w+_._11*x+_._21)/C;var P=f.x1;E=f.y0;var A,L,$,R=_._02*P+_._12*E+_._22;T=(_._00*P+_._10*E+_._20)/R,I=(_._01*P+_._11*E+_._21)/R;var F=f.x1;$=f.y1;var N=_._02*F+_._12*$+_._22;L=(_._00*F+_._10*$+_._20)/N,A=(_._01*F+_._11*$+_._21)/N,this.setRectVertices(k,v,y,b,T,I,L,A),c+=f.xadvance,++kha_graphics4_TextShaderPainter.bufferIndex}}},end:function(){kha_graphics4_TextShaderPainter.bufferIndex>0&&this.drawBuffer(),kha_graphics4_TextShaderPainter.lastTexture=null},__class__:kha_graphics4_TextShaderPainter};var kha_graphics4_Graphics2=$hxClasses["kha.graphics4.Graphics2"]=function(e){this.myMipmapScaleQuality=kha_graphics2_ImageScaleQuality.High,this.myImageScaleQuality=kha_graphics2_ImageScaleQuality.High,kha_graphics2_Graphics.call(this),this.set_color(-1),this.canvas=e,this.g=e.get_g4(),this.imagePainter=new kha_graphics4_ImageShaderPainter(this.g),this.coloredPainter=new kha_graphics4_ColoredShaderPainter(this.g),this.textPainter=new kha_graphics4_TextShaderPainter(this.g),this.textPainter.fontSize=this.get_fontSize(),this.setProjection(),null==kha_graphics4_Graphics2.videoPipeline&&(kha_graphics4_Graphics2.videoPipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_Graphics2.createImageVertexStructure()),kha_graphics4_Graphics2.videoPipeline.fragmentShader=kha_Shaders.painter_video_frag,kha_graphics4_Graphics2.videoPipeline.vertexShader=kha_Shaders.painter_video_vert,kha_graphics4_Graphics2.videoPipeline.compile())};kha_graphics4_Graphics2.__name__=!0,kha_graphics4_Graphics2.upperPowerOfTwo=function(e){return--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e},kha_graphics4_Graphics2.createImageVertexStructure=function(){var e=new kha_graphics4_VertexStructure;return e.add("vertexPosition",kha_graphics4_VertexData.Float3),e.add("texPosition",kha_graphics4_VertexData.Float2),e.add("vertexColor",kha_graphics4_VertexData.Float4),e},kha_graphics4_Graphics2.createImagePipeline=function(e){var t=new kha_graphics4_PipelineState;return t.fragmentShader=kha_Shaders.painter_image_frag,t.vertexShader=kha_Shaders.painter_image_vert,t.inputLayout=[e],t.blendSource=kha_graphics4_BlendingFactor.BlendOne,t.blendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t.alphaBlendSource=kha_graphics4_BlendingFactor.BlendOne,t.alphaBlendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t},kha_graphics4_Graphics2.createColoredVertexStructure=function(){var e=new kha_graphics4_VertexStructure;return e.add("vertexPosition",kha_graphics4_VertexData.Float3),e.add("vertexColor",kha_graphics4_VertexData.Float4),e},kha_graphics4_Graphics2.createColoredPipeline=function(e){var t=new kha_graphics4_PipelineState;return t.fragmentShader=kha_Shaders.painter_colored_frag,t.vertexShader=kha_Shaders.painter_colored_vert,t.inputLayout=[e],t.blendSource=kha_graphics4_BlendingFactor.SourceAlpha,t.blendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t.alphaBlendSource=kha_graphics4_BlendingFactor.SourceAlpha,t.alphaBlendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t},kha_graphics4_Graphics2.createTextVertexStructure=function(){var e=new kha_graphics4_VertexStructure;return e.add("vertexPosition",kha_graphics4_VertexData.Float3),e.add("texPosition",kha_graphics4_VertexData.Float2),e.add("vertexColor",kha_graphics4_VertexData.Float4),e},kha_graphics4_Graphics2.createTextPipeline=function(e){var t=new kha_graphics4_PipelineState;return t.fragmentShader=kha_Shaders.painter_text_frag,t.vertexShader=kha_Shaders.painter_text_vert,t.inputLayout=[e],t.blendSource=kha_graphics4_BlendingFactor.SourceAlpha,t.blendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t.alphaBlendSource=kha_graphics4_BlendingFactor.SourceAlpha,t.alphaBlendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t},kha_graphics4_Graphics2.__super__=kha_graphics2_Graphics,kha_graphics4_Graphics2.prototype=$extend(kha_graphics2_Graphics.prototype,{myColor:null,myFont:null,projectionMatrix:null,imagePainter:null,coloredPainter:null,textPainter:null,canvas:null,g:null,setProjection:function(){var e=this.canvas.get_width(),t=this.canvas.get_height();js_Boot.__instanceof(this.canvas,kha_Framebuffer)?this.projectionMatrix=kha_math_FastMatrix4.orthogonalProjection(0,e,t,0,.1,1e3):(kha_Image.get_nonPow2Supported()||(e=kha_graphics4_Graphics2.upperPowerOfTwo(e),t=kha_graphics4_Graphics2.upperPowerOfTwo(t)),this.g.renderTargetsInvertedY()?this.projectionMatrix=kha_math_FastMatrix4.orthogonalProjection(0,e,0,t,.1,1e3):this.projectionMatrix=kha_math_FastMatrix4.orthogonalProjection(0,e,t,0,.1,1e3)),this.imagePainter.setProjection(this.projectionMatrix),this.coloredPainter.setProjection(this.projectionMatrix),this.textPainter.setProjection(this.projectionMatrix)},drawImage:function(e,t,a){var r=this.coloredPainter;kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0&&r.drawTriBuffer(!1),kha_graphics4_ColoredShaderPainter.bufferIndex>0&&r.drawBuffer(!1),this.textPainter.end();var i,s,n,_=t+e.get_width(),o=a+e.get_height(),h=this.transformations[this.transformations.length-1],l=t;n=o;var c,u,d=h._02*l+h._12*n+h._22;s=(h._00*l+h._10*n+h._20)/d,i=(h._01*l+h._11*n+h._21)/d;var g,p=this.transformations[this.transformations.length-1],f=t;g=a;var v,k,m=p._02*f+p._12*g+p._22;u=(p._00*f+p._10*g+p._20)/m,c=(p._01*f+p._11*g+p._21)/m;var S,b=this.transformations[this.transformations.length-1],y=_;S=a;var x,B,w=b._02*y+b._12*S+b._22;k=(b._00*y+b._10*S+b._20)/w,v=(b._01*y+b._11*S+b._21)/w;var I,T=this.transformations[this.transformations.length-1],E=_;I=o;var C=T._02*E+T._12*I+T._22;B=(T._00*E+T._10*I+T._20)/C,x=(T._01*E+T._11*I+T._21)/C;var P=this.imagePainter,A=this.get_opacity(),L=this.get_color(),$=e;(kha_graphics4_ImageShaderPainter.bufferIndex+1>=1500||null!=kha_graphics4_ImageShaderPainter.lastTexture&&$!=kha_graphics4_ImageShaderPainter.lastTexture)&&P.drawBuffer();var R=.00392156862745098*((16711680&L)>>>16),F=.00392156862745098*((65280&L)>>>8),N=.00392156862745098*(255&L),V=.00392156862745098*(L>>>24)*A,M=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[M+5]=R,kha_graphics4_ImageShaderPainter.rectVertices[M+6]=F,kha_graphics4_ImageShaderPainter.rectVertices[M+7]=N,kha_graphics4_ImageShaderPainter.rectVertices[M+8]=V,kha_graphics4_ImageShaderPainter.rectVertices[M+14]=R,kha_graphics4_ImageShaderPainter.rectVertices[M+15]=F,kha_graphics4_ImageShaderPainter.rectVertices[M+16]=N,kha_graphics4_ImageShaderPainter.rectVertices[M+17]=V,kha_graphics4_ImageShaderPainter.rectVertices[M+23]=R,kha_graphics4_ImageShaderPainter.rectVertices[M+24]=F,kha_graphics4_ImageShaderPainter.rectVertices[M+25]=N,kha_graphics4_ImageShaderPainter.rectVertices[M+26]=V,kha_graphics4_ImageShaderPainter.rectVertices[M+32]=R,kha_graphics4_ImageShaderPainter.rectVertices[M+33]=F,kha_graphics4_ImageShaderPainter.rectVertices[M+34]=N,kha_graphics4_ImageShaderPainter.rectVertices[M+35]=V;var D=$.get_width()/$.get_realWidth(),O=$.get_height()/$.get_realHeight(),U=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[U+3]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+4]=O,kha_graphics4_ImageShaderPainter.rectVertices[U+12]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+13]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+21]=D,kha_graphics4_ImageShaderPainter.rectVertices[U+22]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+30]=D,kha_graphics4_ImageShaderPainter.rectVertices[U+31]=O;var H=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[H]=s,kha_graphics4_ImageShaderPainter.rectVertices[H+1]=i,kha_graphics4_ImageShaderPainter.rectVertices[H+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[H+9]=u,kha_graphics4_ImageShaderPainter.rectVertices[H+10]=c,kha_graphics4_ImageShaderPainter.rectVertices[H+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[H+18]=k,kha_graphics4_ImageShaderPainter.rectVertices[H+19]=v,kha_graphics4_ImageShaderPainter.rectVertices[H+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[H+27]=B,kha_graphics4_ImageShaderPainter.rectVertices[H+28]=x,kha_graphics4_ImageShaderPainter.rectVertices[H+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=$},drawScaledSubImage:function(e,t,a,r,i,s,n,_,o){var h,l,c=this.coloredPainter;kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0&&c.drawTriBuffer(!1),kha_graphics4_ColoredShaderPainter.bufferIndex>0&&c.drawBuffer(!1),this.textPainter.end();var u,d=this.transformations[this.transformations.length-1],g=s;u=n+o;var p,f,v=d._02*g+d._12*u+d._22;l=(d._00*g+d._10*u+d._20)/v,h=(d._01*g+d._11*u+d._21)/v;var k,m=this.transformations[this.transformations.length-1],S=s;k=n;var b,y,x=m._02*S+m._12*k+m._22;f=(m._00*S+m._10*k+m._20)/x,p=(m._01*S+m._11*k+m._21)/x;var B,w=this.transformations[this.transformations.length-1],I=s+_;B=n;var T,E,C=w._02*I+w._12*B+w._22;y=(w._00*I+w._10*B+w._20)/C,b=(w._01*I+w._11*B+w._21)/C;var P,A=this.transformations[this.transformations.length-1],L=s+_;P=n+o;var $=A._02*L+A._12*P+A._22;E=(A._00*L+A._10*P+A._20)/$,T=(A._01*L+A._11*P+A._21)/$;var R=this.imagePainter,F=this.get_opacity(),N=this.get_color(),V=e;(kha_graphics4_ImageShaderPainter.bufferIndex+1>=1500||null!=kha_graphics4_ImageShaderPainter.lastTexture&&V!=kha_graphics4_ImageShaderPainter.lastTexture)&&R.drawBuffer();var M=t/V.get_realWidth(),D=a/V.get_realHeight(),O=(t+r)/V.get_realWidth(),U=(a+i)/V.get_realHeight(),H=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[H+3]=M,kha_graphics4_ImageShaderPainter.rectVertices[H+4]=U,kha_graphics4_ImageShaderPainter.rectVertices[H+12]=M,kha_graphics4_ImageShaderPainter.rectVertices[H+13]=D,kha_graphics4_ImageShaderPainter.rectVertices[H+21]=O,kha_graphics4_ImageShaderPainter.rectVertices[H+22]=D,kha_graphics4_ImageShaderPainter.rectVertices[H+30]=O,kha_graphics4_ImageShaderPainter.rectVertices[H+31]=U;var G=.00392156862745098*((16711680&N)>>>16),W=.00392156862745098*((65280&N)>>>8),z=.00392156862745098*(255&N),j=.00392156862745098*(N>>>24)*F,K=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[K+5]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+6]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+7]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+8]=j,kha_graphics4_ImageShaderPainter.rectVertices[K+14]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+15]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+16]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+17]=j,kha_graphics4_ImageShaderPainter.rectVertices[K+23]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+24]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+25]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+26]=j,kha_graphics4_ImageShaderPainter.rectVertices[K+32]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+33]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+34]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+35]=j;var Y=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[Y]=l,kha_graphics4_ImageShaderPainter.rectVertices[Y+1]=h,kha_graphics4_ImageShaderPainter.rectVertices[Y+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[Y+9]=f,kha_graphics4_ImageShaderPainter.rectVertices[Y+10]=p,kha_graphics4_ImageShaderPainter.rectVertices[Y+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[Y+18]=y,kha_graphics4_ImageShaderPainter.rectVertices[Y+19]=b,kha_graphics4_ImageShaderPainter.rectVertices[Y+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[Y+27]=E,kha_graphics4_ImageShaderPainter.rectVertices[Y+28]=T,kha_graphics4_ImageShaderPainter.rectVertices[Y+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=V},get_color:function(){return this.myColor},set_color:function(e){return this.myColor=e},drawRect:function(e,t,a,r,i){null==i&&(i=1),this.imagePainter.end(),this.textPainter.end();var s,n=this.transformations[this.transformations.length-1],_=e-i/2;s=t+i/2;var o,h=n._02*_+n._12*s+n._22,l=(n._00*_+n._10*s+n._20)/h,c=(n._01*_+n._11*s+n._21)/h,u=new kha_math_FastVector2(l,c),d=this.transformations[this.transformations.length-1],g=e-i/2;o=t-i/2;var p,f=d._02*g+d._12*o+d._22,v=(d._00*g+d._10*o+d._20)/f,k=(d._01*g+d._11*o+d._21)/f,m=new kha_math_FastVector2(v,k),S=this.transformations[this.transformations.length-1],b=e+a+i/2;p=t-i/2;var y,x=S._02*b+S._12*p+S._22,B=(S._00*b+S._10*p+S._20)/x,w=(S._01*b+S._11*p+S._21)/x,I=new kha_math_FastVector2(B,w),T=this.transformations[this.transformations.length-1],E=e+a+i/2;y=t+i/2;var C=T._02*E+T._12*y+T._22,P=(T._00*E+T._10*y+T._20)/C,A=(T._01*E+T._11*y+T._21)/C,L=new kha_math_FastVector2(P,A);this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,m.x,m.y,I.x,I.y,L.x,L.y);var $,R=this.transformations[this.transformations.length-1],F=e-i/2;$=t+r+i/2;var N=R._02*F+R._12*$+R._22,V=(R._00*F+R._10*$+R._20)/N,M=(R._01*F+R._11*$+R._21)/N;u=new kha_math_FastVector2(V,M);var D,O=this.transformations[this.transformations.length-1],U=e+i/2;D=t-i/2;var H=O._02*U+O._12*D+O._22,G=(O._00*U+O._10*D+O._20)/H,W=(O._01*U+O._11*D+O._21)/H;I=new kha_math_FastVector2(G,W);var z,j=this.transformations[this.transformations.length-1],K=e+i/2;z=t+r+i/2;var Y=j._02*K+j._12*z+j._22,X=(j._00*K+j._10*z+j._20)/Y,Z=(j._01*K+j._11*z+j._21)/Y;L=new kha_math_FastVector2(X,Z),this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,m.x,m.y,I.x,I.y,L.x,L.y);var Q,q=this.transformations[this.transformations.length-1],J=e-i/2;Q=t+r-i/2;var ee=q._02*J+q._12*Q+q._22,te=(q._00*J+q._10*Q+q._20)/ee,ae=(q._01*J+q._11*Q+q._21)/ee;m=new kha_math_FastVector2(te,ae);var re,ie=this.transformations[this.transformations.length-1],se=e+a+i/2;re=t+r-i/2;var ne=ie._02*se+ie._12*re+ie._22,_e=(ie._00*se+ie._10*re+ie._20)/ne,oe=(ie._01*se+ie._11*re+ie._21)/ne;I=new kha_math_FastVector2(_e,oe);var he,le=this.transformations[this.transformations.length-1],ce=e+a+i/2;he=t+r+i/2;var ue=le._02*ce+le._12*he+le._22,de=(le._00*ce+le._10*he+le._20)/ue,ge=(le._01*ce+le._11*he+le._21)/ue;L=new kha_math_FastVector2(de,ge),this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,m.x,m.y,I.x,I.y,L.x,L.y);var pe,fe=this.transformations[this.transformations.length-1],ve=e+a-i/2;pe=t+r+i/2;var ke=fe._02*ve+fe._12*pe+fe._22,me=(fe._00*ve+fe._10*pe+fe._20)/ke,Se=(fe._01*ve+fe._11*pe+fe._21)/ke;u=new kha_math_FastVector2(me,Se);var be,ye=this.transformations[this.transformations.length-1],xe=e+a-i/2;be=t-i/2;var Be=ye._02*xe+ye._12*be+ye._22,we=(ye._00*xe+ye._10*be+ye._20)/Be,Ie=(ye._01*xe+ye._11*be+ye._21)/Be;m=new kha_math_FastVector2(we,Ie);var Te,Ee=this.transformations[this.transformations.length-1],Ce=e+a+i/2;Te=t-i/2;var Pe=Ee._02*Ce+Ee._12*Te+Ee._22,Ae=(Ee._00*Ce+Ee._10*Te+Ee._20)/Pe,Le=(Ee._01*Ce+Ee._11*Te+Ee._21)/Pe;I=new kha_math_FastVector2(Ae,Le);var $e,Re=this.transformations[this.transformations.length-1],Fe=e+a+i/2;$e=t+r+i/2;var Ne=Re._02*Fe+Re._12*$e+Re._22,Ve=(Re._00*Fe+Re._10*$e+Re._20)/Ne,Me=(Re._01*Fe+Re._11*$e+Re._21)/Ne;L=new kha_math_FastVector2(Ve,Me),this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,m.x,m.y,I.x,I.y,L.x,L.y)},fillRect:function(e,t,a,r){var i,s;this.imagePainter.end(),this.textPainter.end();var n,_=this.transformations[this.transformations.length-1],o=e;n=t+r;var h,l,c=_._02*o+_._12*n+_._22;s=(_._00*o+_._10*n+_._20)/c,i=(_._01*o+_._11*n+_._21)/c;var u,d=this.transformations[this.transformations.length-1],g=e;u=t;var p,f,v=d._02*g+d._12*u+d._22;l=(d._00*g+d._10*u+d._20)/v,h=(d._01*g+d._11*u+d._21)/v;var k,m=this.transformations[this.transformations.length-1],S=e+a;k=t;var b,y,x=m._02*S+m._12*k+m._22;f=(m._00*S+m._10*k+m._20)/x,p=(m._01*S+m._11*k+m._21)/x;var B,w=this.transformations[this.transformations.length-1],I=e+a;B=t+r;var T=w._02*I+w._12*B+w._22;y=(w._00*I+w._10*B+w._20)/T,b=(w._01*I+w._11*B+w._21)/T,this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),s,i,l,h,f,p,y,b)},drawString:function(e,t,a){this.imagePainter.end();var r=this.coloredPainter;kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0&&r.drawTriBuffer(!1),kha_graphics4_ColoredShaderPainter.bufferIndex>0&&r.drawBuffer(!1),this.textPainter.drawString(e,this.get_opacity(),this.get_color(),t,a,this.transformations[this.transformations.length-1],this.get_fontGlyphs())},drawCharacters:function(e,t,a,r,i){this.imagePainter.end();var s=this.coloredPainter;kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0&&s.drawTriBuffer(!1),kha_graphics4_ColoredShaderPainter.bufferIndex>0&&s.drawBuffer(!1),this.textPainter.drawCharacters(e,t,a,this.get_opacity(),this.get_color(),r,i,this.transformations[this.transformations.length-1],this.get_fontGlyphs())},get_font:function(){return this.myFont},set_font:function(e){return this.textPainter.setFont(e),this.myFont=e},set_fontSize:function(e){return kha_graphics2_Graphics.prototype.set_fontSize.call(this,this.textPainter.fontSize=e)},drawLine:function(e,t,a,r,i){var s;null==i&&(i=1),this.imagePainter.end(),this.textPainter.end(),(s=r==t?new kha_math_FastVector2(0,-1):new kha_math_FastVector2(1,-(a-e)/(r-t))).set_length(i);var n=new kha_math_FastVector2(e+.5*s.x,t+.5*s.y),_=new kha_math_FastVector2(a+.5*s.x,r+.5*s.y),o=new kha_math_FastVector2(n.x-s.x,n.y-s.y),h=new kha_math_FastVector2(_.x-s.x,_.y-s.y),l=this.transformations[this.transformations.length-1],c=l._02*n.x+l._12*n.y+l._22,u=(l._00*n.x+l._10*n.y+l._20)/c,d=(l._01*n.x+l._11*n.y+l._21)/c;n=new kha_math_FastVector2(u,d);var g=this.transformations[this.transformations.length-1],p=g._02*_.x+g._12*_.y+g._22,f=(g._00*_.x+g._10*_.y+g._20)/p,v=(g._01*_.x+g._11*_.y+g._21)/p;_=new kha_math_FastVector2(f,v);var k=this.transformations[this.transformations.length-1],m=k._02*o.x+k._12*o.y+k._22,S=(k._00*o.x+k._10*o.y+k._20)/m,b=(k._01*o.x+k._11*o.y+k._21)/m;o=new kha_math_FastVector2(S,b);var y=this.transformations[this.transformations.length-1],x=y._02*h.x+y._12*h.y+y._22,B=(y._00*h.x+y._10*h.y+y._20)/x,w=(y._01*h.x+y._11*h.y+y._21)/x;h=new kha_math_FastVector2(B,w),this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),n.x,n.y,_.x,_.y,o.x,o.y),this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),o.x,o.y,_.x,_.y,h.x,h.y)},fillTriangle:function(e,t,a,r,i,s){var n,_;this.imagePainter.end(),this.textPainter.end();var o,h=this.transformations[this.transformations.length-1],l=e;o=t;var c,u,d=h._02*l+h._12*o+h._22;_=(h._00*l+h._10*o+h._20)/d,n=(h._01*l+h._11*o+h._21)/d;var g,p=this.transformations[this.transformations.length-1],f=a;g=r;var v,k,m=p._02*f+p._12*g+p._22;u=(p._00*f+p._10*g+p._20)/m,c=(p._01*f+p._11*g+p._21)/m;var S,b=this.transformations[this.transformations.length-1],y=i;S=s;var x=b._02*y+b._12*S+b._22;k=(b._00*y+b._10*S+b._20)/x,v=(b._01*y+b._11*S+b._21)/x,this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),_,n,u,c,k,v)},myImageScaleQuality:null,get_imageScaleQuality:function(){return this.myImageScaleQuality},set_imageScaleQuality:function(e){return this.imagePainter.setBilinearFilter(e==kha_graphics2_ImageScaleQuality.High),this.textPainter.setBilinearFilter(e==kha_graphics2_ImageScaleQuality.High),this.myImageScaleQuality=e},myMipmapScaleQuality:null,get_mipmapScaleQuality:function(){return this.myMipmapScaleQuality},set_mipmapScaleQuality:function(e){return this.imagePainter.setBilinearMipmapFilter(e==kha_graphics2_ImageScaleQuality.High),this.myMipmapScaleQuality=e},setPipeline:function(e){this.flush(),this.imagePainter.set_pipeline(e),this.coloredPainter.set_pipeline(e),this.textPainter.set_pipeline(e),null!=e&&this.g.setPipeline(e)},scissor:function(e,t,a,r){this.flush(),this.g.scissor(e,t,a,r)},disableScissor:function(){this.flush(),this.g.disableScissor()},begin:function(e,t){null==e&&(e=!0),this.g.begin(),e&&this.clear(t),this.setProjection()},clear:function(e){this.flush(),this.g.clear(null==e?-16777216:e)},flush:function(){this.imagePainter.end(),this.textPainter.end();var e=this.coloredPainter;kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0&&e.drawTriBuffer(!1),kha_graphics4_ColoredShaderPainter.bufferIndex>0&&e.drawBuffer(!1)},end:function(){this.flush(),this.g.end()},drawVideoInternal:function(e,t,a,r,i){},drawVideo:function(e,t,a,r,i){this.setPipeline(kha_graphics4_Graphics2.videoPipeline),this.drawVideoInternal(e,t,a,r,i),this.setPipeline(null)},__class__:kha_graphics4_Graphics2});var kha_graphics4_IndexBuffer=$hxClasses["kha.graphics4.IndexBuffer"]=function(e,t,a){null==a&&(a=!1),this.indexCount=e;var r=new Uint32Array(e);this._data=r,this.buffer=Krom.createIndexBuffer(e)};kha_graphics4_IndexBuffer.__name__=!0,kha_graphics4_IndexBuffer.prototype={buffer:null,_data:null,indexCount:null,delete:function(){Krom.deleteIndexBuffer(this.buffer),this.buffer=null},lock:function(e,t){return null==e&&(e=0),null==t&&(t=this.indexCount),this._data.subarray(e,e+t)},unlock:function(){Krom.setIndices(this.buffer,this._data)},set:function(){Krom.setIndexBuffer(this.buffer)},count:function(){return this.indexCount},__class__:kha_graphics4_IndexBuffer};var kha_graphics4_MipMapFilter=$hxClasses["kha.graphics4.MipMapFilter"]={__ename__:!0,__constructs__:["NoMipFilter","PointMipFilter","LinearMipFilter"]};kha_graphics4_MipMapFilter.NoMipFilter=["NoMipFilter",0],kha_graphics4_MipMapFilter.NoMipFilter.toString=$estr,kha_graphics4_MipMapFilter.NoMipFilter.__enum__=kha_graphics4_MipMapFilter,kha_graphics4_MipMapFilter.PointMipFilter=["PointMipFilter",1],kha_graphics4_MipMapFilter.PointMipFilter.toString=$estr,kha_graphics4_MipMapFilter.PointMipFilter.__enum__=kha_graphics4_MipMapFilter,kha_graphics4_MipMapFilter.LinearMipFilter=["LinearMipFilter",2],kha_graphics4_MipMapFilter.LinearMipFilter.toString=$estr,kha_graphics4_MipMapFilter.LinearMipFilter.__enum__=kha_graphics4_MipMapFilter;var kha_graphics4_PipelineStateBase=$hxClasses["kha.graphics4.PipelineStateBase"]=function(){this.inputLayout=null,this.vertexShader=null,this.fragmentShader=null,this.geometryShader=null,this.tessellationControlShader=null,this.tessellationEvaluationShader=null,this.cullMode=kha_graphics4_CullMode.None,this.depthWrite=!1,this.depthMode=kha_graphics4_CompareMode.Always,this.stencilMode=kha_graphics4_CompareMode.Always,this.stencilBothPass=kha_graphics4_StencilAction.Keep,this.stencilDepthFail=kha_graphics4_StencilAction.Keep,this.stencilFail=kha_graphics4_StencilAction.Keep,this.stencilReferenceValue=0,this.stencilReadMask=255,this.stencilWriteMask=255,this.blendSource=kha_graphics4_BlendingFactor.BlendOne,this.blendDestination=kha_graphics4_BlendingFactor.BlendZero,this.blendOperation=kha_graphics4_BlendingOperation.Add,this.alphaBlendSource=kha_graphics4_BlendingFactor.BlendOne,this.alphaBlendDestination=kha_graphics4_BlendingFactor.BlendZero,this.alphaBlendOperation=kha_graphics4_BlendingOperation.Add,this.colorWriteMaskRed=this.colorWriteMaskBlue=this.colorWriteMaskGreen=this.colorWriteMaskAlpha=!0,this.conservativeRasterization=!1};kha_graphics4_PipelineStateBase.__name__=!0,kha_graphics4_PipelineStateBase.prototype={inputLayout:null,vertexShader:null,fragmentShader:null,geometryShader:null,tessellationControlShader:null,tessellationEvaluationShader:null,cullMode:null,depthWrite:null,depthMode:null,stencilMode:null,stencilBothPass:null,stencilDepthFail:null,stencilFail:null,stencilReferenceValue:null,stencilReadMask:null,stencilWriteMask:null,blendSource:null,blendDestination:null,blendOperation:null,alphaBlendSource:null,alphaBlendDestination:null,alphaBlendOperation:null,colorWriteMaskRed:null,colorWriteMaskGreen:null,colorWriteMaskBlue:null,colorWriteMaskAlpha:null,set_colorWriteMask:function(e){return this.colorWriteMaskRed=this.colorWriteMaskBlue=this.colorWriteMaskGreen=this.colorWriteMaskAlpha=e},conservativeRasterization:null,__class__:kha_graphics4_PipelineStateBase};var kha_graphics4_PipelineState=$hxClasses["kha.graphics4.PipelineState"]=function(){kha_graphics4_PipelineStateBase.call(this),this.pipeline=Krom.createPipeline()};kha_graphics4_PipelineState.__name__=!0,kha_graphics4_PipelineState.convertCullMode=function(e){switch(e[1]){case 0:return 0;case 1:return 1;case 2:return 2}},kha_graphics4_PipelineState.convertCompareMode=function(e){switch(e[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 6;case 7:return 7}},kha_graphics4_PipelineState.convertStencilAction=function(e){switch(e[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 6;case 7:return 7}},kha_graphics4_PipelineState.convertBlendingFactor=function(e){switch(e[1]){case 0:case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 9:return 8;case 10:return 9}},kha_graphics4_PipelineState.__super__=kha_graphics4_PipelineStateBase,kha_graphics4_PipelineState.prototype=$extend(kha_graphics4_PipelineStateBase.prototype,{pipeline:null,delete:function(){Krom.deletePipeline(this.pipeline),this.pipeline=null},compile:function(){var e=this.inputLayout.length>0?this.inputLayout[0].elements:null,t=this.inputLayout.length>1?this.inputLayout[1].elements:null,a=this.inputLayout.length>2?this.inputLayout[2].elements:null,r=this.inputLayout.length>3?this.inputLayout[3].elements:null,i=null!=this.geometryShader?this.geometryShader.shader:null,s=null!=this.tessellationControlShader?this.tessellationControlShader.shader:null,n=null!=this.tessellationEvaluationShader?this.tessellationEvaluationShader.shader:null;Krom.compilePipeline(this.pipeline,e,t,a,r,this.inputLayout.length,this.vertexShader.shader,this.fragmentShader.shader,i,s,n,{cullMode:kha_graphics4_PipelineState.convertCullMode(this.cullMode),depthWrite:this.depthWrite,depthMode:kha_graphics4_PipelineState.convertCompareMode(this.depthMode),stencilMode:kha_graphics4_PipelineState.convertCompareMode(this.stencilMode),stencilBothPass:kha_graphics4_PipelineState.convertStencilAction(this.stencilBothPass),stencilDepthFail:kha_graphics4_PipelineState.convertStencilAction(this.stencilDepthFail),stencilFail:kha_graphics4_PipelineState.convertStencilAction(this.stencilFail),stencilReferenceValue:this.stencilReferenceValue,stencilReadMask:this.stencilReadMask,stencilWriteMask:this.stencilWriteMask,blendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.blendSource),blendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.blendDestination),alphaBlendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendSource),alphaBlendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendDestination),colorWriteMaskRed:this.colorWriteMaskRed,colorWriteMaskGreen:this.colorWriteMaskGreen,colorWriteMaskBlue:this.colorWriteMaskBlue,colorWriteMaskAlpha:this.colorWriteMaskAlpha,conservativeRasterization:this.conservativeRasterization})},set:function(){Krom.setPipeline(this.pipeline)},getConstantLocation:function(e){return Krom.getConstantLocation(this.pipeline,e)},getTextureUnit:function(e){return Krom.getTextureUnit(this.pipeline,e)},__class__:kha_graphics4_PipelineState});var kha_graphics4_StencilAction=$hxClasses["kha.graphics4.StencilAction"]={__ename__:!0,__constructs__:["Keep","Zero","Replace","Increment","IncrementWrap","Decrement","DecrementWrap","Invert"]};kha_graphics4_StencilAction.Keep=["Keep",0],kha_graphics4_StencilAction.Keep.toString=$estr,kha_graphics4_StencilAction.Keep.__enum__=kha_graphics4_StencilAction,kha_graphics4_StencilAction.Zero=["Zero",1],kha_graphics4_StencilAction.Zero.toString=$estr,kha_graphics4_StencilAction.Zero.__enum__=kha_graphics4_StencilAction,kha_graphics4_StencilAction.Replace=["Replace",2],kha_graphics4_StencilAction.Replace.toString=$estr,kha_graphics4_StencilAction.Replace.__enum__=kha_graphics4_StencilAction,kha_graphics4_StencilAction.Increment=["Increment",3],kha_graphics4_StencilAction.Increment.toString=$estr,kha_graphics4_StencilAction.Increment.__enum__=kha_graphics4_StencilAction,kha_graphics4_StencilAction.IncrementWrap=["IncrementWrap",4],kha_graphics4_StencilAction.IncrementWrap.toString=$estr,kha_graphics4_StencilAction.IncrementWrap.__enum__=kha_graphics4_StencilAction,kha_graphics4_StencilAction.Decrement=["Decrement",5],kha_graphics4_StencilAction.Decrement.toString=$estr,kha_graphics4_StencilAction.Decrement.__enum__=kha_graphics4_StencilAction,kha_graphics4_StencilAction.DecrementWrap=["DecrementWrap",6],kha_graphics4_StencilAction.DecrementWrap.toString=$estr,kha_graphics4_StencilAction.DecrementWrap.__enum__=kha_graphics4_StencilAction,kha_graphics4_StencilAction.Invert=["Invert",7],kha_graphics4_StencilAction.Invert.toString=$estr,kha_graphics4_StencilAction.Invert.__enum__=kha_graphics4_StencilAction;var kha_graphics4_TessellationControlShader=$hxClasses["kha.graphics4.TessellationControlShader"]=function(e,t){this.shader=Krom.createTessellationControlShader(e[0].bytes.b.bufferValue,t[0])};kha_graphics4_TessellationControlShader.__name__=!0,kha_graphics4_TessellationControlShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_TessellationControlShader};var kha_graphics4_TessellationEvaluationShader=$hxClasses["kha.graphics4.TessellationEvaluationShader"]=function(e,t){this.shader=Krom.createTessellationEvaluationShader(e[0].bytes.b.bufferValue,t[0])};kha_graphics4_TessellationEvaluationShader.__name__=!0,kha_graphics4_TessellationEvaluationShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_TessellationEvaluationShader};var kha_graphics4_TexDir=$hxClasses["kha.graphics4.TexDir"]={__ename__:!0,__constructs__:["U","V"]};kha_graphics4_TexDir.U=["U",0],kha_graphics4_TexDir.U.toString=$estr,kha_graphics4_TexDir.U.__enum__=kha_graphics4_TexDir,kha_graphics4_TexDir.V=["V",1],kha_graphics4_TexDir.V.toString=$estr,kha_graphics4_TexDir.V.__enum__=kha_graphics4_TexDir;var kha_graphics4_TextureAddressing=$hxClasses["kha.graphics4.TextureAddressing"]={__ename__:!0,__constructs__:["Repeat","Mirror","Clamp"]};kha_graphics4_TextureAddressing.Repeat=["Repeat",0],kha_graphics4_TextureAddressing.Repeat.toString=$estr,kha_graphics4_TextureAddressing.Repeat.__enum__=kha_graphics4_TextureAddressing,kha_graphics4_TextureAddressing.Mirror=["Mirror",1],kha_graphics4_TextureAddressing.Mirror.toString=$estr,kha_graphics4_TextureAddressing.Mirror.__enum__=kha_graphics4_TextureAddressing,kha_graphics4_TextureAddressing.Clamp=["Clamp",2],kha_graphics4_TextureAddressing.Clamp.toString=$estr,kha_graphics4_TextureAddressing.Clamp.__enum__=kha_graphics4_TextureAddressing;var kha_graphics4_TextureFilter=$hxClasses["kha.graphics4.TextureFilter"]={__ename__:!0,__constructs__:["PointFilter","LinearFilter","AnisotropicFilter"]};kha_graphics4_TextureFilter.PointFilter=["PointFilter",0],kha_graphics4_TextureFilter.PointFilter.toString=$estr,kha_graphics4_TextureFilter.PointFilter.__enum__=kha_graphics4_TextureFilter,kha_graphics4_TextureFilter.LinearFilter=["LinearFilter",1],kha_graphics4_TextureFilter.LinearFilter.toString=$estr,kha_graphics4_TextureFilter.LinearFilter.__enum__=kha_graphics4_TextureFilter,kha_graphics4_TextureFilter.AnisotropicFilter=["AnisotropicFilter",2],kha_graphics4_TextureFilter.AnisotropicFilter.toString=$estr,kha_graphics4_TextureFilter.AnisotropicFilter.__enum__=kha_graphics4_TextureFilter;var kha_graphics4_TextureFormat=$hxClasses["kha.graphics4.TextureFormat"]={__ename__:!0,__constructs__:["RGBA32","L8","RGBA128","DEPTH16","RGBA64","A32","A16"]};kha_graphics4_TextureFormat.RGBA32=["RGBA32",0],kha_graphics4_TextureFormat.RGBA32.toString=$estr,kha_graphics4_TextureFormat.RGBA32.__enum__=kha_graphics4_TextureFormat,kha_graphics4_TextureFormat.L8=["L8",1],kha_graphics4_TextureFormat.L8.toString=$estr,kha_graphics4_TextureFormat.L8.__enum__=kha_graphics4_TextureFormat,kha_graphics4_TextureFormat.RGBA128=["RGBA128",2],kha_graphics4_TextureFormat.RGBA128.toString=$estr,kha_graphics4_TextureFormat.RGBA128.__enum__=kha_graphics4_TextureFormat,kha_graphics4_TextureFormat.DEPTH16=["DEPTH16",3],kha_graphics4_TextureFormat.DEPTH16.toString=$estr,kha_graphics4_TextureFormat.DEPTH16.__enum__=kha_graphics4_TextureFormat,kha_graphics4_TextureFormat.RGBA64=["RGBA64",4],kha_graphics4_TextureFormat.RGBA64.toString=$estr,kha_graphics4_TextureFormat.RGBA64.__enum__=kha_graphics4_TextureFormat,kha_graphics4_TextureFormat.A32=["A32",5],kha_graphics4_TextureFormat.A32.toString=$estr,kha_graphics4_TextureFormat.A32.__enum__=kha_graphics4_TextureFormat,kha_graphics4_TextureFormat.A16=["A16",6],kha_graphics4_TextureFormat.A16.toString=$estr,kha_graphics4_TextureFormat.A16.__enum__=kha_graphics4_TextureFormat;var kha_graphics4_TextureUnit=$hxClasses["kha.graphics4.TextureUnit"]=function(){};kha_graphics4_TextureUnit.__name__=!0;var kha_graphics4_Usage=$hxClasses["kha.graphics4.Usage"]={__ename__:!0,__constructs__:["StaticUsage","DynamicUsage","ReadableUsage"]};kha_graphics4_Usage.StaticUsage=["StaticUsage",0],kha_graphics4_Usage.StaticUsage.toString=$estr,kha_graphics4_Usage.StaticUsage.__enum__=kha_graphics4_Usage,kha_graphics4_Usage.DynamicUsage=["DynamicUsage",1],kha_graphics4_Usage.DynamicUsage.toString=$estr,kha_graphics4_Usage.DynamicUsage.__enum__=kha_graphics4_Usage,kha_graphics4_Usage.ReadableUsage=["ReadableUsage",2],kha_graphics4_Usage.ReadableUsage.toString=$estr,kha_graphics4_Usage.ReadableUsage.__enum__=kha_graphics4_Usage;var kha_graphics4_VertexBuffer=$hxClasses["kha.graphics4.VertexBuffer"]=function(e,t,a,r,i){null==i&&(i=!1),null==r&&(r=0),this.vertexCount=e,this.structure=t,this.buffer=Krom.createVertexBuffer(e,t.elements,r);var s=new Float32Array(e*(t.byteSize()/4|0));this._data=s};kha_graphics4_VertexBuffer.__name__=!0,kha_graphics4_VertexBuffer.prototype={buffer:null,_data:null,vertexCount:null,structure:null,delete:function(){Krom.deleteVertexBuffer(this.buffer),this.buffer=null},lock:function(e,t){return this._data},unlock:function(){Krom.setVertices(this.buffer,this._data)},stride:function(){return this.structure.byteSize()},count:function(){return this.vertexCount},set:function(e){return Krom.setVertexBuffer(this.buffer),0},__class__:kha_graphics4_VertexBuffer};var kha_graphics4_VertexData=$hxClasses["kha.graphics4.VertexData"]={__ename__:!0,__constructs__:["Float1","Float2","Float3","Float4","Float4x4"]};kha_graphics4_VertexData.Float1=["Float1",0],kha_graphics4_VertexData.Float1.toString=$estr,kha_graphics4_VertexData.Float1.__enum__=kha_graphics4_VertexData,kha_graphics4_VertexData.Float2=["Float2",1],kha_graphics4_VertexData.Float2.toString=$estr,kha_graphics4_VertexData.Float2.__enum__=kha_graphics4_VertexData,kha_graphics4_VertexData.Float3=["Float3",2],kha_graphics4_VertexData.Float3.toString=$estr,kha_graphics4_VertexData.Float3.__enum__=kha_graphics4_VertexData,kha_graphics4_VertexData.Float4=["Float4",3],kha_graphics4_VertexData.Float4.toString=$estr,kha_graphics4_VertexData.Float4.__enum__=kha_graphics4_VertexData,kha_graphics4_VertexData.Float4x4=["Float4x4",4],kha_graphics4_VertexData.Float4x4.toString=$estr,kha_graphics4_VertexData.Float4x4.__enum__=kha_graphics4_VertexData;var kha_graphics4_VertexElement=$hxClasses["kha.graphics4.VertexElement"]=function(e,t){this.name=e,this.data=t};kha_graphics4_VertexElement.__name__=!0,kha_graphics4_VertexElement.prototype={name:null,data:null,__class__:kha_graphics4_VertexElement};var kha_graphics4_VertexShader=$hxClasses["kha.graphics4.VertexShader"]=function(e,t){null!=e&&(this.shader=Krom.createVertexShader(e[0].bytes.b.bufferValue,t[0]))};kha_graphics4_VertexShader.__name__=!0,kha_graphics4_VertexShader.fromSource=function(e){var t=new kha_graphics4_VertexShader(null,null);return t.shader=Krom.createVertexShaderFromSource(e),t},kha_graphics4_VertexShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_VertexShader};var kha_graphics4_VertexStructure=$hxClasses["kha.graphics4.VertexStructure"]=function(){this.elements=[],this.instanced=!1};kha_graphics4_VertexStructure.__name__=!0,kha_graphics4_VertexStructure.prototype={elements:null,instanced:null,add:function(e,t){this.elements.push(new kha_graphics4_VertexElement(e,t))},size:function(){return this.elements.length},byteSize:function(){for(var e=0,t=0,a=this.elements.length;t<a;){var r=t++;e+=this.dataByteSize(this.elements[r].data)}return e},dataByteSize:function(e){switch(e[1]){case 0:return 4;case 1:return 8;case 2:return 12;case 3:return 16;case 4:return 64}},get:function(e){return this.elements[e]},__class__:kha_graphics4_VertexStructure};var kha_input_Gamepad=$hxClasses["kha.input.Gamepad"]=$hx_exports.kha.input.Gamepad=function(e,t){null==t&&(t="unknown"),null==e&&(e=0),this.index=e,this.axisListeners=[],this.buttonListeners=[],kha_input_Gamepad.instances[e]=this};kha_input_Gamepad.__name__=!0,kha_input_Gamepad.get=function(e){return null==e&&(e=0),e>=kha_input_Gamepad.instances.length?null:kha_input_Gamepad.instances[e]},kha_input_Gamepad.notifyOnConnect=function(e,t){null!=e&&kha_input_Gamepad.connectListeners.push(e),null!=t&&kha_input_Gamepad.disconnectListeners.push(t)},kha_input_Gamepad.removeConnect=function(e,t){null!=e&&HxOverrides.remove(kha_input_Gamepad.connectListeners,e),null!=t&&HxOverrides.remove(kha_input_Gamepad.disconnectListeners,t)},kha_input_Gamepad.sendConnectEvent=function(e){kha_input_Gamepad.instances[e].connected=!0;for(var t=0,a=kha_input_Gamepad.connectListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_input_Gamepad.sendDisconnectEvent=function(e){kha_input_Gamepad.instances[e].connected=!1;for(var t=0,a=kha_input_Gamepad.disconnectListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_input_Gamepad.prototype={index:null,notify:function(e,t){null!=e&&this.axisListeners.push(e),null!=t&&this.buttonListeners.push(t)},remove:function(e,t){null!=e&&HxOverrides.remove(this.axisListeners,e),null!=t&&HxOverrides.remove(this.buttonListeners,t)},axisListeners:null,buttonListeners:null,id:null,connected:null,get_id:function(){return kha_SystemImpl.getGamepadId(this.index)},sendAxisEvent:function(e,t){for(var a=0,r=this.axisListeners;a<r.length;){var i=r[a];++a,i(e,t)}},sendButtonEvent:function(e,t){for(var a=0,r=this.buttonListeners;a<r.length;){var i=r[a];++a,i(e,t)}},__class__:kha_input_Gamepad};var kha_network_Controller=$hxClasses["kha.network.Controller"]=function(){this.__id=kha_network_ControllerBuilder.nextId++,this._inputBuffer=new haxe_io_Bytes(new ArrayBuffer(1))};kha_network_Controller.__name__=!0,kha_network_Controller.prototype={__id:null,_inputBufferIndex:null,_inputBuffer:null,_id:function(){return this.__id},_receive:function(e){},__class__:kha_network_Controller};var kha_input_Keyboard=$hxClasses["kha.input.Keyboard"]=$hx_exports.kha.input.Keyboard=function(){kha_network_Controller.call(this),this.downListeners=[],this.upListeners=[],this.pressListeners=[],kha_input_Keyboard.instance=this};kha_input_Keyboard.__name__=!0,kha_input_Keyboard.get=function(e){return null==e&&(e=0),kha_SystemImpl.getKeyboard(e)},kha_input_Keyboard.__super__=kha_network_Controller,kha_input_Keyboard.prototype=$extend(kha_network_Controller.prototype,{notify:function(e,t,a){null!=e&&this.downListeners.push(e),null!=t&&this.upListeners.push(t),null!=a&&this.pressListeners.push(a)},remove:function(e,t,a){null!=e&&HxOverrides.remove(this.downListeners,e),null!=t&&HxOverrides.remove(this.upListeners,t),null!=a&&HxOverrides.remove(this.pressListeners,a)},show:function(){},hide:function(){},downListeners:null,upListeners:null,pressListeners:null,sendDownEvent:function(e){for(var t=0,a=this.downListeners;t<a.length;){var r=a[t];++t,r(e)}},sendUpEvent:function(e){for(var t=0,a=this.upListeners;t<a.length;){var r=a[t];++t,r(e)}},sendPressEvent:function(e){for(var t=0,a=this.pressListeners;t<a.length;){var r=a[t];++t,r(e)}},_receive:function(e){},__class__:kha_input_Keyboard});var kha_input_Mouse=$hxClasses["kha.input.Mouse"]=$hx_exports.kha.input.Mouse=function(){kha_network_Controller.call(this),kha_input_Mouse.instance=this};kha_input_Mouse.__name__=!0,kha_input_Mouse.get=function(e){return null==e&&(e=0),kha_SystemImpl.getMouse(e)},kha_input_Mouse.__super__=kha_network_Controller,kha_input_Mouse.prototype=$extend(kha_network_Controller.prototype,{notify:function(e,t,a,r,i){this.notifyWindowed(0,e,t,a,r,i)},remove:function(e,t,a,r,i){this.removeWindowed(0,e,t,a,r,i)},notifyWindowed:function(e,t,a,r,i,s){if(null!=t){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=e;)this.windowDownListeners.push([]);this.windowDownListeners[e].push(t)}if(null!=a){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=e;)this.windowUpListeners.push([]);this.windowUpListeners[e].push(a)}if(null!=r){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=e;)this.windowMoveListeners.push([]);this.windowMoveListeners[e].push(r)}if(null!=i){for(null==this.windowWheelListeners&&(this.windowWheelListeners=[]);this.windowWheelListeners.length<=e;)this.windowWheelListeners.push([]);this.windowWheelListeners[e].push(i)}if(null!=s){for(null==this.windowLeaveListeners&&(this.windowLeaveListeners=[]);this.windowLeaveListeners.length<=e;)this.windowLeaveListeners.push([]);this.windowLeaveListeners[e].push(s)}},removeWindowed:function(e,t,a,r,i,s){null!=t&&(null!=this.windowDownListeners?e<this.windowDownListeners.length?HxOverrides.remove(this.windowDownListeners[e],t):haxe_Log.trace('no downListeners for window "'+e+'" are registered',{fileName:"Mouse.hx",lineNumber:88,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no downListeners were ever registered",{fileName:"Mouse.hx",lineNumber:91,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=a&&(null!=this.windowUpListeners?e<this.windowUpListeners.length?HxOverrides.remove(this.windowUpListeners[e],a):haxe_Log.trace('no upListeners for window "'+e+'" are registered',{fileName:"Mouse.hx",lineNumber:100,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no upListeners were ever registered",{fileName:"Mouse.hx",lineNumber:103,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=r&&(null!=this.windowMoveListeners?e<this.windowMoveListeners.length?HxOverrides.remove(this.windowMoveListeners[e],r):haxe_Log.trace('no moveListeners for window "'+e+'" are registered',{fileName:"Mouse.hx",lineNumber:112,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no moveListeners were ever registered",{fileName:"Mouse.hx",lineNumber:115,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=i&&(null!=this.windowWheelListeners?e<this.windowWheelListeners.length?HxOverrides.remove(this.windowWheelListeners[e],i):haxe_Log.trace('no wheelListeners for window "'+e+'" are registered',{fileName:"Mouse.hx",lineNumber:124,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no wheelListeners were ever registered",{fileName:"Mouse.hx",lineNumber:127,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=s&&(null!=this.windowLeaveListeners?e<this.windowLeaveListeners.length?HxOverrides.remove(this.windowLeaveListeners[e],s):haxe_Log.trace('no leaveListeners for window "'+e+'" are registered',{fileName:"Mouse.hx",lineNumber:136,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no leaveListeners were ever registered",{fileName:"Mouse.hx",lineNumber:139,className:"kha.input.Mouse",methodName:"removeWindowed"}))},lock:function(){},unlock:function(){},canLock:function(){return!1},isLocked:function(){return!1},notifyOnLockChange:function(e,t){},removeFromLockChange:function(e,t){},hideSystemCursor:function(){},showSystemCursor:function(){},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,windowWheelListeners:null,windowLeaveListeners:null,sendLeaveEvent:function(e){if(null!=this.windowLeaveListeners)for(var t=0,a=this.windowLeaveListeners[e];t<a.length;){var r=a[t];++t,r()}},sendDownEvent:function(e,t,a,r){if(null!=this.windowDownListeners)for(var i=0,s=this.windowDownListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendUpEvent:function(e,t,a,r){if(null!=this.windowUpListeners)for(var i=0,s=this.windowUpListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendMoveEvent:function(e,t,a,r,i){if(null!=this.windowMoveListeners)for(var s=0,n=this.windowMoveListeners[e];s<n.length;){var _=n[s];++s,_(t,a,r,i)}},sendWheelEvent:function(e,t){if(null!=this.windowWheelListeners)for(var a=0,r=this.windowWheelListeners[e];a<r.length;){var i=r[a];++a,i(t)}},_receive:function(e){},__class__:kha_input_Mouse});var kha_input_MouseImpl=$hxClasses["kha.input.MouseImpl"]=function(){kha_input_Mouse.call(this)};kha_input_MouseImpl.__name__=!0,kha_input_MouseImpl.__super__=kha_input_Mouse,kha_input_MouseImpl.prototype=$extend(kha_input_Mouse.prototype,{lock:function(){kha_SystemImpl.lockMouse()},unlock:function(){kha_SystemImpl.unlockMouse()},canLock:function(){return kha_SystemImpl.canLockMouse()},isLocked:function(){return kha_SystemImpl.isMouseLocked()},notifyOnLockChange:function(e,t){kha_SystemImpl.notifyOfMouseLockChange(e,t)},removeFromLockChange:function(e,t){kha_SystemImpl.removeFromMouseLockChange(e,t)},hideSystemCursor:function(){},showSystemCursor:function(){},_receive:function(e){},__class__:kha_input_MouseImpl});var kha_input_Pen=$hxClasses["kha.input.Pen"]=function(){kha_input_Pen.instance=this};kha_input_Pen.__name__=!0,kha_input_Pen.get=function(e){return null==e&&(e=0),kha_SystemImpl.getPen(e)},kha_input_Pen.prototype={notify:function(e,t,a){this.notifyWindowed(0,e,t,a)},remove:function(e,t,a){this.removeWindowed(0,e,t,a)},notifyWindowed:function(e,t,a,r){if(null!=t){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=e;)this.windowDownListeners.push([]);this.windowDownListeners[e].push(t)}if(null!=a){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=e;)this.windowUpListeners.push([]);this.windowUpListeners[e].push(a)}if(null!=r){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=e;)this.windowMoveListeners.push([]);this.windowMoveListeners[e].push(r)}},removeWindowed:function(e,t,a,r){null!=t&&null!=this.windowDownListeners&&e<this.windowDownListeners.length&&HxOverrides.remove(this.windowDownListeners[e],t),null!=a&&null!=this.windowUpListeners&&e<this.windowUpListeners.length&&HxOverrides.remove(this.windowUpListeners[e],a),null!=r&&null!=this.windowMoveListeners&&e<this.windowMoveListeners.length&&HxOverrides.remove(this.windowMoveListeners[e],r)},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,sendDownEvent:function(e,t,a,r){if(null!=this.windowDownListeners)for(var i=0,s=this.windowDownListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendUpEvent:function(e,t,a,r){if(null!=this.windowUpListeners)for(var i=0,s=this.windowUpListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendMoveEvent:function(e,t,a,r){if(null!=this.windowMoveListeners)for(var i=0,s=this.windowMoveListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},__class__:kha_input_Pen};var kha_input_Surface=$hxClasses["kha.input.Surface"]=$hx_exports.kha.input.Surface=function(){this.touchStartListeners=[],this.touchEndListeners=[],this.moveListeners=[],kha_input_Surface.instance=this};kha_input_Surface.__name__=!0,kha_input_Surface.get=function(e){return null==e&&(e=0),0!=e?null:kha_input_Surface.instance},kha_input_Surface.prototype={notify:function(e,t,a){null!=e&&this.touchStartListeners.push(e),null!=t&&this.touchEndListeners.push(t),null!=a&&this.moveListeners.push(a)},remove:function(e,t,a){null!=e&&HxOverrides.remove(this.touchStartListeners,e),null!=t&&HxOverrides.remove(this.touchEndListeners,t),null!=a&&this.moveListeners.push(a)},touchStartListeners:null,touchEndListeners:null,moveListeners:null,sendTouchStartEvent:function(e,t,a){for(var r=0,i=this.touchStartListeners;r<i.length;){var s=i[r];++r,s(e,t,a)}},sendTouchEndEvent:function(e,t,a){for(var r=0,i=this.touchEndListeners;r<i.length;){var s=i[r];++r,s(e,t,a)}},sendMoveEvent:function(e,t,a){for(var r=0,i=this.moveListeners;r<i.length;){var s=i[r];++r,s(e,t,a)}},__class__:kha_input_Surface};var kha_internal_BytesBlob=$hxClasses["kha.internal.BytesBlob"]=function(e){this.bytes=e};kha_internal_BytesBlob.__name__=!0,kha_internal_BytesBlob.__interfaces__=[kha_Resource],kha_internal_BytesBlob.fromBytes=function(e){return new kha_internal_BytesBlob(e)},kha_internal_BytesBlob.alloc=function(e){return new kha_internal_BytesBlob(new haxe_io_Bytes(new ArrayBuffer(e)))},kha_internal_BytesBlob.readF32=function(e){var t=0==(-2147483648&e)?1:-1,a=e>>23&255,r=8388607&e;switch(a){case 0:return 0;case 255:return 0!=r?NaN:t>0?1/0:-1/0;default:return t*((r+8388608)/8388608)*Math.pow(2,a-127)}},kha_internal_BytesBlob.bit=function(e,t){if(1==(e>>>t&1)){return 0,!0}return 0,!1},kha_internal_BytesBlob.toText=function(e,t){for(var a="",r=0,i=t;r<i;){var s=r++;a+=String.fromCharCode(e[s])}return a},kha_internal_BytesBlob.prototype={bytes:null,sub:function(e,t){return new kha_internal_BytesBlob(this.bytes.sub(e,t))},length:null,get_length:function(){return this.bytes.length},writeU8:function(e,t){this.bytes.b[e]=255&t},readU8:function(e){var t=this.bytes.b[e];return++e,t},readS8:function(e){var t=this.bytes.b[e];return++e,(0==(128&t)?1:-1)*(t&=127)},readU16BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1];return e+=2,256*t+a},readU16LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1];return e+=2,256*a+t},readU32LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3];return e+=4,t+256*a+256*r*256+256*i*256*256},readU32BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3];return e+=4,i+256*r+256*a*256+256*t*256*256},readS16BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1];e+=2;var r=0==(128&t)?1:-1;return t&=127,-1==r?256*t-32767+a:256*t+a},readS16LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=0==(128&a)?1:-1;return a&=127,e+=2,-1==r?256*a-32767+t:256*a+t},readS32LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3],s=0==(128&i)?1:-1;return i&=127,e+=4,-1==s?-2147483647+t+256*a+256*r*256+256*i*256*256:t+256*a+256*r*256+256*i*256*256},readS32BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3],s=0==(128&t)?1:-1;return t&=127,e+=4,-1==s?-2147483647+i+256*r+256*a*256+256*t*256*256:i+256*r+256*a*256+256*t*256*256},readF32LE:function(e){return kha_internal_BytesBlob.readF32(this.readS32LE(e))},readF32BE:function(e){return kha_internal_BytesBlob.readF32(this.readS32BE(e))},toString:function(){return this.bytes.toString()},readUtf8Char:function(e){if(e.value>=this.get_length())return-1;var t=this.readU8(e.value);++e.value;var a=0;if(kha_internal_BytesBlob.bit(t,7))if(kha_internal_BytesBlob.bit(t,7)&&kha_internal_BytesBlob.bit(t,6)&&!kha_internal_BytesBlob.bit(t,5)){var r=31&t,i=this.readU8(e.value);++e.value,a=r<<6|63&i}else kha_internal_BytesBlob.bit(t,7)&&kha_internal_BytesBlob.bit(t,6)&&kha_internal_BytesBlob.bit(t,5)&&!kha_internal_BytesBlob.bit(t,4)?e.value+=2:kha_internal_BytesBlob.bit(t,7)&&kha_internal_BytesBlob.bit(t,6)&&kha_internal_BytesBlob.bit(t,5)&&kha_internal_BytesBlob.bit(t,4)&&!kha_internal_BytesBlob.bit(t,3)&&(e.value+=3);else a=t;return a},readUtf8Block:function(e,t){var a=0;if(t.value>=this.get_length())return"";for(;a<2e3;){var r=this.readUtf8Char(t);if(r<0)break;e[a]=r,++a}return kha_internal_BytesBlob.toText(e,a)},readUtf8String:function(){var e=new Array(2e3),t="",a=0;this.get_length()>=3&&239==this.bytes.b[0]&&187==this.bytes.b[1]&&191==this.bytes.b[2]&&(a=3);for(var r={value:a};r.value<this.get_length();)t+=this.readUtf8Block(e,r);return t},toBytes:function(){return this.bytes},unload:function(){this.bytes=null},__class__:kha_internal_BytesBlob};var kha_krom_Graphics=$hxClasses["kha.krom.Graphics"]=function(e){this.renderTarget=e};kha_krom_Graphics.__name__=!0,kha_krom_Graphics.__interfaces__=[kha_graphics4_Graphics],kha_krom_Graphics.prototype={renderTarget:null,begin:function(e){Krom.begin(this.renderTarget,e)},beginFace:function(e){Krom.beginFace(this.renderTarget,e)},beginEye:function(e){},end:function(){Krom.end()},flush:function(){},vsynced:function(){return!0},refreshRate:function(){return 60},clear:function(e,t,a){var r=0;null!=e&&(r|=1),null!=t&&(r|=2),null!=a&&(r|=4),Krom.clear(r,null==e?0:e,t,a)},viewport:function(e,t,a,r){Krom.viewport(e,t,a,r)},setVertexBuffer:function(e){e.set(0)},setVertexBuffers:function(e){Krom.setVertexBuffers(e)},setIndexBuffer:function(e){e.set()},setCubeMap:function(e,t){Krom.setTexture(e,t)},setCubeMapDepth:function(e,t){Krom.setTextureDepth(e,t)},setTexture:function(e,t){Krom.setTexture(e,t)},setTextureDepth:function(e,t){Krom.setTextureDepth(e,t)},setTextureArray:function(e,t){},setVideoTexture:function(e,t){},setImageTexture:function(e,t){Krom.setImageTexture(e,t)},setTextureParameters:function(e,t,a,r,i,s){Krom.setTextureParameters(e,t[1],a[1],r[1],i[1],s[1])},setTexture3DParameters:function(e,t,a,r,i,s,n){Krom.setTexture3DParameters(e,t[1],a[1],r[1],i[1],s[1],n[1])},setPipeline:function(e){e.set()},setBool:function(e,t){Krom.setBool(e,t)},setInt:function(e,t){Krom.setInt(e,t)},setFloat:function(e,t){Krom.setFloat(e,t)},setFloat2:function(e,t,a){Krom.setFloat2(e,t,a)},setFloat3:function(e,t,a,r){Krom.setFloat3(e,t,a,r)},setFloat4:function(e,t,a,r,i){Krom.setFloat4(e,t,a,r,i)},setFloats:function(e,t){Krom.setFloats(e,t)},setVector2:function(e,t){Krom.setFloat2(e,t.x,t.y)},setVector3:function(e,t){Krom.setFloat3(e,t.x,t.y,t.z)},setVector4:function(e,t){Krom.setFloat4(e,t.x,t.y,t.z,t.w)},setMatrix:function(e,t){Krom.setMatrix(e,t)},setMatrix3:function(e,t){Krom.setMatrix3(e,t)},drawIndexedVertices:function(e,t){null==t&&(t=-1),null==e&&(e=0),Krom.drawIndexedVertices(e,t)},drawIndexedVerticesInstanced:function(e,t,a){null==a&&(a=-1),null==t&&(t=0),Krom.drawIndexedVerticesInstanced(e,t,a)},instancedRenderingAvailable:function(){return!1},scissor:function(e,t,a,r){Krom.scissor(e,t,a,r)},disableScissor:function(){Krom.disableScissor()},renderTargetsInvertedY:function(){return Krom.renderTargetsInvertedY()},__class__:kha_krom_Graphics};var kha_krom_Sound=$hxClasses["kha.krom.Sound"]=function(e){kha_Sound.call(this),this.compressedData=e,this.uncompressedData=null};kha_krom_Sound.__name__=!0,kha_krom_Sound.__super__=kha_Sound,kha_krom_Sound.prototype=$extend(kha_Sound.prototype,{uncompress:function(e){if(null==this.uncompressedData){var t=this.compressedData,a=t.length/4|0,r=new Array(a);this.uncompressedData=r;for(var i=0,s=a;i<s;){var n=i++;this.uncompressedData[n]=t.getFloat(4*n)}this.compressedData=null,e()}else e()},unload:function(){kha_Sound.prototype.unload.call(this)},__class__:kha_krom_Sound});var kha_math_FastMatrix3=$hxClasses["kha.math.FastMatrix3"]=function(e,t,a,r,i,s,n,_,o){this._00=e,this._10=t,this._20=a,this._01=r,this._11=i,this._21=s,this._02=n,this._12=_,this._22=o};kha_math_FastMatrix3.__name__=!0,kha_math_FastMatrix3.fromMatrix3=function(e){return new kha_math_FastMatrix3(e._00,e._10,e._20,e._01,e._11,e._21,e._02,e._12,e._22)},kha_math_FastMatrix3.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:kha_math_FastMatrix3};var kha_math_FastMatrix4=$hxClasses["kha.math.FastMatrix4"]=function(e,t,a,r,i,s,n,_,o,h,l,c,u,d,g,p){this._00=e,this._10=t,this._20=a,this._30=r,this._01=i,this._11=s,this._21=n,this._31=_,this._02=o,this._12=h,this._22=l,this._32=c,this._03=u,this._13=d,this._23=g,this._33=p};kha_math_FastMatrix4.__name__=!0,kha_math_FastMatrix4.fromMatrix4=function(e){return new kha_math_FastMatrix4(e._00,e._10,e._20,e._30,e._01,e._11,e._21,e._31,e._02,e._12,e._22,e._32,e._03,e._13,e._23,e._33)},kha_math_FastMatrix4.orthogonalProjection=function(e,t,a,r,i,s){return new kha_math_FastMatrix4(2/(t-e),0,0,-(t+e)/(t-e),0,2/(r-a),0,-(r+a)/(r-a),0,0,-2/(s-i),-(s+i)/(s-i),0,0,0,1)},kha_math_FastMatrix4.perspectiveProjection=function(e,t,a,r){var i=1/Math.tan(e/2);return new kha_math_FastMatrix4(i/t,0,0,0,0,i,0,0,0,0,(r+a)/(a-r),2*r*a/(a-r),0,0,-1,0)},kha_math_FastMatrix4.lookAt=function(e,t,a){var r=new kha_math_FastVector3(t.x-e.x,t.y-e.y,t.z-e.z);r.set_length(1);var i,s,n,_=r.y*a.z-r.z*a.y,o=r.z*a.x-r.x*a.z,h=r.x*a.y-r.y*a.x,l=new kha_math_FastVector3(_,o,h);return l.set_length(1),n=l.y*r.z-l.z*r.y,s=l.z*r.x-l.x*r.z,i=l.x*r.y-l.y*r.x,new kha_math_FastMatrix4(l.x,l.y,l.z,-(l.x*e.x+l.y*e.y+l.z*e.z),n,s,i,-(n*e.x+s*e.y+i*e.z),-r.x,-r.y,-r.z,r.x*e.x+r.y*e.y+r.z*e.z,0,0,0,1)},kha_math_FastMatrix4.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:kha_math_FastMatrix4};var kha_math_FastVector2=$hxClasses["kha.math.FastVector2"]=function(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t};kha_math_FastVector2.__name__=!0,kha_math_FastVector2.fromVector2=function(e){return new kha_math_FastVector2(e.x,e.y)},kha_math_FastVector2.prototype={x:null,y:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,e},toString:function(){return"FastVector2("+this.x+", "+this.y+")"},__class__:kha_math_FastVector2};var kha_math_FastVector3=$hxClasses["kha.math.FastVector3"]=function(e,t,a){null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a};kha_math_FastVector3.__name__=!0,kha_math_FastVector3.fromVector3=function(e){return new kha_math_FastVector3(e.x,e.y,e.z)},kha_math_FastVector3.prototype={x:null,y:null,z:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,e},toString:function(){return"FastVector3("+this.x+", "+this.y+", "+this.z+")"},__class__:kha_math_FastVector3};var kha_math_FastVector4=$hxClasses["kha.math.FastVector4"]=function(e,t,a,r){null==r&&(r=1),null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a,this.w=r};kha_math_FastVector4.__name__=!0,kha_math_FastVector4.fromVector4=function(e){return new kha_math_FastVector4(e.x,e.y,e.z,e.w)},kha_math_FastVector4.prototype={x:null,y:null,z:null,w:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,this.w*=a,e},toString:function(){return"FastVector4("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},__class__:kha_math_FastVector4};var kha_math_Matrix3=$hxClasses["kha.math.Matrix3"]=function(e,t,a,r,i,s,n,_,o){this._00=e,this._10=t,this._20=a,this._01=r,this._11=i,this._21=s,this._02=n,this._12=_,this._22=o};kha_math_Matrix3.__name__=!0,kha_math_Matrix3.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:kha_math_Matrix3};var kha_math_Matrix4=$hxClasses["kha.math.Matrix4"]=function(e,t,a,r,i,s,n,_,o,h,l,c,u,d,g,p){this._00=e,this._10=t,this._20=a,this._30=r,this._01=i,this._11=s,this._21=n,this._31=_,this._02=o,this._12=h,this._22=l,this._32=c,this._03=u,this._13=d,this._23=g,this._33=p};kha_math_Matrix4.__name__=!0,kha_math_Matrix4.orthogonalProjection=function(e,t,a,r,i,s){return new kha_math_Matrix4(2/(t-e),0,0,-(t+e)/(t-e),0,2/(r-a),0,-(r+a)/(r-a),0,0,-2/(s-i),-(s+i)/(s-i),0,0,0,1)},kha_math_Matrix4.perspectiveProjection=function(e,t,a,r){var i=1/Math.tan(e/2);return new kha_math_Matrix4(i/t,0,0,0,0,i,0,0,0,0,(r+a)/(a-r),2*r*a/(a-r),0,0,-1,0)},kha_math_Matrix4.lookAt=function(e,t,a){var r=new kha_math_Vector3(t.x-e.x,t.y-e.y,t.z-e.z);r.set_length(1);var i,s,n,_=r.y*a.z-r.z*a.y,o=r.z*a.x-r.x*a.z,h=r.x*a.y-r.y*a.x,l=new kha_math_Vector3(_,o,h);return l.set_length(1),n=l.y*r.z-l.z*r.y,s=l.z*r.x-l.x*r.z,i=l.x*r.y-l.y*r.x,new kha_math_Matrix4(l.x,l.y,l.z,-(l.x*e.x+l.y*e.y+l.z*e.z),n,s,i,-(n*e.x+s*e.y+i*e.z),-r.x,-r.y,-r.z,r.x*e.x+r.y*e.y+r.z*e.z,0,0,0,1)},kha_math_Matrix4.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:kha_math_Matrix4};var kha_math_Vector2=$hxClasses["kha.math.Vector2"]=function(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t};kha_math_Vector2.__name__=!0,kha_math_Vector2.prototype={x:null,y:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,e},__class__:kha_math_Vector2};var kha_math_Vector3=$hxClasses["kha.math.Vector3"]=function(e,t,a){null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a};kha_math_Vector3.__name__=!0,kha_math_Vector3.prototype={x:null,y:null,z:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,e},__class__:kha_math_Vector3};var kha_math_Vector4=$hxClasses["kha.math.Vector4"]=function(e,t,a,r){null==r&&(r=1),null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a,this.w=r};kha_math_Vector4.__name__=!0,kha_math_Vector4.prototype={x:null,y:null,z:null,w:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,this.w*=a,e},__class__:kha_math_Vector4};var kha_network_Client=$hxClasses["kha.network.Client"]=function(){};kha_network_Client.__name__=!0,kha_network_Client.prototype={get_id:null,id:null,send:null,receive:null,onClose:null,__class__:kha_network_Client};var kha_network_ControllerBuilder=$hxClasses["kha.network.ControllerBuilder"]=function(){};kha_network_ControllerBuilder.__name__=!0;var kha_network_Entity=$hxClasses["kha.network.Entity"]=function(){};kha_network_Entity.__name__=!0,kha_network_Entity.prototype={_id:null,_size:null,_send:null,_receive:null,__class__:kha_network_Entity};var kha_network_LocalClient=$hxClasses["kha.network.LocalClient"]=function(e){this.myId=e};kha_network_LocalClient.__name__=!0,kha_network_LocalClient.__interfaces__=[kha_network_Client],kha_network_LocalClient.prototype={myId:null,send:function(e,t){},receive:function(e){},onClose:function(e){},controllers:null,get_controllers:function(){return null},id:null,get_id:function(){return this.myId},__class__:kha_network_LocalClient};var kha_network_Network=$hxClasses["kha.network.Network"]=function(e,t,a,r){};kha_network_Network.__name__=!0,kha_network_Network.prototype={send:function(e,t){},listen:function(e){},__class__:kha_network_Network};var kha_network_State=$hxClasses["kha.network.State"]=function(e,t){this.time=e,this.data=t};kha_network_State.__name__=!0,kha_network_State.prototype={time:null,data:null,__class__:kha_network_State};var kha_network_Session=$hxClasses["kha.network.Session"]=function(e,t,a){this.ping=1,this.currentPlayers=0,this.controllers=new haxe_ds_IntMap,this.entities=new haxe_ds_IntMap,kha_network_Session.instance=this,this.maxPlayers=e,this.address=t,this.port=a};kha_network_Session.__name__=!0,kha_network_Session.the=function(){return kha_network_Session.instance},kha_network_Session.prototype={entities:null,controllers:null,maxPlayers:null,currentPlayers:null,ping:null,address:null,port:null,startCallback:null,refusedCallback:null,resetCallback:null,localClient:null,network:null,updateTaskId:null,pingTaskId:null,me:null,get_me:function(){return this.localClient},addEntity:function(e){var t=this.entities,a=e._id();t.h[a]=e},addController:function(e){haxe_Log.trace("Adding controller id "+e._id(),{fileName:"Session.hx",lineNumber:88,className:"kha.network.Session",methodName:"addController"}),e._inputBufferIndex=0;var t=this.controllers,a=e._id();t.h[a]=e},sendControllerUpdate:function(e,t){if(this.controllers.h.hasOwnProperty(e)){if(this.controllers.h[e]._inputBuffer.length<this.controllers.h[e]._inputBufferIndex+4+t.length){var a=new haxe_io_Bytes(new ArrayBuffer(this.controllers.h[e]._inputBufferIndex+4+t.length));a.blit(0,this.controllers.h[e]._inputBuffer,0,this.controllers.h[e]._inputBufferIndex),this.controllers.h[e]._inputBuffer=a}this.controllers.h[e]._inputBuffer.setInt32(this.controllers.h[e]._inputBufferIndex,t.length),this.controllers.h[e]._inputBuffer.blit(this.controllers.h[e]._inputBufferIndex+4,t,0,t.length),this.controllers.h[e]._inputBufferIndex+=4+t.length}},sendPing:function(){var e=new haxe_io_Bytes(new ArrayBuffer(5));e.b[0]=4,e.setFloat(1,kha_Scheduler.realTime()),this.sendToServer(e)},sendPlayerUpdate:function(){},receive:function(e,t){switch(e.b[0]){case 0:var a=e.b[1];this.localClient=new kha_network_LocalClient(a),kha_Scheduler.resetTime(),this.startCallback();break;case 1:for(var r=e.getDouble(1),i=9,s=this.entities.iterator();s.hasNext();){var n=s.next();n._receive(i,e),i+=n._size()}kha_Scheduler.warp(r);break;case 3:switch(e.b[1]){case 0:break;case 1:this.executeRPC(e)}break;case 4:var _=e.getFloat(1);this.ping=kha_Scheduler.realTime()-_;break;case 5:this.refusedCallback();break;case 6:this.currentPlayers=e.getInt32(1)}},executeRPC:function(e){var t=[],a=e.getInt32(2),r=6,i=e.getUInt16(r);r+=2;for(var s="",n=0,_=i;n<_;){n++;s+=String.fromCharCode(e.b[r]),++r}var o=e.getUInt16(r);r+=2;for(var h="",l=0,c=o;l<c;){l++;h+=String.fromCharCode(e.b[r]),++r}for(;r<e.length;){var u=e.b[r];switch(++r,u){case 66:var d=1==e.b[r];++r,haxe_Log.trace("Bool: "+(null==d?"null":""+d),{fileName:"Session.hx",lineNumber:295,className:"kha.network.Session",methodName:"executeRPC"}),t.push(d);break;case 70:var g=e.getDouble(r);r+=8,haxe_Log.trace("Float: "+g,{fileName:"Session.hx",lineNumber:300,className:"kha.network.Session",methodName:"executeRPC"}),t.push(g);break;case 73:var p=e.getInt32(r);r+=4,haxe_Log.trace("Int: "+p,{fileName:"Session.hx",lineNumber:305,className:"kha.network.Session",methodName:"executeRPC"}),t.push(p);break;case 83:var f=e.getUInt16(r);r+=2;for(var v="",k=0,m=f;k<m;){k++;v+=String.fromCharCode(e.b[r]),++r}haxe_Log.trace("String: "+v,{fileName:"Session.hx",lineNumber:315,className:"kha.network.Session",methodName:"executeRPC"}),t.push(v);break;default:haxe_Log.trace("Unknown argument type.",{fileName:"Session.hx",lineNumber:318,className:"kha.network.Session",methodName:"executeRPC"})}}if(-1==a)Reflect.field(Type.resolveClass(s),h+"_remotely").apply(null,t);else{var S=kha_network_SyncBuilder.objects[a];Reflect.field(kha_network_SyncBuilder.objects[a],h+"_remotely").apply(S,t)}},waitForStart:function(e,t,a,r,i){this.startCallback=e,this.refusedCallback=t,this.resetCallback=i},reset:function(){kha_Scheduler.removeFrameTask(this.updateTaskId),kha_Scheduler.removeTimeTask(this.pingTaskId),this.currentPlayers=0,this.ping=1,this.controllers=new haxe_ds_IntMap,this.entities=new haxe_ds_IntMap,this.resetCallback()},update:function(){for(var e=this.controllers.iterator();e.hasNext();){var t=e.next();if(t._inputBufferIndex>0){var a=new haxe_io_Bytes(new ArrayBuffer(22+t._inputBufferIndex));a.b[0]=2,a.setInt32(1,t._id()),a.setDouble(5,kha_Scheduler.time()),a.setInt32(13,kha_System.windowWidth(0)),a.setInt32(17,kha_System.windowHeight(0));var r=kha_System.get_screenRotation()[1];a.b[21]=255&r,a.blit(22,t._inputBuffer,0,t._inputBufferIndex),this.sendToServer(a),t._inputBufferIndex=0}}},sendToServer:function(e){this.network.send(e,!1)},__class__:kha_network_Session};var kha_network_SyncBuilder=$hxClasses["kha.network.SyncBuilder"]=function(){};kha_network_SyncBuilder.__name__=!0;var kha_simd_Float32x4=$hxClasses["kha.simd.Float32x4"]=function(e,t,a,r){this._0=e,this._1=t,this._2=a,this._3=r};kha_simd_Float32x4.__name__=!0,kha_simd_Float32x4.create=function(){return new kha_simd_Float32x4(0,0,0,0)},kha_simd_Float32x4.loadAllFast=function(e){return new kha_simd_Float32x4(e,e,e,e)},kha_simd_Float32x4.load=function(e,t,a,r){return new kha_simd_Float32x4(e,t,a,r)},kha_simd_Float32x4.loadFast=function(e,t,a,r){return new kha_simd_Float32x4(e,t,a,r)},kha_simd_Float32x4.get=function(e,t){var a=0;switch(t){case 0:a=e._0;break;case 1:a=e._1;break;case 2:a=e._2;break;case 3:a=e._3}return a},kha_simd_Float32x4.getFast=function(e,t){switch(t){case 0:return e._0;case 1:return e._1;case 2:return e._2;case 3:return e._3}return 0},kha_simd_Float32x4.abs=function(e){return new kha_simd_Float32x4(Math.abs(e._0),Math.abs(e._1),Math.abs(e._2),Math.abs(e._3))},kha_simd_Float32x4.add=function(e,t){return new kha_simd_Float32x4(e._0+t._0,e._1+t._1,e._2+t._2,e._3+t._3)},kha_simd_Float32x4.div=function(e,t){return new kha_simd_Float32x4(e._0/t._0,e._1/t._1,e._2/t._2,e._3/t._3)},kha_simd_Float32x4.mul=function(e,t){return new kha_simd_Float32x4(e._0*t._0,e._1*t._1,e._2*t._2,e._3*t._3)},kha_simd_Float32x4.neg=function(e){return new kha_simd_Float32x4(-e._0,-e._1,-e._2,-e._3)},kha_simd_Float32x4.reciprocalApproximation=function(e){return new kha_simd_Float32x4(0,0,0,0)},kha_simd_Float32x4.reciprocalSqrtApproximation=function(e){return new kha_simd_Float32x4(0,0,0,0)},kha_simd_Float32x4.sub=function(e,t){return new kha_simd_Float32x4(e._0-t._0,e._1-t._1,e._2-t._2,e._3-t._3)},kha_simd_Float32x4.sqrt=function(e){return new kha_simd_Float32x4(Math.sqrt(e._0),Math.sqrt(e._1),Math.sqrt(e._2),Math.sqrt(e._3))},kha_simd_Float32x4.prototype={_0:null,_1:null,_2:null,_3:null,__class__:kha_simd_Float32x4};var zui_Canvas=$hxClasses["zui.Canvas"]=function(){};zui_Canvas.__name__=!0,zui_Canvas.draw=function(e,t,a){-1==zui_Canvas.screenW&&(zui_Canvas.screenW=kha_System.windowWidth(),zui_Canvas.screenH=kha_System.windowHeight()),zui_Canvas.events=[],e.begin(a),e.g=a;for(var r=0,i=t.elements;r<i.length;){var s=i[r];++r,zui_Canvas.drawElement(e,t,s)}return e.end(),zui_Canvas.events},zui_Canvas.drawElement=function(e,t,a){e._x=t.x+a.x,e._y=t.y+a.y,e._w=a.width;var r=t.width,i=t.height;switch(a.anchor){case 1:e._x-=(r-zui_Canvas.screenW)/2;break;case 2:e._x-=r-zui_Canvas.screenW;break;case 3:e._y-=(i-zui_Canvas.screenH)/2;break;case 4:e._x-=(r-zui_Canvas.screenW)/2,e._y-=(i-zui_Canvas.screenH)/2;break;case 5:e._x-=r-zui_Canvas.screenW,e._y-=(i-zui_Canvas.screenH)/2;break;case 6:e._y-=i-zui_Canvas.screenH;break;case 7:e._x-=(r-zui_Canvas.screenW)/2,e._y-=i-zui_Canvas.screenH;break;case 8:e._x-=r-zui_Canvas.screenW,e._y-=i-zui_Canvas.screenH}switch(a.type){case 0:var s=e.fontSize,n=e.t.TEXT_COL;e.fontSize=a.height,e.t.TEXT_COL=a.color,e.text(a.text),e.fontSize=s,e.t.TEXT_COL=n;break;case 1:var _=zui_Canvas.getAsset(t,a.asset);if(null!=_){e.imageScrollAlign=!1;var o=null!=a.color?a.color:-1;if(3==e.image(_,o,a.height)){var h=a.event;null!=h&&""!=h&&zui_Canvas.events.push(h)}e.imageScrollAlign=!0}break;case 2:if(e.button(a.text)){var l=a.event;null!=l&&""!=l&&zui_Canvas.events.push(l)}}if(null!=a.children)for(var c=0,u=a.children;c<u.length;){var d=u[c];++c,zui_Canvas.drawElement(e,t,d)}},zui_Canvas.getAsset=function(e,t){for(var a=0,r=e.assets;a<r.length;){var i=r[a];if(++a,i.name==t)return zui_Canvas.assetMap.h[i.id]}return null},zui_Canvas.getElementId=function(e){if(-1==zui_Canvas.elemId)for(var t=0,a=e.elements;t<a.length;){var r=a[t];++t,zui_Canvas.elemId<r.id&&(zui_Canvas.elemId=r.id)}return++zui_Canvas.elemId},zui_Canvas.getAssetId=function(e){if(-1==zui_Canvas.assetId)for(var t=0,a=e.assets;t<a.length;){var r=a[t];++t,zui_Canvas.assetId<r.id&&(zui_Canvas.assetId=r.id)}return++zui_Canvas.assetId};var zui_Ext=$hxClasses["zui.Ext"]=function(){};zui_Ext.__name__=!0,zui_Ext.list=function(e,t,a,r){var i=0;null==r&&(r={});for(var s=null!=r.addCb?r.addCb:function(e){a.push(e)},n=null!=r.removeCb?r.removeCb:function(e){a.splice(e,1)},_=null!=r.getNameCb?r.getNameCb:function(e){return a[e]},o=null!=r.setNameCb?r.setNameCb:function(e,t){a[e]=t},h=null!=r.getLabelCb?r.getLabelCb:function(e){return""},l=r.itemDrawCb,c=r.showRadio&&r.showRadio,u=!r.editable||r.editable,d=!r.showAdd||r.showAdd,g=null!=r.addLabel?r.addLabel:"Add",p=0;p<a.length;){c?(e.row([.12,.68,.2]),e.radio(t.nest(0),p,"")&&(i=p)):e.row([.8,.2]);var f=t.nest(p);f.text=_(p),u?o(p,e.textInput(f,h(p))):e.text(_(p)),e.button("X")?n(p):++p,null!=l&&l(f.nest(p),p-1)}return d&&e.button(g)&&s("untitled"),i},zui_Ext.panelList=function(e,t,a,r,i,s,n,_,o,h,l){null==l&&(l="Add"),null==h&&(h=!0),null==o&&(o=!0),null==r&&(r=function(e){a.push(e)}),null==i&&(i=function(e){a.splice(e,1)}),null==s&&(s=function(e){return a[e]}),null==n&&(n=function(e,t){a[e]=t});for(var c=0;c<a.length;){e.row([.12,.68,.2]);var u=e.panel(t.nest(c),"",0),d=t.nest(c);o?n(c,e.textInput(d,s(c))):e.text(s(c)),e.button("X")?i(c):++c,null!=_&&u&&_(d.nest(c),c-1)}h&&e.button(l)&&r("untitled")},zui_Ext.colorPicker=function(e,t,a){null==a&&(a=!1);var r=e.slider(t.nest(0,{value:.00392156862745098*((16711680&t.color)>>>16)}),"R",0,1,!0),i=e.slider(t.nest(1,{value:.00392156862745098*((65280&t.color)>>>8)}),"G",0,1,!0),s=e.slider(t.nest(2,{value:.00392156862745098*(255&t.color)}),"B",0,1,!0),n=.00392156862745098*(t.color>>>24);a&&(n=e.slider(t.nest(3,{value:n}),"A",0,1,!0));var _=kha__$Color_Color_$Impl_$.fromFloats(r,i,s,n);return e.text("",2,_),_},zui_Ext.initPath=function(e,t){e.text="Windows"==t?"C:\\Users":"/"},zui_Ext.fileBrowser=function(e,t,a){null==a&&(a=!1);var r="/",i="ls ",s=kha_System.get_systemId();"Windows"==s&&(i="dir /b ",a&&(i+="/ad "),r="\\",t.text=StringTools.replace(t.text,"\\\\","\\"),t.text=StringTools.replace(t.text,"\r","")),""==t.text&&zui_Ext.initPath(t,s);var n="Linux"==s?"/tmp":Krom.savePath();n+="Windows"==s?"\\dir.txt":"/dir.txt",t.text!=zui_Ext.lastPath&&Krom.sysCommand(i+'"'+t.text+'" > "'+n+'"'),zui_Ext.lastPath=t.text;var _=haxe_io_Bytes.ofData(Krom.loadBlob(n)).toString().split("\n");(-1!=t.text.indexOf("/",1)||-1!=t.text.indexOf("\\",2))&&e.button("..",0)&&(t.text=t.text.substring(0,t.text.lastIndexOf(r)),2==t.text.length&&":"==t.text.charAt(1)&&(t.text+=r));for(var o=0;o<_.length;){var h=_[o];++o,""!=h&&"."!=h.charAt(0)&&e.button(h,0)&&(t.text+=r+h)}return t.text},zui_Ext.colorWheel=function(e,t,a,r,i){null==i&&(i=!1),null==a&&(a=!1),null==r&&(r=e._w),zui_Ext.rgbToHsv(t.r,t.g,t.b,zui_Ext.ar);var s=zui_Ext.ar[0],n=zui_Ext.ar[1],_=zui_Ext.ar[2],o=e._x,h=e._y;null!=e.currentWindow&&e.currentWindow.scrollEnabled||(r-=e.t.SCROLL_W*e.SCALE|0,o+=(e.t.SCROLL_W*e.SCALE|0)/2),e.image(e.ops.color_wheel,kha__$Color_Color_$Impl_$.fromFloats(_,_,_));var l=o+r/2,c=h+(e._y-h)/2,u=.7*r,d=u/2,g=l,p=c+n*d,f=s*(2*Math.PI),v=Math.cos(f)*(g-l)-Math.sin(f)*(p-c)+l,k=Math.sin(f)*(g-l)+Math.cos(f)*(p-c)+c;g=v,p=k,e.g.set_color(-16777216),e.g.fillRect(g-3,p-3,6,6),e.g.set_color(-1),e.g.fillRect(g-2,p-2,4,4),i&&e.row([.5,.5]),_=e.slider(t.nest(0,{value:1}),"Value",0,1,!0);var m=l+e._windowX,S=c+e._windowY;if(e.inputStarted&&e.getInputInRect(m-d,S-d,u,u)&&(zui_Ext.wheelSelectedHande=t),e.inputReleased&&(zui_Ext.wheelSelectedHande=null),e.inputDown&&zui_Ext.wheelSelectedHande==t){var b=m-e.inputX,y=S-e.inputY;n=Math.min(Math.sqrt(b*b+y*y),d)/d;var x=Math.atan2(e.inputX-m,e.inputY-S);x<0&&(x=Math.PI+(Math.PI-Math.abs(x))),s=(x=2*Math.PI-x)/(2*Math.PI),t.changed=e.changed=!0}return zui_Ext.hsvToRgb(s,n,_,zui_Ext.ar),t.r=zui_Ext.ar[0],t.g=zui_Ext.ar[1],t.b=zui_Ext.ar[2],t.color=kha__$Color_Color_$Impl_$.fromFloats(t.r,t.g,t.b),e.text("",2,t.color),t.color},zui_Ext.dist=function(e,t,a,r){var i=e-a,s=t-r;return Math.sqrt(i*i+s*s)},zui_Ext.fract=function(e){return e-(0|e)},zui_Ext.mix=function(e,t,a){return e*(1-a)+t*a},zui_Ext.clamp=function(e,t,a){return Math.min(Math.max(e,t),a)},zui_Ext.step=function(e,t){return t<e?0:1},zui_Ext.hsvToRgb=function(e,t,a,r){var i=e+1,s=Math.abs(6*(i-(0|i))-3),n=e+.6666666666666666,_=Math.abs(6*(n-(0|n))-3),o=e+.3333333333333333,h=Math.abs(6*(o-(0|o))-3);r[0]=a*(1-t+Math.min(Math.max(s-1,0),1)*t),r[1]=a*(1-t+Math.min(Math.max(_-1,0),1)*t),r[2]=a*(1-t+Math.min(Math.max(h-1,0),1)*t)},zui_Ext.rgbToHsv=function(e,t,a,r){var i=t<a?0:1,s=a*(1-i)+t*i,n=t<a?0:1,_=t*(1-n)+a*n,o=t<a?0:1,h=t<a?0:1,l=e<s?0:1,c=s*(1-l)+e*l,u=e<s?0:1,d=_*(1-u)+_*u,g=e<s?0:1,p=(.6666666666666666*(1-h)+-.3333333333333333*h)*(1-g)+(-1*(1-o)+0*o)*g,f=e<s?0:1,v=e*(1-f)+s*f,k=c-Math.min(v,d);r[0]=Math.abs(p+(v-d)/(6*k+1e-10)),r[1]=k/(c+1e-10),r[2]=c};var zui_Id=$hxClasses["zui.Id"]=function(){};zui_Id.__name__=!0;var zui_Themes=$hxClasses["zui.Themes"]=function(){};zui_Themes.__name__=!0;var zui_Zui=$hxClasses["zui.Zui"]=function(e){this.restoreY=-1,this.restoreX=-1,this.elementsBaked=!1,this.tabScroll=0,this.tabHandle=null,this.tabNames=null,this.tooltipTime=0,this.tooltipShown=!1,this.tooltipY=0,this.tooltipX=0,this.tooltipText="",this.comboToSubmit=0,this.submitComboHandle=null,this.comboSelectedWindow=null,this.comboSelectedHandle=null,this.tabPressedHandle=null,this.tabPressed=!1,this.textToSubmit="",this.submitTextHandle=null,this.textSelectedHandle=null,this.windowHeader=0,this.scrollEnabled=!0,this.scrollingHandle=null,this.windowEnded=!0,this.imageScrollAlign=!0,this.curRatio=-1,this.highlightEnd=0,this.highlightStart=0,this.cursorY=0,this.cursorX=0,this.key=null,this.isKeyDown=!1,this.inputWheelDelta=0,this.inputEnabled=!0,this.inputRegistered=!1,this.changed=!1,this.isReleased=!1,this.isHovered=!1,this.isPushed=!1,this.isStarted=!1,this.isTyping=!1,this.isScrolling=!1,null==e.theme&&(e.theme=zui_Themes.dark),this.t=e.theme,null==e.khaWindowId&&(e.khaWindowId=0),null==e.scaleFactor&&(e.scaleFactor=1),null==e.scaleTexture&&(e.scaleTexture=1),null==e.autoNotifyInput&&(e.autoNotifyInput=!0),this.ops=e,e.autoNotifyInput&&this.registerInput()};zui_Zui.__name__=!0,zui_Zui.prototype={isScrolling:null,isTyping:null,isStarted:null,isPushed:null,isHovered:null,isReleased:null,changed:null,inputRegistered:null,inputEnabled:null,inputX:null,inputY:null,inputInitialX:null,inputInitialY:null,inputDX:null,inputDY:null,inputWheelDelta:null,inputStarted:null,inputReleased:null,inputDown:null,inputDownR:null,isKeyDown:null,key:null,char:null,cursorX:null,cursorY:null,highlightStart:null,highlightEnd:null,ratios:null,curRatio:null,xBeforeSplit:null,wBeforeSplit:null,globalG:null,g:null,t:null,SCALE:null,ops:null,fontSize:null,fontOffsetY:null,arrowOffsetX:null,arrowOffsetY:null,titleOffsetX:null,buttonOffsetY:null,checkOffsetX:null,checkOffsetY:null,checkSelectOffsetX:null,checkSelectOffsetY:null,radioOffsetX:null,radioOffsetY:null,radioSelectOffsetX:null,radioSelectOffsetY:null,scrollAlign:null,imageScrollAlign:null,_x:null,_y:null,_w:null,_h:null,_windowX:null,_windowY:null,_windowW:null,_windowH:null,currentWindow:null,windowEnded:null,scrollingHandle:null,scrollEnabled:null,windowHeader:null,textSelectedHandle:null,textSelectedCurrentText:null,submitTextHandle:null,textToSubmit:null,tabPressed:null,tabPressedHandle:null,comboSelectedHandle:null,comboSelectedWindow:null,comboSelectedAlign:null,comboSelectedTexts:null,comboSelectedLabel:null,comboSelectedX:null,comboSelectedY:null,comboSelectedW:null,submitComboHandle:null,comboToSubmit:null,tooltipText:null,tooltipX:null,tooltipY:null,tooltipShown:null,tooltipTime:null,tabNames:null,tabHandle:null,tabScroll:null,elementsBaked:null,bakeElements:function(e){this.SCALE=this.ops.scaleFactor=e*this.ops.scaleTexture,this.fontSize=this.t.FONT_SIZE*this.ops.scaleFactor|0;var t=this.ops.font.height(this.fontSize);if(this.fontOffsetY=(this.t.ELEMENT_H*this.SCALE-t)/2,this.arrowOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.ARROW_SIZE*this.SCALE)/2,this.arrowOffsetX=this.arrowOffsetY,this.titleOffsetX=(2*this.arrowOffsetX+this.t.ARROW_SIZE*this.SCALE)/this.SCALE,this.buttonOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.BUTTON_H*this.SCALE)/2,this.checkOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.CHECK_SIZE*this.SCALE)/2,this.checkOffsetX=this.checkOffsetY,this.checkSelectOffsetY=(this.t.CHECK_SIZE*this.SCALE-this.t.CHECK_SELECT_SIZE*this.SCALE)/2,this.checkSelectOffsetX=this.checkSelectOffsetY,this.radioOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.CHECK_SIZE*this.SCALE)/2,this.radioOffsetX=this.radioOffsetY,this.radioSelectOffsetY=(this.t.CHECK_SIZE*this.SCALE-this.t.CHECK_SELECT_SIZE*this.SCALE)/2,this.radioSelectOffsetX=this.radioSelectOffsetY,this.scrollAlign=0,this.elementsBaked=!0,null==zui_Zui.checkSelectImage){zui_Zui.checkSelectImage=kha_Image.createRenderTarget(this.t.CHECK_SELECT_SIZE*this.SCALE|0,this.t.CHECK_SELECT_SIZE*this.SCALE|0,null,0,1,this.ops.khaWindowId);var a=zui_Zui.checkSelectImage.get_g2();a.begin(!0,0),a.set_color(this.t.ACCENT_SELECT_COL),a.drawLine(0,0,this.t.CHECK_SELECT_SIZE*this.SCALE,this.t.CHECK_SELECT_SIZE*this.SCALE,2),a.drawLine(this.t.CHECK_SELECT_SIZE*this.SCALE,0,0,this.t.CHECK_SELECT_SIZE*this.SCALE,2),a.end()}},remove:function(){this.ops.autoNotifyInput&&this.unregisterInput()},registerInput:function(){kha_input_Mouse.get().notifyWindowed(this.ops.khaWindowId,$bind(this,this.onMouseDown),$bind(this,this.onMouseUp),$bind(this,this.onMouseMove),$bind(this,this.onMouseWheel)),kha_input_Keyboard.get().notify($bind(this,this.onKeyDown),$bind(this,this.onKeyUp),$bind(this,this.onKeyPress)),this.inputRegistered=!0},unregisterInput:function(){kha_input_Mouse.get().removeWindowed(this.ops.khaWindowId,$bind(this,this.onMouseDown),$bind(this,this.onMouseUp),$bind(this,this.onMouseMove),$bind(this,this.onMouseWheel)),kha_input_Keyboard.get().remove($bind(this,this.onKeyDown),$bind(this,this.onKeyUp),$bind(this,this.onKeyPress)),this.endInput(),this.inputX=this.inputY=0,this.inputRegistered=!1},begin:function(e){this.elementsBaked||this.bakeElements(this.ops.scaleFactor),this.SCALE=this.ops.scaleFactor,this.globalG=e,this._x=0,this._y=0,this._w=0,this._h=0},end:function(e){if(null==e&&(e=!0),this.windowEnded||this.endWindow(),null!=this.comboSelectedHandle&&this.drawCombo(),e&&this.endInput(),null!=this.tabPressedHandle){var t=this.tabPressedHandle.text.length;this.highlightStart=0<t?0:t,this.highlightEnd=0<t?t:0,this.tabPressedHandle=null}},endInput:function(){this.isKeyDown=!1,this.inputStarted=!1,this.inputReleased=!1,this.inputDX=0,this.inputDY=0,this.inputWheelDelta=0},beginLayout:function(e,t,a,r){this.elementsBaked||this.bakeElements(this.ops.scaleFactor),this.currentWindow=null,this.g=e,this._windowX=0,this._windowY=0,this._windowW=r,this._x=t,this._y=a,this._w=r},endLayout:function(e){null==e&&(e=!0),e&&this.endInput()},inputChanged:function(){return!!(0!=this.inputDX||0!=this.inputDY||0!=this.inputWheelDelta||this.inputStarted||this.inputReleased||this.inputDown||this.inputDownR)||this.isKeyDown},window:function(e,t,a,r,i,s){return null==s&&(s=!1),null!=e.texture&&r==e.texture.get_width()&&i==e.texture.get_height()||this.resize(e,r,i,this.ops.khaWindowId),this.windowEnded||this.endWindow(),this.windowEnded=!1,this.g=e.texture.get_g2(),this.currentWindow=e,this._windowX=t+e.dragX,this._windowY=a+e.dragY,this._windowW=r,this._windowH=i,this.windowHeader=0,this.getInputInRect(this._windowX,this._windowY,this._windowW,this._windowH)&&this.inputChanged()&&(e.redraws=2),!(0==e.redraws&&!this.isScrolling&&!this.isTyping)&&(this._x=0,this._y=e.scrollOffset,1==e.layout&&(r=this.t.ELEMENT_W*this.SCALE|0),this._w=e.scrollEnabled?r-(this.t.SCROLL_W*this.SCALE|0):r,this._h=i,this.tooltipText="",this.tabNames=null,this.t.FILL_WINDOW_BG?this.g.begin(!0,this.t.WINDOW_BG_COL):(this.g.begin(!0,0),this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._x,this._y-e.scrollOffset,e.lastMaxX,e.lastMaxY)),e.dragEnabled=s,s&&(this.inputStarted&&this.getInputInRect(this._windowX,this._windowY,this._windowW,15)?e.dragging=!0:this.inputReleased&&(e.dragging=!1),e.dragging&&(e.redraws=2,e.dragX+=0|this.inputDX,e.dragY+=0|this.inputDY),this._y+=15,this.windowHeader+=15),!0)},endWindow:function(){var e=this.currentWindow;if(e.redraws>0||this.isScrolling||this.isTyping){null!=this.tabNames&&this.drawTabs(),e.dragEnabled&&(this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(0,0,this._windowW,15));var t=this._y-e.scrollOffset;if(t<this._windowH||1==e.layout||!this.scrollEnabled)e.scrollEnabled=!1,e.scrollOffset=0;else{e.scrollEnabled=!0,this.tabScroll<0&&(e.scrollOffset=this.tabScroll,this.tabScroll=0);var a=t-this._windowH,r=-e.scrollOffset/a,i=this._windowH*Math.abs(this._windowH/t);i=Math.max(i,this.t.ELEMENT_H*this.SCALE);var s=this._windowH-i,n=a/s,_=s*r;this.inputStarted&&this.getInputInRect(this._windowX+this._windowW-(this.t.SCROLL_W*this.SCALE|0),_+this._windowY,this.t.SCROLL_W*this.SCALE|0,i)&&(e.scrolling=!0,this.scrollingHandle=e,this.isScrolling=!0),e.scrolling?this.scroll(this.inputDY*n,t):0!=this.inputWheelDelta&&this.scroll(this.inputWheelDelta*(this.t.ELEMENT_H*this.SCALE),t),e.scrollOffset>0?e.scrollOffset=0:t+e.scrollOffset<this._windowH&&(e.scrollOffset=this._windowH-t),this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._windowW-(this.t.SCROLL_W*this.SCALE|0),this._windowY,this.t.SCROLL_W*this.SCALE|0,this._windowH),this.g.set_color(this.t.ACCENT_COL),this.g.fillRect(this._windowW-(this.t.SCROLL_W*this.SCALE|0)-this.scrollAlign,_,this.t.SCROLL_W*this.SCALE|0,i)}e.lastMaxX=this._x,e.lastMaxY=this._y,0==e.layout?e.lastMaxX+=this._windowW:e.lastMaxY+=this._windowH,e.redraws--,this.g.end()}this.windowEnded=!0,this.globalG.begin(!1),this.globalG.set_color(this.t.WINDOW_TINT_COL),this.globalG.drawScaledImage(e.texture,this._windowX,this._windowY,e.texture.get_width()/this.ops.scaleTexture,e.texture.get_height()/this.ops.scaleTexture),""!=this.tooltipText?(this.tooltipShown||(this.tooltipShown=!0,this.tooltipX=this.inputX,this.tooltipTime=kha_Scheduler.time()),kha_Scheduler.time()-this.tooltipTime>this.t.TOOLTIP_DELAY&&this.drawTooltip()):this.tooltipShown=!1,this.globalG.end()},scroll:function(e,t){this.currentWindow.scrollOffset-=e},restoreX:null,restoreY:null,tab:function(e,t){null==this.tabNames&&(this.tabNames=[],this.tabHandle=e,this.windowHeader+=this.buttonOffsetY+this.t.BUTTON_H*this.SCALE,this.restoreX=this.inputX,this.restoreY=this.inputY,this.getInputInRect(this._windowX,this._windowY,this._windowW,this.windowHeader)&&(this.inputX=this.inputY=-1)),this.tabNames.push(t);var a=e.position==this.tabNames.length-1;return a&&this.endElement(),a},drawTabs:function(){if(this.inputX=this.restoreX,this.inputY=this.restoreY,null!=this.currentWindow){var e=0,t=this._y;this._y=this.currentWindow.dragEnabled?15:0,this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(0,this._y,this._windowW,this.buttonOffsetY+this.t.BUTTON_H*this.SCALE),this.g.set_color(this.t.ACCENT_COL),this.g.fillRect(this.buttonOffsetY,this._y+this.buttonOffsetY+this.t.BUTTON_H*this.SCALE,this._windowW-2*this.buttonOffsetY,this.t.LINE_STRENGTH*this.SCALE);for(var a=0,r=this.tabNames.length;a<r;){var i=a++;this._x=e,this._w=this.ops.font.width(this.fontSize,this.tabNames[i])+2*this.buttonOffsetY+14*this.SCALE|0;var s=this.getReleased(),n=this.getPushed(),_=this.getHover();if(s){var o=this.tabHandle.nest(this.tabHandle.position);o.scrollOffset=this.currentWindow.scrollOffset,o=this.tabHandle.nest(i),this.tabScroll=o.scrollOffset,this.tabHandle.position=i,this.currentWindow.redraws=3}var h=this.tabHandle.position==i;this.g.set_color(n?this.t.ACCENT_HOVER_COL:_?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL),e+=this._w+5;var l=this.g,c=this._x+this.buttonOffsetY,u=this._y+this.buttonOffsetY,d=this._w,g=this.t.BUTTON_H*this.SCALE,p=0;0==p&&(p=this.t.LINE_STRENGTH*this.SCALE),h?l.drawRect(c,u,d,g,p):l.fillRect(c,u,d,g),this.g.set_color(this.t.BUTTON_TEXT_COL),this.drawString(this.g,this.tabNames[i],this.t.TEXT_OFFSET,0,0),h&&(this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._x+this.buttonOffsetY+1,this._y+this.buttonOffsetY+this.t.BUTTON_H*this.SCALE,this._w-1,this.t.LINE_STRENGTH*this.SCALE))}this._x=0,this._y=t,this._w=0|(this.currentWindow.scrollEnabled?this._windowW-(this.t.SCROLL_W*this.SCALE|0):this._windowW)}},panel:function(e,t,a,r){if(null==r&&(r=!1),null==a&&(a=0),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.selected;this.getReleased()&&(e.selected=!e.selected);this.getHover();return a>0&&(this.g.set_color(this.t.PANEL_BG_COL),this.g.fillRect(this._x,this._y,this._w,this.t.ELEMENT_H*this.SCALE)),r?this.drawTree(e.selected):this.drawArrow(e.selected),this.g.set_color(this.t.PANEL_TEXT_COL),this.g.set_opacity(1),this.drawString(this.g,t,this.titleOffsetX,0),this.endElement(),e.selected},image:function(e,t,a){null==t&&(t=-1);var r=Math.min(e.get_width(),this._w),i=this._x;if(this.imageScrollAlign&&(r=Math.min(e.get_width(),this._w-2*this.buttonOffsetY),i+=this.buttonOffsetY,!(null!=this.currentWindow&&this.currentWindow.scrollEnabled))){var s=-1==this.curRatio?1:this.ratios[this.curRatio];r-=(this.t.SCROLL_W*this.SCALE|0)*s,i+=(this.t.SCROLL_W*this.SCALE|0)*s/2}var n=null==a?r/e.get_width():a/e.get_height();if(null==a?a=e.get_height()*n:r=e.get_width()*n,!this.isVisible(a))return this.endElement(a),0;var _=this.getStarted(a),o=this.getPushed(a),h=this.getReleased(a);return this.g.set_color(t),this.g.drawScaledImage(e,i,this._y,r,a),this.endElement(a),_?1:h?3:o?2:0},text:function(e,t,a){null==a&&(a=0),null==t&&(t=0),this.isVisible(this.t.ELEMENT_H*this.SCALE)?(this.getReleased(),0!=a&&(this.g.set_color(a),this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,e,this.t.TEXT_OFFSET,0,t),this.endElement()):this.endElement()},floatInput:function(e,t,a){null==a&&(a=0),null==t&&(t="");var r=this.textInput(e,t,a,!0);return parseFloat(r)},startTextEdit:function(e){this.isTyping=!0,this.submitTextHandle=this.textSelectedHandle,this.textToSubmit=this.textSelectedCurrentText,this.textSelectedHandle=e,this.textSelectedCurrentText=e.text,this.tabPressed=!1,this.tabPressedHandle=e,this.cursorX=e.text.length,this.cursorY=0;var t=this.cursorX;this.highlightStart=0<t?0:t,this.highlightEnd=0<t?t:0,null!=kha_input_Keyboard.get()&&kha_input_Keyboard.get().show()},submitTextEdit:function(){this.submitTextHandle.text=this.textToSubmit,this.submitTextHandle.changed=this.changed=!0,this.submitTextHandle=null,this.textToSubmit="",this.textSelectedCurrentText=""},updateTextEdit:function(e,t){null==e&&(e=0);var a=this.textSelectedCurrentText;if(this.isKeyDown){37==this.key?this.cursorX>0&&this.cursorX--:39==this.key?this.cursorX<a.length&&this.cursorX++:8==this.key?this.cursorX>0&&(a=this.highlightStart!=this.highlightEnd?HxOverrides.substr(a,0,this.highlightStart)+HxOverrides.substr(a,this.highlightEnd,a.length):HxOverrides.substr(a,0,this.cursorX-1)+HxOverrides.substr(a,this.cursorX,a.length),this.cursorX--):46==this.key?a=HxOverrides.substr(a,0,this.highlightStart)+HxOverrides.substr(a,this.highlightEnd+1,null):13==this.key?this.deselectText():9==this.key?(this.tabPressed=!0,this.deselectText(),this.key=null):36==this.key?this.cursorX=0:35==this.key?this.cursorX=a.length:16!=this.key&&20!=this.key&&null!=this.char&&""!=this.char&&HxOverrides.cca(this.char,0)>=32&&127!=HxOverrides.cca(this.char,0)&&(a=HxOverrides.substr(a,0,this.highlightStart)+this.char+HxOverrides.substr(a,this.highlightEnd,null),this.cursorX++);var r=this.cursorX,i=this.cursorX;this.highlightStart=r<i?r:i,this.highlightEnd=r<i?i:r}var s=this.t.TEXT_OFFSET,n=this.t.ELEMENT_H*this.SCALE,_=n-3*this.buttonOffsetY;if(this.highlightStart!=this.highlightEnd){var o=0==e?HxOverrides.substr(a,this.highlightStart,this.highlightEnd):a.substring(this.highlightEnd,this.highlightStart),h=this.g.get_font().width(this.g.get_fontSize(),o),l=0==e?this._x+this.highlightStart+s:this._x+this._w-h-s;this.g.fillRect(l,this._y+this.cursorY*n+1.5*this.buttonOffsetY,h*this.SCALE,_)}if(kha_Scheduler.time()%(2*this.t.FLASH_SPEED)<this.t.FLASH_SPEED){this.g.set_color(this.t.TEXT_COL);var c=0==e?HxOverrides.substr(a,0,this.cursorX):a.substring(this.cursorX,a.length),u=this.g.get_font().width(this.g.get_fontSize(),c),d=0==e?this._x+u+s:this._x+this._w-u-s;this.g.fillRect(d,this._y+this.cursorY*n+1.5*this.buttonOffsetY,this.SCALE,_)}if(t){var g=parseFloat(a);g!=g&&(g=0);var p=null==g?"null":""+g;Std.parseInt(a)==g&&(p+=".0"),"-"==a.charAt(0)&&("-"!=p.charAt(0)&&(p="-"+p),"-"==a.charAt(1)&&(p=a.substring(1,a.length),this.cursorX--)),a=p}this.textSelectedCurrentText=a},textInput:function(e,t,a,r){if(null==r&&(r=!1),null==a&&(a=0),null==t&&(t=""),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.text;var i=this.getHover();this.g.set_color(i?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var s=this.g,n=this._x+this.buttonOffsetY,_=this._y+this.buttonOffsetY,o=this._w-2*this.buttonOffsetY,h=this.t.BUTTON_H*this.SCALE,l=0;0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?s.fillRect(n,_,o,h):s.drawRect(n,_,o,h,l);var c=this.getReleased()||this.tabPressed;if(this.textSelectedHandle!=e&&c&&this.startTextEdit(e),this.textSelectedHandle==e&&this.updateTextEdit(a,r),this.submitTextHandle==e?this.submitTextEdit():e.changed=!1,""!=t){this.g.set_color(this.t.LABEL_COL);var u=2==a?0:2,d=0==u?7:0;this.drawString(this.g,t,d,0,u)}return this.g.set_color(this.t.TEXT_COL),this.textSelectedHandle!=e?this.drawString(this.g,e.text,null,0,a):this.drawString(this.g,this.textSelectedCurrentText,null,0,a),this.endElement(),e.text},setHighlight:function(e,t){this.highlightStart=e<t?e:t,this.highlightEnd=e<t?t:e},formatFloatString:function(e){var t=parseFloat(e);t!=t&&(t=0);var a=null==t?"null":""+t;return Std.parseInt(e)==t&&(a+=".0"),"-"==e.charAt(0)&&("-"!=a.charAt(0)&&(a="-"+a),"-"==e.charAt(1)&&(a=e.substring(1,e.length),this.cursorX--)),a},deselectText:function(){this.submitTextHandle=this.textSelectedHandle,this.textToSubmit=this.textSelectedCurrentText,this.textSelectedHandle=null,this.isTyping=!1,null!=this.currentWindow&&(this.currentWindow.redraws=2),null!=kha_input_Keyboard.get()&&kha_input_Keyboard.get().hide(),this.highlightStart=0,this.highlightEnd=0},button:function(e,t){if(null==t&&(t=1),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),!1;var a=this.getReleased(),r=this.getPushed(),i=this.getHover();this.g.set_color(r?this.t.BUTTON_PRESSED_COL:i?this.t.BUTTON_HOVER_COL:this.t.BUTTON_COL);var s=this.g,n=this._x+this.buttonOffsetY,_=this._y+this.buttonOffsetY,o=this._w-2*this.buttonOffsetY,h=this.t.BUTTON_H*this.SCALE,l=0;return 0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_BUTTON_BG?s.fillRect(n,_,o,h):s.drawRect(n,_,o,h,l),this.g.set_color(this.t.BUTTON_TEXT_COL),this.drawString(this.g,e,this.t.TEXT_OFFSET,0,t),this.endElement(),a},check:function(e,t){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.selected;this.getReleased()?(e.selected=!e.selected,e.changed=this.changed=!0):e.changed=!1;var a=this.getHover();return this.drawCheck(e.selected,a),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,t,this.titleOffsetX,0,0),this.endElement(),e.selected},radio:function(e,t,a){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position==t;this.getReleased()?(e.position=t,e.changed=this.changed=!0):e.changed=!1;var r=this.getHover();return this.drawRadio(e.position==t,r),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,a,this.titleOffsetX,0),this.endElement(),e.position==t},inlineRadio:function(e,t){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position;this.getReleased()?(++e.position>=t.length&&(e.position=0),e.changed=this.changed=!0):e.changed=!1;var a=this.getHover();return this.drawInlineRadio(t[e.position],a),this.endElement(),e.position},combo:function(e,t,a,r,i){if(null==i&&(i=0),null==r&&(r=!1),null==a&&(a=""),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position;if(this.getReleased()&&null==this.comboSelectedHandle&&(this.inputEnabled=!1,this.comboSelectedHandle=e,this.comboSelectedWindow=this.currentWindow,this.comboSelectedAlign=i,this.comboSelectedTexts=t,this.comboSelectedLabel=a,this.comboSelectedX=this._x+this._windowX|0,this.comboSelectedY=this._y+this._windowY+this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE|0,this.comboSelectedW=0|this._w),e==this.submitComboHandle?(e.position=this.comboToSubmit,this.submitComboHandle=null,e.changed=this.changed=!0):e.changed=!1,this.getHover()){this.g.set_color(this.t.ACCENT_HOVER_COL);var s=this.g,n=this._x+this.buttonOffsetY,_=this._y+this.buttonOffsetY,o=this._w-2*this.buttonOffsetY,h=this.t.BUTTON_H*this.SCALE,l=0;0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?s.fillRect(n,_,o,h):s.drawRect(n,_,o,h,l)}else{this.g.set_color(this.t.ACCENT_COL);var c=this.g,u=this._x+this.buttonOffsetY,d=this._y+this.buttonOffsetY,g=this._w-2*this.buttonOffsetY,p=this.t.BUTTON_H*this.SCALE,f=0;0==f&&(f=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?c.fillRect(u,d,g,p):c.drawRect(u,d,g,p,f)}var v=this._x+this._w-this.arrowOffsetX-8,k=this._y+this.arrowOffsetY+3;return this.g.fillTriangle(v,k,v+this.t.ARROW_SIZE*this.SCALE,k,v+this.t.ARROW_SIZE*this.SCALE/2,k+this.t.ARROW_SIZE*this.SCALE/2),this.g.set_color(this.t.TEXT_COL),r&&""!=a&&(0==i&&(this._x-=15),this.drawString(this.g,a,null,0,0==i?2:0),0==i&&(this._x+=15)),2==i&&(this._x-=15),this.drawString(this.g,t[e.position],null,0,i),2==i&&(this._x+=15),this.endElement(),e.position},slider:function(e,t,a,r,i,s,n,_){if(null==_&&(_=2),null==n&&(n=!0),null==s&&(s=100),null==i&&(i=!1),null==r&&(r=1),null==a&&(a=0),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.value;if(this.getStarted()&&(e.scrolling=!0,this.scrollingHandle=e,this.isScrolling=!0),e.scrolling){var o=r-a,h=this._x+this._windowX+this.buttonOffsetY,l=o/(this._w-2*this.buttonOffsetY),c=a+(this.inputX-h)*l;e.value=(c*s|0)/s,e.value<a?e.value=a:e.value>r&&(e.value=r),e.changed=this.changed=!0}else e.changed=!1;var u=this.getHover();this.drawSlider(e.value,a,r,i,u),(this.getReleased()||this.tabPressed)&&(e.text=e.value+"",this.startTextEdit(e));var d=0==_?2:0;return this.textSelectedHandle==e&&this.updateTextEdit(d,!1),this.submitTextHandle==e?(this.submitTextEdit(),e.value=parseFloat(e.text)):e.changed=!1,this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,t,null,0,_),n&&(this.g.set_color(this.t.TEXT_COL),this.textSelectedHandle!=e?this.drawString(this.g,e.value+"",null,0,d):this.drawString(this.g,this.textSelectedCurrentText,null,0,d)),this.endElement(),e.value},separator:function(){this.isVisible(this.t.ELEMENT_H*this.SCALE)?(this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(this._x,this._y,this._w-this.t.TEXT_OFFSET,this.t.LINE_STRENGTH*this.SCALE),this._y+=2):this._y+=2},tooltip:function(e){this.tooltipText=e,this.tooltipY=this._y+this._windowY},drawArrow:function(e){var t=this._x+this.arrowOffsetX,a=this._y+this.arrowOffsetY;this.g.set_color(this.t.ARROW_COL),e?this.g.fillTriangle(t,a,t+this.t.ARROW_SIZE*this.SCALE,a,t+this.t.ARROW_SIZE*this.SCALE/2,a+this.t.ARROW_SIZE*this.SCALE):this.g.fillTriangle(t,a,t,a+this.t.ARROW_SIZE*this.SCALE,t+this.t.ARROW_SIZE*this.SCALE,a+this.t.ARROW_SIZE*this.SCALE/2)},drawTree:function(e){var t=this._x+this.arrowOffsetX+1,a=this._y+this.arrowOffsetY+1;this.g.set_color(this.t.ARROW_COL),e?this.g.fillRect(t,a+3.5-1,7,7/8):(this.g.fillRect(t,a+3.5-1,7,7/8),this.g.fillRect(t+3.5-1,a,7/8,7))},drawCheck:function(e,t){var a=this._x+this.checkOffsetX,r=this._y+this.checkOffsetY;this.g.set_color(t?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var i=this.g,s=this.t.CHECK_SIZE*this.SCALE,n=this.t.CHECK_SIZE*this.SCALE,_=0;0==_&&(_=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?i.fillRect(a,r,s,n):i.drawRect(a,r,s,n,_),e&&(this.g.set_color(-1),this.g.drawImage(zui_Zui.checkSelectImage,a+this.checkSelectOffsetX,r+this.checkSelectOffsetY))},drawRadio:function(e,t){var a=this._x+this.radioOffsetX,r=this._y+this.radioOffsetY;this.g.set_color(t?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var i=this.g,s=this.t.CHECK_SIZE*this.SCALE,n=this.t.CHECK_SIZE*this.SCALE,_=0;0==_&&(_=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?i.fillRect(a,r,s,n):i.drawRect(a,r,s,n,_),e&&(this.g.set_color(this.t.ACCENT_SELECT_COL),this.g.fillRect(a+this.radioSelectOffsetX,r+this.radioSelectOffsetY,this.t.CHECK_SELECT_SIZE*this.SCALE,this.t.CHECK_SELECT_SIZE*this.SCALE))},drawInlineRadio:function(e,t){t?(this.g.set_color(this.t.ACCENT_HOVER_COL),this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)):(this.g.set_color(this.t.ACCENT_COL),this.g.drawRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,e,this.titleOffsetX,0,1)},drawSlider:function(e,t,a,r,i){var s=this._x+this.buttonOffsetY,n=this._y+this.buttonOffsetY,_=this._w-2*this.buttonOffsetY;this.g.set_color(i?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var o=this.g,h=this.t.BUTTON_H*this.SCALE,l=0;0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?o.fillRect(s,n,_,h):o.drawRect(s,n,_,h,l),this.g.set_color(i?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var c=(e-t)/(a-t),u=8*this.SCALE,d=r?s:s+(_-u)*c,g=r?_*c:u;g=Math.min(g,_),this.g.fillRect(d,n,g,this.t.BUTTON_H*this.SCALE)},drawCombo:function(){var e=this.g;this.globalG.set_color(-14540254);var t=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE;this.globalG.begin(!1),this.globalG.fillRect(this.comboSelectedX,this.comboSelectedY,this.comboSelectedW,(this.comboSelectedTexts.length+1)*t),this.beginLayout(this.globalG,this.comboSelectedX,this.comboSelectedY,this.comboSelectedW),this.inputEnabled=!0;for(var a=0,r=this.comboSelectedTexts.length;a<r;){var i=a++;if(this.button(this.comboSelectedTexts[i],this.comboSelectedAlign)){this.comboToSubmit=i,this.submitComboHandle=this.comboSelectedHandle,null!=this.comboSelectedWindow&&(this.comboSelectedWindow.redraws=2);break}}this.text(this.comboSelectedLabel),this.inputReleased&&!zui_Zui.comboFirst?(this.comboSelectedHandle=null,zui_Zui.comboFirst=!0):zui_Zui.comboFirst=!1,this.inputEnabled=null==this.comboSelectedHandle,this.endLayout(!1),this.globalG.end(),this.g=e},drawTooltip:function(){this.globalG.set_color(-1052689);for(var e=this.tooltipText.split("\n"),t=0,a=0;a<e.length;){var r=e[a];++a;var i=this.ops.font.width(this.fontSize,r);i>t&&(t=i)}this.tooltipX=Math.min(this.tooltipX,kha_System.windowWidth()-t-20),this.globalG.fillRect(this.tooltipX,this.tooltipY,t+20,this.t.ELEMENT_H*this.SCALE*e.length*.6),this.globalG.set_font(this.ops.font),this.globalG.set_fontSize(this.fontSize),this.globalG.set_color(-15658735);for(var s=0,n=e.length;s<n;){var _=s++;this.globalG.drawString(e[_],this.tooltipX+5,this.tooltipY+_*this.fontSize)}},drawString:function(e,t,a,r,i){null==i&&(i=0),null==r&&(r=0);var s=this._w/(this.fontSize/2|0)|0;t.length>s&&(t=t.substring(0,s)+".."),null==a&&(a=this.t.TEXT_OFFSET),a*=this.SCALE,e.set_font(this.ops.font),e.set_fontSize(this.fontSize),1==i?a=this._w/2-this.ops.font.width(this.fontSize,t)/2:2==i&&(a=this._w-this.ops.font.width(this.fontSize,t)-this.t.TEXT_OFFSET),e.drawString(t,this._x+a,this._y+this.fontOffsetY+r)},endElement:function(e){null!=this.currentWindow?0==this.currentWindow.layout?-1==this.curRatio||null!=this.ratios&&this.curRatio==this.ratios.length-1?(null==e&&(e=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE),this._y+=e,null!=this.ratios&&this.curRatio==this.ratios.length-1&&(this.curRatio=-1,this.ratios=null,this._x=this.xBeforeSplit,this._w=this.wBeforeSplit)):(this.curRatio++,this._x+=this._w,this._w=this.wBeforeSplit*this.ratios[this.curRatio]|0):this._x+=this._w+this.t.ELEMENT_OFFSET*this.SCALE:this._y+=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE},row:function(e){this.ratios=e,this.curRatio=0,this.xBeforeSplit=this._x,this.wBeforeSplit=this._w,this._w=this._w*e[this.curRatio]|0},indent:function(){this._x+=this.t.TAB_W*this.SCALE|0,this._w-=this.t.TAB_W*this.SCALE|0},unindent:function(){this._x-=this.t.TAB_W*this.SCALE|0,this._w+=this.t.TAB_W*this.SCALE|0},drawRect:function(e,t,a,r,i,s,n){null==n&&(n=0),0==n&&(n=this.t.LINE_STRENGTH*this.SCALE),t?e.fillRect(a,r,i,s):e.drawRect(a,r,i,s,n)},isVisible:function(e){return null==this.currentWindow||this._y+e>0&&this._y<this.currentWindow.texture.get_height()},getReleased:function(e){return null==e&&(e=-1),this.isReleased=this.inputEnabled&&this.inputReleased&&this.getHover(e)&&this.getInitialHover(e),this.isReleased},getPushed:function(e){return null==e&&(e=-1),this.isPushed=this.inputEnabled&&this.inputDown&&this.getHover(e)&&this.getInitialHover(e),this.isPushed},getStarted:function(e){return null==e&&(e=-1),this.isStarted=this.inputEnabled&&this.inputStarted&&this.getHover(e),this.isStarted},getInitialHover:function(e){return null==e&&(e=-1),-1==e&&(e=this.t.ELEMENT_H*this.SCALE),!!(this.inputEnabled&&this.inputInitialX>=this._windowX+this._x&&this.inputInitialX<this._windowX+this._x+this._w&&this.inputInitialY>=this._windowY+this._y)&&this.inputInitialY<this._windowY+this._y+e},getHover:function(e){return null==e&&(e=-1),-1==e&&(e=this.t.ELEMENT_H*this.SCALE),this.isHovered=this.inputEnabled&&this.inputX>=this._windowX+this._x&&this.inputX<this._windowX+this._x+this._w&&this.inputY>=this._windowY+this._y&&this.inputY<this._windowY+this._y+e,this.isHovered},getInputInRect:function(e,t,a,r,i){return null==i&&(i=1),!!(this.inputEnabled&&this.inputX>=e*i&&this.inputX<(e+a)*i&&this.inputY>=t*i)&&this.inputY<(t+r)*i},onMouseDown:function(e,t,a){this.inputStarted=!0,0==e?this.inputDown=!0:this.inputDownR=!0;var r=t*this.ops.scaleTexture|0,i=a*this.ops.scaleTexture|0;this.setInputPosition(r,i),this.inputInitialX=r,this.inputInitialY=i},onMouseUp:function(e,t,a){this.isScrolling?(this.isScrolling=!1,null!=this.scrollingHandle&&(this.scrollingHandle.scrolling=!1),t==this.inputInitialX&&a==this.inputInitialY&&(this.inputReleased=!0)):this.inputReleased=!0,0==e?this.inputDown=!1:this.inputDownR=!1,this.setInputPosition(t*this.ops.scaleTexture|0,a*this.ops.scaleTexture|0),this.deselectText()},onMouseMove:function(e,t,a,r){this.setInputPosition(e*this.ops.scaleTexture|0,t*this.ops.scaleTexture|0)},onMouseWheel:function(e){this.inputWheelDelta=e},setInputPosition:function(e,t){this.inputDX+=e-this.inputX,this.inputDY+=t-this.inputY,this.inputX=e,this.inputY=t},onKeyDown:function(e){this.isKeyDown=!0,this.key=e,32==e&&(this.char=" ")},onKeyUp:function(e){},onKeyPress:function(e){this.isKeyDown=!0,this.char=e},ELEMENT_W:function(){return this.t.ELEMENT_W*this.SCALE},ELEMENT_H:function(){return this.t.ELEMENT_H*this.SCALE},ELEMENT_OFFSET:function(){return this.t.ELEMENT_OFFSET*this.SCALE},ARROW_SIZE:function(){return this.t.ARROW_SIZE*this.SCALE},BUTTON_H:function(){return this.t.BUTTON_H*this.SCALE},CHECK_SIZE:function(){return this.t.CHECK_SIZE*this.SCALE},CHECK_SELECT_SIZE:function(){return this.t.CHECK_SELECT_SIZE*this.SCALE},SCROLL_W:function(){return this.t.SCROLL_W*this.SCALE|0},TEXT_OFFSET:function(){return this.t.TEXT_OFFSET},TAB_W:function(){return this.t.TAB_W*this.SCALE|0},LINE_STRENGTH:function(){return this.t.LINE_STRENGTH*this.SCALE},resize:function(e,t,a,r){null==r&&(r=0),e.redraws=2,null!=e.texture&&e.texture.unload(),e.texture=kha_Image.createRenderTarget(t,a,kha_graphics4_TextureFormat.RGBA32,0,1,r),e.texture.get_g2().set_imageScaleQuality(kha_graphics2_ImageScaleQuality.High)},__class__:zui_Zui};var zui_Handle=$hxClasses["zui.Handle"]=function(e){this.changed=!1,this.dragY=0,this.dragX=0,this.dragEnabled=!1,this.dragging=!1,this.lastMaxY=0,this.lastMaxX=0,this.layout=0,this.scrollEnabled=!1,this.scrollOffset=0,this.scrolling=!1,this.redraws=2,this.texture=null,this.text="",this.value=0,this.b=0,this.g=0,this.r=0,this.color=-1,this.position=0,this.selected=!1,null!=e&&(null!=e.selected&&(this.selected=e.selected),null!=e.position&&(this.position=e.position),null!=e.value&&(this.value=e.value),null!=e.text&&(this.text=e.text),null!=e.color&&(this.color=e.color),null!=e.layout&&(this.layout=e.layout))};function $iterator(e){return e instanceof Array?function(){return HxOverrides.iter(e)}:"function"==typeof e.iterator?$bind(e,e.iterator):e.iterator}zui_Handle.__name__=!0,zui_Handle.prototype={selected:null,position:null,color:null,r:null,g:null,b:null,value:null,text:null,texture:null,redraws:null,scrolling:null,scrollOffset:null,scrollEnabled:null,layout:null,lastMaxX:null,lastMaxY:null,dragging:null,dragEnabled:null,dragX:null,dragY:null,changed:null,children:null,nest:function(e,t){for(null==this.children&&(this.children=[]);this.children.length<=e;)this.children.push(null);return null==this.children[e]&&(this.children[e]=new zui_Handle(t)),this.children[e]},__class__:zui_Handle};var $_,$fid=0;function $bind(e,t){return null==t?null:(null==t.__id__&&(t.__id__=$fid++),null==e.hx__closures__?e.hx__closures__={}:a=e.hx__closures__[t.__id__],null==a&&((a=function(){return a.method.apply(a.scope,arguments)}).scope=e,a.method=t,e.hx__closures__[t.__id__]=a),a);var a}$hxClasses.Math=Math,String.prototype.__class__=$hxClasses.String=String,String.__name__=!0,$hxClasses.Array=Array,Array.__name__=!0,Date.prototype.__class__=$hxClasses.Date=Date,Date.__name__=["Date"];var Int=$hxClasses.Int={__name__:["Int"]},Dynamic=$hxClasses.Dynamic={__name__:["Dynamic"]},Float=$hxClasses.Float=Number;Float.__name__=["Float"];var Bool=$hxClasses.Bool=Boolean;Bool.__ename__=["Bool"];var Class=$hxClasses.Class={__name__:["Class"]},Enum={},__map_reserved={},ArrayBuffer=$global.ArrayBuffer||js_html_compat_ArrayBuffer;null==ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=js_html_compat_ArrayBuffer.sliceImpl);var DataView=$global.DataView||js_html_compat_DataView,Float32Array=$global.Float32Array||js_html_compat_Float32Array._new,Uint8Array=$global.Uint8Array||js_html_compat_Uint8Array._new;Elements.coff=40,Main.cwd="",haxe_Unserializer.DEFAULT_RESOLVER=new haxe__$Unserializer_DefaultResolver,haxe_Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",haxe_ds_ObjectMap.count=0,haxe_io_FPHelper.i64tmp=new haxe__$Int64__$_$_$Int64(0,0),js_Boot.__toStr={}.toString,js_html_compat_Float32Array.BYTES_PER_ELEMENT=4,js_html_compat_Uint8Array.BYTES_PER_ELEMENT=1,kha_Assets.images=new kha__$Assets_ImageList,kha_Assets.sounds=new kha__$Assets_SoundList,kha_Assets.blobs=new kha__$Assets_BlobList,kha_Assets.fonts=new kha__$Assets_FontList,kha_Assets.videos=new kha__$Assets_VideoList,kha__$Color_Color_$Impl_$.Black=-16777216,kha__$Color_Color_$Impl_$.White=-1,kha__$Color_Color_$Impl_$.Red=-65536,kha__$Color_Color_$Impl_$.Blue=-16776961,kha__$Color_Color_$Impl_$.Green=-16711936,kha__$Color_Color_$Impl_$.Magenta=-65281,kha__$Color_Color_$Impl_$.Yellow=-256,kha__$Color_Color_$Impl_$.Cyan=-16711681,kha__$Color_Color_$Impl_$.Purple=-8388480,kha__$Color_Color_$Impl_$.Pink=-16181,kha__$Color_Color_$Impl_$.Orange=-23296,kha__$Color_Color_$Impl_$.Transparent=0,kha__$Color_Color_$Impl_$.invMaxChannelValue=.00392156862745098,kha_FontStyle.Default=new kha_FontStyle(!1,!1,!1),kha_Scheduler.timeWarpSaveTime=10,kha_Scheduler.DIF_COUNT=3,kha_Scheduler.maxframetime=.5,kha_Scheduler.startTime=0,kha_Shaders.painter_colored_fragData0="s274:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgpvdXQgdmVjNCBGcmFnQ29sb3I7CmluIHZlYzQgZnJhZ21lbnRDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIEZyYWdDb2xvciA9IGZyYWdtZW50Q29sb3I7Cn0KCg",kha_Shaders.painter_colored_vertData0="s439:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWM0IGZyYWdtZW50Q29sb3I7CmluIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgZnJhZ21lbnRDb2xvciA9IHZlcnRleENvbG9yOwp9Cgo",kha_Shaders.painter_image_fragData0="s506:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgppbiB2ZWMyIHRleENvb3JkOwppbiB2ZWM0IGNvbG9yOwpvdXQgdmVjNCBGcmFnQ29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZSh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgRnJhZ0NvbG9yID0gdGV4Y29sb3I7Cn0KCg",kha_Shaders.painter_image_vertData0="s508:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHRleFBvc2l0aW9uOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK",kha_Shaders.painter_text_vertData0="s530:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBmcmFnbWVudENvbG9yOwppbiB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBmcmFnbWVudENvbG9yID0gdmVydGV4Q29sb3I7Cn0KCg",kha_Shaders.painter_text_fragData0="s402:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgpvdXQgdmVjNCBGcmFnQ29sb3I7CmluIHZlYzQgZnJhZ21lbnRDb2xvcjsKaW4gdmVjMiB0ZXhDb29yZDsKCnZvaWQgbWFpbigpCnsKICAgIEZyYWdDb2xvciA9IHZlYzQoZnJhZ21lbnRDb2xvci54eXosIHRleHR1cmUodGV4LCB0ZXhDb29yZCkueCAqIGZyYWdtZW50Q29sb3Iudyk7Cn0KCg",kha_Shaders.painter_video_fragData0="s506:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgppbiB2ZWMyIHRleENvb3JkOwppbiB2ZWM0IGNvbG9yOwpvdXQgdmVjNCBGcmFnQ29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZSh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgRnJhZ0NvbG9yID0gdGV4Y29sb3I7Cn0KCg",kha_Shaders.painter_video_vertData0="s508:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHRleFBvc2l0aW9uOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK",kha_System.renderListeners=[],kha_System.foregroundListeners=[],kha_System.resumeListeners=[],kha_System.pauseListeners=[],kha_System.backgroundListeners=[],kha_System.shutdownListeners=[],kha_System.dropFilesListeners=[],kha_SystemImpl.maxGamepads=4,kha_SystemImpl.mouseLockListeners=[],kha_audio2_Audio1.channelCount=16,kha_audio2_ogg_tools_Crc32.POLY=79764919,kha_audio2_ogg_vorbis_VorbisDecodeState.INVALID_BITS=-1,kha_audio2_ogg_vorbis_VorbisTools.EOP=-1,kha_audio2_ogg_vorbis_VorbisTools.M__PI=3.141592653589793,kha_audio2_ogg_vorbis_VorbisTools.DIVTAB_NUMER=32,kha_audio2_ogg_vorbis_VorbisTools.DIVTAB_DENOM=64,kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE=[1.0649863e-7,1.1341951e-7,1.2079015e-7,1.2863978e-7,1.3699951e-7,1.4590251e-7,1.5538408e-7,1.6548181e-7,1.7623575e-7,1.8768855e-7,1.9988561e-7,2.128753e-7,2.2670913e-7,2.4144197e-7,2.5713223e-7,2.7384213e-7,2.9163793e-7,3.1059021e-7,3.3077411e-7,3.5226968e-7,3.7516214e-7,3.9954229e-7,4.255068e-7,4.5315863e-7,4.8260743e-7,5.1396998e-7,5.4737065e-7,5.8294187e-7,6.2082472e-7,6.6116941e-7,7.0413592e-7,7.4989464e-7,7.9862701e-7,8.505263e-7,9.0579828e-7,9.6466216e-7,10273513e-13,10941144e-13,11652161e-13,12409384e-13,13215816e-13,14074654e-13,14989305e-13,15963394e-13,17000785e-13,18105592e-13,19282195e-13,20535261e-13,21869758e-13,23290978e-13,24804557e-13,26416497e-13,2813319e-12,29961443e-13,31908506e-13,33982101e-13,36190449e-13,38542308e-13,41047004e-13,4371447e-12,46555282e-13,49580707e-13,5280274e-12,5623416e-12,59888572e-13,63780469e-13,67925283e-13,72339451e-13,77040476e-13,82047e-10,87378876e-13,93057248e-13,99104632e-13,10554501e-12,11240392e-12,11970856e-12,12748789e-12,13577278e-12,14459606e-12,15399272e-12,16400004e-12,17465768e-12,18600792e-12,19809576e-12,21096914e-12,22467911e-12,23928002e-12,25482978e-12,27139006e-12,28902651e-12,30780908e-12,32781225e-12,34911534e-12,37180282e-12,39596466e-12,42169667e-12,4491009e-11,47828601e-12,50936773e-12,54246931e-12,57772202e-12,61526565e-12,65524908e-12,69783085e-12,74317983e-12,79147585e-12,8429104e-11,89768747e-12,95602426e-12,.00010181521,.00010843174,.00011547824,.00012298267,.00013097477,.00013948625,.00014855085,.00015820453,.00016848555,.00017943469,.00019109536,.00020351382,.00021673929,.00023082423,.00024582449,.00026179955,.00027881276,.00029693158,.00031622787,.00033677814,.00035866388,.00038197188,.00040679456,.00043323036,.00046138411,.00049136745,.00052329927,.00055730621,.00059352311,.00063209358,.00067317058,716917e-9,.0007635063,.00081312324,.00086596457,.00092223983,.00098217216,.0010459992,.0011139742,.0011863665,.0012634633,.0013455702,.0014330129,.0015261382,.0016253153,.0017309374,.0018434235,.0019632195,.0020908006,.0022266726,.0023713743,.0025254795,.0026895994,.0028643847,.0030505286,.0032487691,.0034598925,.0036847358,.0039241906,.0041792066,.004450795,.0047400328,.0050480668,.0053761186,.0057254891,.0060975636,.0064938176,.0069158225,.0073652516,.0078438871,.0083536271,.0088964928,.009474637,.010090352,.01074608,.011444421,.012188144,.012980198,.013823725,.014722068,.015678791,.016697687,.017782797,.018938423,.020169149,.021479854,.022875735,.02436233,.025945531,.027631618,.029427276,.031339626,.033376252,.035545228,.037855157,.040315199,.042935108,.045725273,.048696758,.051861348,.055231591,.05882085,.062643361,.066714279,.071049749,.075666962,.080584227,.085821044,.091398179,.097337747,.1036633,.11039993,.11757434,.12521498,.13335215,.14201813,.15124727,.16107617,.1715438,.18269168,.19456402,.20720788,.22067342,.23501402,.25028656,.26655159,.28387361,.30232132,.32196786,.34289114,.36517414,.38890521,.41417847,.44109412,.4697589,.50028648,.53279791,.56742212,.6042964,.64356699,.68538959,.72993007,.77736504,.8278826,.88168307,.9389798,1],kha_audio2_ogg_vorbis_data_Codebook.NO_CODE=255,kha_audio2_ogg_vorbis_data_Codebook.delay=0,kha_audio2_ogg_vorbis_data_Header.PACKET_ID=1,kha_audio2_ogg_vorbis_data_Header.PACKET_COMMENT=3,kha_audio2_ogg_vorbis_data_Header.PACKET_SETUP=5,kha_audio2_ogg_vorbis_data_PageFlag.CONTINUED_PACKET=1,kha_audio2_ogg_vorbis_data_PageFlag.FIRST_PAGE=2,kha_audio2_ogg_vorbis_data_PageFlag.LAST_PAGE=4,kha_audio2_ogg_vorbis_data_Setting.MAX_CHANNELS=16,kha_audio2_ogg_vorbis_data_Setting.PUSHDATA_CRC_COUNT=4,kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_LENGTH=10,kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_TABLE_SIZE=1024,kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_TABLE_MASK=1023,kha_graphics2_Graphics._glyphs=function(e){for(var t=[],a=32;a<256;){var r=a++;t.push(r)}return t}(),kha_graphics2_truetype_StbTruetype.STBTT_vmove=1,kha_graphics2_truetype_StbTruetype.STBTT_vline=2,kha_graphics2_truetype_StbTruetype.STBTT_vcurve=3,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_DONTCARE=0,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_BOLD=1,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_ITALIC=2,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_UNDERSCORE=4,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_NONE=8,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_UNICODE=0,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_MAC=1,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_ISO=2,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_MICROSOFT=3,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_1_0=0,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_1_1=1,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_ISO_10646=2,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_2_0_BMP=3,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_2_0_FULL=4,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_SYMBOL=0,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_UNICODE_BMP=1,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_SHIFTJIS=2,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_UNICODE_FULL=10,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_ROMAN=0,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_ARABIC=4,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_JAPANESE=1,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_HEBREW=5,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_CHINESE_TRAD=2,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_GREEK=6,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_KOREAN=3,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_RUSSIAN=7,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_ENGLISH=1033,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_ITALIAN=1040,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_CHINESE=2052,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_JAPANESE=1041,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_DUTCH=1043,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_KOREAN=1042,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_FRENCH=1036,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_RUSSIAN=1049,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_GERMAN=1031,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_SPANISH=1033,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_HEBREW=1037,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_SWEDISH=1053,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ENGLISH=0,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_JAPANESE=11,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ARABIC=12,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_KOREAN=23,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_DUTCH=4,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_RUSSIAN=32,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_FRENCH=1,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_SPANISH=6,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_GERMAN=2,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_SWEDISH=5,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_HEBREW=10,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_CHINESE_SIMPLIFIED=33,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ITALIAN=3,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_CHINESE_TRAD=19,kha_graphics2_truetype_StbTruetype.STBTT_MAX_OVERSAMPLE=8,kha_graphics2_truetype_StbTruetype.STBTT_RASTERIZER_VERSION=2,kha_graphics4_ImageShaderPainter.bufferSize=1500,kha_graphics4_ImageShaderPainter.vertexSize=9,kha_graphics4_ColoredShaderPainter.bufferSize=100,kha_graphics4_ColoredShaderPainter.triangleBufferSize=100,kha_graphics4_TextShaderPainter.bufferSize=100,kha_input_Gamepad.__meta__={statics:{sendConnectEvent:{input:null},sendDisconnectEvent:{input:null}},fields:{sendAxisEvent:{input:null},sendButtonEvent:{input:null}}},kha_input_Gamepad.instances=[],kha_input_Gamepad.connectListeners=[],kha_input_Gamepad.disconnectListeners=[],kha_input_Keyboard.__meta__={fields:{sendDownEvent:{input:null},sendUpEvent:{input:null},sendPressEvent:{input:null}}},kha_input_Mouse.__meta__={fields:{sendLeaveEvent:{input:null},sendDownEvent:{input:null},sendUpEvent:{input:null},sendMoveEvent:{input:null},sendWheelEvent:{input:null}}},kha_internal_BytesBlob.bufferSize=2e3,kha_math_FastMatrix3.width=3,kha_math_FastMatrix3.height=3,kha_math_FastMatrix4.width=4,kha_math_FastMatrix4.height=4,kha_math_Matrix3.width=3,kha_math_Matrix3.height=3,kha_math_Matrix4.width=4,kha_math_Matrix4.height=4,kha_network_ControllerBuilder.nextId=0,kha_network_Session.START=0,kha_network_Session.ENTITY_UPDATES=1,kha_network_Session.CONTROLLER_UPDATES=2,kha_network_Session.REMOTE_CALL=3,kha_network_Session.PING=4,kha_network_Session.SESSION_ERROR=5,kha_network_Session.PLAYER_UPDATES=6,kha_network_Session.RPC_SERVER=0,kha_network_Session.RPC_ALL=1,kha_network_SyncBuilder.nextId=0,kha_network_SyncBuilder.objects=[],zui_Canvas.assetMap=new haxe_ds_IntMap,zui_Canvas.events=[],zui_Canvas.screenW=-1,zui_Canvas.screenH=-1,zui_Canvas.elemId=-1,zui_Canvas.assetId=-1,zui_Ext.lastPath="",zui_Ext.kx=1,zui_Ext.ky=.6666666666666666,zui_Ext.kz=.3333333333333333,zui_Ext.kw=3,zui_Ext.ar=[0,0,0],zui_Ext.Kx=0,zui_Ext.Ky=-.3333333333333333,zui_Ext.Kz=.6666666666666666,zui_Ext.Kw=-1,zui_Ext.e=1e-10,zui_Id.i=0,zui_Themes.dark={FONT_SIZE:13,ELEMENT_W:100,ELEMENT_H:22,ELEMENT_OFFSET:2,ARROW_SIZE:5,BUTTON_H:17,CHECK_SIZE:15,CHECK_SELECT_SIZE:8,SCROLL_W:8,TEXT_OFFSET:8,TAB_W:12,LINE_STRENGTH:1,FLASH_SPEED:.5,TOOLTIP_DELAY:1,FILL_WINDOW_BG:!1,FILL_BUTTON_BG:!0,FILL_ACCENT_BG:!1,WINDOW_BG_COL:-14671840,WINDOW_TINT_COL:-1,ACCENT_COL:-12566464,ACCENT_HOVER_COL:-11513776,ACCENT_SELECT_COL:-10066330,PANEL_BG_COL:-16777216,PANEL_TEXT_COL:-1118482,BUTTON_COL:-13948117,BUTTON_TEXT_COL:-3487289,BUTTON_HOVER_COL:-12895429,BUTTON_PRESSED_COL:-15000805,TEXT_COL:-3487289,LABEL_COL:-5592406,ARROW_COL:-3487289,SEPARATOR_COL:-14277082},zui_Zui.comboFirst=!0,zui_Handle.global=new zui_Handle,Main.main();