var $hx_exports="undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this;$hx_exports.kha=$hx_exports.kha||{},$hx_exports.kha.input=$hx_exports.kha.input||{},$hx_exports.kha._Color=$hx_exports.kha._Color||{};var $_,$global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,$hxClasses=$hxClasses||{},$estr=function(){return js_Boot.__string_rec(this,"")},$hxEnums=$hxEnums||{};function $extend(e,t){var a=Object.create(e);for(var r in t)a[r]=t[r];return t.toString!==Object.prototype.toString&&(a.toString=t.toString),a}var Elements=$hxClasses.Elements=function(e){if(this.lastCanvasH=0,this.lastCanvasW=0,this.lastH=0,this.lastW=0,this.hwin=zui_Handle.global.nest(0,null),this.selectedElem=null,this.selectedFrame=0,this.gridSize=20,this.gridSnapPos=!0,this.gridSnapBounds=!1,this.filesDone=null,this.foldersOnly=!1,this.showFiles=!1,this.zoom=1,this.resizeCanvas=!1,this.dragAsset=null,this.assetNames=[""],this.dragBottom=!1,this.dragRight=!1,this.dragTop=!1,this.dragLeft=!1,this.drag=!1,this.dropPath="",0<(this.canvas=e).assets.length){var t=e.assets;e.assets=[];for(var a=0;a<t.length;){var r=t[a];++a,this.importAsset(r.file)}}kha_Assets.loadEverything($bind(this,this.loaded))};Elements.__name__=!0,Elements.get_uiw=function(){return Elements.windowW*Main.prefs.scaleFactor|0},Elements.toRelative=function(e,t){e=haxe_io_Path.normalize(e),t=haxe_io_Path.normalize(t);for(var a=[],r=e.split("/"),i=t.split("/"),s=0;r[s]==i[s];)++s;for(var n=0,o=i.length-s;n<o;){n++;a.push("..")}for(var h=s,_=r.length;h<_;){var l=h++;a.push(r[l])}return a.join("/")},Elements.toAbsolute=function(e,t){return haxe_io_Path.normalize(t+"/"+e)},Elements.toDegrees=function(e){return 57.29578*e},Elements.toRadians=function(e){return.0174532924*e},Elements.prototype={ui:null,cui:null,canvas:null,toolbarw:null,get_toolbarw:function(){return 60*this.ui.SCALE|0},dropPath:null,drag:null,dragLeft:null,dragTop:null,dragRight:null,dragBottom:null,assetNames:null,dragAsset:null,resizeCanvas:null,zoom:null,showFiles:null,foldersOnly:null,filesDone:null,uimodal:null,gridSnapBounds:null,gridSnapPos:null,gridSize:null,selectedFrame:null,selectedElem:null,hwin:null,lastW:null,lastH:null,lastCanvasW:null,lastCanvasH:null,loaded:function(){var t=this,e=Reflect.copy(zui_Themes.dark);e.FILL_WINDOW_BG=!0,this.ui=new zui_Zui({scaleFactor:Main.prefs.scaleFactor,font:kha_Assets.fonts.font_default,theme:e,color_wheel:kha_Assets.images.color_wheel}),this.cui=new zui_Zui({scaleFactor:1,font:kha_Assets.fonts.font_default,autoNotifyInput:!0,theme:zui_Themes.light}),this.uimodal=new zui_Zui({font:kha_Assets.fonts.font_default,scaleFactor:Main.prefs.scaleFactor}),kha_System.notifyOnDropFiles(function(e){t.dropPath=StringTools.rtrim(e),t.dropPath=Elements.toRelative(t.dropPath,Main.cwd)}),kha_System.notifyOnFrames($bind(this,this.onFrames)),kha_Scheduler.addTimeTask($bind(this,this.update),0,.016666666666666666)},importAsset:function(s){var n=this,e=StringTools.endsWith(s,".jpg")||StringTools.endsWith(s,".png")||StringTools.endsWith(s,".k")||StringTools.endsWith(s,".hdr"),t=StringTools.endsWith(s,".ttf"),a=Elements.toAbsolute(s,Main.cwd);a="Windows"==kha_System.get_systemId()?StringTools.replace(a,"/","\\"):a,e?kha_Assets.loadImageFromPath(a,!1,function(e){var t=s.split("/"),a=t[t.length-1],r=zui_Canvas.getAssetId(n.canvas),i={name:a,file:s,id:r};n.canvas.assets.push(i),zui_Canvas.assetMap.h[i.id]=e,n.assetNames.push(a),n.hwin.redraws=2},null,{fileName:"Elements.hx",lineNumber:123,className:"Elements",methodName:"importAsset"}):t&&kha_Assets.loadFontFromPath(a,function(e){var t=s.split("/"),a=t[t.length-1],r=zui_Canvas.getAssetId(n.canvas),i={name:a,file:s,id:r};n.canvas.assets.push(i),zui_Canvas.assetMap.h[i.id]=e,n.assetNames.push(a),n.hwin.redraws=2},null,{fileName:"Elements.hx",lineNumber:135,className:"Elements",methodName:"importAsset"})},unique:function(e){return e},makeElem:function(e){var t="",a=this.cui.t.ELEMENT_H;switch(e){case 0:t=this.unique("Text");break;case 1:t=this.unique("Image"),a=100;break;case 2:t=this.unique("Button");break;case 3:t=this.unique("Empty"),a=100;break;case 6:t=this.unique("Check");break;case 7:t=this.unique("Radio");break;case 8:t=this.unique("Combo");break;case 9:t=this.unique("Shape"),a=100;break;case 10:t=this.unique("Slider");break;case 11:t=this.unique("Input")}var r={id:zui_Canvas.getElementId(this.canvas),type:e,name:t,event:"",x:0,y:0,width:150,height:a,rotation:0,text:"My "+t,asset:"",color:-1,anchor:0,parent:null,children:[],visible:!0};return this.canvas.elements.push(r),r},unparent:function(e){var t=this.elemById(e.parent);null!=t&&(e.x+=this.absx(t),e.y+=this.absy(t),e.parent=null,HxOverrides.remove(t.children,e.id))},setParent:function(e,t){this.elemById(e.parent)!=t&&(this.unparent(e),null!=t&&(null==t.children&&(e.children=[]),t.children.push(e.id),e.parent=t.id,e.x-=this.absx(t),e.y-=this.absy(t)))},duplicateElem:function(e,t){if(null!=e){null==t&&(t=e.parent);var a={id:zui_Canvas.getElementId(this.canvas),type:e.type,name:e.name,event:e.event,x:e.x+10,y:e.y+10,width:e.width,height:e.height,rotation:e.rotation,text:e.text,asset:e.asset,color:e.color,anchor:e.anchor,parent:t,children:[],visible:e.visible};if(this.canvas.elements.push(a),null!=t)this.elemById(t).children.push(a.id),e.parent!=t&&(a.x=e.x,a.y=e.y);for(var r=0,i=e.children;r<i.length;){var s=i[r];++r,this.duplicateElem(this.elemById(s),a.id)}return a}return null},getEnumTexts:function(){return 0<this.assetNames.length?this.assetNames:[""]},getAssetIndex:function(e){for(var t=0,a=this.canvas.assets.length;t<a;){var r=t++;if(e==this.canvas.assets[r].name)return r+1}return 0},resize:function(){null!=Elements.grid&&(Elements.grid.unload(),Elements.grid=null),null!=Elements.timeline&&(Elements.timeline.unload(),Elements.timeline=null)},drawGrid:function(){var e=2*this.gridSize,t=kha_System.windowWidth()+2*e,a=kha_System.windowHeight()+2*e;Elements.grid=kha_Image.createRenderTarget(t,a),Elements.grid.get_g2().begin(!0,-14408668);for(var r=0,i=1+(a/e|0);r<i;){var s=r++;Elements.grid.get_g2().set_color(-14145496),Elements.grid.get_g2().drawLine(0,s*e,t,s*e),Elements.grid.get_g2().set_color(-13487566),Elements.grid.get_g2().drawLine(0,s*e+this.gridSize,t,s*e+this.gridSize)}for(var n=0,o=1+(t/e|0);n<o;){var h=n++;Elements.grid.get_g2().set_color(-14145496),Elements.grid.get_g2().drawLine(h*e,0,h*e,a),Elements.grid.get_g2().set_color(-13487566),Elements.grid.get_g2().drawLine(h*e+this.gridSize,0,h*e+this.gridSize,a)}Elements.grid.get_g2().end()},drawTimeline:function(){var e=this.ui.SCALE;Elements.timeline=kha_Image.createRenderTarget(kha_System.windowWidth()-Elements.get_uiw()-this.get_toolbarw(),60*e|0);var t=Elements.timeline.get_g2();t.begin(!0,-14540254),t.set_font(kha_Assets.fonts.font_default),t.set_fontSize(16*e|0);for(var a=Elements.timeline.get_width()/(11*e)|0,r=0,i=1+(a/5|0);r<i;){var s=r++;t.drawString(5*s+"",55*s*e,0)}for(var n=0,o=a;n<o;){var h=n++;t.set_color(h%5==0?-12303292:-13421773),t.fillRect(11*h*e,30*e,10*e,30*e)}t.end()},onFrames:function(e){var o=this,t=e[0];""!=this.dropPath&&(this.importAsset(this.dropPath),this.dropPath=""),null==Elements.grid&&this.drawGrid(),null==Elements.timeline&&this.drawTimeline();var a=t.get_g2();if(a.begin(),a.set_color(-1),a.drawImage(Elements.grid,Elements.coffX%40-40,Elements.coffY%40-40),this.canvas.x=Elements.coffX,this.canvas.y=Elements.coffY,a.drawRect(this.canvas.x,this.canvas.y,this.canvas.width*this.cui.SCALE|0,this.canvas.height*this.cui.SCALE|0,1),a.drawRect(this.canvas.x+(this.canvas.width*this.cui.SCALE|0)-3,this.canvas.y+(this.canvas.height*this.cui.SCALE|0)-3,6,6,1),zui_Canvas.screenW=this.canvas.width,zui_Canvas.screenH=this.canvas.height,zui_Canvas.draw(this.cui,this.canvas,a),null!=this.selectedElem){a.set_color(-1);var r=this.absx(this.selectedElem)*this.cui.SCALE|0,i=this.absy(this.selectedElem)*this.cui.SCALE|0,s=this.selectedElem.width*this.cui.SCALE|0,n=this.selectedElem.height*this.cui.SCALE|0;a.drawRect(this.canvas.x+r,this.canvas.y+i,s,n),a.drawRect(this.canvas.x+r-3,this.canvas.y+i-3,6,6),a.drawRect(this.canvas.x+r-3+s/2,this.canvas.y+i-3,6,6),a.drawRect(this.canvas.x+r-3+s,this.canvas.y+i-3,6,6),a.drawRect(this.canvas.x+r-3,this.canvas.y+i-3+n/2,6,6),a.drawRect(this.canvas.x+r-3+s,this.canvas.y+i-3+n/2,6,6),a.drawRect(this.canvas.x+r-3,this.canvas.y+i-3+n,6,6),a.drawRect(this.canvas.x+r-3+s/2,this.canvas.y+i-3+n,6,6),a.drawRect(this.canvas.x+r-3+s,this.canvas.y+i-3+n,6,6)}a.set_color(-1);var h=kha_System.windowHeight()-Elements.timeline.get_height();a.drawImage(Elements.timeline,this.get_toolbarw(),h),a.set_color(-14656100);var _=this.ui.SCALE;if(a.fillRect(this.get_toolbarw()+11*this.selectedFrame*_,h+30*_,10*_,30*_),a.end(),this.ui.begin(a),this.ui.window(zui_Handle.global.nest(1,null),0,0,this.get_toolbarw(),kha_System.windowHeight())&&this.ui.tab(zui_Handle.global.nest(2,null),"Tools")&&(this.ui._y=50,this.ui.button("Empty")&&(this.selectedElem=this.makeElem(3)),this.ui.button("Text")&&(this.selectedElem=this.makeElem(0)),this.ui.button("Shape")&&(this.selectedElem=this.makeElem(9)),this.ui.button("Image")&&(this.selectedElem=this.makeElem(1)),this.ui.button("Button")&&(this.selectedElem=this.makeElem(2)),this.ui.button("Check")&&(this.selectedElem=this.makeElem(6)),this.ui.button("Radio")&&(this.selectedElem=this.makeElem(7)),this.ui.button("Combo")&&(this.selectedElem=this.makeElem(8)),this.ui.button("Slider")&&(this.selectedElem=this.makeElem(10)),this.ui.button("Input")&&(this.selectedElem=this.makeElem(11))),this.ui.window(zui_Handle.global.nest(3,null),this.get_toolbarw(),0,kha_System.windowWidth()-Elements.get_uiw()-this.get_toolbarw(),(this.ui.t.ELEMENT_H+2)*this.ui.SCALE|0)&&this.ui.tab(zui_Handle.global.nest(4,null),this.canvas.name),this.ui.window(this.hwin,kha_System.windowWidth()-Elements.get_uiw(),0,Elements.get_uiw(),kha_System.windowHeight())){var l=zui_Handle.global.nest(5,null);if(this.ui.tab(l,"Project")){if(this.ui.button("Save")){this.canvas.x=0,this.canvas.y=0,Krom.fileSaveBytes(Main.prefs.path,haxe_io_Bytes.ofString(JSON.stringify(this.canvas)).b.bufferValue);var u=HxOverrides.substr(Main.prefs.path,0,Main.prefs.path.length-5);u+=".files";for(var d="",c=0,g=this.canvas.assets;c<g.length;){var p=g[c];++c,d+=p.file+"\n"}Krom.fileSaveBytes(u,haxe_io_Bytes.ofString(d).b.bufferValue),this.canvas.x=Elements.coffX,this.canvas.y=Elements.coffY}if(this.ui.panel(zui_Handle.global.nest(6,{selected:!1}),"Canvas")){this.ui.button("New")&&(this.canvas.elements=[],this.selectedElem=null);var f=this.ui,m=zui_Handle.global.nest(7,{text:this.canvas.name});this.canvas.name=f.textInput(m,"Name",2),this.ui.row([.5,.5]);var k=zui_Handle.global.nest(8,{text:this.canvas.width+""}),v=zui_Handle.global.nest(9,{text:this.canvas.height+""});k.text=this.canvas.width+"",v.text=this.canvas.height+"";var S=this.ui.textInput(k,"Width",2),b=this.ui.textInput(v,"Height",2);this.canvas.width=Std.parseInt(S),this.canvas.height=Std.parseInt(b)}if(this.ui.panel(zui_Handle.global.nest(10,{selected:!0}),"Outliner")){var y=null;y=function(e,t){var a=!1;o.selectedElem==t&&(o.ui.g.set_color(-14656100),o.ui.g.fillRect(0,o.ui._y,o.ui._windowW,o.ui.t.ELEMENT_H*o.ui.SCALE),o.ui.g.set_color(-1));var r=o.ui.getStarted();if(r&&!o.ui.inputDownR&&(o.selectedElem=t),r&&o.ui.inputDownR&&(t==o.selectedElem?o.unparent(t):o.setParent(o.selectedElem,t)),null!=t.children&&0<t.children.length?(o.ui.row([.07692307692307693,.9230769230769231]),a=o.ui.panel(e.nest(t.id,{selected:!0}),"",0,!0),o.ui.text(t.name)):(o.ui._x+=18,o.ui.text(t.name),o.ui._x-=18),a)for(var i=t.children.length;0<i;){--i;var s=t.children[t.children.length-1-i];o.ui.indent();var n=o.elemById(s);y(e,n),o.ui.unindent()}};for(var x=0,w=this.canvas.elements.length;x<w;){var I=x++,T=this.canvas.elements[this.canvas.elements.length-1-I];if(null==T.parent){var C=zui_Handle.global.nest(11,null);y(C,T)}}this.ui.row([.25,.25,.25,.25]);this.canvas.elements;this.ui.button("Up")&&null!=this.selectedElem&&this.moveElem(1),this.ui.button("Down")&&null!=this.selectedElem&&this.moveElem(-1),this.ui.button("Remove")&&null!=this.selectedElem&&this.removeSelectedElem(),this.ui.button("Duplicate")&&null!=this.selectedElem&&(this.selectedElem=this.duplicateElem(this.selectedElem))}if(null!=this.selectedElem){var E=this.selectedElem,B=E.id;if(this.ui.panel(zui_Handle.global.nest(12,{selected:!0}),"Properties")){var P=null==E.visible||E.visible;E.visible=this.ui.check(zui_Handle.global.nest(13,null).nest(B,{selected:P}),"Visible"),E.name=this.ui.textInput(zui_Handle.global.nest(14,null).nest(B,{text:E.name}),"Name",2),E.text=this.ui.textInput(zui_Handle.global.nest(15,null).nest(B,{text:E.text}),"Text",2),this.ui.row([.25,.25,.25,.25]);var A=E.x+"",L=zui_Handle.global.nest(16,null).nest(B,{text:A}),$=E.y+"",N=zui_Handle.global.nest(17,null).nest(B,{text:$});L.text=E.x+"",N.text=E.y+"";var R=this.ui.textInput(L,"X",2),V=this.ui.textInput(N,"Y",2);E.x=parseFloat(R),E.y=parseFloat(V);var M=E.width+"",F=zui_Handle.global.nest(18,null).nest(B,{text:M}),H=E.height+"",O=zui_Handle.global.nest(19,null).nest(B,{text:H});F.text=E.width+"",O.text=E.height+"";var U=this.ui.textInput(F,"W",2),D=this.ui.textInput(O,"H",2);E.width=0|parseFloat(U),E.height=0|parseFloat(D);var z=null==E.rotation?0:E.rotation,W=zui_Handle.global.nest(20,null).nest(B,{value:57.29578*z});E.rotation=.0174532924*this.ui.slider(W,"Rotation",0,360,!0);var G=this.ui.combo(zui_Handle.global.nest(21,null).nest(B,{position:this.getAssetIndex(E.asset)}),this.getEnumTexts(),"Asset",!0,2);E.asset=this.getEnumTexts()[G],E.color=zui_Ext.colorWheel(this.ui,zui_Handle.global.nest(22,null).nest(B,{color:E.color}),!0,null,!0)}this.ui.panel(zui_Handle.global.nest(23,{selected:!1}),"Align");if(this.ui.panel(zui_Handle.global.nest(24,{selected:!1}),"Anchor")){var j=zui_Handle.global.nest(25,null).nest(B,{position:E.anchor});this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(j,0,"Top-Left"),this.ui.radio(j,1,"Top"),this.ui.radio(j,2,"Top-Right"),this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(j,3,"Left"),this.ui.radio(j,4,"Center"),this.ui.radio(j,5,"Right"),this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(j,6,"Bot-Left"),this.ui.radio(j,7,"Bottom"),this.ui.radio(j,8,"Bot-Right"),E.anchor=j.position}this.ui.panel(zui_Handle.global.nest(26,{selected:!1}),"Script")&&(E.event=this.ui.textInput(zui_Handle.global.nest(27,null).nest(B,{text:E.event}),"Event",2));this.ui.panel(zui_Handle.global.nest(28,{selected:!1}),"Timeline")}}if(this.ui.tab(l,"Assets"))if(this.ui.button("Import Asset")&&(this.showFiles=!0,this.foldersOnly=!1,this.filesDone=function(e){e=StringTools.rtrim(e),e=Elements.toRelative(e,Main.cwd),o.importAsset(e)}),0<this.canvas.assets.length){this.ui.text("(Drag and drop assets to canvas)",1);for(var K=this.canvas.assets.length-1;0<=K;){var X=this.canvas.assets[K];StringTools.endsWith(X.name,".ttf")||1!=this.ui.image(this.getImage(X))||(this.dragAsset=X),this.ui.row([.875,.125]),X.name=this.ui.textInput(zui_Handle.global.nest(29,null).nest(X.id,{text:X.name}),"",2),this.assetNames[K+1]=X.name,this.ui.button("X")&&(this.getImage(X).unload(),this.canvas.assets.splice(K,1),this.assetNames.splice(K+1,1)),--K}}else this.ui.text("(Drag and drop images and fonts here)",1);if(this.ui.tab(l,"Preferences")){var Y=zui_Handle.global.nest(30,{value:1});this.ui.slider(Y,"UI Scale",.5,4,!0);var Z=zui_Handle.global.nest(31,{value:20});this.ui.slider(Z,"Grid Size",1,128,!0,1),this.gridSnapPos=this.ui.check(zui_Handle.global.nest(32,{selected:!0}),"Grid Snap Position"),this.gridSnapBounds=this.ui.check(zui_Handle.global.nest(33,{selected:!1}),"Grid Snap Bounds"),this.ui.changed&&!this.ui.inputDown&&(this.gridSize=0|Z.value,this.ui.setScale(Y.value),Elements.windowW=Elements.defaultWindowW*Y.value|0);var Q=this.ui,q=zui_Handle.global.nest(34,{selected:!0});Main.prefs.window_vsync=Q.check(q,"VSync");this.ui.panel(zui_Handle.global.nest(35,{selected:!0}),"Console")}}if(this.ui.end(),this.ui.changed&&!this.ui.inputDown&&this.drawGrid(),a.begin(!1),null!=this.dragAsset){var J=Math.min(128,this.getImage(this.dragAsset).get_width()),ee=J/this.getImage(this.dragAsset).get_width(),te=this.getImage(this.dragAsset).get_height()*ee;a.drawScaledImage(this.getImage(this.dragAsset),this.ui.inputX,this.ui.inputY,J,te)}a.end(),0<this.lastW&&(this.lastW!=kha_System.windowWidth()||this.lastH!=kha_System.windowHeight())?this.resize():0<this.lastCanvasW&&(this.lastCanvasW!=this.canvas.width||this.lastCanvasH!=this.canvas.height)&&this.resize(),this.lastW=kha_System.windowWidth(),this.lastH=kha_System.windowHeight(),this.lastCanvasW=this.canvas.width,this.lastCanvasH=this.canvas.height,this.showFiles&&this.renderFiles(a)},elemById:function(e){for(var t=0,a=this.canvas.elements;t<a.length;){var r=a[t];if(++t,r.id==e)return r}return null},moveElem:function(e){for(var t=this.canvas.elements,a=t.indexOf(this.selectedElem),r=this.selectedElem.parent;!((a+=e)<0||a>=t.length);)if(t[a].parent==r){HxOverrides.remove(t,this.selectedElem),t.splice(a,0,this.selectedElem);break}},getImage:function(e){return zui_Canvas.assetMap.h[e.id]},removeElem:function(e){if(null!=e.children)for(var t=0,a=e.children;t<a.length;){var r=a[t];++t,this.removeElem(this.elemById(r))}HxOverrides.remove(this.canvas.elements,e),null!=e.parent&&(HxOverrides.remove(this.elemById(e.parent).children,e.id),e.parent=null)},removeSelectedElem:function(){this.removeElem(this.selectedElem),this.selectedElem=null},acceptDrag:function(e){var t=this.makeElem(1);t.asset=this.assetNames[e+1],t.x=this.ui.inputX-this.canvas.x,t.y=this.ui.inputY-this.canvas.y,t.width=this.getImage(this.canvas.assets[e]).get_width(),t.height=this.getImage(this.canvas.assets[e]).get_height(),this.selectedElem=t},hitbox:function(e,t,a,r){return this.ui.inputX>e&&this.ui.inputX<e+a&&this.ui.inputY>t&&this.ui.inputY<t+r},update:function(){if(this.ui.inputReleased&&null!=this.dragAsset){if(this.ui.inputX<kha_System.windowWidth()-Elements.get_uiw()){for(var e=0,t=0,a=this.canvas.assets.length;t<a;){var r=t++;if(this.canvas.assets[r]==this.dragAsset){e=r;break}}this.acceptDrag(e)}this.dragAsset=null}if(null==this.dragAsset){if(this.updateCanvas(),null!=Elements.timeline){var i=kha_System.windowHeight()-Elements.timeline.get_height();this.ui.inputDown&&this.ui.inputY>i&&this.ui.inputX<kha_System.windowWidth()-Elements.get_uiw()&&this.ui.inputX>this.get_toolbarw()&&(this.selectedFrame=(this.ui.inputX-this.get_toolbarw())/11/this.ui.SCALE|0)}if(null!=this.selectedElem){var s=this.selectedElem,n=this.absx(s)*this.cui.SCALE|0,o=this.absy(s)*this.cui.SCALE|0,h=s.width*this.cui.SCALE|0,_=s.height*this.cui.SCALE|0;this.ui.inputStarted&&this.ui.inputDown&&this.hitbox(this.canvas.x+n-4,this.canvas.y+o-4,h+4,_+4)&&(this.drag=!0,this.dragLeft=this.dragRight=this.dragTop=this.dragBottom=!1,this.ui.inputX>this.canvas.x+n+h-4?this.dragRight=!0:this.ui.inputX<this.canvas.x+n+4&&(this.dragLeft=!0),this.ui.inputY>this.canvas.y+o+_-4?this.dragBottom=!0:this.ui.inputY<this.canvas.y+o+4&&(this.dragTop=!0)),this.ui.inputReleased&&this.drag&&(this.drag=!1,this.gridSnapBounds&&(s.width=Math.round(s.width/this.gridSize)*this.gridSize,s.height=Math.round(s.height/this.gridSize)*this.gridSize),this.gridSnapPos&&(s.x=Math.round(s.x/this.gridSize)*this.gridSize,s.y=Math.round(s.y/this.gridSize)*this.gridSize)),this.drag&&(this.hwin.redraws=2,this.dragRight?s.width+=0|this.ui.inputDX:this.dragLeft&&(s.x+=0|this.ui.inputDX,s.width-=0|this.ui.inputDX),this.dragBottom?s.height+=0|this.ui.inputDY:this.dragTop&&(s.y+=0|this.ui.inputDY,s.height-=0|this.ui.inputDY),1!=s.type&&(s.width<1&&(s.width=1),s.height<1&&(s.height=1)),this.dragLeft||this.dragRight||this.dragBottom||this.dragTop||(s.x+=this.ui.inputDX,s.y+=this.ui.inputDY)),this.ui.isKeyDown&&!this.ui.isTyping&&(37==this.ui.key&&(this.gridSnapPos?s.x-=this.gridSize:s.x--),39==this.ui.key&&(this.gridSnapPos?s.x+=this.gridSize:s.x++),38==this.ui.key&&(this.gridSnapPos?s.y-=this.gridSize:s.y--),40==this.ui.key&&(this.gridSnapPos?s.y+=this.gridSize:s.y++),8!=this.ui.key&&"x"!=this.ui.char&&46!=this.ui.key||this.removeSelectedElem(),68==this.ui.key&&(this.selectedElem=this.duplicateElem(s)),this.hwin.redraws=2)}this.updateFiles()}},updateCanvas:function(){if(!(this.showFiles||this.ui.inputX>kha_System.windowWidth()-Elements.get_uiw())){if(this.ui.inputStarted&&this.ui.inputDownR){this.canvas.elements.length;for(var e=0,t=this.canvas.elements;e<t.length;){var a=t[e];++e;var r=this.absx(a)*this.cui.SCALE|0,i=this.absy(a)*this.cui.SCALE|0,s=a.width*this.cui.SCALE|0,n=a.height*this.cui.SCALE|0;if(this.hitbox(this.canvas.x+r,this.canvas.y+i,s,n)&&this.selectedElem!=a){this.selectedElem=a;break}}}this.ui.inputDownR&&(Elements.coffX+=0|this.ui.inputDX,Elements.coffY+=0|this.ui.inputDY),0!=this.ui.inputWheelDelta&&(this.zoom+=-this.ui.inputWheelDelta/10,this.zoom<.4?this.zoom=.4:1<this.zoom&&(this.zoom=1),this.zoom=Math.round(10*this.zoom)/10,this.cui.SCALE=this.cui.ops.scaleFactor*this.zoom),this.ui.inputStarted&&this.hitbox(this.canvas.x+(this.canvas.width*this.cui.SCALE|0)-3,this.canvas.y+(this.canvas.height*this.cui.SCALE|0)-3,6,6)&&(this.resizeCanvas=!0),this.ui.inputReleased&&this.resizeCanvas&&(this.resizeCanvas=!1),this.resizeCanvas&&(this.canvas.width+=0|this.ui.inputDX,this.canvas.height+=0|this.ui.inputDY,this.canvas.width<1&&(this.canvas.width=1),this.canvas.height<1&&(this.canvas.height=1))}},updateFiles:function(){if(this.showFiles&&this.ui.inputReleased){var e=kha_System.windowWidth(),t=kha_System.windowHeight(),a=e/2-Elements.modalRectW/2,r=e/2+Elements.modalRectW/2,i=t/2-Elements.modalRectH/2,s=t/2+Elements.modalRectH/2;(this.ui.inputX<a||this.ui.inputX>r||this.ui.inputY<i+Elements.modalHeaderH||this.ui.inputY>s)&&(this.showFiles=!1)}},renderFiles:function(e){var t=kha_System.windowWidth(),a=kha_System.windowHeight(),r=t/2-Elements.modalW/2,i=a/2-Elements.modalH/2;e.set_color(-14671840),e.fillRect(r,i,Elements.modalW,Elements.modalH);var s=t/2-Elements.modalRectW/2|0,n=t/2+Elements.modalRectW/2|0,o=a/2-Elements.modalRectH/2|0,h=a/2+Elements.modalRectH/2|0;if(o+=Elements.modalHeaderH,e.end(),this.uimodal.begin(e),this.uimodal.window(zui_Handle.global.nest(36,null),s,o,Elements.modalRectW,Elements.modalRectH-100)){var _=zui_Handle.global.nest(37,null);_.text=this.uimodal.textInput(_),Elements.path=zui_Ext.fileBrowser(this.uimodal,_,this.foldersOnly)}this.uimodal.end(!1),e.begin(!1),this.uimodal.beginLayout(e,n-100,h-30,100),this.uimodal.button("OK")&&(this.showFiles=!1,this.filesDone(Elements.path)),this.uimodal.endLayout(!1),this.uimodal.beginLayout(e,n-200,h-30,100),this.uimodal.button("Cancel")&&(this.showFiles=!1),this.uimodal.endLayout(),e.begin(!1)},absx:function(e){return null==e?0:e.x+this.absx(this.elemById(e.parent))},absy:function(e){return null==e?0:e.y+this.absy(this.elemById(e.parent))},scaled:function(e){return e*this.cui.SCALE|0},__class__:Elements};var HxOverrides=$hxClasses.HxOverrides=function(){};HxOverrides.__name__=!0,HxOverrides.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),a=new Date;return a.setTime(0),a.setUTCHours(t[0]),a.setUTCMinutes(t[1]),a.setUTCSeconds(t[2]),a;case 10:var r=e.split("-");return new Date(r[0],r[1]-1,r[2],0,0,0);case 19:var i=e.split(" "),s=i[0].split("-"),n=i[1].split(":");return new Date(s[0],s[1]-1,s[2],n[0],n[1],n[2]);default:throw new js__$Boot_HaxeError("Invalid date format : "+e)}},HxOverrides.cca=function(e,t){var a=e.charCodeAt(t);if(a==a)return a},HxOverrides.substr=function(e,t,a){if(null==a)a=e.length;else if(a<0){if(0!=t)return"";a=e.length+a}return e.substr(t,a)},HxOverrides.remove=function(e,t){var a=e.indexOf(t);return-1!=a&&(e.splice(a,1),!0)},HxOverrides.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Lambda=$hxClasses.Lambda=function(){};Lambda.__name__=!0,Lambda.array=function(e){for(var t=[],a=$getIterator(e);a.hasNext();){var r=a.next();t.push(r)}return t};var Main=$hxClasses.Main=function(){};Main.__name__=!0,Main.main=function(){var e=1600,t=900;e>kha_Display.get_primary().get_width()&&(e=kha_Display.get_primary().get_width()),t>kha_Display.get_primary().get_height()-30&&(t=kha_Display.get_primary().get_height()-30),kha_System.init({title:"Armory2D",width:e,height:t,resizable:!0,maximizable:!0},Main.initialized)},Main.initialized=function(){Main.prefs={path:"",scaleFactor:1};var e=Krom.getArgCount();if(4<e&&(Main.prefs.path=Krom.getArg(3)),5<e){var t=parseFloat(Krom.getArg(4));Main.prefs.scaleFactor=t}var a=Main.prefs.path.split("/");a.pop(),Main.cwd=a.join("/");var r="Windows"==kha_System.get_systemId()?StringTools.replace(Main.prefs.path,"/","\\"):Main.prefs.path;kha_Assets.loadBlobFromPath(r,function(e){var t=JSON.parse(e.toString());Main.inst=new Elements(t)},null,{fileName:"Main.hx",lineNumber:36,className:"Main",methodName:"initialized"})},Math.__name__=!0;var Reflect=$hxClasses.Reflect=function(){};Reflect.__name__=!0,Reflect.field=function(e,t){try{return e[t]}catch(e){e instanceof js__$Boot_HaxeError&&e.val;return null}},Reflect.fields=function(e){var t=[];if(null!=e){var a=Object.prototype.hasOwnProperty;for(var r in e)"__id__"!=r&&"hx__closures__"!=r&&a.call(e,r)&&t.push(r)}return t},Reflect.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},Reflect.copy=function(e){for(var t={},a=0,r=Reflect.fields(e);a<r.length;){var i=r[a];++a,t[i]=Reflect.field(e,i)}return t};var Std=$hxClasses.Std=function(){};Std.__name__=!0,Std.string=function(e){return js_Boot.__string_rec(e,"")},Std.parseInt=function(e){var t=parseInt(e,!e||"0"!=e[0]||"x"!=e[1]&&"X"!=e[1]?10:16);return isNaN(t)?null:t};var StringTools=$hxClasses.StringTools=function(){};StringTools.__name__=!0,StringTools.endsWith=function(e,t){var a=t.length,r=e.length;return a<=r&&HxOverrides.substr(e,r-a,a)==t},StringTools.isSpace=function(e,t){var a=HxOverrides.cca(e,t);return 8<a&&a<14||32==a},StringTools.rtrim=function(e){for(var t=e.length,a=0;a<t&&StringTools.isSpace(e,t-a-1);)++a;return 0<a?HxOverrides.substr(e,0,t-a):e},StringTools.replace=function(e,t,a){return e.split(t).join(a)};var Type=$hxClasses.Type=function(){};Type.__name__=!0,Type.createEnum=function(e,t,a){var r=Reflect.field(e,t);if(null==r)throw new js__$Boot_HaxeError("No such constructor "+t);if(Reflect.isFunction(r)){if(null==a)throw new js__$Boot_HaxeError("Constructor "+t+" need parameters");return r.apply(e,a)}if(null!=a&&0!=a.length)throw new js__$Boot_HaxeError("Constructor "+t+" does not need parameters");return r},Type.getInstanceFields=function(e){var t=[];for(var a in e.prototype)t.push(a);return HxOverrides.remove(t,"__class__"),HxOverrides.remove(t,"__properties__"),t};var _$UInt_UInt_$Impl_$=$hxClasses["_UInt.UInt_Impl_"]={};_$UInt_UInt_$Impl_$.__name__=!0,_$UInt_UInt_$Impl_$.gt=function(e,t){var a=e<0;return a!=t<0?a:t<e},_$UInt_UInt_$Impl_$.gte=function(e,t){var a=e<0;return a!=t<0?a:t<=e},_$UInt_UInt_$Impl_$.toFloat=function(e){return e<0?4294967296+e:e+0};var haxe_IMap=$hxClasses["haxe.IMap"]=function(){};haxe_IMap.__name__=!0;var haxe_Log=$hxClasses["haxe.Log"]=function(){};haxe_Log.__name__=!0,haxe_Log.formatOutput=function(e,t){var a=Std.string(e);if(null==t)return a;var r=t.fileName+":"+t.lineNumber;if(null!=t&&null!=t.customParams)for(var i=0,s=t.customParams;i<s.length;){var n=s[i];++i,a+=", "+Std.string(n)}return r+": "+a},haxe_Log.trace=function(e,t){var a=haxe_Log.formatOutput(e,t);"undefined"!=typeof console&&null!=console.log&&console.log(a)};var haxe__$Unserializer_DefaultResolver=$hxClasses["haxe._Unserializer.DefaultResolver"]=function(){};haxe__$Unserializer_DefaultResolver.__name__=!0,haxe__$Unserializer_DefaultResolver.prototype={resolveClass:function(e){return $hxClasses[e]},resolveEnum:function(e){return $hxEnums[e]},__class__:haxe__$Unserializer_DefaultResolver};var haxe_Unserializer=$hxClasses["haxe.Unserializer"]=function(e){this.buf=e,this.length=e.length,this.pos=0,this.scache=[],this.cache=[];var t=haxe_Unserializer.DEFAULT_RESOLVER;null==t&&(t=new haxe__$Unserializer_DefaultResolver,haxe_Unserializer.DEFAULT_RESOLVER=t),this.resolver=t};haxe_Unserializer.__name__=!0,haxe_Unserializer.initCodes=function(){for(var e=[],t=0,a=haxe_Unserializer.BASE64.length;t<a;){var r=t++;e[haxe_Unserializer.BASE64.charCodeAt(r)]=r}return e},haxe_Unserializer.run=function(e){return new haxe_Unserializer(e).unserialize()},haxe_Unserializer.prototype={buf:null,pos:null,length:null,cache:null,scache:null,resolver:null,readDigits:function(){for(var e=0,t=!1,a=this.pos;;){var r=this.buf.charCodeAt(this.pos);if(r!=r)break;if(45!=r){if(r<48||57<r)break;e=10*e+(r-48),this.pos++}else{if(this.pos!=a)break;t=!0,this.pos++}}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(t!=t)break;if(!(43<=t&&t<58||101==t||69==t))break;this.pos++}return parseFloat(HxOverrides.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw new js__$Boot_HaxeError("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw new js__$Boot_HaxeError("Invalid object key");var a=this.unserialize();e[t]=a}this.pos++},unserializeEnum:function(e,t){if(58!=this.buf.charCodeAt(this.pos++))throw new js__$Boot_HaxeError("Invalid enum format");var a=this.readDigits();if(0==a)return Type.createEnum(e,t);for(var r=[];0<a--;)r.push(this.unserialize());return Type.createEnum(e,t,r)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize(),t=this.resolver.resolveClass(e);if(null==t)throw new js__$Boot_HaxeError("Class not found "+e);return t;case 66:var a=this.unserialize(),r=this.resolver.resolveEnum(a);if(null==r)throw new js__$Boot_HaxeError("Enum not found "+a);return r;case 67:var i=this.unserialize(),s=this.resolver.resolveClass(i);if(null==s)throw new js__$Boot_HaxeError("Class not found "+i);var n=Object.create(s.prototype);if(this.cache.push(n),n.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw new js__$Boot_HaxeError("Invalid custom data");return n;case 77:var o=new haxe_ds_ObjectMap;this.cache.push(o);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var h=this.unserialize();o.set(h,this.unserialize())}return this.pos++,o;case 82:var _=this.readDigits();if(_<0||_>=this.scache.length)throw new js__$Boot_HaxeError("Invalid string reference");return this.scache[_];case 97:this.buf;var l=[];for(this.cache.push(l);;){var u=this.buf.charCodeAt(this.pos);if(104==u){this.pos++;break}if(117==u){this.pos++;var d=this.readDigits();l[l.length+d-1]=null}else l.push(this.unserialize())}return l;case 98:var c=new haxe_ds_StringMap;this.cache.push(c);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var g=this.unserialize(),p=this.unserialize();null!=__map_reserved[g]?c.setReserved(g,p):c.h[g]=p}return this.pos++,c;case 99:var f=this.unserialize(),m=this.resolver.resolveClass(f);if(null==m)throw new js__$Boot_HaxeError("Class not found "+f);var k=Object.create(m.prototype);return this.cache.push(k),this.unserializeObject(k),k;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:var v=this.unserialize(),S=this.resolver.resolveEnum(v);if(null==S)throw new js__$Boot_HaxeError("Enum not found "+v);this.pos++;var b=this.readDigits(),y=S.__constructs__.slice()[b];if(null==y)throw new js__$Boot_HaxeError("Unknown enum index "+v+"@"+b);var x=this.unserializeEnum(S,y);return this.cache.push(x),x;case 107:return NaN;case 108:var w=new haxe_ds_List;this.cache.push(w);for(this.buf;104!=this.buf.charCodeAt(this.pos);)w.add(this.unserialize());return this.pos++,w;case 109:return-1/0;case 110:return null;case 111:var I={};return this.cache.push(I),this.unserializeObject(I),I;case 112:return 1/0;case 113:var T=new haxe_ds_IntMap;this.cache.push(T);this.buf;for(var C=this.buf.charCodeAt(this.pos++);58==C;){var E=this.readDigits(),B=this.unserialize();T.h[E]=B,C=this.buf.charCodeAt(this.pos++)}if(104!=C)throw new js__$Boot_HaxeError("Invalid IntMap format");return T;case 114:var P=this.readDigits();if(P<0||P>=this.cache.length)throw new js__$Boot_HaxeError("Invalid reference");return this.cache[P];case 115:var A=this.readDigits(),L=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<A)throw new js__$Boot_HaxeError("Invalid bytes length");var $=haxe_Unserializer.CODES;null==$&&($=haxe_Unserializer.initCodes(),haxe_Unserializer.CODES=$);for(var N=this.pos,R=3&A,V=N+(A-R),M=new haxe_io_Bytes(new ArrayBuffer(3*(A>>2)+(2<=R?R-1:0))),F=0;N<V;){var H=$[L.charCodeAt(N++)],O=$[L.charCodeAt(N++)];M.b[F++]=H<<2|O>>4;var U=$[L.charCodeAt(N++)];M.b[F++]=O<<4|U>>2;var D=$[L.charCodeAt(N++)];M.b[F++]=U<<6|D}if(2<=R){var z=$[L.charCodeAt(N++)],W=$[L.charCodeAt(N++)];if(M.b[F++]=z<<2|W>>4,3==R){var G=$[L.charCodeAt(N++)];M.b[F++]=W<<4|G>>2}}return this.pos+=A,this.cache.push(M),M;case 116:return!0;case 118:var j;return 48<=this.buf.charCodeAt(this.pos)&&this.buf.charCodeAt(this.pos)<=57&&48<=this.buf.charCodeAt(this.pos+1)&&this.buf.charCodeAt(this.pos+1)<=57&&48<=this.buf.charCodeAt(this.pos+2)&&this.buf.charCodeAt(this.pos+2)<=57&&48<=this.buf.charCodeAt(this.pos+3)&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(j=HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19)),this.pos+=19):j=new Date(this.readFloat()),this.cache.push(j),j;case 119:var K=this.unserialize(),X=this.resolver.resolveEnum(K);if(null==X)throw new js__$Boot_HaxeError("Enum not found "+K);var Y=this.unserializeEnum(X,this.unserialize());return this.cache.push(Y),Y;case 120:throw js__$Boot_HaxeError.wrap(this.unserialize());case 121:var Z=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<Z)throw new js__$Boot_HaxeError("Invalid string length");var Q=HxOverrides.substr(this.buf,this.pos,Z);return this.pos+=Z,Q=decodeURIComponent(Q.split("+").join(" ")),this.scache.push(Q),Q;case 122:return 0}throw this.pos--,new js__$Boot_HaxeError("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:haxe_Unserializer};var haxe_ds_IntMap=$hxClasses["haxe.ds.IntMap"]=function(){this.h={}};haxe_ds_IntMap.__name__=!0,haxe_ds_IntMap.__interfaces__=[haxe_IMap],haxe_ds_IntMap.prototype={h:null,keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return HxOverrides.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},__class__:haxe_ds_IntMap};var haxe_ds_List=$hxClasses["haxe.ds.List"]=function(){this.length=0};haxe_ds_List.__name__=!0,haxe_ds_List.prototype={h:null,q:null,length:null,add:function(e){var t=new haxe_ds__$List_ListNode(e,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++},__class__:haxe_ds_List};var haxe_ds__$List_ListNode=$hxClasses["haxe.ds._List.ListNode"]=function(e,t){this.item=e,this.next=t};haxe_ds__$List_ListNode.__name__=!0,haxe_ds__$List_ListNode.prototype={item:null,next:null,__class__:haxe_ds__$List_ListNode};var haxe_ds_ObjectMap=$hxClasses["haxe.ds.ObjectMap"]=function(){this.h={__keys__:{}}};haxe_ds_ObjectMap.__name__=!0,haxe_ds_ObjectMap.__interfaces__=[haxe_IMap],haxe_ds_ObjectMap.prototype={h:null,set:function(e,t){var a=e.__id__||(e.__id__=++haxe_ds_ObjectMap.count);this.h[a]=t,this.h.__keys__[a]=e},__class__:haxe_ds_ObjectMap};var haxe_ds_StringMap=$hxClasses["haxe.ds.StringMap"]=function(){this.h={}};haxe_ds_StringMap.__name__=!0,haxe_ds_StringMap.__interfaces__=[haxe_IMap],haxe_ds_StringMap.prototype={h:null,rh:null,setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},existsReserved:function(e){return null!=this.rh&&this.rh.hasOwnProperty("$"+e)},__class__:haxe_ds_StringMap};var haxe_io_Bytes=$hxClasses["haxe.io.Bytes"]=function(e){this.length=e.byteLength,this.b=new Uint8Array(e),(this.b.bufferValue=e).hxBytes=this,e.bytes=this.b};haxe_io_Bytes.__name__=!0,haxe_io_Bytes.ofString=function(e,t){if(t==haxe_io_Encoding.RawNative){for(var a=new Uint8Array(e.length<<1),r=0,i=e.length;r<i;){var s=r++,n=e.charCodeAt(s);a[s<<1]=255&n,a[s<<1|1]=n>>8}return new haxe_io_Bytes(a.buffer)}for(var o=[],h=0;h<e.length;){var _=e.charCodeAt(h++);55296<=_&&_<=56319&&(_=_-55232<<10|1023&e.charCodeAt(h++)),_<=127?o.push(_):(_<=2047?o.push(192|_>>6):(_<=65535?o.push(224|_>>12):(o.push(240|_>>18),o.push(128|_>>12&63)),o.push(128|_>>6&63)),o.push(128|63&_))}return new haxe_io_Bytes(new Uint8Array(o).buffer)},haxe_io_Bytes.ofData=function(e){var t=e.hxBytes;return null!=t?t:new haxe_io_Bytes(e)},haxe_io_Bytes.prototype={length:null,b:null,data:null,blit:function(e,t,a,r){if(e<0||a<0||r<0||e+r>this.length||a+r>t.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);0==a&&r==t.b.byteLength?this.b.set(t.b,e):this.b.set(t.b.subarray(a,a+r),e)},sub:function(e,t){if(e<0||t<0||e+t>this.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);return new haxe_io_Bytes(this.b.buffer.slice(e+this.b.byteOffset,e+this.b.byteOffset+t))},getDouble:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat64(e,!0)},getFloat:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat32(e,!0)},setDouble:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat64(e,t,!0)},setFloat:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat32(e,t,!0)},getUInt16:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getUint16(e,!0)},getInt32:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getInt32(e,!0)},setInt32:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(e,t,!0)},getString:function(e,t,a){if(e<0||t<0||e+t>this.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);null==a&&(a=haxe_io_Encoding.UTF8);var r="",i=this.b,s=e,n=e+t;switch(a._hx_index){case 0:for(;s<n;){var o=i[s++];if(o<128){if(0==o)break;r+=String.fromCodePoint(o)}else if(o<224){var h=(63&o)<<6|127&i[s++];r+=String.fromCodePoint(h)}else if(o<240){var _=(31&o)<<12|(127&i[s++])<<6|127&i[s++];r+=String.fromCodePoint(_)}else{var l=(15&o)<<18|(127&i[s++])<<12|(127&i[s++])<<6|127&i[s++];r+=String.fromCodePoint(l)}}break;case 1:for(;s<n;){var u=i[s++]|i[s++]<<8;r+=String.fromCodePoint(u)}}return r},toString:function(){return this.getString(0,this.length)},__class__:haxe_io_Bytes};var haxe_io_BytesBuffer=$hxClasses["haxe.io.BytesBuffer"]=function(){this.pos=0,this.size=0};haxe_io_BytesBuffer.__name__=!0,haxe_io_BytesBuffer.prototype={buffer:null,view:null,u8:null,pos:null,size:null,addByte:function(e){this.pos==this.size&&this.grow(1),this.view.setUint8(this.pos++,e)},addBytes:function(e,t,a){if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);if(this.pos+a>this.size&&this.grow(a),0!=this.size){var r=new Uint8Array(e.b.buffer,e.b.byteOffset+t,a);this.u8.set(r,this.pos),this.pos+=a}},grow:function(e){for(var t=this.pos+e,a=0==this.size?16:this.size;a<t;)a=3*a>>1;var r=new ArrayBuffer(a),i=new Uint8Array(r);0<this.size&&i.set(this.u8),this.size=a,this.buffer=r,this.u8=i,this.view=new DataView(this.buffer)},getBytes:function(){if(0==this.size)return new haxe_io_Bytes(new ArrayBuffer(0));var e=new haxe_io_Bytes(this.buffer);return e.length=this.pos,e},__class__:haxe_io_BytesBuffer};var haxe_io_Input=$hxClasses["haxe.io.Input"]=function(){};haxe_io_Input.__name__=!0,haxe_io_Input.prototype={bigEndian:null,readByte:function(){throw new js__$Boot_HaxeError("Not implemented")},readBytes:function(e,t,a){var r=a,i=e.b;if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);try{for(;0<r;)i[t]=this.readByte(),++t,--r}catch(e){var s=e instanceof js__$Boot_HaxeError?e.val:e;if(!(s instanceof haxe_io_Eof))throw e}return a-r},readFullBytes:function(e,t,a){for(;0<a;){var r=this.readBytes(e,t,a);if(0==r)throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);t+=r,a-=r}},read:function(e){for(var t=new haxe_io_Bytes(new ArrayBuffer(e)),a=0;0<e;){var r=this.readBytes(t,a,e);if(0==r)throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);a+=r,e-=r}return t},readInt32:function(){var e=this.readByte(),t=this.readByte(),a=this.readByte(),r=this.readByte();return this.bigEndian?r|a<<8|t<<16|e<<24:e|t<<8|a<<16|r<<24},readString:function(e,t){var a=new haxe_io_Bytes(new ArrayBuffer(e));return this.readFullBytes(a,0,e),a.getString(0,e,t)},__class__:haxe_io_Input};var haxe_io_BytesInput=$hxClasses["haxe.io.BytesInput"]=function(e,t,a){if(null==t&&(t=0),null==a&&(a=e.length-t),t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);this.b=e.b,this.pos=t,this.len=a,this.totlen=a};haxe_io_BytesInput.__name__=!0,haxe_io_BytesInput.__super__=haxe_io_Input,haxe_io_BytesInput.prototype=$extend(haxe_io_Input.prototype,{b:null,pos:null,len:null,totlen:null,set_position:function(e){return e<0?e=0:e>this.totlen&&(e=this.totlen),this.len=this.totlen-e,this.pos=e},readByte:function(){if(0==this.len)throw new js__$Boot_HaxeError(new haxe_io_Eof);return this.len--,this.b[this.pos++]},readBytes:function(e,t,a){if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);if(0==this.len&&0<a)throw new js__$Boot_HaxeError(new haxe_io_Eof);this.len<a&&(a=this.len);for(var r=this.b,i=e.b,s=0,n=a;s<n;){var o=s++;i[t+o]=r[this.pos+o]}return this.pos+=a,this.len-=a,a},__class__:haxe_io_BytesInput});var haxe_io_Output=$hxClasses["haxe.io.Output"]=function(){};haxe_io_Output.__name__=!0,haxe_io_Output.prototype={bigEndian:null,writeByte:function(e){throw new js__$Boot_HaxeError("Not implemented")},writeBytes:function(e,t,a){if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);for(var r=e.b,i=a;0<i;)this.writeByte(r[t]),++t,--i;return a},write:function(e){for(var t=e.length,a=0;0<t;){var r=this.writeBytes(e,a,t);if(0==r)throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);a+=r,t-=r}},writeFloat:function(e){this.writeInt32(haxe_io_FPHelper.floatToI32(e))},writeInt32:function(e){this.bigEndian?(this.writeByte(e>>>24),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8&255),this.writeByte(e>>16&255),this.writeByte(e>>>24))},__class__:haxe_io_Output};var haxe_io_BytesOutput=$hxClasses["haxe.io.BytesOutput"]=function(){this.b=new haxe_io_BytesBuffer};haxe_io_BytesOutput.__name__=!0,haxe_io_BytesOutput.__super__=haxe_io_Output,haxe_io_BytesOutput.prototype=$extend(haxe_io_Output.prototype,{b:null,writeByte:function(e){this.b.addByte(e)},writeBytes:function(e,t,a){return this.b.addBytes(e,t,a),a},getBytes:function(){return this.b.getBytes()},__class__:haxe_io_BytesOutput});var haxe_io_Encoding=$hxEnums["haxe.io.Encoding"]={__ename__:!0,__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}},haxe_io_Eof=$hxClasses["haxe.io.Eof"]=function(){};haxe_io_Eof.__name__=!0,haxe_io_Eof.prototype={toString:function(){return"Eof"},__class__:haxe_io_Eof};var haxe_io_Error=$hxEnums["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:$estr},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:$estr},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:$estr},Custom:($_=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}},$_.__params__=["e"],$_)},haxe_io_FPHelper=$hxClasses["haxe.io.FPHelper"]=function(){};haxe_io_FPHelper.__name__=!0,haxe_io_FPHelper.floatToI32=function(e){return haxe_io_FPHelper.helper.setFloat32(0,e,!0),haxe_io_FPHelper.helper.getInt32(0,!0)};var haxe_io_Path=$hxClasses["haxe.io.Path"]=function(){};haxe_io_Path.__name__=!0,haxe_io_Path.normalize=function(e){if("/"==(e=e.split("\\").join("/")))return"/";for(var t=[],a=0,r=e.split("/");a<r.length;){var i=r[a];++a,".."==i&&0<t.length&&".."!=t[t.length-1]?t.pop():"."!=i&&t.push(i)}for(var s=t.join("/"),n="",o=!1,h=!1,_=0,l=s.length;_<l;){var u=_++,d=s.charCodeAt(u);switch(d){case 47:if(o){var c=d;o=!1,h&&(n+="/",h=!1),n+=String.fromCodePoint(c)}else h=!0;break;case 58:n+=":",o=!0;break;default:var g=d;o=!1,h&&(n+="/",h=!1),n+=String.fromCodePoint(g)}}return n};var js__$Boot_HaxeError=$hxClasses["js._Boot.HaxeError"]=function(e){Error.call(this),this.val=e,Error.captureStackTrace&&Error.captureStackTrace(this,js__$Boot_HaxeError)};js__$Boot_HaxeError.__name__=!0,js__$Boot_HaxeError.wrap=function(e){return e instanceof Error?e:new js__$Boot_HaxeError(e)},js__$Boot_HaxeError.__super__=Error,js__$Boot_HaxeError.prototype=$extend(Error.prototype,{val:null,__class__:js__$Boot_HaxeError});var js_Boot=$hxClasses["js.Boot"]=function(){};js_Boot.__name__=!0,js_Boot.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var a=js_Boot.__nativeClassName(e);return null!=a?js_Boot.__resolveNativeClass(a):null},js_Boot.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var a=typeof e;switch("function"==a&&(e.__name__||e.__ename__)&&(a="object"),a){case"function":return"<function>";case"object":if(e.__enum__){var r=$hxEnums[e.__enum__],i=r.__constructs__[e._hx_index],s=r[i];if(s.__params__){t+="\t";for(var n=i+"(",o=[],h=0,_=s.__params__;h<_.length;){var l=_[h];++h,o.push(js_Boot.__string_rec(e[l],t))}return n+o.join(",")+")"}return i}if(e instanceof Array){var u="[";t+="\t";for(var d=0,c=e.length;d<c;){var g=d++;u+=(0<g?",":"")+js_Boot.__string_rec(e[g],t)}return u+="]"}var p;try{p=e.toString}catch(e){e instanceof js__$Boot_HaxeError&&e.val;return"???"}if(null!=p&&p!=Object.toString&&"function"==typeof p){var f=e.toString();if("[object Object]"!=f)return f}var m=null,k="{\n";t+="\t";var v=null!=e.hasOwnProperty;for(var m in e)v&&!e.hasOwnProperty(m)||"prototype"!=m&&"__class__"!=m&&"__super__"!=m&&"__interfaces__"!=m&&"__properties__"!=m&&(2!=k.length&&(k+=", \n"),k+=t+m+" : "+js_Boot.__string_rec(e[m],t));return k+="\n"+(t=t.substring(1))+"}";case"string":return e;default:return String(e)}},js_Boot.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var a=e.__interfaces__;if(null!=a)for(var r=0,i=a.length;r<i;){var s=a[r++];if(s==t||js_Boot.__interfLoop(s,t))return!0}return js_Boot.__interfLoop(e.__super__,t)},js_Boot.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array&&null==e.__enum__;case Bool:return"boolean"==typeof e;case Dynamic:return!0;case Float:return"number"==typeof e;case Int:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(js_Boot.__interfLoop(js_Boot.getClass(e),t))return!0}else if("object"==typeof t&&js_Boot.__isNativeObj(t)&&e instanceof t)return!0;return t==Class&&null!=e.__name__||(t==Enum&&null!=e.__ename__||$hxEnums[e.__enum__]==t)}},js_Boot.__cast=function(e,t){if(js_Boot.__instanceof(e,t))return e;throw new js__$Boot_HaxeError("Cannot cast "+Std.string(e)+" to "+Std.string(t))},js_Boot.__nativeClassName=function(e){var t=js_Boot.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},js_Boot.__isNativeObj=function(e){return null!=js_Boot.__nativeClassName(e)},js_Boot.__resolveNativeClass=function(e){return $global[e]};var js_html__$ArrayBuffer_ArrayBufferCompat=$hxClasses["js.html._ArrayBuffer.ArrayBufferCompat"]=function(){};js_html__$ArrayBuffer_ArrayBufferCompat.__name__=!0,js_html__$ArrayBuffer_ArrayBufferCompat.sliceImpl=function(e,t){var a=new Uint8Array(this,e,null==t?null:t-e),r=new Uint8Array(a.byteLength);return r.set(a),r.buffer};var kha__$Assets_ImageList=$hxClasses["kha._Assets.ImageList"]=function(){this.names=["color_wheel"],this.color_wheelDescription={name:"color_wheel",original_height:270,original_width:360,files:["color_wheel.png"],type:"image"},this.color_wheelName="color_wheel",this.color_wheel=null};kha__$Assets_ImageList.__name__=!0,kha__$Assets_ImageList.prototype={get:function(e){return Reflect.field(this,e)},color_wheel:null,color_wheelName:null,color_wheelDescription:null,color_wheelLoad:function(t,e){var a;if(null!=e)a=e;else{var r=haxe_Log.trace,i={fileName:"kha/internal/AssetsBuilder.hx",lineNumber:130,className:"kha._Assets.ImageList",methodName:"color_wheelLoad"};a=function(e){r(e,i)}}kha_Assets.loadImage("color_wheel",function(e){t()},a,{fileName:"kha/internal/AssetsBuilder.hx",lineNumber:130,className:"kha._Assets.ImageList",methodName:"color_wheelLoad"})},color_wheelUnload:function(){this.color_wheel.unload(),this.color_wheel=null},names:null,__class__:kha__$Assets_ImageList};var kha__$Assets_SoundList=$hxClasses["kha._Assets.SoundList"]=function(){this.names=[]};kha__$Assets_SoundList.__name__=!0,kha__$Assets_SoundList.prototype={get:function(e){return Reflect.field(this,e)},names:null,__class__:kha__$Assets_SoundList};var kha__$Assets_BlobList=$hxClasses["kha._Assets.BlobList"]=function(){this.names=[]};kha__$Assets_BlobList.__name__=!0,kha__$Assets_BlobList.prototype={get:function(e){return Reflect.field(this,e)},names:null,__class__:kha__$Assets_BlobList};var kha__$Assets_FontList=$hxClasses["kha._Assets.FontList"]=function(){this.names=["font_default"],this.font_defaultDescription={name:"font_default",files:["font_default.ttf"],type:"font"},this.font_defaultName="font_default",this.font_default=null};kha__$Assets_FontList.__name__=!0,kha__$Assets_FontList.prototype={get:function(e){return Reflect.field(this,e)},font_default:null,font_defaultName:null,font_defaultDescription:null,font_defaultLoad:function(t,e){var a;if(null!=e)a=e;else{var r=haxe_Log.trace,i={fileName:"kha/internal/AssetsBuilder.hx",lineNumber:142,className:"kha._Assets.FontList",methodName:"font_defaultLoad"};a=function(e){r(e,i)}}kha_Assets.loadFont("font_default",function(e){t()},a,{fileName:"kha/internal/AssetsBuilder.hx",lineNumber:142,className:"kha._Assets.FontList",methodName:"font_defaultLoad"})},font_defaultUnload:function(){this.font_default.unload(),this.font_default=null},names:null,__class__:kha__$Assets_FontList};var kha__$Assets_VideoList=$hxClasses["kha._Assets.VideoList"]=function(){this.names=[]};kha__$Assets_VideoList.__name__=!0,kha__$Assets_VideoList.prototype={get:function(e){return Reflect.field(this,e)},names:null,__class__:kha__$Assets_VideoList};var kha_Assets=$hxClasses["kha.Assets"]=function(){};kha_Assets.__name__=!0,kha_Assets.loadEverything=function(e,t,a,r){for(var i=0,s=0,n=Type.getInstanceFields(kha__$Assets_BlobList);s<n.length;){var o=n[s];++s,StringTools.endsWith(o,"Load")&&(i+=1)}for(var h=0,_=Type.getInstanceFields(kha__$Assets_ImageList);h<_.length;){var l=_[h];++h,StringTools.endsWith(l,"Load")&&(i+=1)}for(var u=0,d=Type.getInstanceFields(kha__$Assets_SoundList);u<d.length;){var c=d[u];++u,StringTools.endsWith(c,"Load")&&(i+=1)}for(var g=0,p=Type.getInstanceFields(kha__$Assets_FontList);g<p.length;){var f=p[g];++g,StringTools.endsWith(f,"Load")&&(i+=1)}for(var m=0,k=Type.getInstanceFields(kha__$Assets_VideoList);m<k.length;){var v=k[m];++m,StringTools.endsWith(v,"Load")&&(i+=1)}if(0!=i){for(var S=i,b=function(){S-=1,kha_Assets.progress=1-S/i,0==S&&e()},y=0,x=Type.getInstanceFields(kha__$Assets_BlobList);y<x.length;){var w=x[y];if(++y,StringTools.endsWith(w,"Load")){var I=HxOverrides.substr(w,0,w.length-4),T=Reflect.field(kha_Assets.blobs,I+"Description");null==t||t(T)?Reflect.field(kha_Assets.blobs,w)(b,function(e){if(null==r)haxe_Log.trace;b()}):b()}}for(var C=0,E=Type.getInstanceFields(kha__$Assets_ImageList);C<E.length;){var B=E[C];if(++C,StringTools.endsWith(B,"Load")){var P=HxOverrides.substr(B,0,B.length-4),A=Reflect.field(kha_Assets.images,P+"Description");null==t||t(A)?Reflect.field(kha_Assets.images,B)(b,function(e){if(null==r)haxe_Log.trace;b()}):b()}}for(var L=0,$=Type.getInstanceFields(kha__$Assets_SoundList);L<$.length;){var N=[$[L]];if(++L,StringTools.endsWith(N[0],"Load")){var R=HxOverrides.substr(N[0],0,N[0].length-4),V=[Reflect.field(kha_Assets.sounds,R+"Description")];null==t||t(V[0])?Reflect.field(kha_Assets.sounds,N[0])(function(e,t){return function(){null==a||a(e[0])?Reflect.field(kha_Assets.sounds,t[0].substring(0,t[0].length-4)).uncompress(b):b()}}(V,N),null!=r?r:function(t,a){return function(e){a[0](e,t[0])}}([{fileName:"kha/Assets.hx",lineNumber:172,className:"kha.Assets",methodName:"loadEverything"}],[haxe_Log.trace])):b()}}for(var M=0,F=Type.getInstanceFields(kha__$Assets_FontList);M<F.length;){var H=F[M];if(++M,StringTools.endsWith(H,"Load")){var O=HxOverrides.substr(H,0,H.length-4),U=Reflect.field(kha_Assets.fonts,O+"Description");null==t||t(U)?Reflect.field(kha_Assets.fonts,H)(b,function(e){if(null==r)haxe_Log.trace;b()}):b()}}for(var D=0,z=Type.getInstanceFields(kha__$Assets_VideoList);D<z.length;){var W=z[D];if(++D,StringTools.endsWith(W,"Load")){var G=HxOverrides.substr(W,0,W.length-4),j=Reflect.field(kha_Assets.videos,G+"Description");null==t||t(j)?Reflect.field(kha_Assets.videos,W)(b,function(e){if(null==r)haxe_Log.trace;b()}):b()}}}else e()},kha_Assets.loadImage=function(t,a,e,r){var i,s=Reflect.field(kha_Assets.images,t+"Description");if(null!=e)i=e;else{var n=haxe_Log.trace,o=r;i=function(e){n(e,o)}}kha_LoaderImpl.loadImageFromDescription(s,function(e){kha_Assets.images[t]=e,a(e)},i)},kha_Assets.loadImageFromPath=function(e,t,a,r,i){var s,n={files:[e],readable:t};if(null!=r)s=r;else{var o=haxe_Log.trace,h=i;s=function(e){o(e,h)}}kha_LoaderImpl.loadImageFromDescription(n,a,s)},kha_Assets.get_imageFormats=function(){return kha_LoaderImpl.getImageFormats()},kha_Assets.loadBlob=function(t,a,e,r){var i,s=Reflect.field(kha_Assets.blobs,t+"Description");if(null!=e)i=e;else{var n=haxe_Log.trace,o=r;i=function(e){n(e,o)}}kha_LoaderImpl.loadBlobFromDescription(s,function(e){kha_Assets.blobs[t]=e,a(e)},i)},kha_Assets.loadBlobFromPath=function(e,t,a,r){var i,s={files:[e]};if(null!=a)i=a;else{var n=haxe_Log.trace,o=r;i=function(e){n(e,o)}}kha_LoaderImpl.loadBlobFromDescription(s,t,i)},kha_Assets.loadSound=function(t,a,e,r){var i,s=Reflect.field(kha_Assets.sounds,t+"Description");if(null!=e)i=e;else{var n=haxe_Log.trace,o=r;i=function(e){n(e,o)}}kha_LoaderImpl.loadSoundFromDescription(s,function(e){kha_Assets.sounds[t]=e,a(e)},i)},kha_Assets.loadSoundFromPath=function(e,t,a,r){var i,s={files:[e]};if(null!=a)i=a;else{var n=haxe_Log.trace,o=r;i=function(e){n(e,o)}}kha_LoaderImpl.loadSoundFromDescription(s,t,i)},kha_Assets.get_soundFormats=function(){return kha_LoaderImpl.getSoundFormats()},kha_Assets.loadFont=function(t,a,e,r){var i,s=Reflect.field(kha_Assets.fonts,t+"Description");if(null!=e)i=e;else{var n=haxe_Log.trace,o=r;i=function(e){n(e,o)}}kha_LoaderImpl.loadFontFromDescription(s,function(e){kha_Assets.fonts[t]=e,a(e)},i)},kha_Assets.loadFontFromPath=function(e,t,a,r){var i,s={files:[e]};if(null!=a)i=a;else{var n=haxe_Log.trace,o=r;i=function(e){n(e,o)}}kha_LoaderImpl.loadFontFromDescription(s,t,i)},kha_Assets.get_fontFormats=function(){return["ttf"]},kha_Assets.loadVideo=function(t,a,e,r){var i,s=Reflect.field(kha_Assets.videos,t+"Description");if(null!=e)i=e;else{var n=haxe_Log.trace,o=r;i=function(e){n(e,o)}}kha_LoaderImpl.loadVideoFromDescription(s,function(e){kha_Assets.videos[t]=e,a(e)},i)},kha_Assets.loadVideoFromPath=function(e,t,a,r){var i,s={files:[e]};if(null!=a)i=a;else{var n=haxe_Log.trace,o=r;i=function(e){n(e,o)}}kha_LoaderImpl.loadVideoFromDescription(s,t,i)},kha_Assets.get_videoFormats=function(){return kha_LoaderImpl.getVideoFormats()},kha_Assets.reporter=function(e,t){if(null!=e)return e;var a=haxe_Log.trace,r=t;return function(e){a(e,r)}};var kha_Canvas=$hxClasses["kha.Canvas"]=function(){};kha_Canvas.__name__=!0,kha_Canvas.prototype={get_g4:null,get_g2:null,get_g1:null,get_height:null,get_width:null,width:null,height:null,g1:null,g2:null,g4:null,__class__:kha_Canvas};var kha__$Color_Color_$Impl_$=$hxClasses["kha._Color.Color_Impl_"]=$hx_exports.kha._Color.Color_Impl_={};kha__$Color_Color_$Impl_$.__name__=!0,kha__$Color_Color_$Impl_$.fromValue=function(e){return kha__$Color_Color_$Impl_$._new(e)},kha__$Color_Color_$Impl_$.fromBytes=function(e,t,a,r){return null==r&&(r=255),kha__$Color_Color_$Impl_$._new(r<<24|e<<16|t<<8|a)},kha__$Color_Color_$Impl_$.fromFloats=function(e,t,a,r){return null==r&&(r=1),kha__$Color_Color_$Impl_$._new((255*r|0)<<24|(255*e|0)<<16|(255*t|0)<<8|255*a|0)},kha__$Color_Color_$Impl_$.fromString=function(e){if(7!=e.length&&9!=e.length||35!=e.charCodeAt(0))throw new js__$Boot_HaxeError("Invalid Color string: '"+e+"'");var t=Std.parseInt("0x"+HxOverrides.substr(e,1,null));return 7==e.length&&(t+=-16777216),kha__$Color_Color_$Impl_$._new(t)},kha__$Color_Color_$Impl_$._new=function(e){return e},kha__$Color_Color_$Impl_$.get_value=function(e){return e},kha__$Color_Color_$Impl_$.set_value=function(e,t){return t},kha__$Color_Color_$Impl_$.get_Rb=function(e){return(16711680&e)>>>16},kha__$Color_Color_$Impl_$.get_Gb=function(e){return(65280&e)>>>8},kha__$Color_Color_$Impl_$.get_Bb=function(e){return 255&e},kha__$Color_Color_$Impl_$.get_Ab=function(e){return e>>>24},kha__$Color_Color_$Impl_$.set_Rb=function(e,t){return e=e>>>24<<24|t<<16|(65280&e)>>>8<<8|255&e,t},kha__$Color_Color_$Impl_$.set_Gb=function(e,t){return e=e>>>24<<24|(16711680&e)>>>16<<16|t<<8|255&e,t},kha__$Color_Color_$Impl_$.set_Bb=function(e,t){return e=e>>>24<<24|(16711680&e)>>>16<<16|(65280&e)>>>8<<8|t,t},kha__$Color_Color_$Impl_$.set_Ab=function(e,t){return e=t<<24|(16711680&e)>>>16<<16|(65280&e)>>>8<<8|255&e,t},kha__$Color_Color_$Impl_$.get_R=function(e){return.00392156862745098*((16711680&e)>>>16)},kha__$Color_Color_$Impl_$.get_G=function(e){return.00392156862745098*((65280&e)>>>8)},kha__$Color_Color_$Impl_$.get_B=function(e){return.00392156862745098*(255&e)},kha__$Color_Color_$Impl_$.get_A=function(e){return.00392156862745098*(e>>>24)},kha__$Color_Color_$Impl_$.set_R=function(e,t){return e=(.00392156862745098*(e>>>24)*255|0)<<24|(255*t|0)<<16|(.00392156862745098*((65280&e)>>>8)*255|0)<<8|.00392156862745098*(255&e)*255|0,t},kha__$Color_Color_$Impl_$.set_G=function(e,t){return e=(.00392156862745098*(e>>>24)*255|0)<<24|(.00392156862745098*((16711680&e)>>>16)*255|0)<<16|(255*t|0)<<8|.00392156862745098*(255&e)*255|0,t},kha__$Color_Color_$Impl_$.set_B=function(e,t){return e=(.00392156862745098*(e>>>24)*255|0)<<24|(.00392156862745098*((16711680&e)>>>16)*255|0)<<16|(.00392156862745098*((65280&e)>>>8)*255|0)<<8|255*t|0,t},kha__$Color_Color_$Impl_$.set_A=function(e,t){return e=(255*t|0)<<24|(.00392156862745098*((16711680&e)>>>16)*255|0)<<16|(.00392156862745098*((65280&e)>>>8)*255|0)<<8|.00392156862745098*(255&e)*255|0,t};var kha_Display=$hxClasses["kha.Display"]=function(e,t){this.num=e,this.isPrimary=t};kha_Display.__name__=!0,kha_Display.init=function(){for(var e=0,t=Krom.displayCount();e<t;){var a=e++;kha_Display.displays.push(new kha_Display(a,Krom.displayIsPrimary(a)))}},kha_Display.get_primary=function(){kha_Display.init();for(var e=0,t=kha_Display.displays;e<t.length;){var a=t[e];if(++e,a.isPrimary)return a}return null},kha_Display.get_all=function(){return kha_Display.init(),kha_Display.displays},kha_Display.prototype={num:null,isPrimary:null,get_available:function(){return!0},get_name:function(){return"Display"},get_x:function(){return Krom.displayX(this.num)},get_y:function(){return Krom.displayY(this.num)},get_width:function(){return Krom.displayWidth(this.num)},get_height:function(){return Krom.displayHeight(this.num)},get_frequency:function(){return 60},get_pixelsPerInch:function(){return Krom.screenDpi()},get_modes:function(){return[]},__class__:kha_Display};var kha_DisplayMode=$hxClasses["kha.DisplayMode"]=function(e,t,a,r){this.width=e,this.height=t,this.frequency=a,this.bitsPerPixel=r};kha_DisplayMode.__name__=!0,kha_DisplayMode.prototype={width:null,height:null,frequency:null,bitsPerPixel:null,__class__:kha_DisplayMode};var kha_FontStyle=$hxClasses["kha.FontStyle"]=function(e,t,a){this.bold=e,this.italic=t,this.underlined=a};kha_FontStyle.__name__=!0,kha_FontStyle.prototype={bold:null,italic:null,underlined:null,getBold:function(){return this.bold},getItalic:function(){return this.italic},getUnderlined:function(){return this.underlined},__class__:kha_FontStyle};var kha_Framebuffer=$hxClasses["kha.Framebuffer"]=function(e,t,a,r,i){this.window=e,this.graphics1=t,this.graphics2=a,this.graphics4=r,this.graphics5=i};kha_Framebuffer.__name__=!0,kha_Framebuffer.__interfaces__=[kha_Canvas],kha_Framebuffer.prototype={window:null,graphics1:null,graphics2:null,graphics4:null,graphics5:null,init:function(e,t,a,r){this.graphics1=e,this.graphics2=t,this.graphics4=a,this.graphics5=r},get_g1:function(){return this.graphics1},get_g2:function(){return this.graphics2},get_g4:function(){return this.graphics4},get_g5:function(){return this.graphics5},width:null,get_width:function(){return kha_System.windowWidth(this.window)},height:null,get_height:function(){return kha_System.windowHeight(this.window)},__class__:kha_Framebuffer};var kha_FramebufferOptions=$hxClasses["kha.FramebufferOptions"]=function(e,t,a,r,i,s){null==s&&(s=1),null==i&&(i=8),null==r&&(r=16),null==a&&(a=32),null==t&&(t=!0),null==e&&(e=60),this.samplesPerPixel=1,this.stencilBufferBits=8,this.depthBufferBits=16,this.colorBufferBits=32,this.verticalSync=!0,this.frequency=60,this.frequency=e,this.verticalSync=t,this.colorBufferBits=a,this.depthBufferBits=r,this.stencilBufferBits=i,this.samplesPerPixel=s};kha_FramebufferOptions.__name__=!0,kha_FramebufferOptions.prototype={frequency:null,verticalSync:null,colorBufferBits:null,depthBufferBits:null,stencilBufferBits:null,samplesPerPixel:null,__class__:kha_FramebufferOptions};var kha_Resource=$hxClasses["kha.Resource"]=function(){};kha_Resource.__name__=!0,kha_Resource.prototype={unload:null,__class__:kha_Resource};var kha_Image=$hxClasses["kha.Image"]=function(e){this.pixels=null,this.texture_=e};kha_Image.__name__=!0,kha_Image.__interfaces__=[kha_Resource,kha_Canvas],kha_Image.getRenderTargetFormat=function(e){switch(e){case 0:return 0;case 1:return 5;case 2:return 3;case 3:return 4;case 4:return 1;case 5:return 2;case 6:return 6;default:return 0}},kha_Image.getDepthBufferBits=function(e){switch(e){case 0:return-1;case 1:case 2:case 3:return 24;case 4:return 32;case 5:return 16}},kha_Image.getStencilBufferBits=function(e){switch(e){case 0:case 1:return-1;case 2:case 3:case 4:return 8;case 5:return 0}},kha_Image.getTextureFormat=function(e){switch(e){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;case 6:return 7;default:return 1}},kha_Image._fromTexture=function(e){return new kha_Image(e)},kha_Image.fromBytes=function(e,t,a,r,i){null==r&&(r=0);var s=new kha_Image(null);return s.format=r,s.texture_=Krom.createTextureFromBytes(e.b.bufferValue,t,a,kha_Image.getTextureFormat(r),!0),s},kha_Image.fromBytes3D=function(e,t,a,r,i,s){null==i&&(i=0);var n=new kha_Image(null);return n.format=i,n.texture_=Krom.createTextureFromBytes3D(e.b.bufferValue,t,a,r,kha_Image.getTextureFormat(i),!0),n},kha_Image.fromEncodedBytes=function(e,t,a,r,i){null==i&&(i=!1);var s=new kha_Image(null);s.texture_=Krom.createTextureFromEncodedBytes(e.b.bufferValue,t,i),a(s)},kha_Image.create=function(e,t,a,r){null==a&&(a=0);var i=new kha_Image(null);return i.format=a,i.texture_=Krom.createTexture(e,t,kha_Image.getTextureFormat(a)),i},kha_Image.create3D=function(e,t,a,r,i){null==r&&(r=0);var s=new kha_Image(null);return s.format=r,s.texture_=Krom.createTexture3D(e,t,a,kha_Image.getTextureFormat(r)),s},kha_Image.createRenderTarget=function(e,t,a,r,i,s){null==s&&(s=0),null==i&&(i=1),null==r&&(r=0),null==a&&(a=0);var n=new kha_Image(null);return n.format=a,n.renderTarget_=Krom.createRenderTarget(e,t,kha_Image.getDepthBufferBits(r),kha_Image.getRenderTargetFormat(a),kha_Image.getStencilBufferBits(r),s),n},kha_Image.get_maxSize=function(){return 4096},kha_Image.get_nonPow2Supported=function(){return!0},kha_Image.formatByteSize=function(e){switch(e){case 0:return 4;case 1:return 1;case 2:return 16;case 3:return 2;case 4:return 8;case 5:return 4;case 6:return 2;default:return 4}},kha_Image.prototype={texture_:null,renderTarget_:null,format:null,readable:null,graphics1:null,graphics2:null,graphics4:null,isOpaque:function(e,t){return!1},at:function(e,t){return-16777216},unload:function(){Krom.unloadImage(this),this.texture_=null,this.renderTarget_=null},lock:function(e){return null==e&&(e=0),haxe_io_Bytes.ofData(Krom.lockTexture(this.texture_,e))},unlock:function(){Krom.unlockTexture(this.texture_)},pixels:null,getPixels:function(){return null==this.renderTarget_?null:(null==this.pixels&&(this.pixels=new haxe_io_Bytes(new ArrayBuffer(kha_Image.formatByteSize(this.format)*this.get_width()*this.get_height()))),Krom.getRenderTargetPixels(this.renderTarget_,this.pixels.b.bufferValue),this.pixels)},generateMipmaps:function(e){null==this.texture_?Krom.generateRenderTargetMipmaps(this.renderTarget_,e):Krom.generateTextureMipmaps(this.texture_,e)},setMipmaps:function(e){Krom.setMipmaps(this.texture_,e)},setDepthStencilFrom:function(e){Krom.setDepthStencilFrom(this.renderTarget_,e.renderTarget_)},clear:function(e,t,a,r,i,s,n){Krom.clearTexture(this.texture_,e,t,a,r,i,s,n)},width:null,get_width:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.width},height:null,get_height:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.height},depth:null,get_depth:function(){return null!=this.texture_?this.texture_.depth:1},realWidth:null,get_realWidth:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.realWidth},realHeight:null,get_realHeight:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.realHeight},g1:null,get_g1:function(){return null==this.graphics1&&(this.graphics1=new kha_graphics2_Graphics1(this)),this.graphics1},g2:null,get_g2:function(){return null==this.graphics2&&(this.graphics2=new kha_graphics4_Graphics2(this)),this.graphics2},g4:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new kha_krom_Graphics(this)),this.graphics4},__class__:kha_Image};var kha_AlignedQuad=$hxClasses["kha.AlignedQuad"]=function(){};kha_AlignedQuad.__name__=!0,kha_AlignedQuad.prototype={x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,xadvance:null,__class__:kha_AlignedQuad};var kha_KravurImage=$hxClasses["kha.KravurImage"]=function(e,t,a,r,i,s,n,o){this.mySize=e,this.width=i,this.height=s,this.chars=n,this.baseline=t;for(var h=0;h<n.length;){var _=n[h];++h,_.yoff+=this.baseline}this.texture=kha_Image.create(i,s,1);for(var l=this.texture.lock(),u=0,d=0,c=s;d<c;){d++;for(var g=0,p=i;g<p;){g++;var f=o.readU8(u);l.b[u]=f,++u}}this.texture.unlock()};kha_KravurImage.__name__=!0,kha_KravurImage.prototype={mySize:null,chars:null,texture:null,width:null,height:null,baseline:null,getTexture:function(){return this.texture},getBakedQuad:function(e,t,a,r){if(t>=this.chars.length)return null;var i=1/this.width,s=1/this.height,n=this.chars[t];if(null==n)return null;var o=Math.round(a+n.xoff),h=Math.round(r+n.yoff);return e.x0=o,e.y0=h,e.x1=o+n.x1-n.x0,e.y1=h+n.y1-n.y0,e.s0=n.x0*i,e.t0=n.y0*s,e.s1=n.x1*i,e.t1=n.y1*s,e.xadvance=n.xadvance,e},getCharWidth:function(e){if(0==this.chars.length)return 0;var t=kha_KravurImage.charBlocks[0];if(e<t)return this.chars[0].xadvance;for(var a=1,r=kha_KravurImage.charBlocks.length/2|0;a<r;){var i=a++,s=kha_KravurImage.charBlocks[2*i-1],n=kha_KravurImage.charBlocks[2*i];n-1<e&&(t+=n-1-s)}return e-t>=this.chars.length?this.chars[0].xadvance:this.chars[e-t].xadvance},getHeight:function(){return this.mySize},stringWidth:function(e){for(var t=0,a=0,r=e.length;a<r;){var i=a++;t+=this.getCharWidth(HxOverrides.cca(e,i))}return t},charactersWidth:function(e,t,a){for(var r=0,i=t,s=t+a;i<s;){var n=i++;r+=this.getCharWidth(e[n])}return r},getBaselinePosition:function(){return this.baseline},__class__:kha_KravurImage};var kha_Kravur=$hxClasses["kha.Kravur"]=function(e){this.images=new haxe_ds_IntMap,this.blob=e};kha_Kravur.__name__=!0,kha_Kravur.__interfaces__=[kha_Resource],kha_Kravur.fromBytes=function(e){return new kha_Kravur(kha_internal_BytesBlob.fromBytes(e))},kha_Kravur.prototype={oldGlyphs:null,blob:null,images:null,_get:function(e){var t=kha_graphics2_Graphics.fontGlyphs;if(t!=this.oldGlyphs){this.oldGlyphs=t,kha_KravurImage.charBlocks=[t[0]];for(var a=kha_KravurImage.charBlocks[0]+1,r=1,i=t.length;r<i;){var s=r++;t[s]!=a?(kha_KravurImage.charBlocks.push(t[s-1]),kha_KravurImage.charBlocks.push(t[s]),a=t[s]+1):++a}kha_KravurImage.charBlocks.push(t[t.length-1])}var n=1e4*e+t.length;if(!this.images.h.hasOwnProperty(n)){for(var o=64,h=32,_=new Array(t.length),l=0,u=_.length;l<u;){_[l++]=new kha_graphics2_truetype_Stbtt_$bakedchar}for(var d=null,c=-1;c<=0;)h<o?h*=2:o*=2,d=kha_internal_BytesBlob.alloc(o*h),c=kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap(this.blob,0,e,d,o,h,t,_);var g=new kha_graphics2_truetype_Stbtt_$fontinfo;kha_graphics2_truetype_StbTruetype.stbtt_InitFont(g,this.blob,0);var p=kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics(g),f=kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(g,e),m=Math.round(p.ascent*f),k=Math.round(p.descent*f),v=Math.round(p.lineGap*f),S=new kha_KravurImage(0|e,m,k,v,o,h,_,d);return this.images.h[n]=S}return this.images.h[n]},height:function(e){return this._get(e).getHeight()},width:function(e,t){return this._get(e).stringWidth(t)},widthOfCharacters:function(e,t,a,r){return this._get(e).charactersWidth(t,a,r)},baseline:function(e){return this._get(e).getBaselinePosition()},unload:function(){this.blob=null,this.images=null},__class__:kha_Kravur};var kha_LoaderImpl=$hxClasses["kha.LoaderImpl"]=function(){};kha_LoaderImpl.__name__=!0,kha_LoaderImpl.getImageFormats=function(){return["png","jpg"]},kha_LoaderImpl.loadImageFromDescription=function(e,t,a){var r=Object.prototype.hasOwnProperty.call(e,"readable")&&e.readable;t(kha_Image._fromTexture(Krom.loadImage(e.files[0],r)))},kha_LoaderImpl.getSoundFormats=function(){return["wav","ogg"]},kha_LoaderImpl.loadSoundFromDescription=function(e,t,a){t(new kha_krom_Sound(haxe_io_Bytes.ofData(Krom.loadSound(e.files[0]))))},kha_LoaderImpl.getVideoFormats=function(){return["webm"]},kha_LoaderImpl.loadVideoFromDescription=function(e,t,a){},kha_LoaderImpl.loadBlobFromDescription=function(e,t,a){t(new kha_internal_BytesBlob(haxe_io_Bytes.ofData(Krom.loadBlob(e.files[0]))))},kha_LoaderImpl.loadFontFromDescription=function(e,t,a){kha_LoaderImpl.loadBlobFromDescription(e,function(e){t(new kha_Kravur(e))},a)};var kha_TimeTask=$hxClasses["kha.TimeTask"]=function(){};kha_TimeTask.__name__=!0,kha_TimeTask.prototype={task:null,start:null,period:null,duration:null,next:null,id:null,groupId:null,active:null,paused:null,__class__:kha_TimeTask};var kha_FrameTask=$hxClasses["kha.FrameTask"]=function(e,t,a){this.task=e,this.priority=t,this.id=a,this.active=!0,this.paused=!1};kha_FrameTask.__name__=!0,kha_FrameTask.prototype={task:null,priority:null,id:null,active:null,paused:null,__class__:kha_FrameTask};var kha_Scheduler=$hxClasses["kha.Scheduler"]=function(){};kha_Scheduler.__name__=!0,kha_Scheduler.init=function(){kha_Scheduler.deltas=[];for(var e=0,t=kha_Scheduler.DIF_COUNT;e<t;){var a=e++;kha_Scheduler.deltas[a]=0}kha_Scheduler.stopped=!0,kha_Scheduler.frame_tasks_sorted=!0,kha_Scheduler.current=kha_Scheduler.lastTime=kha_Scheduler.realTime(),kha_Scheduler.currentFrameTaskId=0,kha_Scheduler.currentTimeTaskId=0,kha_Scheduler.currentGroupId=0,kha_Scheduler.timeTasks=[],kha_Scheduler.pausedTimeTasks=[],kha_Scheduler.outdatedTimeTasks=[],kha_Scheduler.timeTasksScratchpad=[],kha_Scheduler.frameTasks=[],kha_Scheduler.toDeleteFrame=[]},kha_Scheduler.start=function(e){null==e&&(e=!1),kha_Scheduler.vsync=kha_Window.get(0).get_vSynced();var t=kha_Display.get_primary().get_frequency();57<=t&&t<=63&&(t=60),kha_Scheduler.onedifhz=1/t,kha_Scheduler.stopped=!1,kha_Scheduler.resetTime(),kha_Scheduler.lastTime=kha_Scheduler.realTime()-kha_Scheduler.startTime;for(var a=0,r=kha_Scheduler.DIF_COUNT;a<r;){var i=a++;kha_Scheduler.deltas[i]=0}if(e){for(var s=0,n=kha_Scheduler.timeTasks;s<n.length;){var o=n[s];++s,o.paused=!1}for(var h=0,_=kha_Scheduler.frameTasks;h<_.length;){var l=_[h];++h,l.paused=!1}}},kha_Scheduler.stop=function(){kha_Scheduler.stopped=!0},kha_Scheduler.isStopped=function(){return kha_Scheduler.stopped},kha_Scheduler.warpTimeTasksBack=function(e,t){for(var a=0;a<t.length;){var r=t[a];if(++a,r.start>=e)r.next=r.start;else if(0<r.period){var i=e-r.start,s=Math.ceil(i/r.period);r.next=r.start+s*r.period}}},kha_Scheduler.warp=function(e){if(e<kha_Scheduler.lastTime){kha_Scheduler.current=e,kha_Scheduler.lastTime=e,kha_Scheduler.warpTimeTasksBack(e,kha_Scheduler.outdatedTimeTasks),kha_Scheduler.warpTimeTasksBack(e,kha_Scheduler.timeTasks);for(var t=0,a=kha_Scheduler.outdatedTimeTasks;t<a.length;){var r=a[t];++t,r.next>=e&&kha_Scheduler.timeTasksScratchpad.push(r)}for(var i=0,s=kha_Scheduler.timeTasksScratchpad;i<s.length;){var n=s[i];++i,HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,n)}for(var o=0,h=kha_Scheduler.timeTasksScratchpad;o<h.length;){var _=h[o];++o,kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,_)}for(;0<kha_Scheduler.timeTasksScratchpad.length;)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0])}else e>kha_Scheduler.lastTime&&(kha_Scheduler.startTime-=e-kha_Scheduler.lastTime,kha_Scheduler.current=e,kha_Scheduler.lastTime=e,kha_Scheduler.executeTimeTasks(e))},kha_Scheduler.executeFrame=function(){var e=kha_Scheduler.realTime()-kha_Scheduler.startTime-kha_Scheduler.lastTime,t=kha_Scheduler.current;if(0<=e){if(null==kha_netsync_Session.the())if(e>kha_Scheduler.maxframetime)kha_Scheduler.startTime+=e-kha_Scheduler.maxframetime,t+=e=kha_Scheduler.maxframetime;else if(kha_Scheduler.vsync){for(var a=kha_Scheduler.onedifhz;a<e-kha_Scheduler.onedifhz;)a+=kha_Scheduler.onedifhz;e=a;for(var r=0,i=kha_Scheduler.DIF_COUNT-2;r<i;){var s=r++;e+=kha_Scheduler.deltas[s],kha_Scheduler.deltas[s]=kha_Scheduler.deltas[s+1]}e+=kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2],e/=kha_Scheduler.DIF_COUNT,kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2]=a,t+=e}else{for(var n=0,o=kha_Scheduler.DIF_COUNT-1;n<o;){var h=n++;kha_Scheduler.deltas[h]=kha_Scheduler.deltas[h+1]}kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-1]=e;for(var _=0,l=0,u=kha_Scheduler.DIF_COUNT;l<u;){var d=l++;_+=kha_Scheduler.deltas[d]}t+=_/=kha_Scheduler.DIF_COUNT}else t+=e;kha_Scheduler.lastTime=t,kha_Scheduler.stopped||(kha_Scheduler.current=t);for(var c=0,g=kha_Scheduler.pausedTimeTasks;c<g.length;){var p=g[c];++c,p.next+=e}if(kha_Scheduler.stopped)for(var f=0,m=kha_Scheduler.timeTasks;f<m.length;){var k=m[f];++f,k.next+=e}kha_Scheduler.executeTimeTasks(t);for(var v=0,S=kha_Scheduler.outdatedTimeTasks;v<S.length;){var b=S[v];++v,b.next<t-10&&kha_Scheduler.timeTasksScratchpad.push(b)}for(var y=0,x=kha_Scheduler.timeTasksScratchpad;y<x.length;){var w=x[y];++y,HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,w)}for(;0<kha_Scheduler.timeTasksScratchpad.length;)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0])}kha_Scheduler.sortFrameTasks();for(var I=0,T=kha_Scheduler.frameTasks;I<T.length;){var C=T[I];++I,kha_Scheduler.stopped||C.paused||!C.active||C.task()||(C.active=!1)}for(var E=0,B=kha_Scheduler.frameTasks;E<B.length;){var P=B[E];++E,P.active||kha_Scheduler.toDeleteFrame.push(P)}for(;0<kha_Scheduler.toDeleteFrame.length;)HxOverrides.remove(kha_Scheduler.frameTasks,kha_Scheduler.toDeleteFrame.pop())},kha_Scheduler.executeTimeTasks=function(e){for(;0<kha_Scheduler.timeTasks.length&&(kha_Scheduler.activeTimeTask=kha_Scheduler.timeTasks[0],kha_Scheduler.activeTimeTask.next<=e);)kha_Scheduler.activeTimeTask.next+=kha_Scheduler.activeTimeTask.period,HxOverrides.remove(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask),kha_Scheduler.activeTimeTask.active&&kha_Scheduler.activeTimeTask.task()?0<kha_Scheduler.activeTimeTask.period&&(0==kha_Scheduler.activeTimeTask.duration||kha_Scheduler.activeTimeTask.duration>=kha_Scheduler.activeTimeTask.start+kha_Scheduler.activeTimeTask.next)?kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask):kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,e):(kha_Scheduler.activeTimeTask.active=!1,kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,e));kha_Scheduler.activeTimeTask=null},kha_Scheduler.archiveTimeTask=function(e,t){},kha_Scheduler.time=function(){return kha_Scheduler.current},kha_Scheduler.realTime=function(){return kha_System.get_time()},kha_Scheduler.resetTime=function(){var e=kha_System.get_time(),t=e-kha_Scheduler.startTime;kha_Scheduler.startTime=e;for(var a=0,r=kha_Scheduler.timeTasks;a<r.length;){var i=r[a];++a,i.start-=t,i.next-=t}for(var s=0,n=kha_Scheduler.DIF_COUNT;s<n;){var o=s++;kha_Scheduler.deltas[o]=0}kha_Scheduler.current=0,kha_Scheduler.lastTime=0},kha_Scheduler.addBreakableFrameTask=function(e,t){return kha_Scheduler.frameTasks.push(new kha_FrameTask(e,t,++kha_Scheduler.currentFrameTaskId)),kha_Scheduler.frame_tasks_sorted=!1,kha_Scheduler.currentFrameTaskId},kha_Scheduler.addFrameTask=function(e,t){return kha_Scheduler.addBreakableFrameTask(function(){return e(),!0},t)},kha_Scheduler.pauseFrameTask=function(e,t){for(var a=0,r=kha_Scheduler.frameTasks;a<r.length;){var i=r[a];if(++a,i.id==e){i.paused=t;break}}},kha_Scheduler.removeFrameTask=function(e){for(var t=0,a=kha_Scheduler.frameTasks;t<a.length;){var r=a[t];if(++t,r.id==e){r.active=!1;break}}},kha_Scheduler.generateGroupId=function(){return++kha_Scheduler.currentGroupId},kha_Scheduler.addBreakableTimeTaskToGroup=function(e,t,a,r,i){null==i&&(i=0),null==r&&(r=0);var s=new kha_TimeTask;return s.active=!0,s.task=t,s.id=++kha_Scheduler.currentTimeTaskId,s.groupId=e,s.start=kha_Scheduler.current+a,(s.period=0)!=r&&(s.period=r),(s.duration=0)!=i&&(s.duration=s.start+i),s.next=s.start,kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,s),s.id},kha_Scheduler.addTimeTaskToGroup=function(e,t,a,r,i){return null==i&&(i=0),null==r&&(r=0),kha_Scheduler.addBreakableTimeTaskToGroup(e,function(){return t(),!0},a,r,i)},kha_Scheduler.addBreakableTimeTask=function(e,t,a,r){return null==r&&(r=0),null==a&&(a=0),kha_Scheduler.addBreakableTimeTaskToGroup(0,e,t,a,r)},kha_Scheduler.addTimeTask=function(e,t,a,r){return null==r&&(r=0),null==a&&(a=0),kha_Scheduler.addTimeTaskToGroup(0,e,t,a,r)},kha_Scheduler.getTimeTask=function(e){if(null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.id==e)return kha_Scheduler.activeTimeTask;for(var t=0,a=kha_Scheduler.timeTasks;t<a.length;){var r=a[t];if(++t,r.id==e)return r}for(var i=0,s=kha_Scheduler.pausedTimeTasks;i<s.length;){var n=s[i];if(++i,n.id==e)return n}return null},kha_Scheduler.pauseTimeTask=function(e,t){var a=kha_Scheduler.getTimeTask(e);null!=a&&kha_Scheduler.pauseRunningTimeTask(a,t),null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.id==e&&(kha_Scheduler.activeTimeTask.paused=t)},kha_Scheduler.pauseRunningTimeTask=function(e,t){(e.paused=t)?(HxOverrides.remove(kha_Scheduler.timeTasks,e),kha_Scheduler.pausedTimeTasks.push(e)):(kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,e),HxOverrides.remove(kha_Scheduler.pausedTimeTasks,e))},kha_Scheduler.pauseTimeTasks=function(e,t){for(var a=0,r=kha_Scheduler.timeTasks;a<r.length;){var i=r[a];++a,i.groupId==e&&kha_Scheduler.pauseRunningTimeTask(i,t)}null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.groupId==e&&(kha_Scheduler.activeTimeTask.paused=t)},kha_Scheduler.removeTimeTask=function(e){var t=kha_Scheduler.getTimeTask(e);null!=t&&(t.active=!1,HxOverrides.remove(kha_Scheduler.timeTasks,t))},kha_Scheduler.removeTimeTasks=function(e){for(var t=0,a=kha_Scheduler.timeTasks;t<a.length;){var r=a[t];++t,r.groupId==e&&(r.active=!1,kha_Scheduler.timeTasksScratchpad.push(r))}for(var i=0,s=kha_Scheduler.timeTasksScratchpad;i<s.length;){var n=s[i];++i,HxOverrides.remove(kha_Scheduler.timeTasks,n)}for(;0<kha_Scheduler.timeTasksScratchpad.length;)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0]);null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.groupId==e&&(kha_Scheduler.activeTimeTask.active=!1)},kha_Scheduler.numTasksInSchedule=function(){return kha_Scheduler.timeTasks.length+kha_Scheduler.frameTasks.length},kha_Scheduler.insertSorted=function(e,t){for(var a=0,r=e.length;a<r;){var i=a++;if(e[i].next>t.next)return void e.splice(i,0,t)}e.push(t)},kha_Scheduler.sortFrameTasks=function(){kha_Scheduler.frame_tasks_sorted||(kha_Scheduler.frameTasks.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}),kha_Scheduler.frame_tasks_sorted=!0)};var kha_ScreenRotation=$hxEnums["kha.ScreenRotation"]={__ename__:!0,__constructs__:["RotationNone","Rotation90","Rotation180","Rotation270"],RotationNone:{_hx_index:0,__enum__:"kha.ScreenRotation",toString:$estr},Rotation90:{_hx_index:1,__enum__:"kha.ScreenRotation",toString:$estr},Rotation180:{_hx_index:2,__enum__:"kha.ScreenRotation",toString:$estr},Rotation270:{_hx_index:3,__enum__:"kha.ScreenRotation",toString:$estr}},kha_Shaders=$hxClasses["kha.Shaders"]=function(){};kha_Shaders.__name__=!0,kha_Shaders.init=function(){var e=[],t=Reflect.field(kha_Shaders,"painter_colored_fragData0"),a=haxe_Unserializer.run(t);e.push(kha_internal_BytesBlob.fromBytes(a)),kha_Shaders.painter_colored_frag=new kha_graphics4_FragmentShader(e,["painter-colored.frag.glsl"]);var r=[],i=Reflect.field(kha_Shaders,"painter_image_fragData0"),s=haxe_Unserializer.run(i);r.push(kha_internal_BytesBlob.fromBytes(s)),kha_Shaders.painter_image_frag=new kha_graphics4_FragmentShader(r,["painter-image.frag.glsl"]);var n=[],o=Reflect.field(kha_Shaders,"painter_colored_vertData0"),h=haxe_Unserializer.run(o);n.push(kha_internal_BytesBlob.fromBytes(h)),kha_Shaders.painter_colored_vert=new kha_graphics4_VertexShader(n,["painter-colored.vert.glsl"]);var _=[],l=Reflect.field(kha_Shaders,"painter_image_vertData0"),u=haxe_Unserializer.run(l);_.push(kha_internal_BytesBlob.fromBytes(u)),kha_Shaders.painter_image_vert=new kha_graphics4_VertexShader(_,["painter-image.vert.glsl"]);var d=[],c=Reflect.field(kha_Shaders,"painter_text_fragData0"),g=haxe_Unserializer.run(c);d.push(kha_internal_BytesBlob.fromBytes(g)),kha_Shaders.painter_text_frag=new kha_graphics4_FragmentShader(d,["painter-text.frag.glsl"]);var p=[],f=Reflect.field(kha_Shaders,"painter_text_vertData0"),m=haxe_Unserializer.run(f);p.push(kha_internal_BytesBlob.fromBytes(m)),kha_Shaders.painter_text_vert=new kha_graphics4_VertexShader(p,["painter-text.vert.glsl"]);var k=[],v=Reflect.field(kha_Shaders,"painter_video_fragData0"),S=haxe_Unserializer.run(v);k.push(kha_internal_BytesBlob.fromBytes(S)),kha_Shaders.painter_video_frag=new kha_graphics4_FragmentShader(k,["painter-video.frag.glsl"]);var b=[],y=Reflect.field(kha_Shaders,"painter_video_vertData0"),x=haxe_Unserializer.run(y);b.push(kha_internal_BytesBlob.fromBytes(x)),kha_Shaders.painter_video_vert=new kha_graphics4_VertexShader(b,["painter-video.vert.glsl"])};var kha_Sound=$hxClasses["kha.Sound"]=function(){};kha_Sound.__name__=!0,kha_Sound.__interfaces__=[kha_Resource],kha_Sound.prototype={compressedData:null,uncompressedData:null,uncompress:function(e){if(null==this.uncompressedData){var t=new haxe_io_BytesOutput,a=kha_audio2_ogg_vorbis_Reader.readAll(this.compressedData,t,!0),r=t.getBytes(),i=r.length/4|0;if(1==a.channel){var s=new Float32Array(2*i);this.uncompressedData=s;for(var n=0,o=i;n<o;){var h=n++;this.uncompressedData[2*h]=r.getFloat(4*h),this.uncompressedData[2*h+1]=r.getFloat(4*h)}}else{var _=new Float32Array(i);this.uncompressedData=_;for(var l=0,u=i;l<u;){var d=l++;this.uncompressedData[d]=r.getFloat(4*d)}}this.compressedData=null,e()}else e()},unload:function(){this.compressedData=null,this.uncompressedData=null},__class__:kha_Sound};var kha_SystemOptions=$hxClasses["kha.SystemOptions"]=function(e,t,a,r,i){null==a&&(a=-1),null==t&&(t=-1),null==e&&(e="Kha"),this.framebuffer=null,this.window=null,this.height=-1,this.width=-1,this.title="Kha",this.title=e,this.window=null==r?new kha_WindowOptions(null,null,null,null,null,null,null,null,null):r,0<t?(this.window.width=t,this.width=t):this.width=this.window.width,0<a?(this.window.height=a,this.height=a):this.height=this.window.height,null==this.window.title&&(this.window.title=e),this.framebuffer=null==i?new kha_FramebufferOptions(null,null,null,null,null,null):i};kha_SystemOptions.__name__=!0,kha_SystemOptions.prototype={title:null,width:null,height:null,window:null,framebuffer:null,__class__:kha_SystemOptions};var kha_System=$hxClasses["kha.System"]=function(){};kha_System.__name__=!0,kha_System.init=function(e,t){var a=0;e.resizable&&(a|=1),e.maximizable&&(a|=4),e.minimizable&&(a|=2);var r=new kha_SystemOptions(e.title,e.width,e.height,new kha_WindowOptions(null,null,null,null,null,null,null,a,e.windowMode),new kha_FramebufferOptions(null,e.vSync,null,null,null,e.samplesPerPixel));kha_System.start(r,function(e){t()})},kha_System.start=function(e,t){kha_System.theTitle=e.title,kha_SystemImpl.init(e,t)},kha_System.get_title=function(){return kha_System.theTitle},kha_System.notifyOnRender=function(t,a){null==a&&(a=0),kha_System.renderListeners.push(function(e){a<e.length&&t(e[a])})},kha_System.notifyOnFrames=function(e){kha_System.renderListeners.push(e)},kha_System.removeFramesListener=function(e){HxOverrides.remove(kha_System.renderListeners,e)},kha_System.notifyOnApplicationState=function(e,t,a,r,i){null!=e&&kha_System.foregroundListeners.push(e),null!=t&&kha_System.resumeListeners.push(t),null!=a&&kha_System.pauseListeners.push(a),null!=r&&kha_System.backgroundListeners.push(r),null!=i&&kha_System.shutdownListeners.push(i)},kha_System.notifyOnDropFiles=function(e){kha_System.dropFilesListeners.push(e)},kha_System.notifyOnCutCopyPaste=function(e,t,a){kha_System.cutListener=e,kha_System.copyListener=t,kha_System.pasteListener=a},kha_System.render=function(e){for(var t=0,a=kha_System.renderListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_System.foreground=function(){for(var e=0,t=kha_System.foregroundListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.resume=function(){for(var e=0,t=kha_System.resumeListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.pause=function(){for(var e=0,t=kha_System.pauseListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.background=function(){for(var e=0,t=kha_System.backgroundListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.shutdown=function(){for(var e=0,t=kha_System.shutdownListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.dropFiles=function(e){for(var t=0,a=kha_System.dropFilesListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_System.get_time=function(){return kha_SystemImpl.getTime()},kha_System.windowWidth=function(e){return null==e&&(e=0),kha_Window.get(e).get_width()},kha_System.windowHeight=function(e){return null==e&&(e=0),kha_Window.get_all()[e].get_height()},kha_System.get_screenRotation=function(){return kha_ScreenRotation.RotationNone},kha_System.get_systemId=function(){return kha_SystemImpl.getSystemId()},kha_System.get_language=function(){return kha_SystemImpl.getLanguage()},kha_System.stop=function(){return kha_SystemImpl.requestShutdown()},kha_System.loadUrl=function(e){kha_SystemImpl.loadUrl(e)},kha_System.canSwitchFullscreen=function(){return!0},kha_System.isFullscreen=function(){return 1==kha_Window.get(0).get_mode()||1==kha_Window.get(0).get_mode()},kha_System.requestFullscreen=function(){kha_Window.get(0).set_mode(1)},kha_System.exitFullscreen=function(){kha_Window.get(0).set_mode(0)},kha_System.notifyOnFullscreenChange=function(e,t){},kha_System.removeFullscreenListener=function(e,t){},kha_System.changeResolution=function(e,t){},kha_System.requestShutdown=function(){kha_System.stop()},kha_System.get_vsync=function(){return kha_Window.get(0).get_vSynced()},kha_System.get_refreshRate=function(){return kha_Display.get_primary().get_frequency()},kha_System.screenDpi=function(){return kha_Display.get_primary().get_pixelsPerInch()};var kha_SystemImpl=$hxClasses["kha.SystemImpl"]=function(){};kha_SystemImpl.__name__=!0,kha_SystemImpl.renderCallback=function(){kha_Scheduler.executeFrame(),kha_System.render([kha_SystemImpl.framebuffer])},kha_SystemImpl.dropFilesCallback=function(e){kha_System.dropFiles(e)},kha_SystemImpl.copyCallback=function(){return null!=kha_System.copyListener?kha_System.copyListener():null},kha_SystemImpl.cutCallback=function(){return null!=kha_System.cutListener?kha_System.cutListener():null},kha_SystemImpl.pasteCallback=function(e){null!=kha_System.pasteListener&&kha_System.pasteListener(e)},kha_SystemImpl.keyboardDownCallback=function(e){kha_SystemImpl.keyboard.sendDownEvent(e)},kha_SystemImpl.keyboardUpCallback=function(e){kha_SystemImpl.keyboard.sendUpEvent(e)},kha_SystemImpl.keyboardPressCallback=function(e){kha_SystemImpl.keyboard.sendPressEvent(String.fromCodePoint(e))},kha_SystemImpl.mouseDownCallback=function(e,t,a){kha_SystemImpl.mouse.sendDownEvent(0,e,t,a)},kha_SystemImpl.mouseUpCallback=function(e,t,a){kha_SystemImpl.mouse.sendUpEvent(0,e,t,a)},kha_SystemImpl.mouseMoveCallback=function(e,t,a,r){kha_SystemImpl.mouse.sendMoveEvent(0,e,t,a,r)},kha_SystemImpl.mouseWheelCallback=function(e){kha_SystemImpl.mouse.sendWheelEvent(0,e)},kha_SystemImpl.penDownCallback=function(e,t,a){kha_SystemImpl.pen.sendDownEvent(0,e,t,a)},kha_SystemImpl.penUpCallback=function(e,t,a){kha_SystemImpl.pen.sendUpEvent(0,e,t,a)},kha_SystemImpl.penMoveCallback=function(e,t,a){kha_SystemImpl.pen.sendMoveEvent(0,e,t,a)},kha_SystemImpl.gamepadAxisCallback=function(e,t,a){kha_SystemImpl.gamepads[e].sendAxisEvent(t,a)},kha_SystemImpl.gamepadButtonCallback=function(e,t,a){kha_SystemImpl.gamepads[e].sendButtonEvent(t,a)},kha_SystemImpl.audioCallback=function(e){var t=new Float32Array(e);kha_SystemImpl.audioOutputData=t,kha_audio2_Audio._callCallback(e);for(var a=0,r=e;a<r;){var i=a++,s=kha_audio2_Audio._readSample();kha_SystemImpl.audioOutputData[i]=s}for(var n=0,o=e;n<o;){var h=n++;Krom.writeAudioBuffer(kha_SystemImpl.audioOutputData[h])}},kha_SystemImpl.init=function(e,t){Krom.init(e.title,e.width,e.height,e.framebuffer.samplesPerPixel,e.framebuffer.verticalSync,e.window.mode,e.window.windowFeatures,2),kha_SystemImpl.start=Krom.getTime(),haxe_Log.trace=function(e,t){var a=null!=t?t.className+":"+t.lineNumber+": "+Std.string(e):Std.string(e);Krom.log(HxOverrides.substr(a,0,511))},new kha_Window(0),kha_Scheduler.init(),kha_Shaders.init();var a=new kha_krom_Graphics;kha_SystemImpl.framebuffer=new kha_Framebuffer(0,null,null,a),kha_SystemImpl.framebuffer.init(new kha_graphics2_Graphics1(kha_SystemImpl.framebuffer),new kha_graphics4_Graphics2(kha_SystemImpl.framebuffer),a),Krom.setCallback(kha_SystemImpl.renderCallback),Krom.setDropFilesCallback(kha_SystemImpl.dropFilesCallback),Krom.setCutCopyPasteCallback(kha_SystemImpl.cutCallback,kha_SystemImpl.copyCallback,kha_SystemImpl.pasteCallback),kha_SystemImpl.keyboard=new kha_input_Keyboard,kha_SystemImpl.mouse=new kha_input_MouseImpl,kha_SystemImpl.pen=new kha_input_Pen,kha_SystemImpl.gamepads=[];for(var r=0,i=kha_SystemImpl.maxGamepads;r<i;){var s=r++;kha_SystemImpl.gamepads[s]=new kha_input_Gamepad(s)}Krom.setKeyboardDownCallback(kha_SystemImpl.keyboardDownCallback),Krom.setKeyboardUpCallback(kha_SystemImpl.keyboardUpCallback),Krom.setKeyboardPressCallback(kha_SystemImpl.keyboardPressCallback),Krom.setMouseDownCallback(kha_SystemImpl.mouseDownCallback),Krom.setMouseUpCallback(kha_SystemImpl.mouseUpCallback),Krom.setMouseMoveCallback(kha_SystemImpl.mouseMoveCallback),Krom.setMouseWheelCallback(kha_SystemImpl.mouseWheelCallback),Krom.setPenDownCallback(kha_SystemImpl.penDownCallback),Krom.setPenUpCallback(kha_SystemImpl.penUpCallback),Krom.setPenMoveCallback(kha_SystemImpl.penMoveCallback),Krom.setGamepadAxisCallback(kha_SystemImpl.gamepadAxisCallback),Krom.setGamepadButtonCallback(kha_SystemImpl.gamepadButtonCallback),kha_audio2_Audio._init(),kha_audio2_Audio1._init(),Krom.setAudioCallback(kha_SystemImpl.audioCallback),kha_Scheduler.start(),t(kha_Window.get(0))},kha_SystemImpl.initEx=function(e,t,a,r){},kha_SystemImpl.translateWindowMode=function(e){if(null==e)return 0;switch(e){case 0:return 0;case 1:return 1;case 2:return 2}},kha_SystemImpl.getScreenRotation=function(){return kha_ScreenRotation.RotationNone},kha_SystemImpl.getTime=function(){return Krom.getTime()-kha_SystemImpl.start},kha_SystemImpl.getVsync=function(){return!0},kha_SystemImpl.getRefreshRate=function(){return 60},kha_SystemImpl.getSystemId=function(){return Krom.systemId()},kha_SystemImpl.getLanguage=function(){return"en"},kha_SystemImpl.requestShutdown=function(){return Krom.requestShutdown(),!0},kha_SystemImpl.getMouse=function(e){return kha_SystemImpl.mouse},kha_SystemImpl.getPen=function(e){return kha_SystemImpl.pen},kha_SystemImpl.getKeyboard=function(e){return kha_SystemImpl.keyboard},kha_SystemImpl.lockMouse=function(){if(!kha_SystemImpl.isMouseLocked()){Krom.lockMouse();for(var e=0,t=kha_SystemImpl.mouseLockListeners;e<t.length;){var a=t[e];++e,a()}}},kha_SystemImpl.unlockMouse=function(){if(kha_SystemImpl.isMouseLocked()){Krom.unlockMouse();for(var e=0,t=kha_SystemImpl.mouseLockListeners;e<t.length;){var a=t[e];++e,a()}}},kha_SystemImpl.canLockMouse=function(){return Krom.canLockMouse()},kha_SystemImpl.isMouseLocked=function(){return Krom.isMouseLocked()},kha_SystemImpl.notifyOfMouseLockChange=function(e,t){kha_SystemImpl.canLockMouse()&&null!=e&&kha_SystemImpl.mouseLockListeners.push(e)},kha_SystemImpl.removeFromMouseLockChange=function(e,t){kha_SystemImpl.canLockMouse()&&null!=e&&HxOverrides.remove(kha_SystemImpl.mouseLockListeners,e)},kha_SystemImpl.hideSystemCursor=function(){Krom.showMouse(!1)},kha_SystemImpl.showSystemCursor=function(){Krom.showMouse(!0)},kha_SystemImpl.unload=function(){},kha_SystemImpl.canSwitchFullscreen=function(){return!1},kha_SystemImpl.isFullscreen=function(){return!1},kha_SystemImpl.requestFullscreen=function(){},kha_SystemImpl.exitFullscreen=function(){},kha_SystemImpl.notifyOfFullscreenChange=function(e,t){},kha_SystemImpl.removeFromFullscreenChange=function(e,t){},kha_SystemImpl.changeResolution=function(e,t){},kha_SystemImpl.setKeepScreenOn=function(e){},kha_SystemImpl.loadUrl=function(e){},kha_SystemImpl.getGamepadId=function(e){return"unkown"};var kha_Video=$hxClasses["kha.Video"]=function(){};kha_Video.__name__=!0,kha_Video.__interfaces__=[kha_Resource],kha_Video.prototype={width:function(){return 100},height:function(){return 100},play:function(e){null==e&&(e=!1)},pause:function(){},stop:function(){},getLength:function(){return 0},getCurrentPos:function(){return 0},get_position:function(){return 0},set_position:function(e){return 0},getVolume:function(){return 1},setVolume:function(e){},isFinished:function(){return this.getCurrentPos()>=this.getLength()},unload:function(){},__class__:kha_Video};var kha_Window=$hxClasses["kha.Window"]=function(e){this.num=e,kha_Window.windows.push(this)};kha_Window.__name__=!0,kha_Window.create=function(e,t){return null},kha_Window.destroy=function(e){},kha_Window.get=function(e){return kha_Window.windows[e]},kha_Window.get_all=function(){return kha_Window.windows},kha_Window.prototype={num:null,windowTitle:null,resize:function(e,t){},move:function(e,t){},changeWindowFeatures:function(e){},changeFramebuffer:function(e){},get_x:function(){return 0},set_x:function(e){return 0},get_y:function(){return 0},set_y:function(e){return 0},get_width:function(){return Krom.windowWidth(this.num)},set_width:function(e){return 800},get_height:function(){return Krom.windowHeight(this.num)},set_height:function(e){return 600},get_mode:function(){return 0},set_mode:function(e){return 0},get_visible:function(){return!0},set_visible:function(e){return!0},get_title:function(){return this.windowTitle},set_title:function(e){return Krom.setWindowTitle(this.num,e),this.windowTitle=e,this.windowTitle},notifyOnResize:function(e){},get_vSynced:function(){return!0},__class__:kha_Window};var kha__$WindowOptions_WindowFeatures_$Impl_$=$hxClasses["kha._WindowOptions.WindowFeatures_Impl_"]={};kha__$WindowOptions_WindowFeatures_$Impl_$.__name__=!0,kha__$WindowOptions_WindowFeatures_$Impl_$._new=function(e){return e};var kha_WindowOptions=$hxClasses["kha.WindowOptions"]=function(e,t,a,r,i,s,n,o,h){null==h&&(h=0),null==n&&(n=!0),null==i&&(i=600),null==r&&(r=800),null==a&&(a=-1),null==t&&(t=-1),this.mode=0,this.windowFeatures=7,this.visible=!0,this.display=null,this.height=600,this.width=800,this.y=-1,this.x=-1,this.title=null,this.title=e,this.x=t,this.y=a,this.width=r,this.height=i,this.display=null==s?kha_Display.get_primary():s,this.visible=n,this.windowFeatures=null==o?7:o,this.mode=h};kha_WindowOptions.__name__=!0,kha_WindowOptions.prototype={title:null,x:null,y:null,width:null,height:null,display:null,visible:null,windowFeatures:null,mode:null,__class__:kha_WindowOptions};var kha_arrays__$Float32Array_Float32Array_$Impl_$=$hxClasses["kha.arrays._Float32Array.Float32Array_Impl_"]={};kha_arrays__$Float32Array_Float32Array_$Impl_$.__name__=!0,kha_arrays__$Float32Array_Float32Array_$Impl_$._new=function(e){return new Float32Array(e)},kha_arrays__$Float32Array_Float32Array_$Impl_$.get_buffer=function(e){return e.buffer},kha_arrays__$Float32Array_Float32Array_$Impl_$.get_length=function(e){return e.length},kha_arrays__$Float32Array_Float32Array_$Impl_$.set=function(e,t,a){return e[t]=a},kha_arrays__$Float32Array_Float32Array_$Impl_$.get=function(e,t){return e[t]},kha_arrays__$Float32Array_Float32Array_$Impl_$.data=function(e){return e},kha_arrays__$Float32Array_Float32Array_$Impl_$.arrayRead=function(e,t){return e[t]},kha_arrays__$Float32Array_Float32Array_$Impl_$.arrayWrite=function(e,t,a){return e[t]=a},kha_arrays__$Float32Array_Float32Array_$Impl_$.subarray=function(e,t,a){return e.subarray(t,a)};var kha_arrays__$Int16Array_Int16Array_$Impl_$=$hxClasses["kha.arrays._Int16Array.Int16Array_Impl_"]={};kha_arrays__$Int16Array_Int16Array_$Impl_$.__name__=!0,kha_arrays__$Int16Array_Int16Array_$Impl_$._new=function(e){return new Int16Array(e)},kha_arrays__$Int16Array_Int16Array_$Impl_$.get_length=function(e){return e.length},kha_arrays__$Int16Array_Int16Array_$Impl_$.set=function(e,t,a){return e[t]=a},kha_arrays__$Int16Array_Int16Array_$Impl_$.get=function(e,t){return e[t]},kha_arrays__$Int16Array_Int16Array_$Impl_$.data=function(e){return e},kha_arrays__$Int16Array_Int16Array_$Impl_$.arrayRead=function(e,t){return e[t]},kha_arrays__$Int16Array_Int16Array_$Impl_$.arrayWrite=function(e,t,a){return e[t]=a},kha_arrays__$Int16Array_Int16Array_$Impl_$.subarray=function(e,t,a){return e.subarray(t,a)};var kha_arrays__$Uint32Array_Uint32Array_$Impl_$=$hxClasses["kha.arrays._Uint32Array.Uint32Array_Impl_"]={};kha_arrays__$Uint32Array_Uint32Array_$Impl_$.__name__=!0,kha_arrays__$Uint32Array_Uint32Array_$Impl_$._new=function(e){return new Uint32Array(e)},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.get_length=function(e){return e.length},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.set=function(e,t,a){return e[t]=a},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.get=function(e,t){return e[t]},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.data=function(e){return e},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.arrayRead=function(e,t){return e[t]},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.arrayWrite=function(e,t,a){return e[t]=a},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.subarray=function(e,t,a){return e.subarray(t,a)};var kha_audio1_AudioChannel=$hxClasses["kha.audio1.AudioChannel"]=function(){};kha_audio1_AudioChannel.__name__=!0,kha_audio1_AudioChannel.prototype={play:null,pause:null,stop:null,length:null,get_length:null,position:null,get_position:null,get_volume:null,set_volume:null,finished:null,get_finished:null,__class__:kha_audio1_AudioChannel};var kha_audio2_Audio=$hxClasses["kha.audio2.Audio"]=function(){};kha_audio2_Audio.__name__=!0,kha_audio2_Audio._init=function(){kha_audio2_Audio.buffer=new kha_audio2_Buffer(8192,2,44100)},kha_audio2_Audio._callCallback=function(e){if(null!=kha_audio2_Audio.buffer)if(null!=kha_audio2_Audio.audioCallback)kha_audio2_Audio.audioCallback(e,kha_audio2_Audio.buffer);else for(var t=0,a=e;t<a;){t++;kha_audio2_Audio.buffer.data[kha_audio2_Audio.buffer.writeLocation]=0,kha_audio2_Audio.buffer.writeLocation+=1,kha_audio2_Audio.buffer.writeLocation>=kha_audio2_Audio.buffer.size&&(kha_audio2_Audio.buffer.writeLocation=0)}},kha_audio2_Audio._readSample=function(){if(null==kha_audio2_Audio.buffer)return 0;var e=kha_audio2_Audio.buffer.data[kha_audio2_Audio.buffer.readLocation];return kha_audio2_Audio.buffer.readLocation+=1,kha_audio2_Audio.buffer.readLocation>=kha_audio2_Audio.buffer.size&&(kha_audio2_Audio.buffer.readLocation=0),e},kha_audio2_Audio.play=function(e,t){return null==t&&(t=!1),null},kha_audio2_Audio.stream=function(e,t){return null==t&&(t=!1),null};var kha_audio2_Audio1=$hxClasses["kha.audio2.Audio1"]=function(){};kha_audio2_Audio1.__name__=!0,kha_audio2_Audio1._init=function(){var e=new Array(16);kha_audio2_Audio1.soundChannels=e;var t=new Array(16);kha_audio2_Audio1.streamChannels=t;var a=new Array(16);kha_audio2_Audio1.internalSoundChannels=a;var r=new Array(16);kha_audio2_Audio1.internalStreamChannels=r;var i=new Float32Array(512);kha_audio2_Audio1.sampleCache1=i;var s=new Float32Array(512);kha_audio2_Audio1.sampleCache2=s,kha_audio2_Audio.audioCallback=kha_audio2_Audio1.mix},kha_audio2_Audio1.max=function(e,t){return t<e?e:t},kha_audio2_Audio1.min=function(e,t){return e<t?e:t},kha_audio2_Audio1.mix=function(e,t){if(kha_audio2_Audio1.sampleCache1.length<e){var a=new Float32Array(e);kha_audio2_Audio1.sampleCache1=a;var r=new Float32Array(e);kha_audio2_Audio1.sampleCache2=r}for(var i=0,s=e;i<s;){var n=i++;kha_audio2_Audio1.sampleCache2[n]=0}kha_audio2_Audio1.internalSoundChannels[0]=kha_audio2_Audio1.soundChannels[0],kha_audio2_Audio1.internalSoundChannels[1]=kha_audio2_Audio1.soundChannels[1],kha_audio2_Audio1.internalSoundChannels[2]=kha_audio2_Audio1.soundChannels[2],kha_audio2_Audio1.internalSoundChannels[3]=kha_audio2_Audio1.soundChannels[3],kha_audio2_Audio1.internalSoundChannels[4]=kha_audio2_Audio1.soundChannels[4],kha_audio2_Audio1.internalSoundChannels[5]=kha_audio2_Audio1.soundChannels[5],kha_audio2_Audio1.internalSoundChannels[6]=kha_audio2_Audio1.soundChannels[6],kha_audio2_Audio1.internalSoundChannels[7]=kha_audio2_Audio1.soundChannels[7],kha_audio2_Audio1.internalSoundChannels[8]=kha_audio2_Audio1.soundChannels[8],kha_audio2_Audio1.internalSoundChannels[9]=kha_audio2_Audio1.soundChannels[9],kha_audio2_Audio1.internalSoundChannels[10]=kha_audio2_Audio1.soundChannels[10],kha_audio2_Audio1.internalSoundChannels[11]=kha_audio2_Audio1.soundChannels[11],kha_audio2_Audio1.internalSoundChannels[12]=kha_audio2_Audio1.soundChannels[12],kha_audio2_Audio1.internalSoundChannels[13]=kha_audio2_Audio1.soundChannels[13],kha_audio2_Audio1.internalSoundChannels[14]=kha_audio2_Audio1.soundChannels[14],kha_audio2_Audio1.internalSoundChannels[15]=kha_audio2_Audio1.soundChannels[15],kha_audio2_Audio1.internalStreamChannels[0]=kha_audio2_Audio1.streamChannels[0],kha_audio2_Audio1.internalStreamChannels[1]=kha_audio2_Audio1.streamChannels[1],kha_audio2_Audio1.internalStreamChannels[2]=kha_audio2_Audio1.streamChannels[2],kha_audio2_Audio1.internalStreamChannels[3]=kha_audio2_Audio1.streamChannels[3],kha_audio2_Audio1.internalStreamChannels[4]=kha_audio2_Audio1.streamChannels[4],kha_audio2_Audio1.internalStreamChannels[5]=kha_audio2_Audio1.streamChannels[5],kha_audio2_Audio1.internalStreamChannels[6]=kha_audio2_Audio1.streamChannels[6],kha_audio2_Audio1.internalStreamChannels[7]=kha_audio2_Audio1.streamChannels[7],kha_audio2_Audio1.internalStreamChannels[8]=kha_audio2_Audio1.streamChannels[8],kha_audio2_Audio1.internalStreamChannels[9]=kha_audio2_Audio1.streamChannels[9],kha_audio2_Audio1.internalStreamChannels[10]=kha_audio2_Audio1.streamChannels[10],kha_audio2_Audio1.internalStreamChannels[11]=kha_audio2_Audio1.streamChannels[11],kha_audio2_Audio1.internalStreamChannels[12]=kha_audio2_Audio1.streamChannels[12],kha_audio2_Audio1.internalStreamChannels[13]=kha_audio2_Audio1.streamChannels[13],kha_audio2_Audio1.internalStreamChannels[14]=kha_audio2_Audio1.streamChannels[14],kha_audio2_Audio1.internalStreamChannels[15]=kha_audio2_Audio1.streamChannels[15];for(var o=0,h=kha_audio2_Audio1.internalSoundChannels;o<h.length;){var _=h[o];if(++o,null!=_&&!_.get_finished()){_.nextSamples(kha_audio2_Audio1.sampleCache1,e,t.samplesPerSecond);for(var l=0,u=e;l<u;){var d=l++;kha_audio2_Audio1.sampleCache2[d]+=kha_audio2_Audio1.sampleCache1[d]*_.get_volume()}}}for(var c=0,g=kha_audio2_Audio1.internalStreamChannels;c<g.length;){var p=g[c];if(++c,null!=p&&!p.get_finished()){p.nextSamples(kha_audio2_Audio1.sampleCache1,e,t.samplesPerSecond);for(var f=0,m=e;f<m;){var k=f++;kha_audio2_Audio1.sampleCache2[k]+=kha_audio2_Audio1.sampleCache1[k]*p.get_volume()}}}for(var v=0,S=e;v<S;){var b=v++,y=kha_audio2_Audio1.sampleCache2[b],x=y<1?y:1;t.data[t.writeLocation]=-1<x?x:-1,t.writeLocation+=1,t.writeLocation>=t.size&&(t.writeLocation=0)}},kha_audio2_Audio1.play=function(e,t){null==t&&(t=!1);for(var a=null,r=0;r<16;){var i=r++;if(null==kha_audio2_Audio1.soundChannels[i]||kha_audio2_Audio1.soundChannels[i].get_finished()){(a=new kha_audio2_AudioChannel(t)).data=e.uncompressedData,kha_audio2_Audio1.soundChannels[i]=a;break}}return a},kha_audio2_Audio1._playAgain=function(e){for(var t=0;t<16;){var a=t++;if(null==kha_audio2_Audio1.soundChannels[a]||kha_audio2_Audio1.soundChannels[a].get_finished()||kha_audio2_Audio1.soundChannels[a]==e){kha_audio2_Audio1.soundChannels[a]=e;break}}},kha_audio2_Audio1.stream=function(e,t){null==t&&(t=!1);var a=kha_audio2_Audio.stream(e,t);if(null!=a)return a;for(var r=null,i=0;i<16;){var s=i++;if(null==kha_audio2_Audio1.streamChannels[s]||kha_audio2_Audio1.streamChannels[s].get_finished()){r=new kha_audio2_StreamChannel(e.compressedData,t),kha_audio2_Audio1.streamChannels[s]=r;break}}return r};var kha_audio2_AudioChannel=$hxClasses["kha.audio2.AudioChannel"]=function(e){this.paused=!1,this.looping=e,this.myVolume=1,this.myPosition=0};kha_audio2_AudioChannel.__name__=!0,kha_audio2_AudioChannel.__interfaces__=[kha_audio1_AudioChannel],kha_audio2_AudioChannel.prototype={data:null,myVolume:null,myPosition:null,paused:null,looping:null,nextSamples:function(e,t,a){if(this.paused)for(var r=0,i=t;r<i;){e[r++]=0}else{for(var s=0,n=0;s<t;){for(var o=this.data.length-this.myPosition,h=o<t-s?o:t-s;n<h;)e[s]=this.data[this.myPosition],++this.myPosition,++n,++s;if(!this.looping)break;n=0,this.myPosition>=this.data.length&&(this.myPosition=0)}for(;s<t;)e[s]=0,++s}},play:function(){this.paused=!1,this.get_finished()&&(this.myPosition=0,kha_audio2_Audio1._playAgain(this))},pause:function(){this.paused=!0},stop:function(){this.myPosition=this.data.length},length:null,get_length:function(){return this.data.length/44100/2},position:null,get_position:function(){return this.myPosition/44100/2},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},finished:null,get_finished:function(){return this.myPosition>=this.data.length},__class__:kha_audio2_AudioChannel};var kha_audio2_Buffer=$hxClasses["kha.audio2.Buffer"]=function(e,t,a){this.size=e;var r=new Float32Array(e);this.data=r,this.channels=t,this.samplesPerSecond=a,this.readLocation=0,this.writeLocation=0};kha_audio2_Buffer.__name__=!0,kha_audio2_Buffer.prototype={channels:null,samplesPerSecond:null,data:null,size:null,readLocation:null,writeLocation:null,__class__:kha_audio2_Buffer};var kha_audio2_StreamChannel=$hxClasses["kha.audio2.StreamChannel"]=function(e,t){this.paused=!1,this.atend=!1,this.myVolume=1,this.loop=t,this.reader=kha_audio2_ogg_vorbis_Reader.openFromBytes(e)};kha_audio2_StreamChannel.__name__=!0,kha_audio2_StreamChannel.__interfaces__=[kha_audio1_AudioChannel],kha_audio2_StreamChannel.prototype={reader:null,atend:null,loop:null,myVolume:null,paused:null,nextSamples:function(e,t,a){if(this.paused)for(var r=0,i=t;r<i;){e[r++]=0}else{var s=2*this.reader.read(e,t/2|0,2,a,!0);if(s<t){this.loop?this.reader.set_currentMillisecond(0):this.atend=!0;for(var n=s,o=t;n<o;){e[n++]=0}}}},play:function(){this.paused=!1},pause:function(){this.paused=!0},stop:function(){this.atend=!0},length:null,get_length:function(){return this.reader.get_totalMillisecond()/1e3},position:null,get_position:function(){return this.reader.get_currentMillisecond()/1e3},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},finished:null,get_finished:function(){return this.atend},__class__:kha_audio2_StreamChannel};var kha_audio2_ogg_tools_Crc32=$hxClasses["kha.audio2.ogg.tools.Crc32"]=function(){};kha_audio2_ogg_tools_Crc32.__name__=!0,kha_audio2_ogg_tools_Crc32.init=function(){if(null==kha_audio2_ogg_tools_Crc32.table){var e=new Array(256);kha_audio2_ogg_tools_Crc32.table=e;for(var t=0;t<256;){var a=t++,r=a<<24;r=(r=(r=(r=(r=(r=(r=(r=r<<1^(_$UInt_UInt_$Impl_$.gte(r,1<<31)?79764919:0))<<1^(_$UInt_UInt_$Impl_$.gte(r,1<<31)?79764919:0))<<1^(_$UInt_UInt_$Impl_$.gte(r,1<<31)?79764919:0))<<1^(_$UInt_UInt_$Impl_$.gte(r,1<<31)?79764919:0))<<1^(_$UInt_UInt_$Impl_$.gte(r,1<<31)?79764919:0))<<1^(_$UInt_UInt_$Impl_$.gte(r,1<<31)?79764919:0))<<1^(_$UInt_UInt_$Impl_$.gte(r,1<<31)?79764919:0))<<1^(_$UInt_UInt_$Impl_$.gte(r,1<<31)?79764919:0),kha_audio2_ogg_tools_Crc32.table[a]=r}}},kha_audio2_ogg_tools_Crc32.update=function(e,t){return e<<8^kha_audio2_ogg_tools_Crc32.table[t^e>>>24]};var kha_audio2_ogg_tools_MathTools=$hxClasses["kha.audio2.ogg.tools.MathTools"]=function(){};kha_audio2_ogg_tools_MathTools.__name__=!0,kha_audio2_ogg_tools_MathTools.ilog=function(e){var t=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];return e<16384?e<16?t[e]:e<512?5+t[e>>5]:10+t[e>>10]:e<16777216?e<524288?15+t[e>>15]:20+t[e>>20]:e<536870912?25+t[e>>25]:e<-2147483648?30+t[e>>30]:0};var kha_audio2_ogg_tools_Mdct=$hxClasses["kha.audio2.ogg.tools.Mdct"]=function(){};kha_audio2_ogg_tools_Mdct.__name__=!0,kha_audio2_ogg_tools_Mdct.inverseTransform=function(e,t,a,r,i,s){for(var n=t>>1,o=t>>2,h=t>>3,_=new Array(n),l=n-2,u=0,d=0,c=n;d!=c;)_[l+1]=e[d]*a[u]-e[d+2]*a[u+1],_[l]=e[d]*a[u+1]+e[d+2]*a[u],l-=2,u+=2,d+=4;for(d=n-3;0<=l;)_[l+1]=-e[d+2]*a[u]- -e[d]*a[u+1],_[l]=-e[d+2]*a[u+1]+-e[d]*a[u],l-=2,u+=2,d-=4;for(var g=e,p=_,f=n-8,m=o,k=0,v=o,S=0;0<=f;){var b=p[m+1]-p[k+1],y=p[m]-p[k];g[v+1]=p[m+1]+p[k+1],g[v]=p[m]+p[k],g[S+1]=b*a[f+4]-y*a[f+5],g[S]=y*a[f+4]+b*a[f+5],b=p[m+3]-p[k+3],y=p[m+2]-p[k+2],g[v+3]=p[m+3]+p[k+3],g[v+2]=p[m+2]+p[k+2],g[S+3]=b*a[f]-y*a[f+1],g[S+2]=y*a[f]+b*a[f+1],f-=8,v+=4,S+=4,m+=4,k+=4}for(var x=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],w=(t<16384?t<16?x[t]:t<512?5+x[t>>5]:10+x[t>>10]:t<16777216?t<524288?15+x[t>>15]:20+x[t>>20]:t<536870912?25+x[t>>25]:t<-2147483648?30+x[t>>30]:0)-1,I=n-1-0*o,T=I,C=I+-(t>>3),E=0,B=1+(t>>4>>2);0<--B;){var P=g[T]-g[C],A=g[T+-1]-g[C+-1],L=T,$=g;$[L]=$[L]+g[C];var N=T+-1,R=g;R[N]=R[N]+g[C+-1],g[C]=P*a[E]-A*a[E+1],g[C+-1]=A*a[E]+P*a[E+1],E+=8,P=g[T+-2]-g[C+-2],A=g[T+-3]-g[C+-3];var V=T+-2,M=g;M[V]=M[V]+g[C+-2];var F=T+-3,H=g;H[F]=H[F]+g[C+-3],g[C+-2]=P*a[E]-A*a[E+1],g[C+-3]=A*a[E]+P*a[E+1],E+=8,P=g[T+-4]-g[C+-4],A=g[T+-5]-g[C+-5];var O=T+-4,U=g;U[O]=U[O]+g[C+-4];var D=T+-5,z=g;z[D]=z[D]+g[C+-5],g[C+-4]=P*a[E]-A*a[E+1],g[C+-5]=A*a[E]+P*a[E+1],E+=8,P=g[T+-6]-g[C+-6],A=g[T+-7]-g[C+-7];var W=T+-6,G=g;G[W]=G[W]+g[C+-6];var j=T+-7,K=g;K[j]=K[j]+g[C+-7],g[C+-6]=P*a[E]-A*a[E+1],g[C+-7]=A*a[E]+P*a[E+1],E+=8,T-=8,C-=8}for(var X=n-1-o,Y=X,Z=X+-(t>>3),Q=0,q=1+(t>>4>>2);0<--q;){var J=g[Y]-g[Z],ee=g[Y+-1]-g[Z+-1],te=Y,ae=g;ae[te]=ae[te]+g[Z];var re=Y+-1,ie=g;ie[re]=ie[re]+g[Z+-1],g[Z]=J*a[Q]-ee*a[Q+1],g[Z+-1]=ee*a[Q]+J*a[Q+1],Q+=8,J=g[Y+-2]-g[Z+-2],ee=g[Y+-3]-g[Z+-3];var se=Y+-2,ne=g;ne[se]=ne[se]+g[Z+-2];var oe=Y+-3,he=g;he[oe]=he[oe]+g[Z+-3],g[Z+-2]=J*a[Q]-ee*a[Q+1],g[Z+-3]=ee*a[Q]+J*a[Q+1],Q+=8,J=g[Y+-4]-g[Z+-4],ee=g[Y+-5]-g[Z+-5];var _e=Y+-4,le=g;le[_e]=le[_e]+g[Z+-4];var ue=Y+-5,de=g;de[ue]=de[ue]+g[Z+-5],g[Z+-4]=J*a[Q]-ee*a[Q+1],g[Z+-5]=ee*a[Q]+J*a[Q+1],Q+=8,J=g[Y+-6]-g[Z+-6],ee=g[Y+-7]-g[Z+-7];var ce=Y+-6,ge=g;ge[ce]=ge[ce]+g[Z+-6];var pe=Y+-7,fe=g;fe[pe]=fe[pe]+g[Z+-7],g[Z+-6]=J*a[Q]-ee*a[Q+1],g[Z+-7]=ee*a[Q]+J*a[Q+1],Q+=8,Y-=8,Z-=8}for(var me=n-1-0*h,ke=0,ve=me,Se=me+-(t>>4),be=1+(t>>5>>2);0<--be;){var ye=g[ve]-g[Se],xe=g[ve+-1]-g[Se+-1],we=ve,Ie=g;Ie[we]=Ie[we]+g[Se];var Te=ve+-1,Ce=g;Ce[Te]=Ce[Te]+g[Se+-1],g[Se]=ye*a[ke]-xe*a[ke+1],g[Se+-1]=xe*a[ke]+ye*a[ke+1],ke+=16,ye=g[ve+-2]-g[Se+-2],xe=g[ve+-3]-g[Se+-3];var Ee=ve+-2,Be=g;Be[Ee]=Be[Ee]+g[Se+-2];var Pe=ve+-3,Ae=g;Ae[Pe]=Ae[Pe]+g[Se+-3],g[Se+-2]=ye*a[ke]-xe*a[ke+1],g[Se+-3]=xe*a[ke]+ye*a[ke+1],ke+=16,ye=g[ve+-4]-g[Se+-4],xe=g[ve+-5]-g[Se+-5];var Le=ve+-4,$e=g;$e[Le]=$e[Le]+g[Se+-4];var Ne=ve+-5,Re=g;Re[Ne]=Re[Ne]+g[Se+-5],g[Se+-4]=ye*a[ke]-xe*a[ke+1],g[Se+-5]=xe*a[ke]+ye*a[ke+1],ke+=16,ye=g[ve+-6]-g[Se+-6],xe=g[ve+-7]-g[Se+-7];var Ve=ve+-6,Me=g;Me[Ve]=Me[Ve]+g[Se+-6];var Fe=ve+-7,He=g;He[Fe]=He[Fe]+g[Se+-7],g[Se+-6]=ye*a[ke]-xe*a[ke+1],g[Se+-7]=xe*a[ke]+ye*a[ke+1],ve-=8,Se-=8,ke+=16}for(var Oe=n-1-h,Ue=0,De=Oe,ze=Oe+-(t>>4),We=1+(t>>5>>2);0<--We;){var Ge=g[De]-g[ze],je=g[De+-1]-g[ze+-1],Ke=De,Xe=g;Xe[Ke]=Xe[Ke]+g[ze];var Ye=De+-1,Ze=g;Ze[Ye]=Ze[Ye]+g[ze+-1],g[ze]=Ge*a[Ue]-je*a[Ue+1],g[ze+-1]=je*a[Ue]+Ge*a[Ue+1],Ue+=16,Ge=g[De+-2]-g[ze+-2],je=g[De+-3]-g[ze+-3];var Qe=De+-2,qe=g;qe[Qe]=qe[Qe]+g[ze+-2];var Je=De+-3,et=g;et[Je]=et[Je]+g[ze+-3],g[ze+-2]=Ge*a[Ue]-je*a[Ue+1],g[ze+-3]=je*a[Ue]+Ge*a[Ue+1],Ue+=16,Ge=g[De+-4]-g[ze+-4],je=g[De+-5]-g[ze+-5];var tt=De+-4,at=g;at[tt]=at[tt]+g[ze+-4];var rt=De+-5,it=g;it[rt]=it[rt]+g[ze+-5],g[ze+-4]=Ge*a[Ue]-je*a[Ue+1],g[ze+-5]=je*a[Ue]+Ge*a[Ue+1],Ue+=16,Ge=g[De+-6]-g[ze+-6],je=g[De+-7]-g[ze+-7];var st=De+-6,nt=g;nt[st]=nt[st]+g[ze+-6];var ot=De+-7,ht=g;ht[ot]=ht[ot]+g[ze+-7],g[ze+-6]=Ge*a[Ue]-je*a[Ue+1],g[ze+-7]=je*a[Ue]+Ge*a[Ue+1],De-=8,ze-=8,Ue+=16}for(var _t=n-1-2*h,lt=0,ut=_t,dt=_t+-(t>>4),ct=1+(t>>5>>2);0<--ct;){var gt=g[ut]-g[dt],pt=g[ut+-1]-g[dt+-1],ft=ut,mt=g;mt[ft]=mt[ft]+g[dt];var kt=ut+-1,vt=g;vt[kt]=vt[kt]+g[dt+-1],g[dt]=gt*a[lt]-pt*a[lt+1],g[dt+-1]=pt*a[lt]+gt*a[lt+1],lt+=16,gt=g[ut+-2]-g[dt+-2],pt=g[ut+-3]-g[dt+-3];var St=ut+-2,bt=g;bt[St]=bt[St]+g[dt+-2];var yt=ut+-3,xt=g;xt[yt]=xt[yt]+g[dt+-3],g[dt+-2]=gt*a[lt]-pt*a[lt+1],g[dt+-3]=pt*a[lt]+gt*a[lt+1],lt+=16,gt=g[ut+-4]-g[dt+-4],pt=g[ut+-5]-g[dt+-5];var wt=ut+-4,It=g;It[wt]=It[wt]+g[dt+-4];var Tt=ut+-5,Ct=g;Ct[Tt]=Ct[Tt]+g[dt+-5],g[dt+-4]=gt*a[lt]-pt*a[lt+1],g[dt+-5]=pt*a[lt]+gt*a[lt+1],lt+=16,gt=g[ut+-6]-g[dt+-6],pt=g[ut+-7]-g[dt+-7];var Et=ut+-6,Bt=g;Bt[Et]=Bt[Et]+g[dt+-6];var Pt=ut+-7,At=g;At[Pt]=At[Pt]+g[dt+-7],g[dt+-6]=gt*a[lt]-pt*a[lt+1],g[dt+-7]=pt*a[lt]+gt*a[lt+1],ut-=8,dt-=8,lt+=16}for(var Lt=n-1-3*h,$t=0,Nt=Lt,Rt=Lt+-(t>>4),Vt=1+(t>>5>>2);0<--Vt;){var Mt=g[Nt]-g[Rt],Ft=g[Nt+-1]-g[Rt+-1],Ht=Nt,Ot=g;Ot[Ht]=Ot[Ht]+g[Rt];var Ut=Nt+-1,Dt=g;Dt[Ut]=Dt[Ut]+g[Rt+-1],g[Rt]=Mt*a[$t]-Ft*a[$t+1],g[Rt+-1]=Ft*a[$t]+Mt*a[$t+1],$t+=16,Mt=g[Nt+-2]-g[Rt+-2],Ft=g[Nt+-3]-g[Rt+-3];var zt=Nt+-2,Wt=g;Wt[zt]=Wt[zt]+g[Rt+-2];var Gt=Nt+-3,jt=g;jt[Gt]=jt[Gt]+g[Rt+-3],g[Rt+-2]=Mt*a[$t]-Ft*a[$t+1],g[Rt+-3]=Ft*a[$t]+Mt*a[$t+1],$t+=16,Mt=g[Nt+-4]-g[Rt+-4],Ft=g[Nt+-5]-g[Rt+-5];var Kt=Nt+-4,Xt=g;Xt[Kt]=Xt[Kt]+g[Rt+-4];var Yt=Nt+-5,Zt=g;Zt[Yt]=Zt[Yt]+g[Rt+-5],g[Rt+-4]=Mt*a[$t]-Ft*a[$t+1],g[Rt+-5]=Ft*a[$t]+Mt*a[$t+1],$t+=16,Mt=g[Nt+-6]-g[Rt+-6],Ft=g[Nt+-7]-g[Rt+-7];var Qt=Nt+-6,qt=g;qt[Qt]=qt[Qt]+g[Rt+-6];var Jt=Nt+-7,ea=g;ea[Jt]=ea[Jt]+g[Rt+-7],g[Rt+-6]=Mt*a[$t]-Ft*a[$t+1],g[Rt+-7]=Ft*a[$t]+Mt*a[$t+1],Nt-=8,Rt-=8,$t+=16}for(var ta=2,aa=w-3>>1;ta<aa;)for(var ra=ta++,ia=t>>ra+2,sa=ia>>1,na=0,oa=1<<ra+1;na<oa;)for(var ha=n-1-ia*na++,_a=1<<ra+3,la=0,ua=ha,da=ha+-sa,ca=1+(t>>ra+4>>2);0<--ca;){var ga=g[ua]-g[da],pa=g[ua+-1]-g[da+-1],fa=ua,ma=g;ma[fa]=ma[fa]+g[da];var ka=ua+-1,va=g;va[ka]=va[ka]+g[da+-1],g[da]=ga*a[la]-pa*a[la+1],g[da+-1]=pa*a[la]+ga*a[la+1],la+=_a,ga=g[ua+-2]-g[da+-2],pa=g[ua+-3]-g[da+-3];var Sa=ua+-2,ba=g;ba[Sa]=ba[Sa]+g[da+-2];var ya=ua+-3,xa=g;xa[ya]=xa[ya]+g[da+-3],g[da+-2]=ga*a[la]-pa*a[la+1],g[da+-3]=pa*a[la]+ga*a[la+1],la+=_a,ga=g[ua+-4]-g[da+-4],pa=g[ua+-5]-g[da+-5];var wa=ua+-4,Ia=g;Ia[wa]=Ia[wa]+g[da+-4];var Ta=ua+-5,Ca=g;Ca[Ta]=Ca[Ta]+g[da+-5],g[da+-4]=ga*a[la]-pa*a[la+1],g[da+-5]=pa*a[la]+ga*a[la+1],la+=_a,ga=g[ua+-6]-g[da+-6],pa=g[ua+-7]-g[da+-7];var Ea=ua+-6,Ba=g;Ba[Ea]=Ba[Ea]+g[da+-6];var Pa=ua+-7,Aa=g;Aa[Pa]=Aa[Pa]+g[da+-7],g[da+-6]=ga*a[la]-pa*a[la+1],g[da+-7]=pa*a[la]+ga*a[la+1],ua-=8,da-=8,la+=_a}for(var La=w-3>>1,$a=w-6;La<$a;)for(var Na=La++,Ra=t>>Na+2,Va=1<<Na+3,Ma=Ra>>1,Fa=1<<Na+1,Ha=0,Oa=n-1,Ua=(t>>Na+6)+1;0<--Ua;){for(var Da=a[Ha],za=a[Ha+1],Wa=a[Ha+Va],Ga=a[Ha+Va+1],ja=a[Ha+2*Va],Ka=a[Ha+2*Va+1],Xa=a[Ha+3*Va],Ya=a[Ha+3*Va+1],Za=Oa,Qa=Oa+-Ma,qa=Fa+1;0<--qa;){var Ja=g[Za]-g[Qa],er=g[Za+-1]-g[Qa+-1];g[Za]=g[Za]+g[Qa],g[Za+-1]=g[Za+-1]+g[Qa+-1],g[Qa]=Ja*Da-er*za,g[Qa+-1]=er*Da+Ja*za,Ja=g[Za+-2]-g[Qa+-2],er=g[Za+-3]-g[Qa+-3],g[Za+-2]=g[Za+-2]+g[Qa+-2],g[Za+-3]=g[Za+-3]+g[Qa+-3],g[Qa+-2]=Ja*Wa-er*Ga,g[Qa+-3]=er*Wa+Ja*Ga,Ja=g[Za+-4]-g[Qa+-4],er=g[Za+-5]-g[Qa+-5],g[Za+-4]=g[Za+-4]+g[Qa+-4],g[Za+-5]=g[Za+-5]+g[Qa+-5],g[Qa+-4]=Ja*ja-er*Ka,g[Qa+-5]=er*ja+Ja*Ka,Ja=g[Za+-6]-g[Qa+-6],er=g[Za+-7]-g[Qa+-7],g[Za+-6]=g[Za+-6]+g[Qa+-6],g[Za+-7]=g[Za+-7]+g[Qa+-7],g[Qa+-6]=Ja*Xa-er*Ya,g[Qa+-7]=er*Xa+Ja*Ya,Za-=Ra,Qa-=Ra}Ha+=4*Va,Oa-=8}for(var tr=n-1,ar=a[t>>3],rr=tr,ir=tr-16*(t>>5);ir<rr;){var sr=g[rr],nr=g[rr+-8];g[rr+-8]=sr-nr,g[rr]=sr+nr,sr=g[rr+-1],nr=g[rr+-9],g[rr+-9]=sr-nr,g[rr+-1]=sr+nr;var or=(sr=g[rr+-2])-(nr=g[rr+-10]);g[rr+-2]=sr+nr;var hr=(sr=g[rr+-3])-(nr=g[rr+-11]);g[rr+-3]=sr+nr,g[rr+-10]=(or+hr)*ar,g[rr+-11]=(hr-or)*ar,sr=g[rr+-4],or=(nr=g[rr+-12])-sr,g[rr+-4]=sr+nr,hr=(sr=g[rr+-5])-(nr=g[rr+-13]),g[rr+-5]=sr+nr,g[rr+-12]=hr,g[rr+-13]=or,sr=g[rr+-6],or=(nr=g[rr+-14])-sr,g[rr+-6]=sr+nr,hr=(sr=g[rr+-7])-(nr=g[rr+-15]),g[rr+-7]=sr+nr,g[rr+-14]=(or+hr)*ar,g[rr+-15]=(or-hr)*ar;var _r=g[rr],lr=g[rr+-4],ur=_r-lr,dr=_r+lr,cr=(_r=g[rr+-2])+(lr=g[rr+-6]),gr=_r-lr;g[rr]=dr+cr,g[rr+-2]=dr-cr;var pr=g[rr+-3]-g[rr+-7];g[rr+-4]=ur+pr,g[rr+-6]=ur-pr;var fr=(_r=g[rr+-1])-(lr=g[rr+-5]),mr=_r+lr,kr=g[rr+-3]+g[rr+-7];g[rr+-1]=mr+kr,g[rr+-3]=mr-kr,g[rr+-5]=fr-gr,g[rr+-7]=fr+gr;var vr=rr-8,Sr=g[vr],br=g[vr+-4],yr=Sr-br,xr=Sr+br,wr=(Sr=g[vr+-2])+(br=g[vr+-6]),Ir=Sr-br;g[vr]=xr+wr,g[vr+-2]=xr-wr;var Tr=g[vr+-3]-g[vr+-7];g[vr+-4]=yr+Tr,g[vr+-6]=yr-Tr;var Cr=(Sr=g[vr+-1])-(br=g[vr+-5]),Er=Sr+br,Br=g[vr+-3]+g[vr+-7];g[vr+-1]=Er+Br,g[vr+-3]=Er-Br,g[vr+-5]=Cr-Ir,g[vr+-7]=Cr+Ir,rr-=16}for(var Pr=0,Ar=o-4,Lr=n-4;0<=Ar;){var $r=s[Pr];p[Lr+3]=g[$r],p[Lr+2]=g[$r+1],p[Ar+3]=g[$r+2],p[Ar+2]=g[$r+3],$r=s[Pr+1],p[Lr+1]=g[$r],p[Lr]=g[$r+1],p[Ar+1]=g[$r+2],p[Ar]=g[$r+3],Ar-=4,Lr-=4,Pr+=2}for(var Nr=0,Rr=0,Vr=n-4;Rr<Vr;){var Mr=p[Rr]-p[Vr+2],Fr=p[Rr+1]+p[Vr+3],Hr=i[Nr+1]*Mr+i[Nr]*Fr,Or=i[Nr+1]*Fr-i[Nr]*Mr,Ur=p[Rr]+p[Vr+2],Dr=p[Rr+1]-p[Vr+3];p[Rr]=Ur+Hr,p[Rr+1]=Dr+Or,p[Vr+2]=Ur-Hr,p[Vr+3]=Or-Dr,Mr=p[Rr+2]-p[Vr],Fr=p[Rr+3]+p[Vr+1],Hr=i[Nr+3]*Mr+i[Nr+2]*Fr,Or=i[Nr+3]*Fr-i[Nr+2]*Mr,Ur=p[Rr+2]+p[Vr],Dr=p[Rr+3]-p[Vr+1],p[Rr+2]=Ur+Hr,p[Rr+3]=Dr+Or,p[Vr]=Ur-Hr,p[Vr+1]=Or-Dr,Nr+=4,Rr+=4,Vr-=4}for(var zr=n-8,Wr=n-8,Gr=0,jr=n-4,Kr=n,Xr=t-4;0<=Wr;){var Yr=_[Wr+6]*r[zr+7]-_[Wr+7]*r[zr+6],Zr=-_[Wr+6]*r[zr+6]-_[Wr+7]*r[zr+7];e[Gr]=Yr,e[jr+3]=-Yr,e[Kr]=Zr,e[Xr+3]=Zr;var Qr=_[Wr+4]*r[zr+5]-_[Wr+5]*r[zr+4],qr=-_[Wr+4]*r[zr+4]-_[Wr+5]*r[zr+5];e[Gr+1]=Qr,e[jr+2]=-Qr,e[Kr+1]=qr,e[Xr+2]=qr,Yr=_[Wr+2]*r[zr+3]-_[Wr+3]*r[zr+2],Zr=-_[Wr+2]*r[zr+2]-_[Wr+3]*r[zr+3],e[Gr+2]=Yr,e[jr+1]=-Yr,e[Kr+2]=Zr,e[Xr+1]=Zr,Qr=_[Wr]*r[zr+1]-_[Wr+1]*r[zr],qr=-_[Wr]*r[zr]-_[Wr+1]*r[zr+1],e[Gr+3]=Qr,e[jr]=-Qr,e[Kr+3]=qr,e[Xr]=qr,zr-=8,Wr-=8,Gr+=4,Kr+=4,jr-=4,Xr-=4}},kha_audio2_ogg_tools_Mdct.step3Iter0Loop=function(e,t,a,r,i){for(var s=a,n=a+r,o=0,h=1+(e>>2);0<--h;){var _=t[s]-t[n],l=t[s+-1]-t[n+-1],u=s,d=t;d[u]=d[u]+t[n];var c=s+-1,g=t;g[c]=g[c]+t[n+-1],t[n]=_*i[o]-l*i[o+1],t[n+-1]=l*i[o]+_*i[o+1],o+=8,_=t[s+-2]-t[n+-2],l=t[s+-3]-t[n+-3];var p=s+-2,f=t;f[p]=f[p]+t[n+-2];var m=s+-3,k=t;k[m]=k[m]+t[n+-3],t[n+-2]=_*i[o]-l*i[o+1],t[n+-3]=l*i[o]+_*i[o+1],o+=8,_=t[s+-4]-t[n+-4],l=t[s+-5]-t[n+-5];var v=s+-4,S=t;S[v]=S[v]+t[n+-4];var b=s+-5,y=t;y[b]=y[b]+t[n+-5],t[n+-4]=_*i[o]-l*i[o+1],t[n+-5]=l*i[o]+_*i[o+1],o+=8,_=t[s+-6]-t[n+-6],l=t[s+-7]-t[n+-7];var x=s+-6,w=t;w[x]=w[x]+t[n+-6];var I=s+-7,T=t;T[I]=T[I]+t[n+-7],t[n+-6]=_*i[o]-l*i[o+1],t[n+-7]=l*i[o]+_*i[o+1],o+=8,s-=8,n-=8}},kha_audio2_ogg_tools_Mdct.step3InnerRLoop=function(e,t,a,r,i,s){for(var n=0,o=a,h=a+r,_=1+(e>>2);0<--_;){var l=t[o]-t[h],u=t[o+-1]-t[h+-1],d=o,c=t;c[d]=c[d]+t[h];var g=o+-1,p=t;p[g]=p[g]+t[h+-1],t[h]=l*i[n]-u*i[n+1],t[h+-1]=u*i[n]+l*i[n+1],n+=s,l=t[o+-2]-t[h+-2],u=t[o+-3]-t[h+-3];var f=o+-2,m=t;m[f]=m[f]+t[h+-2];var k=o+-3,v=t;v[k]=v[k]+t[h+-3],t[h+-2]=l*i[n]-u*i[n+1],t[h+-3]=u*i[n]+l*i[n+1],n+=s,l=t[o+-4]-t[h+-4],u=t[o+-5]-t[h+-5];var S=o+-4,b=t;b[S]=b[S]+t[h+-4];var y=o+-5,x=t;x[y]=x[y]+t[h+-5],t[h+-4]=l*i[n]-u*i[n+1],t[h+-5]=u*i[n]+l*i[n+1],n+=s,l=t[o+-6]-t[h+-6],u=t[o+-7]-t[h+-7];var w=o+-6,I=t;I[w]=I[w]+t[h+-6];var T=o+-7,C=t;C[T]=C[T]+t[h+-7],t[h+-6]=l*i[n]-u*i[n+1],t[h+-7]=u*i[n]+l*i[n+1],o-=8,h-=8,n+=s}},kha_audio2_ogg_tools_Mdct.step3InnerSLoop=function(e,t,a,r,i,s,n,o){for(var h=i[s],_=i[s+1],l=i[s+n],u=i[s+n+1],d=i[s+2*n],c=i[s+2*n+1],g=i[s+3*n],p=i[s+3*n+1],f=a,m=a+r,k=e+1;0<--k;){var v=t[f]-t[m],S=t[f+-1]-t[m+-1];t[f]=t[f]+t[m],t[f+-1]=t[f+-1]+t[m+-1],t[m]=v*h-S*_,t[m+-1]=S*h+v*_,v=t[f+-2]-t[m+-2],S=t[f+-3]-t[m+-3],t[f+-2]=t[f+-2]+t[m+-2],t[f+-3]=t[f+-3]+t[m+-3],t[m+-2]=v*l-S*u,t[m+-3]=S*l+v*u,v=t[f+-4]-t[m+-4],S=t[f+-5]-t[m+-5],t[f+-4]=t[f+-4]+t[m+-4],t[f+-5]=t[f+-5]+t[m+-5],t[m+-4]=v*d-S*c,t[m+-5]=S*d+v*c,v=t[f+-6]-t[m+-6],S=t[f+-7]-t[m+-7],t[f+-6]=t[f+-6]+t[m+-6],t[f+-7]=t[f+-7]+t[m+-7],t[m+-6]=v*g-S*p,t[m+-7]=S*g+v*p,f-=o,m-=o}},kha_audio2_ogg_tools_Mdct.iter54=function(e,t){var a=e[t],r=e[t+-4],i=a-r,s=a+r,n=(a=e[t+-2])+(r=e[t+-6]),o=a-r;e[t]=s+n,e[t+-2]=s-n;var h=e[t+-3]-e[t+-7];e[t+-4]=i+h,e[t+-6]=i-h;var _=(a=e[t+-1])-(r=e[t+-5]),l=a+r,u=e[t+-3]+e[t+-7];e[t+-1]=l+u,e[t+-3]=l-u,e[t+-5]=_-o,e[t+-7]=_+o},kha_audio2_ogg_tools_Mdct.step3InnerSLoopLd654=function(e,t,a,r,i){for(var s=r[i>>3],n=a,o=a-16*e;o<n;){var h=t[n],_=t[n+-8];t[n+-8]=h-_,t[n]=h+_,h=t[n+-1],_=t[n+-9],t[n+-9]=h-_,t[n+-1]=h+_;var l=(h=t[n+-2])-(_=t[n+-10]);t[n+-2]=h+_;var u=(h=t[n+-3])-(_=t[n+-11]);t[n+-3]=h+_,t[n+-10]=(l+u)*s,t[n+-11]=(u-l)*s,h=t[n+-4],l=(_=t[n+-12])-h,t[n+-4]=h+_,u=(h=t[n+-5])-(_=t[n+-13]),t[n+-5]=h+_,t[n+-12]=u,t[n+-13]=l,h=t[n+-6],l=(_=t[n+-14])-h,t[n+-6]=h+_,u=(h=t[n+-7])-(_=t[n+-15]),t[n+-7]=h+_,t[n+-14]=(l+u)*s,t[n+-15]=(l-u)*s;var d=t[n],c=t[n+-4],g=d-c,p=d+c,f=(d=t[n+-2])+(c=t[n+-6]),m=d-c;t[n]=p+f,t[n+-2]=p-f;var k=t[n+-3]-t[n+-7];t[n+-4]=g+k,t[n+-6]=g-k;var v=(d=t[n+-1])-(c=t[n+-5]),S=d+c,b=t[n+-3]+t[n+-7];t[n+-1]=S+b,t[n+-3]=S-b,t[n+-5]=v-m,t[n+-7]=v+m;var y=n-8,x=t[y],w=t[y+-4],I=x-w,T=x+w,C=(x=t[y+-2])+(w=t[y+-6]),E=x-w;t[y]=T+C,t[y+-2]=T-C;var B=t[y+-3]-t[y+-7];t[y+-4]=I+B,t[y+-6]=I-B;var P=(x=t[y+-1])-(w=t[y+-5]),A=x+w,L=t[y+-3]+t[y+-7];t[y+-1]=A+L,t[y+-3]=A-L,t[y+-5]=P-E,t[y+-7]=P+E,n-=16}};var kha_audio2_ogg_vorbis_Reader=$hxClasses["kha.audio2.ogg.vorbis.Reader"]=function(e,t,a){this.seekFunc=t,this.inputLength=a,this.decoder=kha_audio2_ogg_vorbis_VorbisDecoder.start(e),this.decoder.setupSampleNumber(t,a),this.loopStart=this.get_header().comment.get_loopStart(),this.loopLength=this.get_header().comment.get_loopLength()};kha_audio2_ogg_vorbis_Reader.__name__=!0,kha_audio2_ogg_vorbis_Reader.openFromBytes=function(e){var t=new haxe_io_BytesInput(e),a=t;return new kha_audio2_ogg_vorbis_Reader(t,function(e){kha_audio2_ogg_vorbis_Reader.seekBytes(a,e)},e.length)},kha_audio2_ogg_vorbis_Reader.seekBytes=function(e,t){e.set_position(t)},kha_audio2_ogg_vorbis_Reader.readAll=function(e,t,a){null==a&&(a=!1);var r=new haxe_io_BytesInput(e),i=kha_audio2_ogg_vorbis_VorbisDecoder.start(r),s=r;i.setupSampleNumber(function(e){kha_audio2_ogg_vorbis_Reader.seekBytes(s,e)},e.length);for(var n=i.header,o=new Float32Array(4096*n.channel);;){for(var h=i.read(o,4096,n.channel,n.sampleRate,a),_=0,l=h*n.channel;_<l;){var u=_++;t.writeFloat(o[u])}if(0==h)break;h}return i.header},kha_audio2_ogg_vorbis_Reader.prototype={decoder:null,get_header:function(){return this.decoder.header},get_totalSample:function(){return this.decoder.totalSample},get_totalMillisecond:function(){var e=this.decoder.totalSample,t=this.get_header().sampleRate;return _$UInt_UInt_$Impl_$.toFloat(e)/_$UInt_UInt_$Impl_$.toFloat(t)*1e3},get_currentSample:function(){return this.decoder.currentSample},set_currentSample:function(e){return this.decoder.seek(this.seekFunc,this.inputLength,e),this.decoder.currentSample},get_currentMillisecond:function(){var e=this.get_currentSample(),t=this.get_header().sampleRate;return _$UInt_UInt_$Impl_$.toFloat(e)/_$UInt_UInt_$Impl_$.toFloat(t)*1e3},set_currentMillisecond:function(e){return this.set_currentSample(Math.floor(_$UInt_UInt_$Impl_$.toFloat(this.get_header().sampleRate)*(e/1e3))),this.get_currentMillisecond()},loopStart:null,loopLength:null,seekFunc:null,inputLength:null,read:function(e,t,a,r,i){return null==i&&(i=!1),this.decoder.ensurePosition(this.seekFunc),null==t&&(t=this.decoder.totalSample),null==a&&(a=this.get_header().channel),null==r&&(r=this.get_header().sampleRate),this.decoder.read(e,t,a,r,i)},clone:function(){var e=Object.create(kha_audio2_ogg_vorbis_Reader.prototype);return e.seekFunc=this.seekFunc,e.inputLength=this.inputLength,e.decoder=this.decoder.clone(this.seekFunc),e.loopStart=this.loopStart,e.loopLength=this.loopLength,e},sampleToMillisecond:function(e){var t=this.get_header().sampleRate;return _$UInt_UInt_$Impl_$.toFloat(e)/_$UInt_UInt_$Impl_$.toFloat(t)*1e3},millisecondToSample:function(e){return Math.floor(_$UInt_UInt_$Impl_$.toFloat(this.get_header().sampleRate)*(e/1e3))},__class__:kha_audio2_ogg_vorbis_Reader};var kha_audio2_ogg_vorbis_VorbisDecodeState=$hxClasses["kha.audio2.ogg.vorbis.VorbisDecodeState"]=function(e){this.nextSeg=0,this.firstDecode=!1,this.bytesInSeg=0,this.validBits=0,this.input=e,this.inputPosition=0,this.page=new kha_audio2_ogg_vorbis_data_Page,kha_audio2_ogg_tools_Crc32.init()};kha_audio2_ogg_vorbis_VorbisDecodeState.__name__=!0,kha_audio2_ogg_vorbis_VorbisDecodeState.prototype={page:null,eof:null,pFirst:null,pLast:null,validBits:null,inputPosition:null,input:null,discardSamplesDeferred:null,segments:null,bytesInSeg:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,currentSample:null,previousWindow:null,previousLength:null,finalY:null,firstDecode:null,nextSeg:null,acc:null,lastSeg:null,lastSegWhich:null,endSegWithKnownLoc:null,knownLocForPacket:null,error:null,currentLoc:null,currentLocValid:null,firstAudioPageOffset:null,setup:function(e,t){this.inputPosition+=1;var a=this.input.readByte();this.inputPosition+=a;for(var r=new Array(a),i=0,s=a;i<s;){r[i++]=this.input.readByte()}if(this.segments=r,this.endSegWithKnownLoc=-2,-1!=e||-1!=t)for(var n=a-1;0<=n&&!(this.segments[n]<255);)0<=n&&(this.endSegWithKnownLoc=n,this.knownLocForPacket=e),--n;if(this.firstDecode){for(var o=0,h=new kha_audio2_ogg_vorbis_data_ProbedPage,_=0,l=a;_<l;){var u=_++;o+=this.segments[u]}o+=27+a,h.pageStart=this.firstAudioPageOffset,h.pageEnd=h.pageStart+o,h.firstDecodedSample=0,h.lastDecodedSample=e,this.pFirst=h}this.nextSeg=0},clone:function(e){var t=Object.create(kha_audio2_ogg_vorbis_VorbisDecodeState.prototype);return e(this.inputPosition),t.input=this.input,t.eof=this.eof,t.validBits=this.validBits,t.discardSamplesDeferred=this.discardSamplesDeferred,t.firstDecode=this.firstDecode,t.nextSeg=this.nextSeg,t.bytesInSeg=this.bytesInSeg,t.acc=t.acc,t.lastSeg=this.lastSeg,t.lastSegWhich=this.lastSegWhich,t.currentLoc=this.currentLoc,t.currentLocValid=this.currentLocValid,t.inputPosition=this.inputPosition,t.firstAudioPageOffset=this.firstAudioPageOffset,t.error=this.error,t.segments=this.segments,t.pFirst=this.pFirst,t.pLast=this.pLast,t.page=this.page.clone(),t},next:function(){if(this.lastSeg)return 0;if(-1==this.nextSeg){this.lastSegWhich=this.segments.length-1;try{this.page.start(this)}catch(e){var t=e instanceof js__$Boot_HaxeError?e.val:e;if(t instanceof kha_audio2_ogg_vorbis_data_ReaderError)return this.lastSeg=!0,this.error=t,0;throw e}if(0==(1&this.page.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CONTINUED_PACKET_FLAG_INVALID,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:171,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}))}var e=this.segments[this.nextSeg++];if(e<255&&(this.lastSeg=!0,this.lastSegWhich=this.nextSeg-1),this.nextSeg>=this.segments.length&&(this.nextSeg=-1),0!=this.bytesInSeg)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:184,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}));return this.bytesInSeg=e},startPacket:function(){for(;-1==this.nextSeg;)if(this.page.start(this),0!=(1&this.page.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:193,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"startPacket"}));this.lastSeg=!1,this.validBits=0,this.bytesInSeg=0},maybeStartPacket:function(){if(-1==this.nextSeg){var t,e,a,r,i=!1;try{this.inputPosition+=1,t=this.input.readByte()}catch(e){var s=e instanceof js__$Boot_HaxeError?e.val:e;if(!(s instanceof haxe_io_Eof))throw e;i=!0,t=0}if(i)return!1;if(79==t?(this.inputPosition+=1,r=103!=this.input.readByte()):r=!0,r?a=!0:(this.inputPosition+=1,a=103!=this.input.readByte()),a?e=!0:(this.inputPosition+=1,e=83!=this.input.readByte()),e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:218,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"maybeStartPacket"}));this.page.startWithoutCapturePattern(this)}return this.startPacket(),!0},readBits:function(e){if(this.validBits<0)return 0;if(this.validBits<e){if(24<e)return this.readBits(24)+(this.readBits(e-24)<<24);for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next())){this.validBits=-1;break}if(this.bytesInSeg--,this.inputPosition+=1,this.acc=this.acc+(this.input.readByte()<<this.validBits),this.validBits+=8,!(this.validBits<e))break}if(this.validBits<0)return 0;var t=this.acc&(1<<e)-1;return this.acc=this.acc>>>e,this.validBits-=e,t}var a=this.acc&(1<<e)-1;return this.acc=this.acc>>>e,this.validBits-=e,a},readPacketRaw:function(){return 0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1},readPacket:function(){var e;return 0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,e=this.input.readByte()):e=-1,this.validBits=0,e},flushPacket:function(){for(;0!=this.bytesInSeg||!this.lastSeg&&0!=this.next();)this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()},vorbisValidate:function(){var e,t,a,r,i,s,n=new haxe_io_Bytes(new ArrayBuffer(6));if(0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,e=this.input.readByte()):e=-1,this.validBits=0,n.b[0]=e,0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,t=this.input.readByte()):t=-1,this.validBits=0,n.b[1]=t,0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,a=this.input.readByte()):a=-1,this.validBits=0,n.b[2]=a,0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,r=this.input.readByte()):r=-1,this.validBits=0,n.b[3]=r,0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,i=this.input.readByte()):i=-1,this.validBits=0,n.b[4]=i,0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,s=this.input.readByte()):s=-1,this.validBits=0,n.b[5]=s,"vorbis"!=n.toString())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}))},firstPageValidate:function(){if(1!=this.segments.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"segmentCount",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:308,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}));if(30!=this.segments[0])throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:311,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}))},startFirstDecode:function(){this.firstAudioPageOffset=this.inputPosition,this.firstDecode=!0},capturePattern:function(){var e,t,a;if(this.inputPosition+=1,79==this.input.readByte()?(this.inputPosition+=1,a=103!=this.input.readByte()):a=!0,a?t=!0:(this.inputPosition+=1,t=103!=this.input.readByte()),t?e=!0:(this.inputPosition+=1,e=83!=this.input.readByte()),e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}))},skip:function(e){this.inputPosition+=e;for(var t=new Array(e),a=0,r=e;a<r;){t[a++]=this.input.readByte()}},prepHuffman:function(){if(this.validBits<=24)for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next()))return;if(this.bytesInSeg--,this.inputPosition+=1,this.acc=this.acc+(this.input.readByte()<<this.validBits),this.validBits+=8,!(this.validBits<=24))break}},decode:function(e){this.validBits<10&&this.prepHuffman();var t,a=e.fastHuffman[1023&this.acc];if(0<=a){var r=e.codewordLengths[a];this.acc=this.acc>>>r,this.validBits-=r,this.validBits<0?(this.validBits=0,t=-1):t=a}else t=this.decodeScalarRaw(e);return e.sparse&&(t=e.sortedValues[t]),t},decodeRaw:function(e){this.validBits<10&&this.prepHuffman();var t=e.fastHuffman[1023&this.acc];if(0<=t){var a=e.codewordLengths[t];return this.acc=this.acc>>>a,this.validBits-=a,this.validBits<0?(this.validBits=0,-1):t}return this.decodeScalarRaw(e)},isLastByte:function(){return 0==this.bytesInSeg&&this.lastSeg},finishDecodePacket:function(e,t,a){var r=a.left.start,i=!1,s=t>>1;if(this.firstDecode)this.currentLoc=-s,this.discardSamplesDeferred=t-a.right.end,i=!0,this.firstDecode=!1;else if(0!=this.discardSamplesDeferred)a.left.start+=this.discardSamplesDeferred,r=a.left.start,this.discardSamplesDeferred=0;else;if(this.lastSegWhich==this.endSegWithKnownLoc){if(i&&0!=(4&this.page.flag)){var n=this.knownLocForPacket-(t-a.right.end);if(n<this.currentLoc+a.right.end){var o=n<this.currentLoc?0:n-this.currentLoc;return o+=a.left.start,this.currentLoc+=o,{len:o,left:r,right:a.right.start}}}this.currentLoc=this.knownLocForPacket-(s-a.left.start),i=!0}return i&&(this.currentLoc+=a.right.start-a.left.start),{len:a.right.end,left:r,right:a.right.start}},readInt32:function(){return this.inputPosition+=4,this.input.readInt32()},readByte:function(){return this.inputPosition+=1,this.input.readByte()},read:function(e){this.inputPosition+=e;for(var t=new Array(e),a=0,r=e;a<r;){t[a++]=this.input.readByte()}return t},readBytes:function(e){return this.inputPosition+=e,this.input.read(e)},readString:function(e){return this.inputPosition+=e,this.input.readString(e)},getSampleNumber:function(e,t){var a=this.inputPosition,r=_$UInt_UInt_$Impl_$.gte(t,65536)&&_$UInt_UInt_$Impl_$.gte(t-65536,this.firstAudioPageOffset)?t-65536:this.firstAudioPageOffset;e(this.inputPosition=r);var i=0,s=!1,n=this.findPage(e,t);switch(n._hx_index){case 0:var o=n.last;i=n.end,s=o;break;case 1:throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}))}var h=this.inputPosition;e:for(;!s;){e(this.inputPosition=i);var _=this.findPage(e,t);switch(_._hx_index){case 0:var l=_.last;i=_.end,s=l;break;case 1:break e}r=h+1,h=this.inputPosition}e(this.inputPosition=h),this.inputPosition+=6;for(var u=new Array(6),d=0;d<6;){u[d++]=this.input.readByte()}this.inputPosition+=4;var c=this.input.readInt32();this.inputPosition+=4;var g=this.input.readInt32();if(-1==c&&-1==g||0<g)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:553,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}));return this.pLast=new kha_audio2_ogg_vorbis_data_ProbedPage,this.pLast.pageStart=h,this.pLast.pageEnd=i,this.pLast.lastDecodedSample=c,this.pLast.firstDecodedSample=null,this.pLast.afterPreviousPageStart=r,e(this.inputPosition=a),c},forcePageResync:function(){this.nextSeg=-1},setInputOffset:function(e,t){e(this.inputPosition=t)},findPage:function(e,t){try{for(;;){if(this.inputPosition+=1,79==this.input.readByte()){var a,r,i=this.inputPosition;if(t<i-25)return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound;if(this.inputPosition+=1,103==this.input.readByte()?(this.inputPosition+=1,r=103!=this.input.readByte()):r=!0,r?a=!0:(this.inputPosition+=1,a=83!=this.input.readByte()),a)continue;var s=new Array(27);if(s[0]=79,s[1]=103,s[2]=103,s[3]=83,this.inputPosition+=1,s[4]=this.input.readByte(),this.inputPosition+=1,s[5]=this.input.readByte(),this.inputPosition+=1,s[6]=this.input.readByte(),this.inputPosition+=1,s[7]=this.input.readByte(),this.inputPosition+=1,s[8]=this.input.readByte(),this.inputPosition+=1,s[9]=this.input.readByte(),this.inputPosition+=1,s[10]=this.input.readByte(),this.inputPosition+=1,s[11]=this.input.readByte(),this.inputPosition+=1,s[12]=this.input.readByte(),this.inputPosition+=1,s[13]=this.input.readByte(),this.inputPosition+=1,s[14]=this.input.readByte(),this.inputPosition+=1,s[15]=this.input.readByte(),this.inputPosition+=1,s[16]=this.input.readByte(),this.inputPosition+=1,s[17]=this.input.readByte(),this.inputPosition+=1,s[18]=this.input.readByte(),this.inputPosition+=1,s[19]=this.input.readByte(),this.inputPosition+=1,s[20]=this.input.readByte(),this.inputPosition+=1,s[21]=this.input.readByte(),this.inputPosition+=1,s[22]=this.input.readByte(),this.inputPosition+=1,s[23]=this.input.readByte(),this.inputPosition+=1,s[24]=this.input.readByte(),this.inputPosition+=1,s[25]=this.input.readByte(),this.inputPosition+=1,s[26]=this.input.readByte(),0!=s[4]){e(this.inputPosition=i);continue}var n=s[22]+(s[23]<<8)+(s[24]<<16)+(s[25]<<24);s[22]=0,s[23]=0,s[24]=0;for(var o=s[25]=0,h=0;h<27;){var _=h++;o=o<<8^kha_audio2_ogg_tools_Crc32.table[s[_]^o>>>24]}var l=0;try{for(var u=0,d=s[26];u<d;){u++;this.inputPosition+=1;var c=this.input.readByte();o=o<<8^kha_audio2_ogg_tools_Crc32.table[c^o>>>24],l+=c}for(var g=0,p=l;g<p;){g++;this.inputPosition+=1;var f=this.input.readByte();o=o<<8^kha_audio2_ogg_tools_Crc32.table[f^o>>>24]}}catch(e){var m=e instanceof js__$Boot_HaxeError?e.val:e;if(m instanceof haxe_io_Eof){return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound}throw e}if(o==n){var k=this.inputPosition;return e(this.inputPosition=i-1),kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.Found(k,0!=(4&s[5]))}}}}catch(e){var v=e instanceof js__$Boot_HaxeError?e.val:e;if(v instanceof haxe_io_Eof){return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound}throw e}},analyzePage:function(e,t){var a=new kha_audio2_ogg_vorbis_data_ProbedPage,r=new Array(255);a.pageStart=this.inputPosition,this.inputPosition+=27;for(var i=new Array(27),s=0;s<27;){i[s++]=this.input.readByte()}var n=i;if(79!=n[0]||103!=n[1]||103!=n[2]||83!=n[3])throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:661,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"analyzePage"}));var o=n[26];this.inputPosition+=o;for(var h=new Array(o),_=0,l=o;_<l;){h[_++]=this.input.readByte()}for(var u=h,d=0,c=0,g=n[26];c<g;){d+=u[c++]}if(a.pageEnd=a.pageStart+27+n[26]+d,a.lastDecodedSample=n[6]+(n[7]<<8)+(n[8]<<16)+(n[9]<<16),0!=(4&n[5]))return a.firstDecodedSample=null,e(this.inputPosition=a.pageStart),a;for(var p=0,f=0==(1&n[5]),m=t.modes.length,k=0,v=n[26];k<v;){var S=k++;if(f){if(0==u[S])return e(this.inputPosition=a.pageStart),null;this.inputPosition+=1;var b=this.input.readByte();if(0!=(1&b))return e(this.inputPosition=a.pageStart),null;b>>=1;var y=m-1,x=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];if(m<=(b&=(1<<(y<16384?y<16?x[y]:y<512?5+x[y>>5]:10+x[y>>10]:y<16777216?y<524288?15+x[y>>15]:20+x[y>>20]:y<536870912?25+x[y>>25]:y<-2147483648?30+x[y>>30]:0))-1))return e(this.inputPosition=a.pageStart),null;r[p++]=t.modes[b].blockflag;var w=u[S]-1;this.inputPosition+=w;for(var I=new Array(w),T=0,C=w;T<C;){I[T++]=this.input.readByte()}}else{var E=u[S];this.inputPosition+=E;for(var B=new Array(E),P=0,A=E;P<A;){B[P++]=this.input.readByte()}}f=u[S]<255}var L=0;1<p&&(L+=r[p-1]?t.blocksize1:t.blocksize0);for(var $=p-2;1<=$;)r[--$]?r[$+1]?L+=t.blocksize1>>1:L+=(t.blocksize1-t.blocksize0>>2)+(t.blocksize0>>1):L+=t.blocksize0>>1,--$;return a.firstDecodedSample=a.lastDecodedSample-L,e(this.inputPosition=a.pageStart),a},decodeScalarRaw:function(e){if(this.prepHuffman(),null==e.sortedCodewords&&null==e.codewords)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:788,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}));var t=e.codewordLengths,a=e.codewords,r=e.sortedCodewords;if(8<e.entries?null!=r:null!=a){for(var i=this.acc,s=(i=(-16711936&(i=(-252645136&(i=(-858993460&(i=(-1431655766&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8)>>>16|i<<16,n=0,o=e.sortedEntries;1<o;){var h=n+(o>>1);_$UInt_UInt_$Impl_$.gte(s,r[h])?(n=h,o-=o>>1):o>>=1}e.sparse||(n=e.sortedValues[n]);var _=t[n];return this.validBits>=_?(this.acc=this.acc>>>_,this.validBits-=_,n):(this.validBits=0,-1)}if(e.sparse)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:830,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}));for(var l=0,u=e.entries;l<u;){var d=l++,c=t[d];if(255!=c&&a[d]==(this.acc&(1<<c)-1))return this.validBits>=c?(this.acc=this.acc>>>c,this.validBits-=c,d):(this.validBits=0,-1)}return this.error=new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:847,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}),this.validBits=0,-1},__class__:kha_audio2_ogg_vorbis_VorbisDecodeState};var kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult=$hxEnums["kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult"]={__ename__:!0,__constructs__:["Found","NotFound"],Found:($_=function(e,t){return{_hx_index:0,end:e,last:t,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:$estr}},$_.__params__=["end","last"],$_),NotFound:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:$estr}},kha_audio2_ogg_vorbis_VorbisDecoder=$hxClasses["kha.audio2.ogg.vorbis.VorbisDecoder"]=function(e,t){this.header=e,this.decodeState=t,this.totalSample=null,this.currentSample=0,this.previousLength=0;var a=new Array(e.channel);this.channelBuffers=a;var r=new Array(e.channel);this.previousWindow=r;var i=new Array(e.channel);this.finalY=i;for(var s=0,n=e.channel;s<n;){var o=s++,h=this.channelBuffers,_=new Array(e.blocksize1);h[o]=_;var l=this.previousWindow,u=new Array(e.blocksize1/2|0);l[o]=u,this.finalY[o]=[]}var d=new Array(2);this.a=d;var c=new Array(2);this.b=c;var g=new Array(2);this.c=g;var p=new Array(2);this.window=p;var f=new Array(2);this.bitReverseData=f,this.initBlocksize(0,e.blocksize0),this.initBlocksize(1,e.blocksize1)};kha_audio2_ogg_vorbis_VorbisDecoder.__name__=!0,kha_audio2_ogg_vorbis_VorbisDecoder.start=function(e){var t=new kha_audio2_ogg_vorbis_VorbisDecodeState(e),a=kha_audio2_ogg_vorbis_data_Header.read(t),r=new kha_audio2_ogg_vorbis_VorbisDecoder(a,t);return t.startFirstDecode(),r.pumpFirstFrame(),r},kha_audio2_ogg_vorbis_VorbisDecoder.prototype={previousWindow:null,previousLength:null,finalY:null,a:null,b:null,c:null,window:null,bitReverseData:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,header:null,currentSample:null,totalSample:null,decodeState:null,read:function(e,t,a,r,i){var s=this.header.sampleRate;if(0!=(_$UInt_UInt_$Impl_$.toFloat(r)%_$UInt_UInt_$Impl_$.toFloat(s)|0))throw new js__$Boot_HaxeError("Unsupported sampleRate : can't convert "+Std.string(_$UInt_UInt_$Impl_$.toFloat(this.header.sampleRate))+" to "+r);if(a%this.header.channel!=0)throw new js__$Boot_HaxeError("Unsupported channels : can't convert "+this.header.channel+" to "+a);var n=this.header.sampleRate,o=_$UInt_UInt_$Impl_$.toFloat(r)/_$UInt_UInt_$Impl_$.toFloat(n)|0,h=a/this.header.channel|0,_=0,l=Math.floor(t/o);null!=this.totalSample&&l>this.totalSample-this.currentSample&&(l=this.totalSample-this.currentSample);for(var u=0;_<l;){var d=this.channelBufferEnd-this.channelBufferStart;l-_<=d&&(d=l-_);for(var c=this.channelBufferStart,g=this.channelBufferStart+d;c<g;)for(var p=c++,f=0,m=o;f<m;){f++;for(var k=0,v=this.header.channel;k<v;)for(var S=k++,b=0,y=h;b<y;){b++;var x=this.channelBuffers[S][p];1<x?x=1:x<-1&&(x=-1),i&&(e[u]=x,++u)}}if(_+=d,this.channelBufferStart+=d,_==l||0==this.getFrameFloat())break}for(var w=_,I=l;w<I;){w++;for(var T=0,C=o;T<C;){T++;for(var E=0,B=this.header.channel;E<B;){E++;for(var P=0,A=h;P<A;){P++;i&&(e[u]=0,++u)}}}}return this.currentSample+=l,l*o},skipSamples:function(e){var t=0;for(null!=this.totalSample&&e>this.totalSample-this.currentSample&&(e=this.totalSample-this.currentSample);t<e;){var a=this.channelBufferEnd-this.channelBufferStart;if(e-t<=a&&(a=e-t),t+=a,this.channelBufferStart+=a,t==e||0==this.getFrameFloat())break}return this.currentSample+=e,e},setupSampleNumber:function(e,t){null==this.totalSample&&(this.totalSample=this.decodeState.getSampleNumber(e,t))},seek:function(e,t,a){if(this.currentSample!=a){if(null==this.totalSample&&(this.setupSampleNumber(e,t),0==this.totalSample))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:187,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));a<0&&(a=0);var r=this.decodeState.pFirst,i=this.decodeState.pLast;if(a>=i.lastDecodedSample&&(a=i.lastDecodedSample-1),a<r.lastDecodedSample)this.seekFrameFromPage(e,r.pageStart,0,a);else{for(var s=0;r.pageEnd<i.pageStart;){var n=r.pageEnd,o=i.afterPreviousPageStart,h=r.lastDecodedSample,_=i.lastDecodedSample;if(null==h||null==_)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:219,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));_$UInt_UInt_$Impl_$.gt(o,n+4e3)&&(o-=4e3);var l=n+Math.floor(_$UInt_UInt_$Impl_$.toFloat(o-n)/_$UInt_UInt_$Impl_$.toFloat(_-h)*(a-h));if(4<=s){var u=n+(o-n>>>1);l=8<=s?u:_$UInt_UInt_$Impl_$.gt(u,l)?l+(u-l>>>1):u+(l-u>>>1)}switch(++s,e(this.decodeState.inputPosition=l),this.decodeState.findPage(e,t)._hx_index){case 0:break;case 1:throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:249,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}var d=this.decodeState.analyzePage(e,this.header);if(null==d)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:255,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));d.afterPreviousPageStart=l,d.pageStart!=i.pageStart?a<d.lastDecodedSample?i=d:r=d:i=d}if(!(r.lastDecodedSample<=a&&a<i.lastDecodedSample))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:275,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));this.seekFrameFromPage(e,i.pageStart,r.lastDecodedSample,a)}}},seekFrameFromPage:function(e,t,a,r){var i=0,s=a;e(this.decodeState.inputPosition=t),this.decodeState.nextSeg=-1;for(var n=0,o=0,h=null,_=null;;){h=_,_=this.decodeState.clone(e);var l=this.decodeInitial();if(null==l){_=h;break}o=l.left.start,n=l.left.end;var u=0==i?n:o;if(r<s+l.right.start-u)break;for(var d=this.decodeState;0!=d.bytesInSeg||!d.lastSeg&&0!=d.next();)d.bytesInSeg--,d.inputPosition+=1,d.input.readByte();s+=l.right.start-u,++i}this.decodeState=_,e(this.decodeState.inputPosition),this.previousLength=0,this.pumpFirstFrame(),this.currentSample=s,this.skipSamples(r-s)},clone:function(e){var t=Object.create(kha_audio2_ogg_vorbis_VorbisDecoder.prototype);t.currentSample=this.currentSample,t.totalSample=this.totalSample,t.previousLength=this.previousLength,t.channelBufferStart=this.channelBufferStart,t.channelBufferEnd=this.channelBufferEnd,t.a=this.a,t.b=this.b,t.c=this.c,t.window=this.window,t.bitReverseData=this.bitReverseData,t.header=this.header,t.decodeState=this.decodeState.clone(e);var a=new Array(this.header.channel);t.channelBuffers=a;var r=new Array(this.header.channel);t.previousWindow=r;var i=new Array(this.header.channel);t.finalY=i;for(var s=0,n=this.header.channel;s<n;){var o=s++;t.channelBuffers[o]=kha_audio2_ogg_vorbis_VorbisTools.copyVector(this.channelBuffers[o]),t.previousWindow[o]=kha_audio2_ogg_vorbis_VorbisTools.copyVector(this.previousWindow[o]),t.finalY[o]=Lambda.array(this.finalY[o])}return t},ensurePosition:function(e){e(this.decodeState.inputPosition)},getFrameFloat:function(){var e=this.decodePacket();if(null==e)return this.channelBufferStart=this.channelBufferEnd=0,0;var t=this.finishFrame(e);return this.channelBufferStart=e.left,this.channelBufferEnd=e.left+t,t},pumpFirstFrame:function(){this.finishFrame(this.decodePacket())},finishFrame:function(e){var t=e.len,a=e.right,r=e.left;if(0!=this.previousLength)for(var i=this.previousLength,s=this.getWindow(i),n=0,o=this.header.channel;n<o;)for(var h=n++,_=this.channelBuffers[h],l=this.previousWindow[h],u=0,d=i;u<d;){var c=u++;_[r+c]=_[r+c]*s[c]+l[c]*s[i-1-c]}var g=this.previousLength;this.previousLength=t-a;for(var p=0,f=this.header.channel;p<f;)for(var m=p++,k=this.previousWindow[m],v=this.channelBuffers[m],S=0,b=t-a;S<b;){var y=S++;k[y]=v[a+y]}return 0==g?0:(t<a&&(a=t),a-r)},getWindow:function(e){if((e<<=1)==this.header.blocksize0)return this.window[0];if(e==this.header.blocksize1)return this.window[1];throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:466,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"getWindow"}))},initBlocksize:function(e,t){var a=t>>1,r=t>>2,i=t>>3,s=this.a,n=new Array(a);s[e]=n;var o=this.b,h=new Array(a);o[e]=h;var _=this.c,l=new Array(r);_[e]=l;var u=this.window,d=new Array(a);u[e]=d;var c=this.bitReverseData,g=new Array(i);c[e]=g,kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors(t,this.a[e],this.b[e],this.c[e]),kha_audio2_ogg_vorbis_VorbisTools.computeWindow(t,this.window[e]),kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse(t,this.bitReverseData[e])},inverseMdct:function(e,t,a){for(var r=a?1:0,i=this.a[r],s=this.b[r],n=this.c[r],o=this.bitReverseData[r],h=t>>1,_=t>>2,l=t>>3,u=new Array(h),d=h-2,c=0,g=0,p=h;g!=p;)u[d+1]=e[g]*i[c]-e[g+2]*i[c+1],u[d]=e[g]*i[c+1]+e[g+2]*i[c],d-=2,c+=2,g+=4;for(g=h-3;0<=d;)u[d+1]=-e[g+2]*i[c]- -e[g]*i[c+1],u[d]=-e[g+2]*i[c+1]+-e[g]*i[c],d-=2,c+=2,g-=4;for(var f=e,m=u,k=h-8,v=_,S=0,b=_,y=0;0<=k;){var x=m[v+1]-m[S+1],w=m[v]-m[S];f[b+1]=m[v+1]+m[S+1],f[b]=m[v]+m[S],f[y+1]=x*i[k+4]-w*i[k+5],f[y]=w*i[k+4]+x*i[k+5],x=m[v+3]-m[S+3],w=m[v+2]-m[S+2],f[b+3]=m[v+3]+m[S+3],f[b+2]=m[v+2]+m[S+2],f[y+3]=x*i[k]-w*i[k+1],f[y+2]=w*i[k]+x*i[k+1],k-=8,b+=4,y+=4,v+=4,S+=4}for(var I=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],T=(t<16384?t<16?I[t]:t<512?5+I[t>>5]:10+I[t>>10]:t<16777216?t<524288?15+I[t>>15]:20+I[t>>20]:t<536870912?25+I[t>>25]:t<-2147483648?30+I[t>>30]:0)-1,C=h-1-0*_,E=C,B=C+-(t>>3),P=0,A=1+(t>>4>>2);0<--A;){var L=f[E]-f[B],$=f[E+-1]-f[B+-1],N=E,R=f;R[N]=R[N]+f[B];var V=E+-1,M=f;M[V]=M[V]+f[B+-1],f[B]=L*i[P]-$*i[P+1],f[B+-1]=$*i[P]+L*i[P+1],P+=8,L=f[E+-2]-f[B+-2],$=f[E+-3]-f[B+-3];var F=E+-2,H=f;H[F]=H[F]+f[B+-2];var O=E+-3,U=f;U[O]=U[O]+f[B+-3],f[B+-2]=L*i[P]-$*i[P+1],f[B+-3]=$*i[P]+L*i[P+1],P+=8,L=f[E+-4]-f[B+-4],$=f[E+-5]-f[B+-5];var D=E+-4,z=f;z[D]=z[D]+f[B+-4];var W=E+-5,G=f;G[W]=G[W]+f[B+-5],f[B+-4]=L*i[P]-$*i[P+1],f[B+-5]=$*i[P]+L*i[P+1],P+=8,L=f[E+-6]-f[B+-6],$=f[E+-7]-f[B+-7];var j=E+-6,K=f;K[j]=K[j]+f[B+-6];var X=E+-7,Y=f;Y[X]=Y[X]+f[B+-7],f[B+-6]=L*i[P]-$*i[P+1],f[B+-7]=$*i[P]+L*i[P+1],P+=8,E-=8,B-=8}for(var Z=h-1-_,Q=Z,q=Z+-(t>>3),J=0,ee=1+(t>>4>>2);0<--ee;){var te=f[Q]-f[q],ae=f[Q+-1]-f[q+-1],re=Q,ie=f;ie[re]=ie[re]+f[q];var se=Q+-1,ne=f;ne[se]=ne[se]+f[q+-1],f[q]=te*i[J]-ae*i[J+1],f[q+-1]=ae*i[J]+te*i[J+1],J+=8,te=f[Q+-2]-f[q+-2],ae=f[Q+-3]-f[q+-3];var oe=Q+-2,he=f;he[oe]=he[oe]+f[q+-2];var _e=Q+-3,le=f;le[_e]=le[_e]+f[q+-3],f[q+-2]=te*i[J]-ae*i[J+1],f[q+-3]=ae*i[J]+te*i[J+1],J+=8,te=f[Q+-4]-f[q+-4],ae=f[Q+-5]-f[q+-5];var ue=Q+-4,de=f;de[ue]=de[ue]+f[q+-4];var ce=Q+-5,ge=f;ge[ce]=ge[ce]+f[q+-5],f[q+-4]=te*i[J]-ae*i[J+1],f[q+-5]=ae*i[J]+te*i[J+1],J+=8,te=f[Q+-6]-f[q+-6],ae=f[Q+-7]-f[q+-7];var pe=Q+-6,fe=f;fe[pe]=fe[pe]+f[q+-6];var me=Q+-7,ke=f;ke[me]=ke[me]+f[q+-7],f[q+-6]=te*i[J]-ae*i[J+1],f[q+-7]=ae*i[J]+te*i[J+1],J+=8,Q-=8,q-=8}for(var ve=h-1-0*l,Se=0,be=ve,ye=ve+-(t>>4),xe=1+(t>>5>>2);0<--xe;){var we=f[be]-f[ye],Ie=f[be+-1]-f[ye+-1],Te=be,Ce=f;Ce[Te]=Ce[Te]+f[ye];var Ee=be+-1,Be=f;Be[Ee]=Be[Ee]+f[ye+-1],f[ye]=we*i[Se]-Ie*i[Se+1],f[ye+-1]=Ie*i[Se]+we*i[Se+1],Se+=16,we=f[be+-2]-f[ye+-2],Ie=f[be+-3]-f[ye+-3];var Pe=be+-2,Ae=f;Ae[Pe]=Ae[Pe]+f[ye+-2];var Le=be+-3,$e=f;$e[Le]=$e[Le]+f[ye+-3],f[ye+-2]=we*i[Se]-Ie*i[Se+1],f[ye+-3]=Ie*i[Se]+we*i[Se+1],Se+=16,we=f[be+-4]-f[ye+-4],Ie=f[be+-5]-f[ye+-5];var Ne=be+-4,Re=f;Re[Ne]=Re[Ne]+f[ye+-4];var Ve=be+-5,Me=f;Me[Ve]=Me[Ve]+f[ye+-5],f[ye+-4]=we*i[Se]-Ie*i[Se+1],f[ye+-5]=Ie*i[Se]+we*i[Se+1],Se+=16,we=f[be+-6]-f[ye+-6],Ie=f[be+-7]-f[ye+-7];var Fe=be+-6,He=f;He[Fe]=He[Fe]+f[ye+-6];var Oe=be+-7,Ue=f;Ue[Oe]=Ue[Oe]+f[ye+-7],f[ye+-6]=we*i[Se]-Ie*i[Se+1],f[ye+-7]=Ie*i[Se]+we*i[Se+1],be-=8,ye-=8,Se+=16}for(var De=h-1-l,ze=0,We=De,Ge=De+-(t>>4),je=1+(t>>5>>2);0<--je;){var Ke=f[We]-f[Ge],Xe=f[We+-1]-f[Ge+-1],Ye=We,Ze=f;Ze[Ye]=Ze[Ye]+f[Ge];var Qe=We+-1,qe=f;qe[Qe]=qe[Qe]+f[Ge+-1],f[Ge]=Ke*i[ze]-Xe*i[ze+1],f[Ge+-1]=Xe*i[ze]+Ke*i[ze+1],ze+=16,Ke=f[We+-2]-f[Ge+-2],Xe=f[We+-3]-f[Ge+-3];var Je=We+-2,et=f;et[Je]=et[Je]+f[Ge+-2];var tt=We+-3,at=f;at[tt]=at[tt]+f[Ge+-3],f[Ge+-2]=Ke*i[ze]-Xe*i[ze+1],f[Ge+-3]=Xe*i[ze]+Ke*i[ze+1],ze+=16,Ke=f[We+-4]-f[Ge+-4],Xe=f[We+-5]-f[Ge+-5];var rt=We+-4,it=f;it[rt]=it[rt]+f[Ge+-4];var st=We+-5,nt=f;nt[st]=nt[st]+f[Ge+-5],f[Ge+-4]=Ke*i[ze]-Xe*i[ze+1],f[Ge+-5]=Xe*i[ze]+Ke*i[ze+1],ze+=16,Ke=f[We+-6]-f[Ge+-6],Xe=f[We+-7]-f[Ge+-7];var ot=We+-6,ht=f;ht[ot]=ht[ot]+f[Ge+-6];var _t=We+-7,lt=f;lt[_t]=lt[_t]+f[Ge+-7],f[Ge+-6]=Ke*i[ze]-Xe*i[ze+1],f[Ge+-7]=Xe*i[ze]+Ke*i[ze+1],We-=8,Ge-=8,ze+=16}for(var ut=h-1-2*l,dt=0,ct=ut,gt=ut+-(t>>4),pt=1+(t>>5>>2);0<--pt;){var ft=f[ct]-f[gt],mt=f[ct+-1]-f[gt+-1],kt=ct,vt=f;vt[kt]=vt[kt]+f[gt];var St=ct+-1,bt=f;bt[St]=bt[St]+f[gt+-1],f[gt]=ft*i[dt]-mt*i[dt+1],f[gt+-1]=mt*i[dt]+ft*i[dt+1],dt+=16,ft=f[ct+-2]-f[gt+-2],mt=f[ct+-3]-f[gt+-3];var yt=ct+-2,xt=f;xt[yt]=xt[yt]+f[gt+-2];var wt=ct+-3,It=f;It[wt]=It[wt]+f[gt+-3],f[gt+-2]=ft*i[dt]-mt*i[dt+1],f[gt+-3]=mt*i[dt]+ft*i[dt+1],dt+=16,ft=f[ct+-4]-f[gt+-4],mt=f[ct+-5]-f[gt+-5];var Tt=ct+-4,Ct=f;Ct[Tt]=Ct[Tt]+f[gt+-4];var Et=ct+-5,Bt=f;Bt[Et]=Bt[Et]+f[gt+-5],f[gt+-4]=ft*i[dt]-mt*i[dt+1],f[gt+-5]=mt*i[dt]+ft*i[dt+1],dt+=16,ft=f[ct+-6]-f[gt+-6],mt=f[ct+-7]-f[gt+-7];var Pt=ct+-6,At=f;At[Pt]=At[Pt]+f[gt+-6];var Lt=ct+-7,$t=f;$t[Lt]=$t[Lt]+f[gt+-7],f[gt+-6]=ft*i[dt]-mt*i[dt+1],f[gt+-7]=mt*i[dt]+ft*i[dt+1],ct-=8,gt-=8,dt+=16}for(var Nt=h-1-3*l,Rt=0,Vt=Nt,Mt=Nt+-(t>>4),Ft=1+(t>>5>>2);0<--Ft;){var Ht=f[Vt]-f[Mt],Ot=f[Vt+-1]-f[Mt+-1],Ut=Vt,Dt=f;Dt[Ut]=Dt[Ut]+f[Mt];var zt=Vt+-1,Wt=f;Wt[zt]=Wt[zt]+f[Mt+-1],f[Mt]=Ht*i[Rt]-Ot*i[Rt+1],f[Mt+-1]=Ot*i[Rt]+Ht*i[Rt+1],Rt+=16,Ht=f[Vt+-2]-f[Mt+-2],Ot=f[Vt+-3]-f[Mt+-3];var Gt=Vt+-2,jt=f;jt[Gt]=jt[Gt]+f[Mt+-2];var Kt=Vt+-3,Xt=f;Xt[Kt]=Xt[Kt]+f[Mt+-3],f[Mt+-2]=Ht*i[Rt]-Ot*i[Rt+1],f[Mt+-3]=Ot*i[Rt]+Ht*i[Rt+1],Rt+=16,Ht=f[Vt+-4]-f[Mt+-4],Ot=f[Vt+-5]-f[Mt+-5];var Yt=Vt+-4,Zt=f;Zt[Yt]=Zt[Yt]+f[Mt+-4];var Qt=Vt+-5,qt=f;qt[Qt]=qt[Qt]+f[Mt+-5],f[Mt+-4]=Ht*i[Rt]-Ot*i[Rt+1],f[Mt+-5]=Ot*i[Rt]+Ht*i[Rt+1],Rt+=16,Ht=f[Vt+-6]-f[Mt+-6],Ot=f[Vt+-7]-f[Mt+-7];var Jt=Vt+-6,ea=f;ea[Jt]=ea[Jt]+f[Mt+-6];var ta=Vt+-7,aa=f;aa[ta]=aa[ta]+f[Mt+-7],f[Mt+-6]=Ht*i[Rt]-Ot*i[Rt+1],f[Mt+-7]=Ot*i[Rt]+Ht*i[Rt+1],Vt-=8,Mt-=8,Rt+=16}for(var ra=2,ia=T-3>>1;ra<ia;)for(var sa=ra++,na=t>>sa+2,oa=na>>1,ha=0,_a=1<<sa+1;ha<_a;)for(var la=h-1-na*ha++,ua=1<<sa+3,da=0,ca=la,ga=la+-oa,pa=1+(t>>sa+4>>2);0<--pa;){var fa=f[ca]-f[ga],ma=f[ca+-1]-f[ga+-1],ka=ca,va=f;va[ka]=va[ka]+f[ga];var Sa=ca+-1,ba=f;ba[Sa]=ba[Sa]+f[ga+-1],f[ga]=fa*i[da]-ma*i[da+1],f[ga+-1]=ma*i[da]+fa*i[da+1],da+=ua,fa=f[ca+-2]-f[ga+-2],ma=f[ca+-3]-f[ga+-3];var ya=ca+-2,xa=f;xa[ya]=xa[ya]+f[ga+-2];var wa=ca+-3,Ia=f;Ia[wa]=Ia[wa]+f[ga+-3],f[ga+-2]=fa*i[da]-ma*i[da+1],f[ga+-3]=ma*i[da]+fa*i[da+1],da+=ua,fa=f[ca+-4]-f[ga+-4],ma=f[ca+-5]-f[ga+-5];var Ta=ca+-4,Ca=f;Ca[Ta]=Ca[Ta]+f[ga+-4];var Ea=ca+-5,Ba=f;Ba[Ea]=Ba[Ea]+f[ga+-5],f[ga+-4]=fa*i[da]-ma*i[da+1],f[ga+-5]=ma*i[da]+fa*i[da+1],da+=ua,fa=f[ca+-6]-f[ga+-6],ma=f[ca+-7]-f[ga+-7];var Pa=ca+-6,Aa=f;Aa[Pa]=Aa[Pa]+f[ga+-6];var La=ca+-7,$a=f;$a[La]=$a[La]+f[ga+-7],f[ga+-6]=fa*i[da]-ma*i[da+1],f[ga+-7]=ma*i[da]+fa*i[da+1],ca-=8,ga-=8,da+=ua}for(var Na=T-3>>1,Ra=T-6;Na<Ra;)for(var Va=Na++,Ma=t>>Va+2,Fa=1<<Va+3,Ha=Ma>>1,Oa=1<<Va+1,Ua=0,Da=h-1,za=(t>>Va+6)+1;0<--za;){for(var Wa=i[Ua],Ga=i[Ua+1],ja=i[Ua+Fa],Ka=i[Ua+Fa+1],Xa=i[Ua+2*Fa],Ya=i[Ua+2*Fa+1],Za=i[Ua+3*Fa],Qa=i[Ua+3*Fa+1],qa=Da,Ja=Da+-Ha,er=Oa+1;0<--er;){var tr=f[qa]-f[Ja],ar=f[qa+-1]-f[Ja+-1];f[qa]=f[qa]+f[Ja],f[qa+-1]=f[qa+-1]+f[Ja+-1],f[Ja]=tr*Wa-ar*Ga,f[Ja+-1]=ar*Wa+tr*Ga,tr=f[qa+-2]-f[Ja+-2],ar=f[qa+-3]-f[Ja+-3],f[qa+-2]=f[qa+-2]+f[Ja+-2],f[qa+-3]=f[qa+-3]+f[Ja+-3],f[Ja+-2]=tr*ja-ar*Ka,f[Ja+-3]=ar*ja+tr*Ka,tr=f[qa+-4]-f[Ja+-4],ar=f[qa+-5]-f[Ja+-5],f[qa+-4]=f[qa+-4]+f[Ja+-4],f[qa+-5]=f[qa+-5]+f[Ja+-5],f[Ja+-4]=tr*Xa-ar*Ya,f[Ja+-5]=ar*Xa+tr*Ya,tr=f[qa+-6]-f[Ja+-6],ar=f[qa+-7]-f[Ja+-7],f[qa+-6]=f[qa+-6]+f[Ja+-6],f[qa+-7]=f[qa+-7]+f[Ja+-7],f[Ja+-6]=tr*Za-ar*Qa,f[Ja+-7]=ar*Za+tr*Qa,qa-=Ma,Ja-=Ma}Ua+=4*Fa,Da-=8}for(var rr=h-1,ir=i[t>>3],sr=rr,nr=rr-16*(t>>5);nr<sr;){var or=f[sr],hr=f[sr+-8];f[sr+-8]=or-hr,f[sr]=or+hr,or=f[sr+-1],hr=f[sr+-9],f[sr+-9]=or-hr,f[sr+-1]=or+hr;var _r=(or=f[sr+-2])-(hr=f[sr+-10]);f[sr+-2]=or+hr;var lr=(or=f[sr+-3])-(hr=f[sr+-11]);f[sr+-3]=or+hr,f[sr+-10]=(_r+lr)*ir,f[sr+-11]=(lr-_r)*ir,or=f[sr+-4],_r=(hr=f[sr+-12])-or,f[sr+-4]=or+hr,lr=(or=f[sr+-5])-(hr=f[sr+-13]),f[sr+-5]=or+hr,f[sr+-12]=lr,f[sr+-13]=_r,or=f[sr+-6],_r=(hr=f[sr+-14])-or,f[sr+-6]=or+hr,lr=(or=f[sr+-7])-(hr=f[sr+-15]),f[sr+-7]=or+hr,f[sr+-14]=(_r+lr)*ir,f[sr+-15]=(_r-lr)*ir;var ur=f[sr],dr=f[sr+-4],cr=ur-dr,gr=ur+dr,pr=(ur=f[sr+-2])+(dr=f[sr+-6]),fr=ur-dr;f[sr]=gr+pr,f[sr+-2]=gr-pr;var mr=f[sr+-3]-f[sr+-7];f[sr+-4]=cr+mr,f[sr+-6]=cr-mr;var kr=(ur=f[sr+-1])-(dr=f[sr+-5]),vr=ur+dr,Sr=f[sr+-3]+f[sr+-7];f[sr+-1]=vr+Sr,f[sr+-3]=vr-Sr,f[sr+-5]=kr-fr,f[sr+-7]=kr+fr;var br=sr-8,yr=f[br],xr=f[br+-4],wr=yr-xr,Ir=yr+xr,Tr=(yr=f[br+-2])+(xr=f[br+-6]),Cr=yr-xr;f[br]=Ir+Tr,f[br+-2]=Ir-Tr;var Er=f[br+-3]-f[br+-7];f[br+-4]=wr+Er,f[br+-6]=wr-Er;var Br=(yr=f[br+-1])-(xr=f[br+-5]),Pr=yr+xr,Ar=f[br+-3]+f[br+-7];f[br+-1]=Pr+Ar,f[br+-3]=Pr-Ar,f[br+-5]=Br-Cr,f[br+-7]=Br+Cr,sr-=16}for(var Lr=0,$r=_-4,Nr=h-4;0<=$r;){var Rr=o[Lr];m[Nr+3]=f[Rr],m[Nr+2]=f[Rr+1],m[$r+3]=f[Rr+2],m[$r+2]=f[Rr+3],Rr=o[Lr+1],m[Nr+1]=f[Rr],m[Nr]=f[Rr+1],m[$r+1]=f[Rr+2],m[$r]=f[Rr+3],$r-=4,Nr-=4,Lr+=2}for(var Vr=0,Mr=0,Fr=h-4;Mr<Fr;){var Hr=m[Mr]-m[Fr+2],Or=m[Mr+1]+m[Fr+3],Ur=n[Vr+1]*Hr+n[Vr]*Or,Dr=n[Vr+1]*Or-n[Vr]*Hr,zr=m[Mr]+m[Fr+2],Wr=m[Mr+1]-m[Fr+3];m[Mr]=zr+Ur,m[Mr+1]=Wr+Dr,m[Fr+2]=zr-Ur,m[Fr+3]=Dr-Wr,Hr=m[Mr+2]-m[Fr],Or=m[Mr+3]+m[Fr+1],Ur=n[Vr+3]*Hr+n[Vr+2]*Or,Dr=n[Vr+3]*Or-n[Vr+2]*Hr,zr=m[Mr+2]+m[Fr],Wr=m[Mr+3]-m[Fr+1],m[Mr+2]=zr+Ur,m[Mr+3]=Wr+Dr,m[Fr]=zr-Ur,m[Fr+1]=Dr-Wr,Vr+=4,Mr+=4,Fr-=4}for(var Gr=h-8,jr=h-8,Kr=0,Xr=h-4,Yr=h,Zr=t-4;0<=jr;){var Qr=u[jr+6]*s[Gr+7]-u[jr+7]*s[Gr+6],qr=-u[jr+6]*s[Gr+6]-u[jr+7]*s[Gr+7];e[Kr]=Qr,e[Xr+3]=-Qr,e[Yr]=qr,e[Zr+3]=qr;var Jr=u[jr+4]*s[Gr+5]-u[jr+5]*s[Gr+4],ei=-u[jr+4]*s[Gr+4]-u[jr+5]*s[Gr+5];e[Kr+1]=Jr,e[Xr+2]=-Jr,e[Yr+1]=ei,e[Zr+2]=ei,Qr=u[jr+2]*s[Gr+3]-u[jr+3]*s[Gr+2],qr=-u[jr+2]*s[Gr+2]-u[jr+3]*s[Gr+3],e[Kr+2]=Qr,e[Xr+1]=-Qr,e[Yr+2]=qr,e[Zr+1]=qr,Jr=u[jr]*s[Gr+1]-u[jr+1]*s[Gr],ei=-u[jr]*s[Gr]-u[jr+1]*s[Gr+1],e[Kr+3]=Jr,e[Xr]=-Jr,e[Yr+3]=ei,e[Zr]=ei,Gr-=8,jr-=8,Kr+=4,Yr+=4,Xr-=4,Zr-=4}},decodePacket:function(){var e=this.decodeInitial();return null==e?null:this.decodePacketRest(e)},decodeInitial:function(){for(this.channelBufferStart=this.channelBufferEnd=0;;){if(!this.decodeState.maybeStartPacket())return null;if(0==this.decodeState.readBits(1))break;for(;;){var e,t=this.decodeState;if(0!=t.bytesInSeg||!t.lastSeg&&0!=t.next()?(t.bytesInSeg--,t.inputPosition+=1,e=t.input.readByte()):e=-1,t.validBits=0,-1==e)break}}var a=this.header.modes.length-1,r=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],i=this.decodeState.readBits(a<16384?a<16?r[a]:a<512?5+r[a>>5]:10+r[a>>10]:a<16777216?a<524288?15+r[a>>15]:20+r[a>>20]:a<536870912?25+r[a>>25]:a<-2147483648?30+r[a>>30]:0);if(-1==i||i>=this.header.modes.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodeInitial"}));var s,n,o,h=this.header.modes[i];h.blockflag?(s=this.header.blocksize1,n=this.decodeState.readBits(1),o=this.decodeState.readBits(1)):(n=o=0,s=this.header.blocksize0);var _=s>>1;return{mode:i,left:h.blockflag&&0==n?{start:s-this.header.blocksize0>>2,end:s+this.header.blocksize0>>2}:{start:0,end:_},right:h.blockflag&&0==o?{start:3*s-this.header.blocksize0>>2,end:3*s+this.header.blocksize0>>2}:{start:_,end:s}}},decodePacketRest:function(e){for(var t=this.header.modes[e.mode],a=new Array(256),r=new Array(256),i=t.blockflag?this.header.blocksize1:this.header.blocksize0,s=this.header.mapping[t.mapping],n=i>>1,o=[256,128,86,64],h=this.header.codebooks,_=0,l=this.header.channel;_<l;){var u=_++,d=s.chan[u].mux;a[u]=!1;var c=this.header.floorConfig[s.submapFloor[d]];if(0==c.type)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:581,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodePacketRest"}));var g=c.floor1;if(0!=this.decodeState.readBits(1)){var p=[],f=new Array(256),m=o[g.floor1Multiplier-1],k=2,v=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];(p=this.finalY[u])[0]=this.decodeState.readBits((m<16384?m<16?v[m]:m<512?5+v[m>>5]:10+v[m>>10]:m<16777216?m<524288?15+v[m>>15]:20+v[m>>20]:m<536870912?25+v[m>>25]:m<-2147483648?30+v[m>>30]:0)-1);var S=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];p[1]=this.decodeState.readBits((m<16384?m<16?S[m]:m<512?5+S[m>>5]:10+S[m>>10]:m<16777216?m<524288?15+S[m>>15]:20+S[m>>20]:m<536870912?25+S[m>>25]:m<-2147483648?30+S[m>>30]:0)-1);for(var b=0,y=g.partitions;b<y;){var x=b++,w=g.partitionClassList[x],I=g.classDimensions[w],T=g.classSubclasses[w],C=(1<<T)-1,E=0;if(0!=T){var B=h[g.classMasterbooks[w]],P=this.decodeState;P.validBits<10&&P.prepHuffman();var A,L=B.fastHuffman[1023&P.acc];if(0<=L){var $=B.codewordLengths[L];P.acc=P.acc>>>$,P.validBits-=$,P.validBits<0?(P.validBits=0,A=-1):A=L}else A=P.decodeScalarRaw(B);B.sparse&&(A=B.sortedValues[A]),E=A}for(var N=g.subclassBooks[w],R=0,V=I;R<V;){R++;var M=N[E&C];E>>=T;var F,H=k++;if(0<=M){var O=this.decodeState,U=h[M];O.validBits<10&&O.prepHuffman();var D,z=U.fastHuffman[1023&O.acc];if(0<=z){var W=U.codewordLengths[z];O.acc=O.acc>>>W,O.validBits-=W,O.validBits<0?(O.validBits=0,D=-1):D=z}else D=O.decodeScalarRaw(U);U.sparse&&(D=U.sortedValues[D]),F=D}else F=0;p[H]=F}}if(-1==this.decodeState.validBits){a[u]=!0;continue}f[0]=f[1]=!0;for(var G=g.neighbors,j=g.xlist,K=2,X=g.values;K<X;){var Y=K++,Z=G[Y][0],Q=G[Y][1],q=j[Z],J=p[Z],ee=p[Q]-J,te=j[Q]-q,ae=Math.abs(ee)*(j[Y]-q)/te|0,re=ee<0?J-ae:J+ae,ie=p[Y],se=m-re,ne=se<re?2*se:2*re;0!=ie?(f[Z]=f[Q]=!0,f[Y]=!0,p[Y]=ne<=ie?re<se?ie-re+re:re-ie+se-1:0!=(1&ie)?re-(ie+1>>1):re+(ie>>1)):(f[Y]=!1,p[Y]=re)}for(var oe=0,he=g.values;oe<he;){var _e=oe++;f[_e]||(p[_e]=-1)}}else a[u]=!0}for(var le=0,ue=this.header.channel;le<ue;){var de=le++;r[de]=a[de]}for(var ce=0,ge=s.couplingSteps;ce<ge;){var pe=ce++;a[s.chan[pe].magnitude]&&a[s.chan[pe].angle]||(a[s.chan[pe].magnitude]=a[s.chan[pe].angle]=!1)}for(var fe=0,me=s.submaps;fe<me;){for(var ke=fe++,ve=new Array(this.header.channel),Se=new Array(256),be=0,ye=0,xe=this.header.channel;ye<xe;){var we=ye++;s.chan[we].mux==ke&&(a[we]?(Se[be]=!0,ve[be]=null):(Se[be]=!1,ve[be]=this.channelBuffers[we]),++be)}var Ie=s.submapResidue[ke];this.header.residueConfig[Ie].decode(this.decodeState,this.header,ve,be,n,Se,this.channelBuffers)}for(var Te=s.couplingSteps,Ce=i>>1;0<=--Te;)for(var Ee=this.channelBuffers[s.chan[Te].magnitude],Be=this.channelBuffers[s.chan[Te].angle],Pe=0,Ae=Ce;Pe<Ae;){var Le,$e,Ne=Pe++;0<Ee[Ne]?0<Be[Ne]?($e=Ee[Ne],Le=Ee[Ne]-Be[Ne]):(Le=Ee[Ne],$e=Ee[Ne]+Be[Ne]):0<Be[Ne]?($e=Ee[Ne],Le=Ee[Ne]+Be[Ne]):(Le=Ee[Ne],$e=Ee[Ne]-Be[Ne]),Ee[Ne]=$e,Be[Ne]=Le}for(var Re=0,Ve=this.header.channel;Re<Ve;){var Me=Re++;if(r[Me])for(var Fe=0,He=Ce;Fe<He;){var Oe=Fe++;this.channelBuffers[Me][Oe]=0}else s.doFloor(this.header.floorConfig,Me,i,this.channelBuffers[Me],this.finalY[Me],null)}for(var Ue=0,De=this.header.channel;Ue<De;){var ze=Ue++;this.inverseMdct(this.channelBuffers[ze],i,t.blockflag)}for(var We=this.decodeState;0!=We.bytesInSeg||!We.lastSeg&&0!=We.next();)We.bytesInSeg--,We.inputPosition+=1,We.input.readByte();return this.decodeState.finishDecodePacket(this.previousLength,i,e)},__class__:kha_audio2_ogg_vorbis_VorbisDecoder};var kha_audio2_ogg_vorbis_VorbisTools=$hxClasses["kha.audio2.ogg.vorbis.VorbisTools"]=function(){};kha_audio2_ogg_vorbis_VorbisTools.__name__=!0,kha_audio2_ogg_vorbis_VorbisTools.assert=function(e,t){if(!e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",t))},kha_audio2_ogg_vorbis_VorbisTools.neighbors=function(e,t){for(var a=-1,r=65536,i=0,s=0,n=0,o=t;n<o;){var h=n++;e[h]>a&&e[h]<e[t]&&(a=e[i=h]),e[h]<r&&e[h]>e[t]&&(r=e[s=h])}return{low:i,high:s}},kha_audio2_ogg_vorbis_VorbisTools.floatUnpack=function(e){var t=_$UInt_UInt_$Impl_$.toFloat(2097151&e),a=(2145386496&e)>>>21;return(0!=(-2147483648&e)?-t:t)*Math.pow(2,a-788)},kha_audio2_ogg_vorbis_VorbisTools.bitReverse=function(e){return(e=(-16711936&(e=(-252645136&(e=(-858993460&(e=(-1431655766&e)>>>1|(1431655765&e)<<1))>>>2|(858993459&e)<<2))>>>4|(252645135&e)<<4))>>>8|(16711935&e)<<8)>>>16|e<<16},kha_audio2_ogg_vorbis_VorbisTools.pointCompare=function(e,t){return e.x<t.x?-1:e.x>t.x?1:0},kha_audio2_ogg_vorbis_VorbisTools.uintAsc=function(e,t){return _$UInt_UInt_$Impl_$.gt(t,e)?-1:e==t?0:1},kha_audio2_ogg_vorbis_VorbisTools.lookup1Values=function(e,t){var a=0|Math.exp(Math.log(e)/t);if((0|Math.pow(a+1,t))<=e&&++a,!(Math.pow(a+1,t)>e))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisTools.hx",lineNumber:155,className:"kha.audio2.ogg.vorbis.VorbisTools",methodName:"lookup1Values"}));if((0|Math.pow(a,t))>e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisTools.hx",lineNumber:156,className:"kha.audio2.ogg.vorbis.VorbisTools",methodName:"lookup1Values"}));return a},kha_audio2_ogg_vorbis_VorbisTools.computeWindow=function(e,t){for(var a=e>>1,r=0,i=a;r<i;){var s=r++;t[s]=Math.sin(1.5707963267948966*kha_audio2_ogg_vorbis_VorbisTools.square(Math.sin((s+.5)/a*.5*3.141592653589793)))}},kha_audio2_ogg_vorbis_VorbisTools.square=function(e){return e*e},kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse=function(e,t){for(var a=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],r=(e<16384?e<16?a[e]:e<512?5+a[e>>5]:10+a[e>>10]:e<16777216?e<524288?15+a[e>>15]:20+a[e>>20]:e<536870912?25+a[e>>25]:e<-2147483648?30+a[e>>30]:0)-1,i=0,s=e>>3;i<s;){var n=i++,o=n;o=(-16711936&(o=(-252645136&(o=(-858993460&(o=(-1431655766&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,t[n]=(o>>>16|o<<16)>>>32-r+3<<2}},kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors=function(e,t,a,r){for(var i=e>>3,s=0,n=0,o=e>>2;n<o;){var h=n++;t[s]=Math.cos(4*h*3.141592653589793/e),t[s+1]=-Math.sin(4*h*3.141592653589793/e),a[s]=.5*Math.cos(3.141592653589793*(s+1)/e/2),a[s+1]=.5*Math.sin(3.141592653589793*(s+1)/e/2),s+=2}for(var _=0,l=0,u=i;l<u;){l++;r[_]=Math.cos(2*(_+1)*3.141592653589793/e),r[_+1]=-Math.sin(2*(_+1)*3.141592653589793/e),_+=2}},kha_audio2_ogg_vorbis_VorbisTools.drawLine=function(e,t,a,r,i,s){if(null==kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable){var n=new Array(32);kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable=n;for(var o=0;o<32;){var h=o++,_=kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable,l=new Array(64);_[h]=l;for(var u=1;u<64;){var d=u++;kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[h][d]=h/d|0}}}var c,g,p=i-a,f=r-t,m=p<0?-p:p,k=t,v=a,S=0;f<64&&m<32?g=p<0?(c=-kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[m][f])-1:(c=kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[m][f])+1:(c=p/f|0,g=p<0?c-1:c+1),m-=(c<0?-c:c)*f,s<r&&(r=s);var b=k,y=e;y[b]=y[b]*kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[v];for(var x=k+1,w=r;x<w;){f<=(S+=m)?(S-=f,v+=g):v+=c;var I=x++,T=e;T[I]=T[I]*kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[v]}},kha_audio2_ogg_vorbis_VorbisTools.predictPoint=function(e,t,a,r,i){var s=i-r,n=a-t,o=Math.abs(s)*(e-t)/n|0;return s<0?r-o:r+o},kha_audio2_ogg_vorbis_VorbisTools.emptyFloatVector=function(e){return new Array(e)},kha_audio2_ogg_vorbis_VorbisTools.copyVector=function(e){for(var t=new Array(e.length),a=0,r=e.length;a<r;){var i=a++;t[i]=e[i]}return t};var kha_audio2_ogg_vorbis_data_Codebook=$hxClasses["kha.audio2.ogg.vorbis.data.Codebook"]=function(){};kha_audio2_ogg_vorbis_data_Codebook.__name__=!0,kha_audio2_ogg_vorbis_data_Codebook.read=function(e){var t=new kha_audio2_ogg_vorbis_data_Codebook;if(66!=e.readBits(8)||67!=e.readBits(8)||86!=e.readBits(8))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:40,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));var a=e.readBits(8);t.dimensions=(e.readBits(8)<<8)+a;var r=e.readBits(8),i=e.readBits(8);t.entries=(e.readBits(8)<<16)+(i<<8)+r;var s=e.readBits(1);t.sparse=0==s&&0!=e.readBits(1);var n=new Array(t.entries);t.sparse||(t.codewordLengths=n);var o,h=0;if(0!=s)for(var _=0,l=e.readBits(5)+1;_<t.entries;){var u=t.entries-_,d=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],c=e.readBits(u<16384?u<16?d[u]:u<512?5+d[u>>5]:10+d[u>>10]:u<16777216?u<524288?15+d[u>>15]:20+d[u>>20]:u<536870912?25+d[u>>25]:u<-2147483648?30+d[u>>30]:0);if(_+c>t.entries)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook entrys",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));for(var g=0,p=c;g<p;){n[_+g++]=l}_+=c,++l}else for(var f=0,m=t.entries;f<m;){var k=f++;0!=(t.sparse?e.readBits(1):1)?(n[k]=e.readBits(5)+1,++h):n[k]=255}if(t.sparse&&h>=t.entries>>2&&(t.codewordLengths=n,t.sparse=!1),t.sparse)o=h;else{for(var v=0,S=0,b=t.entries;S<b;){var y=n[S++];10<y&&255!=y&&++v}o=v}t.sortedEntries=o;var x=null;if(t.sparse){if(0!=t.sortedEntries){var w=new Array(t.sortedEntries);t.codewordLengths=w;var I=new Array(t.entries);t.codewords=I,x=new Array(t.entries)}t.entries,t.sortedEntries}else{var T=new Array(t.entries);t.codewords=T}if(!t.computeCodewords(n,t.entries,x))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"compute codewords",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:120,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0!=t.sortedEntries){t.sortedCodewords=[];var C=new Array(t.sortedEntries);t.sortedValues=C,t.computeSortedHuffman(n,x)}if(t.sparse&&(x=null,n=t.codewords=null),t.computeAcceleratedHuffman(),t.lookupType=e.readBits(4),2<t.lookupType)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook lookup type",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:143,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0<t.lookupType){var E=e.readBits(32),B=_$UInt_UInt_$Impl_$.toFloat(2097151&E),P=(2145386496&E)>>>21,A=0!=(-2147483648&E)?-B:B;t.minimumValue=A*Math.pow(2,P-788);var L=e.readBits(32),$=_$UInt_UInt_$Impl_$.toFloat(2097151&L),N=(2145386496&L)>>>21,R=0!=(-2147483648&L)?-$:$;t.deltaValue=R*Math.pow(2,N-788),t.valueBits=e.readBits(4)+1,t.sequenceP=0!=e.readBits(1),1==t.lookupType?t.lookupValues=kha_audio2_ogg_vorbis_VorbisTools.lookup1Values(t.entries,t.dimensions):t.lookupValues=t.entries*t.dimensions;for(var V=new Array(t.lookupValues),M=0,F=t.lookupValues;M<F;){var H=M++,O=e.readBits(t.valueBits);if(-1==O)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"fail lookup",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:161,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));V[H]=O}var U=new Array(t.lookupValues);t.multiplicands=U;for(var D=0,z=t.lookupValues;D<z;){var W=D++;t.multiplicands[W]=V[W]*t.deltaValue+t.minimumValue}if(2==t.lookupType&&t.sequenceP){for(var G=1,j=t.lookupValues;G<j;){var K=G++;t.multiplicands[K]=t.multiplicands[K-1]}t.sequenceP=!1}}return t},kha_audio2_ogg_vorbis_data_Codebook.prototype={dimensions:null,entries:null,codewordLengths:null,minimumValue:null,deltaValue:null,valueBits:null,lookupType:null,sequenceP:null,sparse:null,lookupValues:null,multiplicands:null,codewords:null,fastHuffman:null,sortedCodewords:null,sortedValues:null,sortedEntries:null,addEntry:function(e,t,a,r,i){this.sparse?(this.codewords[a]=e,this.codewordLengths[a]=r,i[a]=t):this.codewords[t]=e},includeInSort:function(e){if(this.sparse){if(255==e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:201,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"includeInSort"}));return!0}return 255!=e&&10<e},computeCodewords:function(e,t,a){var r=new Array(32);r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=0,r[16]=0,r[17]=0,r[18]=0,r[19]=0,r[20]=0,r[21]=0,r[22]=0,r[23]=0,r[24]=0,r[25]=0,r[26]=0,r[27]=0,r[28]=0,r[29]=0,r[30]=0;for(var i=r[31]=0;i<t&&!(e[i]<255);)++i;if(i==t){if(0!=this.sortedEntries)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:228,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"computeCodewords"}));return!0}var s=0,n=s++;this.sparse?(this.codewords[n]=0,this.codewordLengths[n]=e[i],a[n]=i):this.codewords[i]=0;for(var o=0;++o<=e[i];)r[o]=1<<32-o;for(o=i;++o<t;){var h=e[o];if(255!=h){for(;0<h&&0==r[h];)--h;if(0==h)return!1;var _=r[h];r[h]=0;var l=_,u=(l=(-16711936&(l=(-252645136&(l=(-858993460&(l=(-1431655766&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8)>>>16|l<<16,d=s++;if(this.sparse?(this.codewords[d]=u,this.codewordLengths[d]=e[o],a[d]=o):this.codewords[o]=u,h!=e[o])for(var c=e[o];h<c;){if(0!=r[c])throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:272,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"computeCodewords"}));r[c]=_+(1<<32-c),--c}}}return!0},computeSortedHuffman:function(e,t){if(this.sparse)for(var a=0,r=this.sortedEntries;a<r;){var i=a++,s=this.codewords[i];s=(-16711936&(s=(-252645136&(s=(-858993460&(s=(-1431655766&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,this.sortedCodewords[i]=s>>>16|s<<16}else{for(var n=0,o=0,h=this.entries;o<h;){var _,l=o++,u=e[l];if(this.sparse){if(255==u)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:201,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"includeInSort"}));_=!0}else _=255!=u&&10<u;if(_){var d=this.codewords[l];d=(-16711936&(d=(-252645136&(d=(-858993460&(d=(-1431655766&d)>>>1|(1431655765&d)<<1))>>>2|(858993459&d)<<2))>>>4|(252645135&d)<<4))>>>8|(16711935&d)<<8,this.sortedCodewords[n++]=d>>>16|d<<16}}if(n!=this.sortedEntries)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:296,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"computeSortedHuffman"}))}this.sortedCodewords[this.sortedEntries]=-1,this.sortedCodewords.sort(kha_audio2_ogg_vorbis_VorbisTools.uintAsc);for(var c=0,g=this.sparse?this.sortedEntries:this.entries;c<g;){var p,f=c++,m=this.sparse?e[t[f]]:e[f];if(this.sparse){if(255==m)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:201,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"includeInSort"}));p=!0}else p=255!=m&&10<m;if(p){for(var k=this.codewords[f],v=(k=(-16711936&(k=(-252645136&(k=(-858993460&(k=(-1431655766&k)>>>1|(1431655765&k)<<1))>>>2|(858993459&k)<<2))>>>4|(252645135&k)<<4))>>>8|(16711935&k)<<8)>>>16|k<<16,S=0,b=this.sortedEntries;1<b;){var y=S+(b>>1);_$UInt_UInt_$Impl_$.gte(v,this.sortedCodewords[y])?(S=y,b-=b>>1):b>>=1}this.sparse?(this.sortedValues[S]=t[f],this.codewordLengths[S]=m):this.sortedValues[S]=f}}},computeAcceleratedHuffman:function(){var e=new Array(1024);this.fastHuffman=e,this.fastHuffman[0]=-1;for(var t=0;t<1024;){var a=t++;this.fastHuffman[a]=-1}for(var r=0,i=this.sparse?this.sortedEntries:this.entries;r<i;){var s=r++;if(this.codewordLengths[s]<=10){var n;if(this.sparse){var o=this.sortedCodewords[s];n=(o=(-16711936&(o=(-252645136&(o=(-858993460&(o=(-1431655766&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8)>>>16|o<<16}else n=this.codewords[s];for(;n<1024;)this.fastHuffman[n]=s,n+=1<<this.codewordLengths[s]}}},codebookDecode:function(e,t,a,r){e.validBits<10&&e.prepHuffman();var i,s=this.fastHuffman[1023&e.acc];if(0<=s){var n=this.codewordLengths[s];e.acc=e.acc>>>n,e.validBits-=n,e.validBits<0?(e.validBits=0,i=-1):i=s}else i=e.decodeScalarRaw(this);this.sparse&&(i=this.sortedValues[i]);var o=i,h=this.lookupValues,_=this.sequenceP,l=this.multiplicands,u=this.minimumValue;if(o<0)return!1;if(r>this.dimensions&&(r=this.dimensions),1==this.lookupType){for(var d=1,c=0,g=0,p=r;g<p;){var f=g++,m=l[_$UInt_UInt_$Impl_$.toFloat(o/d|0)%_$UInt_UInt_$Impl_$.toFloat(h)|0]+c,k=a+f,v=t;v[k]=v[k]+m,_&&(c=m+u),d*=h}return!0}if(o*=this.dimensions,_)for(var S=0,b=0,y=r;b<y;){var x=b++,w=l[o+x]+S,I=a+x,T=t;T[I]=T[I]+w,S=w+u}else for(var C=0,E=r;C<E;){var B=C++,P=a+B,A=t;A[P]=A[P]+(l[o+B]+0)}return!0},codebookDecodeStep:function(e,t,a,r,i){e.validBits<10&&e.prepHuffman();var s,n=this.fastHuffman[1023&e.acc];if(0<=n){var o=this.codewordLengths[n];e.acc=e.acc>>>o,e.validBits-=o,e.validBits<0?(e.validBits=0,s=-1):s=n}else s=e.decodeScalarRaw(this);this.sparse&&(s=this.sortedValues[s]);var h=s,_=0;if(h<0)return!1;r>this.dimensions&&(r=this.dimensions);var l=this.lookupValues,u=this.sequenceP,d=this.multiplicands;if(1==this.lookupType){for(var c=1,g=0,p=r;g<p;){var f=g++,m=d[_$UInt_UInt_$Impl_$.toFloat(h/c|0)%_$UInt_UInt_$Impl_$.toFloat(l)|0]+_,k=a+f*i,v=t;v[k]=v[k]+m,u&&(_=m),c*=l}return!0}h*=this.dimensions;for(var S=0,b=r;S<b;){var y=S++,x=d[h+y]+_,w=a+y*i,I=t;I[w]=I[w]+x,u&&(_=x)}return!0},decodeStart:function(e){e.validBits<10&&e.prepHuffman();var t,a=this.fastHuffman[1023&e.acc];if(0<=a){var r=this.codewordLengths[a];e.acc=e.acc>>>r,e.validBits-=r,e.validBits<0?(e.validBits=0,t=-1):t=a}else t=e.decodeScalarRaw(this);return this.sparse&&(t=this.sortedValues[t]),t},decodeDeinterleaveRepeat:function(e,t,a,r,i,s,n){var o=this.dimensions;if(0==this.lookupType)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:488,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}));for(var h=this.multiplicands,_=this.sequenceP,l=this.lookupValues;0<n;){var u=0;e.validBits<10&&e.prepHuffman();var d,c=this.fastHuffman[1023&e.acc];if(0<=c){var g=this.codewordLengths[c];e.acc=e.acc>>>g,e.validBits-=g,e.validBits<0?(e.validBits=0,d=-1):d=c}else d=e.decodeScalarRaw(this);this.sparse&&(d=this.sortedValues[d]);var p=d;if(p<0){if(0==e.bytesInSeg&&e.lastSeg)return null;throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:503,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}))}if(s*a<r+i*a+o&&(o=s*a-(i*a-r)),1==this.lookupType){var f=1;if(_)for(var m=0,k=o;m<k;){m++;var v=h[_$UInt_UInt_$Impl_$.toFloat(p/f|0)%_$UInt_UInt_$Impl_$.toFloat(l)|0]+u,S=i,b=t[r];b[S]=b[S]+v,++r==a&&(r=0,++i),u=v,f*=l}else for(var y=0,x=o;y<x;){y++;var w=h[_$UInt_UInt_$Impl_$.toFloat(p/f|0)%_$UInt_UInt_$Impl_$.toFloat(l)|0]+u,I=i,T=t[r];T[I]=T[I]+w,++r==a&&(r=0,++i),f*=l}}else if(p*=this.dimensions,_)for(var C=0,E=o;C<E;){var B=h[p+C++]+u,P=i,A=t[r];A[P]=A[P]+B,++r==a&&(r=0,++i),u=B}else for(var L=0,$=o;L<$;){var N=h[p+L++]+u,R=i,V=t[r];V[R]=V[R]+N,++r==a&&(r=0,++i)}n-=o}return{cInter:r,pInter:i}},residueDecode:function(e,t,a,r,i){if(0==i)for(var s=r/this.dimensions|0,n=0,o=s;n<o;){var h=n++;if(!this.codebookDecodeStep(e,t,a+h,r-a-h,s))return!1}else for(var _=0;_<r;){if(!this.codebookDecode(e,t,a,r-_))return!1;_+=this.dimensions,a+=this.dimensions}return!0},__class__:kha_audio2_ogg_vorbis_data_Codebook};var kha_audio2_ogg_vorbis_data_Comment=$hxClasses["kha.audio2.ogg.vorbis.data.Comment"]=function(){this.data=new haxe_ds_StringMap};kha_audio2_ogg_vorbis_data_Comment.__name__=!0,kha_audio2_ogg_vorbis_data_Comment.prototype={data:null,get_title:function(){return this.getString("title")},get_loopStart:function(){return Std.parseInt(this.getString("loopstart"))},get_loopLength:function(){return Std.parseInt(this.getString("looplength"))},get_version:function(){return this.getString("version")},get_album:function(){return this.getString("album")},get_organization:function(){return this.getString("organization")},get_tracknumber:function(){return this.getString("tracknumber")},get_performer:function(){return this.getString("performer")},get_copyright:function(){return this.getString("copyright")},get_license:function(){return this.getString("license")},get_artist:function(){return this.getString("artist")},get_description:function(){return this.getString("description")},get_genre:function(){return this.getString("genre")},get_date:function(){return this.getString("date")},get_location:function(){return this.getString("location")},get_contact:function(){return this.getString("contact")},get_isrc:function(){return this.getString("isrc")},get_artists:function(){return this.getArray("artist")},add:function(e,t){e=e.toLowerCase();var a=this.data;if(null!=__map_reserved[e]?a.existsReserved(e):a.h.hasOwnProperty(e)){var r=this.data;(null!=__map_reserved[e]?r.getReserved(e):r.h[e]).push(t)}else{var i=[t],s=this.data;null!=__map_reserved[e]?s.setReserved(e,i):s.h[e]=i}},getString:function(e){e=e.toLowerCase();var t=this.data;if(null!=__map_reserved[e]?t.existsReserved(e):t.h.hasOwnProperty(e)){var a=this.data;return(null!=__map_reserved[e]?a.getReserved(e):a.h[e])[0]}return null},getArray:function(e){e=e.toLowerCase();var t=this.data;if(null!=__map_reserved[e]?t.existsReserved(e):t.h.hasOwnProperty(e)){var a=this.data;return null!=__map_reserved[e]?a.getReserved(e):a.h[e]}return null},__class__:kha_audio2_ogg_vorbis_data_Comment};var kha_audio2_ogg_vorbis_data_Floor=$hxClasses["kha.audio2.ogg.vorbis.data.Floor"]=function(){};kha_audio2_ogg_vorbis_data_Floor.__name__=!0,kha_audio2_ogg_vorbis_data_Floor.read=function(e,t){var a=new kha_audio2_ogg_vorbis_data_Floor;if(a.type=e.readBits(16),1<a.type)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:28,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));if(0==a.type){var r=a.floor0=new kha_audio2_ogg_vorbis_data_Floor0;r.order=e.readBits(8),r.rate=e.readBits(16),r.barkMapSize=e.readBits(16),r.amplitudeBits=e.readBits(6),r.amplitudeOffset=e.readBits(8),r.numberOfBooks=e.readBits(4)+1;for(var i=0,s=r.numberOfBooks;i<s;){var n=i++;r.bookList[n]=e.readBits(8)}throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.FEATURE_NOT_SUPPORTED,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:41,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}var o=[],h=a.floor1=new kha_audio2_ogg_vorbis_data_Floor1,_=-1;h.partitions=e.readBits(5);var l=new Array(h.partitions);h.partitionClassList=l;for(var u=0,d=h.partitions;u<d;){var c=u++;h.partitionClassList[c]=e.readBits(4),h.partitionClassList[c]>_&&(_=h.partitionClassList[c])}var g=new Array(_+1);h.classDimensions=g;var p=new Array(_+1);h.classMasterbooks=p;var f=new Array(_+1);h.classSubclasses=f;var m=new Array(_+1);h.subclassBooks=m;for(var k=0,v=_+1;k<v;){var S=k++;if(h.classDimensions[S]=e.readBits(3)+1,h.classSubclasses[S]=e.readBits(2),0!=h.classSubclasses[S]&&(h.classMasterbooks[S]=e.readBits(8),h.classMasterbooks[S]>=t.length))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:64,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));var b=1<<h.classSubclasses[S],y=h.subclassBooks,x=new Array(b);y[S]=x;for(var w=0,I=b;w<I;){var T=w++;if(h.subclassBooks[S][T]=e.readBits(8)-1,h.subclassBooks[S][T]>=t.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}}h.floor1Multiplier=e.readBits(2)+1,h.rangebits=e.readBits(4);var C=new Array(250);h.xlist=C,h.xlist[0]=0,h.xlist[1]=1<<h.rangebits,h.values=2;for(var E=0,B=h.partitions;E<B;)for(var P=E++,A=h.partitionClassList[P],L=0,$=h.classDimensions[A];L<$;){L++;h.xlist[h.values]=e.readBits(h.rangebits),h.values++}for(var N=0,R=h.values;N<R;){var V=N++;o.push(new kha_audio2_ogg_vorbis_data_IntPoint),o[V].x=h.xlist[V],o[V].y=V}o.sort(kha_audio2_ogg_vorbis_VorbisTools.pointCompare);var M=new Array(h.values);h.sortedOrder=M;for(var F=0,H=h.values;F<H;){var O=F++;h.sortedOrder[O]=o[O].y}var U=new Array(h.values);h.neighbors=U;for(var D=2,z=h.values;D<z;){for(var W=D++,G=h.xlist,j=-1,K=65536,X=0,Y=0,Z=0,Q=W;Z<Q;){var q=Z++;G[q]>j&&G[q]<G[W]&&(j=G[X=q]),G[q]<K&&G[q]>G[W]&&(K=G[Y=q])}var J=X,ee=Y,te=h.neighbors,ae=new Array(h.values);te[W]=ae,h.neighbors[W][0]=J,h.neighbors[W][1]=ee}return a},kha_audio2_ogg_vorbis_data_Floor.prototype={floor0:null,floor1:null,type:null,__class__:kha_audio2_ogg_vorbis_data_Floor};var kha_audio2_ogg_vorbis_data_Floor0=$hxClasses["kha.audio2.ogg.vorbis.data.Floor0"]=function(){};kha_audio2_ogg_vorbis_data_Floor0.__name__=!0,kha_audio2_ogg_vorbis_data_Floor0.prototype={order:null,rate:null,barkMapSize:null,amplitudeBits:null,amplitudeOffset:null,numberOfBooks:null,bookList:null,__class__:kha_audio2_ogg_vorbis_data_Floor0};var kha_audio2_ogg_vorbis_data_Floor1=$hxClasses["kha.audio2.ogg.vorbis.data.Floor1"]=function(){};kha_audio2_ogg_vorbis_data_Floor1.__name__=!0,kha_audio2_ogg_vorbis_data_Floor1.prototype={partitions:null,partitionClassList:null,classDimensions:null,classSubclasses:null,classMasterbooks:null,subclassBooks:null,xlist:null,sortedOrder:null,neighbors:null,floor1Multiplier:null,rangebits:null,values:null,__class__:kha_audio2_ogg_vorbis_data_Floor1};var kha_audio2_ogg_vorbis_data_Header=$hxClasses["kha.audio2.ogg.vorbis.data.Header"]=function(){};kha_audio2_ogg_vorbis_data_Header.__name__=!0,kha_audio2_ogg_vorbis_data_Header.read=function(e){var t=e.page;if(t.start(e),0==(2&t.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"not firstPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(4&t.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"lastPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(1&t.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"continuedPacket",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.firstPageValidate(),e.inputPosition+=1,1!=e.input.readByte())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:57,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var a,r,i,s,n,o,h=new haxe_io_Bytes(new ArrayBuffer(6));if(0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,a=e.input.readByte()):a=-1,e.validBits=0,h.b[0]=a,0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,r=e.input.readByte()):r=-1,e.validBits=0,h.b[1]=r,0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,i=e.input.readByte()):i=-1,e.validBits=0,h.b[2]=i,0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,s=e.input.readByte()):s=-1,e.validBits=0,h.b[3]=s,0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,n=e.input.readByte()):n=-1,e.validBits=0,h.b[4]=n,0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,o=e.input.readByte()):o=-1,e.validBits=0,h.b[5]=o,"vorbis"!=h.toString())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));e.inputPosition+=4;var _=e.input.readInt32();if(0!=_)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"vorbis version : "+_,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:66,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var l=new kha_audio2_ogg_vorbis_data_Header;if(e.inputPosition+=1,l.channel=e.input.readByte(),0==l.channel)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no channel",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(16<l.channel)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.TOO_MANY_CHANNELS,"too many channels",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:75,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.inputPosition+=4,l.sampleRate=e.input.readInt32(),0==l.sampleRate)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no sampling rate",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:80,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.inputPosition+=4,l.maximumBitRate=e.input.readInt32(),e.inputPosition+=4,l.nominalBitRate=e.input.readInt32(),e.inputPosition+=4,l.minimumBitRate=e.input.readInt32(),e.inputPosition+=1;var u=e.input.readByte(),d=15&u,c=u>>4;if(l.blocksize0=1<<d,l.blocksize1=1<<c,d<6||13<d)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:93,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(c<6||13<c)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:96,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(c<d)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:99,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.inputPosition+=1;var g=e.input.readByte();if(0==(1&g))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:105,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.page.start(e),e.startPacket();for(var p=0,f=new haxe_io_BytesOutput;0!=(p=e.next());)e.inputPosition+=p,f.write(e.input.read(p)),e.bytesInSeg=0;var m=new haxe_io_BytesInput(f.getBytes());m.readByte(),m.read(6);var k,v=m.readInt32();l.vendor=m.readString(v),l.comment=new kha_audio2_ogg_vorbis_data_Comment;for(var S=0,b=m.readInt32();S<b;){S++;var y=m.readInt32(),x=m.readString(y),w=x.indexOf("=");-1!=w&&l.comment.add(x.substring(0,w),x.substring(w+1))}if(0==(1&m.readByte()))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:141,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.startPacket(),0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,k=e.input.readByte()):k=-1,e.validBits=0,5!=k)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"setup packet",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:149,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var I,T,C,E,B,P,A=new haxe_io_Bytes(new ArrayBuffer(6));if(0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,I=e.input.readByte()):I=-1,e.validBits=0,A.b[0]=I,0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,T=e.input.readByte()):T=-1,e.validBits=0,A.b[1]=T,0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,C=e.input.readByte()):C=-1,e.validBits=0,A.b[2]=C,0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,E=e.input.readByte()):E=-1,e.validBits=0,A.b[3]=E,0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,B=e.input.readByte()):B=-1,e.validBits=0,A.b[4]=B,0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,P=e.input.readByte()):P=-1,e.validBits=0,A.b[5]=P,"vorbis"!=A.toString())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));var L=e.readBits(8)+1,$=new Array(L);l.codebooks=$;for(var N=0,R=L;N<R;){var V=N++;l.codebooks[V]=kha_audio2_ogg_vorbis_data_Codebook.read(e)}for(var M=0,F=g=e.readBits(6)+1;M<F;){M++;if(0!=e.readBits(16))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:165,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var H=e.readBits(6)+1,O=new Array(H);l.floorConfig=O;for(var U=0,D=H;U<D;){var z=U++;l.floorConfig[z]=kha_audio2_ogg_vorbis_data_Floor.read(e,l.codebooks)}var W=e.readBits(6)+1,G=new Array(W);l.residueConfig=G;for(var j=0,K=W;j<K;){var X=j++;l.residueConfig[X]=kha_audio2_ogg_vorbis_data_Residue.read(e,l.codebooks)}var Y=e.readBits(6)+1,Z=new Array(Y);l.mapping=Z;for(var Q=0,q=Y;Q<q;)for(var J=Q++,ee=kha_audio2_ogg_vorbis_data_Mapping.read(e,l.channel),te=0,ae=(l.mapping[J]=ee).submaps;te<ae;){var re=te++;if(ee.submapFloor[re]>=l.floorConfig.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:191,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(ee.submapResidue[re]>=l.residueConfig.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:194,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var ie=e.readBits(6)+1,se=new Array(ie);l.modes=se;for(var ne=0,oe=ie;ne<oe;){var he=ne++,_e=kha_audio2_ogg_vorbis_data_Mode.read(e);if((l.modes[he]=_e).mapping>=l.mapping.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:205,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}for(;0!=e.bytesInSeg||!e.lastSeg&&0!=e.next();)e.bytesInSeg--,e.inputPosition+=1,e.input.readByte();return l},kha_audio2_ogg_vorbis_data_Header.prototype={maximumBitRate:null,nominalBitRate:null,minimumBitRate:null,sampleRate:null,channel:null,blocksize0:null,blocksize1:null,codebooks:null,floorConfig:null,residueConfig:null,mapping:null,modes:null,comment:null,vendor:null,__class__:kha_audio2_ogg_vorbis_data_Header};var kha_audio2_ogg_vorbis_data_IntPoint=$hxClasses["kha.audio2.ogg.vorbis.data.IntPoint"]=function(){};kha_audio2_ogg_vorbis_data_IntPoint.__name__=!0,kha_audio2_ogg_vorbis_data_IntPoint.prototype={x:null,y:null,__class__:kha_audio2_ogg_vorbis_data_IntPoint};var kha_audio2_ogg_vorbis_data_Mapping=$hxClasses["kha.audio2.ogg.vorbis.data.Mapping"]=function(){};kha_audio2_ogg_vorbis_data_Mapping.__name__=!0,kha_audio2_ogg_vorbis_data_Mapping.read=function(e,t){var a=new kha_audio2_ogg_vorbis_data_Mapping,r=e.readBits(16);if(0!=r)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"mapping type "+r,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));var i=new Array(t);a.chan=i;for(var s=0,n=t;s<n;){var o=s++;a.chan[o]=new kha_audio2_ogg_vorbis_data_MappingChannel}if(0!=e.readBits(1)?a.submaps=e.readBits(4)+1:a.submaps=1,0!=e.readBits(1)){a.couplingSteps=e.readBits(8)+1;for(var h=0,_=a.couplingSteps;h<_;){var l=h++,u=t-1,d=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];a.chan[l].magnitude=e.readBits(u<16384?u<16?d[u]:u<512?5+d[u>>5]:10+d[u>>10]:u<16777216?u<524288?15+d[u>>15]:20+d[u>>20]:u<536870912?25+d[u>>25]:u<-2147483648?30+d[u>>30]:0);var c=t-1,g=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];if(a.chan[l].angle=e.readBits(c<16384?c<16?g[c]:c<512?5+g[c>>5]:10+g[c>>10]:c<16777216?c<524288?15+g[c>>15]:20+g[c>>20]:c<536870912?25+g[c>>25]:c<-2147483648?30+g[c>>30]:0),a.chan[l].magnitude>=t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(a.chan[l].angle>=t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(a.chan[l].magnitude==a.chan[l].angle)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}}else a.couplingSteps=0;if(0!=e.readBits(2))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:61,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(1<a.submaps)for(var p=0,f=t;p<f;){var m=p++;if(a.chan[m].mux=e.readBits(4),a.chan[m].mux>=a.submaps)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}else for(var k=0,v=t;k<v;){var S=k++;a.chan[S].mux=0}var b=new Array(a.submaps);a.submapFloor=b;var y=new Array(a.submaps);a.submapResidue=y;for(var x=0,w=a.submaps;x<w;){var I=x++;e.readBits(8),a.submapFloor[I]=e.readBits(8),a.submapResidue[I]=e.readBits(8)}return a},kha_audio2_ogg_vorbis_data_Mapping.prototype={couplingSteps:null,chan:null,submaps:null,submapFloor:null,submapResidue:null,doFloor:function(e,t,a,r,i,s){var n=a>>1,o=this.chan[t].mux,h=e[this.submapFloor[o]];if(0==h.type)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:94,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"doFloor"}));for(var _=h.floor1,l=0,u=i[0]*_.floor1Multiplier,d=1,c=_.values;d<c;){var g=d++,p=_.sortedOrder[g];if(0<=i[p]){var f=i[p]*_.floor1Multiplier,m=_.xlist[p];kha_audio2_ogg_vorbis_VorbisTools.drawLine(r,l,u,m,f,n),l=m,u=f}}if(l<n)for(var k=l,v=n;k<v;){var S=k++,b=r;b[S]=b[S]*kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[u]}},__class__:kha_audio2_ogg_vorbis_data_Mapping};var kha_audio2_ogg_vorbis_data_MappingChannel=$hxClasses["kha.audio2.ogg.vorbis.data.MappingChannel"]=function(){};kha_audio2_ogg_vorbis_data_MappingChannel.__name__=!0,kha_audio2_ogg_vorbis_data_MappingChannel.prototype={magnitude:null,angle:null,mux:null,__class__:kha_audio2_ogg_vorbis_data_MappingChannel};var kha_audio2_ogg_vorbis_data_Mode=$hxClasses["kha.audio2.ogg.vorbis.data.Mode"]=function(){};kha_audio2_ogg_vorbis_data_Mode.__name__=!0,kha_audio2_ogg_vorbis_data_Mode.read=function(e){var t=new kha_audio2_ogg_vorbis_data_Mode;if(t.blockflag=0!=e.readBits(1),t.windowtype=e.readBits(16),t.transformtype=e.readBits(16),t.mapping=e.readBits(8),0!=t.windowtype)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));if(0!=t.transformtype)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:25,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));return t},kha_audio2_ogg_vorbis_data_Mode.prototype={blockflag:null,mapping:null,windowtype:null,transformtype:null,__class__:kha_audio2_ogg_vorbis_data_Mode};var kha_audio2_ogg_vorbis_data_Page=$hxClasses["kha.audio2.ogg.vorbis.data.Page"]=function(){};kha_audio2_ogg_vorbis_data_Page.__name__=!0,kha_audio2_ogg_vorbis_data_Page.prototype={flag:null,clone:function(){var e=new kha_audio2_ogg_vorbis_data_Page;return e.flag=this.flag,e},start:function(e){var t,a,r;if(e.inputPosition+=1,79==e.input.readByte()?(e.inputPosition+=1,r=103!=e.input.readByte()):r=!0,r?a=!0:(e.inputPosition+=1,a=103!=e.input.readByte()),a?t=!0:(e.inputPosition+=1,t=83!=e.input.readByte()),t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}));this.startWithoutCapturePattern(e)},startWithoutCapturePattern:function(e){e.inputPosition+=1;var t=e.input.readByte();if(0!=t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM_STRUCTURE_VERSION,""+t,{fileName:"kha/audio2/ogg/vorbis/data/Page.hx",lineNumber:34,className:"kha.audio2.ogg.vorbis.data.Page",methodName:"startWithoutCapturePattern"}));e.inputPosition+=1,this.flag=e.input.readByte(),e.inputPosition+=4;var a=e.input.readInt32();e.inputPosition+=4;var r=e.input.readInt32();e.inputPosition+=4,e.input.readInt32(),e.inputPosition+=4,e.input.readInt32(),e.inputPosition+=4,e.input.readInt32(),e.setup(a,r)},__class__:kha_audio2_ogg_vorbis_data_Page};var kha_audio2_ogg_vorbis_data_PageFlag=$hxClasses["kha.audio2.ogg.vorbis.data.PageFlag"]=function(){};kha_audio2_ogg_vorbis_data_PageFlag.__name__=!0;var kha_audio2_ogg_vorbis_data_ProbedPage=$hxClasses["kha.audio2.ogg.vorbis.data.ProbedPage"]=function(){};kha_audio2_ogg_vorbis_data_ProbedPage.__name__=!0,kha_audio2_ogg_vorbis_data_ProbedPage.prototype={pageStart:null,pageEnd:null,afterPreviousPageStart:null,firstDecodedSample:null,lastDecodedSample:null,__class__:kha_audio2_ogg_vorbis_data_ProbedPage};var kha_audio2_ogg_vorbis_data_ReaderError=$hxClasses["kha.audio2.ogg.vorbis.data.ReaderError"]=function(e,t,a){null==t&&(t=""),this.type=e,this.message=t,this.posInfos=a};kha_audio2_ogg_vorbis_data_ReaderError.__name__=!0,kha_audio2_ogg_vorbis_data_ReaderError.prototype={type:null,message:null,posInfos:null,__class__:kha_audio2_ogg_vorbis_data_ReaderError};var kha_audio2_ogg_vorbis_data_ReaderErrorType=$hxEnums["kha.audio2.ogg.vorbis.data.ReaderErrorType"]={__ename__:!0,__constructs__:["NEED_MORE_DATA","INVALID_API_MIXING","OUTOFMEM","FEATURE_NOT_SUPPORTED","TOO_MANY_CHANNELS","FILE_OPEN_FAILURE","SEEK_WITHOUT_LENGTH","UNEXPECTED_EOF","SEEK_INVALID","INVALID_SETUP","INVALID_STREAM","MISSING_CAPTURE_PATTERN","INVALID_STREAM_STRUCTURE_VERSION","CONTINUED_PACKET_FLAG_INVALID","INCORRECT_STREAM_SERIAL_NUMBER","INVALID_FIRST_PAGE","BAD_PACKET_TYPE","CANT_FIND_LAST_PAGE","SEEK_FAILED","OTHER"],NEED_MORE_DATA:{_hx_index:0,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_API_MIXING:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},OUTOFMEM:{_hx_index:2,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},FEATURE_NOT_SUPPORTED:{_hx_index:3,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},TOO_MANY_CHANNELS:{_hx_index:4,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},FILE_OPEN_FAILURE:{_hx_index:5,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_WITHOUT_LENGTH:{_hx_index:6,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},UNEXPECTED_EOF:{_hx_index:7,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_INVALID:{_hx_index:8,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_SETUP:{_hx_index:9,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_STREAM:{_hx_index:10,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},MISSING_CAPTURE_PATTERN:{_hx_index:11,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_STREAM_STRUCTURE_VERSION:{_hx_index:12,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},CONTINUED_PACKET_FLAG_INVALID:{_hx_index:13,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INCORRECT_STREAM_SERIAL_NUMBER:{_hx_index:14,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_FIRST_PAGE:{_hx_index:15,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},BAD_PACKET_TYPE:{_hx_index:16,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},CANT_FIND_LAST_PAGE:{_hx_index:17,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_FAILED:{_hx_index:18,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},OTHER:{_hx_index:19,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}},kha_audio2_ogg_vorbis_data_Residue=$hxClasses["kha.audio2.ogg.vorbis.data.Residue"]=function(){};kha_audio2_ogg_vorbis_data_Residue.__name__=!0,kha_audio2_ogg_vorbis_data_Residue.read=function(e,t){var a=new kha_audio2_ogg_vorbis_data_Residue;if(a.type=e.readBits(16),2<a.type)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:29,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}));var r=new Array(64);a.begin=e.readBits(24),a.end=e.readBits(24),a.partSize=e.readBits(24)+1;var i=a.classifications=e.readBits(6)+1;a.classbook=e.readBits(8);for(var s=0,n=a.classifications;s<n;){var o=s++,h=0,_=e.readBits(3);0!=e.readBits(1)&&(h=e.readBits(5)),r[o]=8*h+_}var l=new Array(a.classifications);a.residueBooks=l;for(var u=0,d=a.classifications;u<d;){var c=u++,g=a.residueBooks,p=new Array(8);g[c]=p;for(var f=0;f<8;){var m=f++;if(0!=(r[c]&1<<m)){if(a.residueBooks[c][m]=e.readBits(8),a.residueBooks[c][m]>=t.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:55,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}))}else a.residueBooks[c][m]=-1}}var k=t[a.classbook].entries,v=t[a.classbook].dimensions,S=new Array(k);a.classdata=S;for(var b=0,y=k;b<y;)for(var x=b++,w=x,I=v,T=a.classdata,C=new Array(v),E=T[x]=C;0<=--I;)E[I]=w%i,w=w/i|0;return a},kha_audio2_ogg_vorbis_data_Residue.prototype={begin:null,end:null,partSize:null,classifications:null,classbook:null,classdata:null,residueBooks:null,type:null,decode:function(e,t,a,r,i,s,n){for(var o=t.codebooks,h=o[this.classbook].dimensions,_=this.end-this.begin,l=this.partSize,u=_$UInt_UInt_$Impl_$.toFloat(_)/_$UInt_UInt_$Impl_$.toFloat(l)|0,d=new Array(t.channel*u+1),c=0,g=r;c<g;){var p=c++;if(!s[p])for(var f=a[p],m=0,k=f.length;m<k;){f[m++]=0}}if(2!=this.type||1==r)for(var v=0;v<8;)for(var S=v++,b=0;b<u;){if(0==S)for(var y=0,x=r;y<x;){var w=y++;if(!s[w]){var I=o[this.classbook];e.validBits<10&&e.prepHuffman();var T,C=I.fastHuffman[1023&e.acc];if(0<=C){var E=I.codewordLengths[C];e.acc=e.acc>>>E,e.validBits-=E,e.validBits<0?(e.validBits=0,T=-1):T=C}else T=e.decodeScalarRaw(I);I.sparse&&(T=I.sortedValues[T]);var B=T;if(-1==B)return;for(var P=h;0<=--P;)d[w*u+P+b]=B%this.classifications,B=B/this.classifications|0}}for(var A=0,L=h;A<L;){A++;if(u<=b)break;for(var $=0,N=r;$<N;){var R=$++;if(!s[R]){var V=d[R*u+b],M=this.residueBooks[V][S];if(0<=M){var F=a[R],H=this.begin+b*l,O=l;if(!o[M].residueDecode(e,F,H,O,this.type))return}}}++b}}else{for(var U=0,D=r;U<D;){var z=U++;if(!s[z])break;if(z==r-1)return}for(var W=0;W<8;){var G=W++,j=0;if(2==r)for(;j<u;){var K=this.begin+j*l,X=1&K,Y=K>>>1;if(0==G){var Z=o[this.classbook];e.validBits<10&&e.prepHuffman();var Q,q=Z.fastHuffman[1023&e.acc];if(0<=q){var J=Z.codewordLengths[q];e.acc=e.acc>>>J,e.validBits-=J,e.validBits<0?(e.validBits=0,Q=-1):Q=q}else Q=e.decodeScalarRaw(Z);Z.sparse&&(Q=Z.sortedValues[Q]);var ee=Q;if(-1==ee)return;for(var te=h;0<=--te;)d[te+j]=ee%this.classifications,ee=ee/this.classifications|0}for(var ae=0,re=h;ae<re;){ae++;if(u<=j)break;var ie=this.begin+j*l,se=d[j],ne=this.residueBooks[se][G];if(0<=ne){var oe=o[ne].decodeDeinterleaveRepeat(e,a,r,X,Y,i,l);if(null==oe)return;X=oe.cInter,Y=oe.pInter}else X=1&(ie+=l),Y=ie>>>1;++j}}else if(1==r)for(;j<u;){var he=0,_e=this.begin+j*l;if(0==G){var le=o[this.classbook];e.validBits<10&&e.prepHuffman();var ue,de=le.fastHuffman[1023&e.acc];if(0<=de){var ce=le.codewordLengths[de];e.acc=e.acc>>>ce,e.validBits-=ce,e.validBits<0?(e.validBits=0,ue=-1):ue=de}else ue=e.decodeScalarRaw(le);le.sparse&&(ue=le.sortedValues[ue]);var ge=ue;if(-1==ge)return;for(var pe=h;0<=--pe;)d[pe+j]=ge%this.classifications,ge=ge/this.classifications|0}for(var fe=0,me=h;fe<me;){fe++;if(u<=j)break;var ke=this.begin+j*l,ve=this.residueBooks[d[j]][G];if(0<=ve){var Se=o[ve].decodeDeinterleaveRepeat(e,a,r,he,_e,i,l);if(null==Se)return;he=Se.cInter,_e=Se.pInter}else he=0,_e=ke+=l;++j}}else for(;j<u;){var be=this.begin+j*l,ye=_$UInt_UInt_$Impl_$.toFloat(be)%_$UInt_UInt_$Impl_$.toFloat(r)|0,xe=_$UInt_UInt_$Impl_$.toFloat(be)/_$UInt_UInt_$Impl_$.toFloat(r)|0;if(0==G){var we=o[this.classbook];e.validBits<10&&e.prepHuffman();var Ie,Te=we.fastHuffman[1023&e.acc];if(0<=Te){var Ce=we.codewordLengths[Te];e.acc=e.acc>>>Ce,e.validBits-=Ce,e.validBits<0?(e.validBits=0,Ie=-1):Ie=Te}else Ie=e.decodeScalarRaw(we);we.sparse&&(Ie=we.sortedValues[Ie]);var Ee=Ie;if(-1==Ee)return;for(var Be=h;0<=--Be;)d[Be+j]=Ee%this.classifications,Ee=Ee/this.classifications|0}for(var Pe=0,Ae=h;Pe<Ae;){Pe++;if(u<=j)break;var Le=this.begin+j*l,$e=this.residueBooks[d[j]][G];if(0<=$e){var Ne=o[$e].decodeDeinterleaveRepeat(e,a,r,ye,xe,i,l);if(null==Ne)return;ye=Ne.cInter,xe=Ne.pInter}else Le+=l,ye=_$UInt_UInt_$Impl_$.toFloat(Le)%_$UInt_UInt_$Impl_$.toFloat(r)|0,xe=_$UInt_UInt_$Impl_$.toFloat(Le)/_$UInt_UInt_$Impl_$.toFloat(r)|0;++j}}}}},__class__:kha_audio2_ogg_vorbis_data_Residue};var kha_audio2_ogg_vorbis_data_Setting=$hxClasses["kha.audio2.ogg.vorbis.data.Setting"]=function(){};kha_audio2_ogg_vorbis_data_Setting.__name__=!0;var kha_compute_ConstantLocation=$hxClasses["kha.compute.ConstantLocation"]=function(){};kha_compute_ConstantLocation.__name__=!0,kha_compute_ConstantLocation.prototype={__class__:kha_compute_ConstantLocation};var kha_compute_TextureUnit=$hxClasses["kha.compute.TextureUnit"]=function(){};kha_compute_TextureUnit.__name__=!0,kha_compute_TextureUnit.prototype={__class__:kha_compute_TextureUnit};var kha_graphics1_Graphics=$hxClasses["kha.graphics1.Graphics"]=function(){};kha_graphics1_Graphics.__name__=!0,kha_graphics1_Graphics.prototype={begin:null,end:null,setPixel:null,__class__:kha_graphics1_Graphics};var kha_graphics2_Graphics=$hxClasses["kha.graphics2.Graphics"]=function(){this.transformations=[],this.transformations.push(new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1)),this.opacities=[],this.opacities.push(1),this.myFontSize=12,this.pipe=null};kha_graphics2_Graphics.__name__=!0,kha_graphics2_Graphics.prototype={begin:function(e,t){null==e&&(e=!0)},end:function(){},flush:function(){},clear:function(e){},drawImage:function(e,t,a){this.drawSubImage(e,t,a,0,0,e.get_width(),e.get_height())},drawSubImage:function(e,t,a,r,i,s,n){this.drawScaledSubImage(e,r,i,s,n,t,a,s,n)},drawScaledImage:function(e,t,a,r,i){this.drawScaledSubImage(e,0,0,e.get_width(),e.get_height(),t,a,r,i)},drawScaledSubImage:function(e,t,a,r,i,s,n,o,h){},drawRect:function(e,t,a,r,i){null==i&&(i=1)},fillRect:function(e,t,a,r){},drawString:function(e,t,a){},drawCharacters:function(e,t,a,r,i){},drawLine:function(e,t,a,r,i){null==i&&(i=1)},drawVideo:function(e,t,a,r,i){},fillTriangle:function(e,t,a,r,i,s){},get_imageScaleQuality:function(){return kha_graphics2_ImageScaleQuality.Low},set_imageScaleQuality:function(e){return kha_graphics2_ImageScaleQuality.High},get_mipmapScaleQuality:function(){return kha_graphics2_ImageScaleQuality.Low},set_mipmapScaleQuality:function(e){return kha_graphics2_ImageScaleQuality.High},get_color:function(){return-16777216},set_color:function(e){return-16777216},get_font:function(){return null},set_font:function(e){return null},get_fontSize:function(){return this.myFontSize},set_fontSize:function(e){return this.myFontSize=e},pushTransformation:function(e){var t=new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);t._00=e._00,t._10=e._10,t._20=e._20,t._01=e._01,t._11=e._11,t._21=e._21,t._02=e._02,t._12=e._12,t._22=e._22,this.setTransformation(t),this.transformations.push(t)},popTransformation:function(){var e=this.transformations.pop();return this.setTransformation(this.transformations[this.transformations.length-1]),e},get_transformation:function(){return this.transformations[this.transformations.length-1]},set_transformation:function(e){this.setTransformation(e);var t=this.transformations[this.transformations.length-1];return t._00=e._00,t._10=e._10,t._20=e._20,t._01=e._01,t._11=e._11,t._21=e._21,t._02=e._02,t._12=e._12,t._22=e._22,e},translation:function(e,t){var a=e,r=t,i=this.transformations[this.transformations.length-1];return new kha_math_FastMatrix3(1*i._00+0*i._01+a*i._02,1*i._10+0*i._11+a*i._12,1*i._20+0*i._21+a*i._22,0*i._00+1*i._01+r*i._02,0*i._10+1*i._11+r*i._12,0*i._20+1*i._21+r*i._22,0*i._00+0*i._01+1*i._02,0*i._10+0*i._11+1*i._12,0*i._20+0*i._21+1*i._22)},translate:function(e,t){var a=e,r=t,i=this.transformations[this.transformations.length-1],s=new kha_math_FastMatrix3(1*i._00+0*i._01+a*i._02,1*i._10+0*i._11+a*i._12,1*i._20+0*i._21+a*i._22,0*i._00+1*i._01+r*i._02,0*i._10+1*i._11+r*i._12,0*i._20+1*i._21+r*i._22,0*i._00+0*i._01+1*i._02,0*i._10+0*i._11+1*i._12,0*i._20+0*i._21+1*i._22);this.setTransformation(s);var n=this.transformations[this.transformations.length-1];n._00=s._00,n._10=s._10,n._20=s._20,n._01=s._01,n._11=s._11,n._21=s._21,n._02=s._02,n._12=s._12,n._22=s._22},pushTranslation:function(e,t){var a=e,r=t,i=this.transformations[this.transformations.length-1];this.pushTransformation(new kha_math_FastMatrix3(1*i._00+0*i._01+a*i._02,1*i._10+0*i._11+a*i._12,1*i._20+0*i._21+a*i._22,0*i._00+1*i._01+r*i._02,0*i._10+1*i._11+r*i._12,0*i._20+1*i._21+r*i._22,0*i._00+0*i._01+1*i._02,0*i._10+0*i._11+1*i._12,0*i._20+0*i._21+1*i._22))},rotation:function(e,t,a){var r=t,i=a,s=Math.cos(e),n=-Math.sin(e),o=Math.sin(e),h=Math.cos(e),_=1*s+0*o+0*r,l=1*n+0*h+0*r,u=0+1*r,d=0*s+1*o+0*i,c=0*n+1*h+0*i,g=0+1*i,p=0*s+0*o+0,f=0*n+0*h+0,m=-t,k=-a,v=1*_+0*l+0*u,S=0*_+1*l+0*u,b=_*m+l*k+1*u,y=1*d+0*c+0*g,x=0*d+1*c+0*g,w=d*m+c*k+1*g,I=1*p+0*f+0,T=0*p+1*f+0,C=p*m+f*k+1,E=this.transformations[this.transformations.length-1];return new kha_math_FastMatrix3(v*E._00+S*E._01+b*E._02,v*E._10+S*E._11+b*E._12,v*E._20+S*E._21+b*E._22,y*E._00+x*E._01+w*E._02,y*E._10+x*E._11+w*E._12,y*E._20+x*E._21+w*E._22,I*E._00+T*E._01+C*E._02,I*E._10+T*E._11+C*E._12,I*E._20+T*E._21+C*E._22)},rotate:function(e,t,a){var r=t,i=a,s=Math.cos(e),n=-Math.sin(e),o=Math.sin(e),h=Math.cos(e),_=1*s+0*o+0*r,l=1*n+0*h+0*r,u=0+1*r,d=0*s+1*o+0*i,c=0*n+1*h+0*i,g=0+1*i,p=0*s+0*o+0,f=0*n+0*h+0,m=-t,k=-a,v=1*_+0*l+0*u,S=0*_+1*l+0*u,b=_*m+l*k+1*u,y=1*d+0*c+0*g,x=0*d+1*c+0*g,w=d*m+c*k+1*g,I=1*p+0*f+0,T=0*p+1*f+0,C=p*m+f*k+1,E=this.transformations[this.transformations.length-1],B=v*E._00+S*E._01+b*E._02,P=v*E._10+S*E._11+b*E._12,A=v*E._20+S*E._21+b*E._22,L=y*E._00+x*E._01+w*E._02,$=y*E._10+x*E._11+w*E._12,N=y*E._20+x*E._21+w*E._22,R=I*E._00+T*E._01+C*E._02,V=I*E._10+T*E._11+C*E._12,M=I*E._20+T*E._21+C*E._22;this.transformations[this.transformations.length-1]._00=B,this.transformations[this.transformations.length-1]._01=L,this.transformations[this.transformations.length-1]._02=R,this.transformations[this.transformations.length-1]._10=P,this.transformations[this.transformations.length-1]._11=$,this.transformations[this.transformations.length-1]._12=V,this.transformations[this.transformations.length-1]._20=A,this.transformations[this.transformations.length-1]._21=N,this.transformations[this.transformations.length-1]._22=M},pushRotation:function(e,t,a){var r=t,i=a,s=Math.cos(e),n=-Math.sin(e),o=Math.sin(e),h=Math.cos(e),_=1*s+0*o+0*r,l=1*n+0*h+0*r,u=0+1*r,d=0*s+1*o+0*i,c=0*n+1*h+0*i,g=0+1*i,p=0*s+0*o+0,f=0*n+0*h+0,m=-t,k=-a,v=1*_+0*l+0*u,S=0*_+1*l+0*u,b=_*m+l*k+1*u,y=1*d+0*c+0*g,x=0*d+1*c+0*g,w=d*m+c*k+1*g,I=1*p+0*f+0,T=0*p+1*f+0,C=p*m+f*k+1,E=this.transformations[this.transformations.length-1];this.pushTransformation(new kha_math_FastMatrix3(v*E._00+S*E._01+b*E._02,v*E._10+S*E._11+b*E._12,v*E._20+S*E._21+b*E._22,y*E._00+x*E._01+w*E._02,y*E._10+x*E._11+w*E._12,y*E._20+x*E._21+w*E._22,I*E._00+T*E._01+C*E._02,I*E._10+T*E._11+C*E._12,I*E._20+T*E._21+C*E._22))},pushOpacity:function(e){this.setOpacity(e),this.opacities.push(e)},popOpacity:function(){var e=this.opacities.pop();return this.setOpacity(this.get_opacity()),e},get_opacity:function(){return this.opacities[this.opacities.length-1]},set_opacity:function(e){return this.setOpacity(e),this.opacities[this.opacities.length-1]=e},scissor:function(e,t,a,r){},disableScissor:function(){},pipe:null,get_pipeline:function(){return this.pipe},set_pipeline:function(e){return this.setPipeline(e),this.pipe=e},transformations:null,opacities:null,myFontSize:null,setTransformation:function(e){},setOpacity:function(e){},setPipeline:function(e){},__class__:kha_graphics2_Graphics};var kha_graphics2_Graphics1=$hxClasses["kha.graphics2.Graphics1"]=function(e){this.canvas=e};kha_graphics2_Graphics1.__name__=!0,kha_graphics2_Graphics1.__interfaces__=[kha_graphics1_Graphics],kha_graphics2_Graphics1.prototype={canvas:null,texture:null,pixels:null,begin:function(){null==this.texture&&(this.texture=kha_Image.create(this.canvas.get_width(),this.canvas.get_height(),0,2)),this.pixels=this.texture.lock()},end:function(){this.texture.unlock(),this.canvas.get_g2().begin(),this.canvas.get_g2().drawImage(this.texture,0,0),this.canvas.get_g2().end()},setPixel:function(e,t,a){this.pixels.setInt32(t*this.texture.get_realWidth()*4+4*e,a)},__class__:kha_graphics2_Graphics1};var kha_graphics2_ImageScaleQuality=$hxEnums["kha.graphics2.ImageScaleQuality"]={__ename__:!0,__constructs__:["Low","High"],Low:{_hx_index:0,__enum__:"kha.graphics2.ImageScaleQuality",toString:$estr},High:{_hx_index:1,__enum__:"kha.graphics2.ImageScaleQuality",toString:$estr}},kha_graphics2_truetype_VectorOfIntPointer=$hxClasses["kha.graphics2.truetype.VectorOfIntPointer"]=function(){};kha_graphics2_truetype_VectorOfIntPointer.__name__=!0,kha_graphics2_truetype_VectorOfIntPointer.prototype={value:null,__class__:kha_graphics2_truetype_VectorOfIntPointer};var kha_graphics2_truetype_Stbtt_$temp_$rect=$hxClasses["kha.graphics2.truetype.Stbtt_temp_rect"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$rect.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$rect.prototype={x0:null,y0:null,x1:null,y1:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$rect};var kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics=$hxClasses["kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.prototype={advanceWidth:null,leftSideBearing:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics};var kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics=$hxClasses["kha.graphics2.truetype.Stbtt_temp_font_v_metrics"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.prototype={ascent:null,descent:null,lineGap:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics};var kha_graphics2_truetype_Stbtt_$temp_$region=$hxClasses["kha.graphics2.truetype.Stbtt_temp_region"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$region.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$region.prototype={width:null,height:null,xoff:null,yoff:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$region};var kha_graphics2_truetype_Stbtt_$bakedchar=$hxClasses["kha.graphics2.truetype.Stbtt_bakedchar"]=function(){};kha_graphics2_truetype_Stbtt_$bakedchar.__name__=!0,kha_graphics2_truetype_Stbtt_$bakedchar.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,__class__:kha_graphics2_truetype_Stbtt_$bakedchar};var kha_graphics2_truetype_Stbtt_$aligned_$quad=$hxClasses["kha.graphics2.truetype.Stbtt_aligned_quad"]=function(){};kha_graphics2_truetype_Stbtt_$aligned_$quad.__name__=!0,kha_graphics2_truetype_Stbtt_$aligned_$quad.prototype={x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,__class__:kha_graphics2_truetype_Stbtt_$aligned_$quad};var kha_graphics2_truetype_Stbtt_$packedchar=$hxClasses["kha.graphics2.truetype.Stbtt_packedchar"]=function(){};kha_graphics2_truetype_Stbtt_$packedchar.__name__=!0,kha_graphics2_truetype_Stbtt_$packedchar.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,xoff2:null,yoff2:null,__class__:kha_graphics2_truetype_Stbtt_$packedchar};var kha_graphics2_truetype_Stbtt_$pack_$range=$hxClasses["kha.graphics2.truetype.Stbtt_pack_range"]=function(){};kha_graphics2_truetype_Stbtt_$pack_$range.__name__=!0,kha_graphics2_truetype_Stbtt_$pack_$range.prototype={font_size:null,first_unicode_codepoint_in_range:null,array_of_unicode_codepoints:null,num_chars:null,chardata_for_range:null,h_oversample:null,v_oversample:null,__class__:kha_graphics2_truetype_Stbtt_$pack_$range};var kha_graphics2_truetype_Stbtt_$pack_$context=$hxClasses["kha.graphics2.truetype.Stbtt_pack_context"]=function(){};kha_graphics2_truetype_Stbtt_$pack_$context.__name__=!0,kha_graphics2_truetype_Stbtt_$pack_$context.prototype={width:null,height:null,stride_in_bytes:null,padding:null,h_oversample:null,v_oversample:null,pixels:null,__class__:kha_graphics2_truetype_Stbtt_$pack_$context};var kha_graphics2_truetype_Stbtt_$fontinfo=$hxClasses["kha.graphics2.truetype.Stbtt_fontinfo"]=function(){};kha_graphics2_truetype_Stbtt_$fontinfo.__name__=!0,kha_graphics2_truetype_Stbtt_$fontinfo.prototype={data:null,fontstart:null,numGlyphs:null,loca:null,head:null,glyf:null,hhea:null,hmtx:null,kern:null,index_map:null,indexToLocFormat:null,__class__:kha_graphics2_truetype_Stbtt_$fontinfo};var kha_graphics2_truetype_Stbtt_$vertex=$hxClasses["kha.graphics2.truetype.Stbtt_vertex"]=function(){};kha_graphics2_truetype_Stbtt_$vertex.__name__=!0,kha_graphics2_truetype_Stbtt_$vertex.prototype={x:null,y:null,cx:null,cy:null,type:null,padding:null,__class__:kha_graphics2_truetype_Stbtt_$vertex};var kha_graphics2_truetype_Stbtt_$_$bitmap=$hxClasses["kha.graphics2.truetype.Stbtt__bitmap"]=function(){};kha_graphics2_truetype_Stbtt_$_$bitmap.__name__=!0,kha_graphics2_truetype_Stbtt_$_$bitmap.prototype={w:null,h:null,stride:null,pixels:null,pixels_offset:null,__class__:kha_graphics2_truetype_Stbtt_$_$bitmap};var kha_graphics2_truetype_Stbtt_$_$edge=$hxClasses["kha.graphics2.truetype.Stbtt__edge"]=function(){};kha_graphics2_truetype_Stbtt_$_$edge.__name__=!0,kha_graphics2_truetype_Stbtt_$_$edge.prototype={x0:null,y0:null,x1:null,y1:null,invert:null,__class__:kha_graphics2_truetype_Stbtt_$_$edge};var kha_graphics2_truetype_Stbtt_$_$active_$edge=$hxClasses["kha.graphics2.truetype.Stbtt__active_edge"]=function(){};kha_graphics2_truetype_Stbtt_$_$active_$edge.__name__=!0,kha_graphics2_truetype_Stbtt_$_$active_$edge.prototype={next:null,fx:null,fdx:null,fdy:null,direction:null,sy:null,ey:null,__class__:kha_graphics2_truetype_Stbtt_$_$active_$edge};var kha_graphics2_truetype_Stbtt_$_$point=$hxClasses["kha.graphics2.truetype.Stbtt__point"]=function(){};kha_graphics2_truetype_Stbtt_$_$point.__name__=!0,kha_graphics2_truetype_Stbtt_$_$point.prototype={x:null,y:null,__class__:kha_graphics2_truetype_Stbtt_$_$point};var kha_graphics2_truetype_StbTruetype=$hxClasses["kha.graphics2.truetype.StbTruetype"]=function(){};kha_graphics2_truetype_StbTruetype.__name__=!0,kha_graphics2_truetype_StbTruetype.STBTT_assert=function(e){if(!e)throw new js__$Boot_HaxeError("Error")},kha_graphics2_truetype_StbTruetype.STBTT_POINT_SIZE=function(e){return-e},kha_graphics2_truetype_StbTruetype.ttBYTE=function(e,t){return null==t&&(t=0),e.readU8(t)},kha_graphics2_truetype_StbTruetype.ttCHAR=function(e,t){null==t&&(t=0);var a=e.readU8(t);return 128<=a?a-256:a},kha_graphics2_truetype_StbTruetype.ttUSHORT=function(e,t){null==t&&(t=0);var a=e.readU8(t);return e.readU8(t+1)|a<<8},kha_graphics2_truetype_StbTruetype.ttSHORT=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1)|a<<8;return 0!=(32768&r)?r-65536:r},kha_graphics2_truetype_StbTruetype.ttULONG=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1),i=e.readU8(t+2);return e.readU8(t+3)|i<<8|r<<16|a<<24},kha_graphics2_truetype_StbTruetype.ttLONG=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1),i=e.readU8(t+2);return e.readU8(t+3)|i<<8|r<<16|a<<24},kha_graphics2_truetype_StbTruetype.ttFixed=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1),i=e.readU8(t+2);return e.readU8(t+3)|i<<8|r<<16|a<<24},kha_graphics2_truetype_StbTruetype.stbtt_tag4=function(e,t,a,r,i,s){return e.readU8(t)==a&&e.readU8(t+1)==r&&e.readU8(t+2)==i&&e.readU8(t+3)==s},kha_graphics2_truetype_StbTruetype.stbtt_tag=function(e,t,a){var r=HxOverrides.cca(a,0),i=HxOverrides.cca(a,1),s=HxOverrides.cca(a,2),n=HxOverrides.cca(a,3);return e.readU8(t)==r&&e.readU8(t+1)==i&&e.readU8(t+2)==s&&e.readU8(t+3)==n},kha_graphics2_truetype_StbTruetype.stbtt__isfont=function(e){var t=HxOverrides.cca("1",0);if(e.readU8(0)==t&&0==e.readU8(1)&&0==e.readU8(2)&&0==e.readU8(3))return!0;var a=HxOverrides.cca("typ1",0),r=HxOverrides.cca("typ1",1),i=HxOverrides.cca("typ1",2),s=HxOverrides.cca("typ1",3);if(e.readU8(0)==a&&e.readU8(1)==r&&e.readU8(2)==i&&e.readU8(3)==s)return!0;var n=HxOverrides.cca("OTTO",0),o=HxOverrides.cca("OTTO",1),h=HxOverrides.cca("OTTO",2),_=HxOverrides.cca("OTTO",3);return e.readU8(0)==n&&e.readU8(1)==o&&e.readU8(2)==h&&e.readU8(3)==_||0==e.readU8(0)&&1==e.readU8(1)&&0==e.readU8(2)&&0==e.readU8(3)},kha_graphics2_truetype_StbTruetype.stbtt__find_table=function(e,t,a){for(var r=t+4,i=e.readU8(r),s=t+12,n=0,o=e.readU8(r+1)|i<<8;n<o;){var h=s+16*n++,_=HxOverrides.cca(a,0),l=HxOverrides.cca(a,1),u=HxOverrides.cca(a,2),d=HxOverrides.cca(a,3);if(e.readU8(h)==_&&e.readU8(h+1)==l&&e.readU8(h+2)==u&&e.readU8(h+3)==d){var c=h+8,g=e.readU8(c),p=e.readU8(c+1),f=e.readU8(c+2);return e.readU8(c+3)|f<<8|p<<16|g<<24}}return 0},kha_graphics2_truetype_StbTruetype.stbtt_GetFontOffsetForIndex=function(e,t){if(kha_graphics2_truetype_StbTruetype.stbtt__isfont(e))return 0==t?0:-1;var a=HxOverrides.cca("ttcf",0),r=HxOverrides.cca("ttcf",1),i=HxOverrides.cca("ttcf",2),s=HxOverrides.cca("ttcf",3);if(e.readU8(0)==a&&e.readU8(1)==r&&e.readU8(2)==i&&e.readU8(3)==s){var n,o=e.readU8(4),h=e.readU8(5),_=e.readU8(6);if(65536!=(e.readU8(7)|_<<8|h<<16|o<<24)){var l=e.readU8(4),u=e.readU8(5),d=e.readU8(6);n=131072==(e.readU8(7)|d<<8|u<<16|l<<24)}else n=!0;if(n){var c=e.readU8(8),g=e.readU8(9),p=e.readU8(10);if((e.readU8(11)|p<<8|g<<16|c<<24)<=t)return-1;var f=12+4*t,m=e.readU8(f),k=e.readU8(f+1),v=e.readU8(f+2);return e.readU8(f+3)|v<<8|k<<16|m<<24}}return-1},kha_graphics2_truetype_StbTruetype.stbtt_InitFont=function(e,t,a){e.data=t,e.fontstart=a;var r=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"cmap");if(e.loca=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"loca"),e.head=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"head"),e.glyf=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"glyf"),e.hhea=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"hhea"),e.hmtx=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"hmtx"),e.kern=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"kern"),0==r||0==e.loca||0==e.head||0==e.glyf||0==e.hhea||0==e.hmtx)return!1;var i=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"maxp");if(0!=i){var s=i+4,n=t.readU8(s),o=t.readU8(s+1);e.numGlyphs=o|n<<8}else e.numGlyphs=65535;for(var h=r+2,_=t.readU8(h),l=t.readU8(h+1)|_<<8,u=e.index_map=0,d=l;u<d;){var c=r+4+8*u++,g=t.readU8(c);switch(t.readU8(c+1)|g<<8){case 0:var p=c+4,f=t.readU8(p),m=t.readU8(p+1),k=t.readU8(p+2),v=t.readU8(p+3);e.index_map=r+(v|k<<8|m<<16|f<<24);break;case 3:var S=c+2,b=t.readU8(S);switch(t.readU8(S+1)|b<<8){case 1:case 10:var y=c+4,x=t.readU8(y),w=t.readU8(y+1),I=t.readU8(y+2),T=t.readU8(y+3);e.index_map=r+(T|I<<8|w<<16|x<<24)}}}if(0==e.index_map)return!1;var C=e.head+50,E=t.readU8(C),B=t.readU8(C+1);return e.indexToLocFormat=B|E<<8,!0},kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex=function(e,t){var a=e.data,r=e.index_map,i=a.readU8(r),s=a.readU8(r+1)|i<<8;if(0==s){var n=r+2,o=a.readU8(n);return t<(a.readU8(n+1)|o<<8)-6?a.readU8(r+6+t):0}if(6==s){var h=r+6,_=a.readU8(h),l=a.readU8(h+1)|_<<8,u=r+8,d=a.readU8(u),c=a.readU8(u+1);if(l<=t&&t<l+(c|d<<8)){var g=r+10+2*(t-l),p=a.readU8(g);return a.readU8(g+1)|p<<8}return 0}if(2==s)throw new js__$Boot_HaxeError("Error");if(4==s){var f=r+6,m=a.readU8(f),k=(a.readU8(f+1)|m<<8)>>1,v=r+8,S=a.readU8(v),b=(a.readU8(v+1)|S<<8)>>1,y=r+10,x=a.readU8(y),w=a.readU8(y+1)|x<<8,I=r+12,T=a.readU8(I),C=(a.readU8(I+1)|T<<8)>>1,E=r+14,B=E;if(65535<t)return 0;var P=B+2*C,A=a.readU8(P);for((a.readU8(P+1)|A<<8)<=t&&(B+=2*C),B-=2;0!=w;){var L=B+2*(b>>=1),$=a.readU8(L);(a.readU8(L+1)|$<<8)<t&&(B+=2*b),--w}var N=(B+=2)-E>>1,R=E+2*N,V=a.readU8(R);if((a.readU8(R+1)|V<<8)<t)throw new js__$Boot_HaxeError("Error");var M=r+14+2*k+2+2*N,F=a.readU8(M),H=a.readU8(M+1)|F<<8;if(t<H)return 0;var O=r+14+6*k+2+2*N,U=a.readU8(O),D=a.readU8(O+1)|U<<8;if(0==D){var z=r+14+4*k+2+2*N,W=a.readU8(z),G=a.readU8(z+1)|W<<8;return t+(0!=(32768&G)?G-65536:G)}var j=D+2*(t-H)+r+14+6*k+2+2*N,K=a.readU8(j);return a.readU8(j+1)|K<<8}if(12==s||13==s){for(var X=r+12,Y=a.readU8(X),Z=a.readU8(X+1),Q=a.readU8(X+2),q=0,J=a.readU8(X+3)|Q<<8|Z<<16|Y<<24;q<J;){var ee=q+(J-q>>1),te=r+16+12*ee,ae=a.readU8(te),re=a.readU8(te+1),ie=a.readU8(te+2),se=a.readU8(te+3)|ie<<8|re<<16|ae<<24,ne=r+16+12*ee+4,oe=a.readU8(ne),he=a.readU8(ne+1),_e=a.readU8(ne+2),le=a.readU8(ne+3);if(t<se)J=ee;else{if(!((le|_e<<8|he<<16|oe<<24)<t)){var ue=r+16+12*ee+8,de=a.readU8(ue),ce=a.readU8(ue+1),ge=a.readU8(ue+2),pe=a.readU8(ue+3)|ge<<8|ce<<16|de<<24;return 12==s?pe+t-se:pe}q=ee+1}}return 0}throw new js__$Boot_HaxeError("Error")},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointShape=function(e,t){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t))},kha_graphics2_truetype_StbTruetype.stbtt_setvertex=function(e,t,a,r,i,s){e.type=t,e.x=a,e.y=r,e.cx=i,e.cy=s},kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset=function(e,t){var a,r;if(t>=e.numGlyphs)return-1;if(2<=e.indexToLocFormat)return-1;if(0==e.indexToLocFormat){var i=e.glyf,s=e.data,n=e.loca+2*t,o=s.readU8(n);a=i+2*(s.readU8(n+1)|o<<8);var h=e.glyf,_=e.data,l=e.loca+2*t+2,u=_.readU8(l);r=h+2*(_.readU8(l+1)|u<<8)}else{var d=e.glyf,c=e.data,g=e.loca+4*t,p=c.readU8(g),f=c.readU8(g+1),m=c.readU8(g+2);a=d+(c.readU8(g+3)|m<<8|f<<16|p<<24);var k=e.glyf,v=e.data,S=e.loca+4*t+4,b=v.readU8(S),y=v.readU8(S+1),x=v.readU8(S+2);r=k+(v.readU8(S+3)|x<<8|y<<16|b<<24)}return a==r?-1:a},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox=function(e,t,a){var r=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(e,t);if(r<0)return!1;var i=e.data,s=r+2,n=i.readU8(s),o=i.readU8(s+1)|n<<8;a.x0=0!=(32768&o)?o-65536:o;var h=e.data,_=r+4,l=h.readU8(_),u=h.readU8(_+1)|l<<8;a.y0=0!=(32768&u)?u-65536:u;var d=e.data,c=r+6,g=d.readU8(c),p=d.readU8(c+1)|g<<8;a.x1=0!=(32768&p)?p-65536:p;var f=e.data,m=r+8,k=f.readU8(m),v=f.readU8(m+1)|k<<8;return a.y1=0!=(32768&v)?v-65536:v,!0},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBox=function(e,t,a){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t),a)},kha_graphics2_truetype_StbTruetype.stbtt_IsGlyphEmpty=function(e,t){var a=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(e,t);if(a<0)return!0;var r=e.data,i=r.readU8(a),s=r.readU8(a+1)|i<<8;return 0==(0!=(32768&s)?s-65536:s)},kha_graphics2_truetype_StbTruetype.stbtt__close_shape=function(e,t,a,r,i,s,n,o,h,_){return r?(a&&kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],3,h+n>>1,_+o>>1,h,_),kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],3,i,s,n,o)):a?kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],3,i,s,h,_):kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],2,i,s,0,0),t},kha_graphics2_truetype_StbTruetype.copyVertices=function(e,t,a,r){for(var i=0,s=r;i<s;){var n=i++;t[a+n]=e[n]}},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape=function(e,t){var a,r=e.data,i=null,s=0,n=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(e,t);if(n<0)return null;var o=r.readU8(n),h=r.readU8(n+1)|o<<8,_=0!=(32768&h)?h-65536:h;if(0<_){var l,u=0,d=0,c=0,g=!1,p=!1,f=0;a=r.sub(n+10,r.get_length()-(n+10));var m=n+10+2*_,k=r.readU8(m),v=r.readU8(m+1)|k<<8,S=r.sub(n+10+2*_+2+v,r.get_length()-(n+10+2*_+2+v)),b=2*_-2,y=a.readU8(b),x=1+(a.readU8(b+1)|y<<8),w=x+2*_;if(null==(i=new Array(w)))return null;for(var I=0,T=i.length;I<T;){i[I++]=new kha_graphics2_truetype_Stbtt_$vertex}var C=c=0;l=w-x;for(var E=0,B=x;E<B;){var P=E++;0==C?0!=(8&(u=S.readU8(f++)))&&(C=S.readU8(f++)):--C,i[l+P].type=u}for(var A=0,L=0,$=x;L<$;){var N=L++;if(0!=(2&(u=i[l+N].type))){var R=S.readU8(f++);A+=0!=(16&u)?R:-R}else if(0==(16&u)){var V=S.readU8(f),M=S.readU8(f+1)|V<<8;A+=0!=(32768&M)?M-65536:M,f+=2}i[l+N].x=A}for(var F=0,H=0,O=x;H<O;){var U=H++;if(0!=(4&(u=i[l+U].type))){var D=S.readU8(f++);F+=0!=(32&u)?D:-D}else if(0==(32&u)){var z=S.readU8(f),W=S.readU8(f+1)|z<<8;F+=0!=(32768&W)?W-65536:W,f+=2}i[l+U].y=F}for(var G=s=0,j=G,K=j,X=K,Y=X,Z=Y,Q=0;Q<x;){if(u=i[l+Q].type,A=i[l+Q].x,F=i[l+Q].y,c==Q){0!=Q&&(s=kha_graphics2_truetype_StbTruetype.stbtt__close_shape(i,s,g,p,Z,Y,j,G,X,K)),(p=0==(1&u))?(j=A,G=F,0==(1&i[l+Q+1].type)?(Z=A+i[l+Q+1].x>>1,Y=F+i[l+Q+1].y>>1):(Z=i[l+Q+1].x,Y=i[l+Q+1].y,++Q)):(Z=A,Y=F),kha_graphics2_truetype_StbTruetype.stbtt_setvertex(i[s++],1,Z,Y,0,0),g=!1;var q=2*d,J=a.readU8(q);c=1+(a.readU8(q+1)|J<<8),++d}else 0==(1&u)?(g&&kha_graphics2_truetype_StbTruetype.stbtt_setvertex(i[s++],3,X+A>>1,K+F>>1,X,K),X=A,K=F,g=!0):(g?kha_graphics2_truetype_StbTruetype.stbtt_setvertex(i[s++],3,A,F,X,K):kha_graphics2_truetype_StbTruetype.stbtt_setvertex(i[s++],2,A,F,0,0),g=!1);++Q}s=kha_graphics2_truetype_StbTruetype.stbtt__close_shape(i,s,g,p,Z,Y,j,G,X,K)}else if(-1==_){var ee=1,te=r.sub(n+10,r.get_length()-(n+10)),ae=0;for(s=0,i=null;0!=ee;){var re,ie,se=null,ne=1,oe=0,he=0,_e=1,le=0,ue=0,de=te.readU8(ae),ce=te.readU8(ae+1)|de<<8,ge=0!=(32768&ce)?ce-65536:ce;ae+=2;var pe=te.readU8(ae),fe=te.readU8(ae+1)|pe<<8,me=0!=(32768&fe)?fe-65536:fe;if(ae+=2,0==(2&ge))throw new js__$Boot_HaxeError("Error");if(0!=(1&ge)){var ke=te.readU8(ae),ve=te.readU8(ae+1)|ke<<8;le=0!=(32768&ve)?ve-65536:ve,ae+=2;var Se=te.readU8(ae),be=te.readU8(ae+1)|Se<<8;ue=0!=(32768&be)?be-65536:be,ae+=2}else{var ye=te.readU8(ae);le=128<=ye?ye-256:ye,++ae;var xe=te.readU8(ae);ue=128<=xe?xe-256:xe,++ae}if(0!=(8&ge)){var we=te.readU8(ae),Ie=te.readU8(ae+1)|we<<8;ne=_e=(0!=(32768&Ie)?Ie-65536:Ie)/16384,ae+=2,oe=he=0}else if(0!=(64&ge)){var Te=te.readU8(ae),Ce=te.readU8(ae+1)|Te<<8;ne=(0!=(32768&Ce)?Ce-65536:Ce)/16384,ae+=2,oe=he=0;var Ee=te.readU8(ae),Be=te.readU8(ae+1)|Ee<<8;_e=(0!=(32768&Be)?Be-65536:Be)/16384,ae+=2}else if(0!=(128&ge)){var Pe=te.readU8(ae),Ae=te.readU8(ae+1)|Pe<<8;ne=(0!=(32768&Ae)?Ae-65536:Ae)/16384,ae+=2;var Le=te.readU8(ae),$e=te.readU8(ae+1)|Le<<8;oe=(0!=(32768&$e)?$e-65536:$e)/16384,ae+=2;var Ne=te.readU8(ae),Re=te.readU8(ae+1)|Ne<<8;he=(0!=(32768&Re)?Re-65536:Re)/16384,ae+=2;var Ve=te.readU8(ae),Me=te.readU8(ae+1)|Ve<<8;_e=(0!=(32768&Me)?Me-65536:Me)/16384,ae+=2}var Fe=Math.sqrt(ne*ne+oe*oe),He=Math.sqrt(he*he+_e*_e);if(0<(re=null==(ie=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,me))?0:ie.length)){for(var Oe=0,Ue=re;Oe<Ue;){var De=ie[Oe++],ze=De.x,We=De.y;De.x=Fe*(ne*ze+he*We+le)|0,De.y=He*(oe*ze+_e*We+ue)|0,ze=De.cx,We=De.cy,De.cx=Fe*(ne*ze+he*We+le)|0,De.cy=He*(oe*ze+_e*We+ue)|0}if(null==(se=new Array(s+re)))return null;0<s&&kha_graphics2_truetype_StbTruetype.copyVertices(i,se,0,s),kha_graphics2_truetype_StbTruetype.copyVertices(ie,se,s,re),i=se,s+=re}ee=32&ge}}else if(_<0)throw new js__$Boot_HaxeError("Error");if(null==i)return null;if(i.length<s)throw new js__$Boot_HaxeError("Error");if(s<i.length){var Ge=new Array(s);return kha_graphics2_truetype_StbTruetype.copyVertices(i,Ge,0,s),Ge}return i},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics=function(e,t){var a=e.data,r=e.hhea+34,i=a.readU8(r),s=a.readU8(r+1)|i<<8,n=new kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics;if(t<s){var o=e.data,h=e.hmtx+4*t,_=o.readU8(h),l=o.readU8(h+1)|_<<8;n.advanceWidth=0!=(32768&l)?l-65536:l;var u=e.data,d=e.hmtx+4*t+2,c=u.readU8(d),g=u.readU8(d+1)|c<<8;n.leftSideBearing=0!=(32768&g)?g-65536:g}else{var p=e.data,f=e.hmtx+4*(s-1),m=p.readU8(f),k=p.readU8(f+1)|m<<8;n.advanceWidth=0!=(32768&k)?k-65536:k;var v=e.data,S=e.hmtx+4*s+2*(t-s),b=v.readU8(S),y=v.readU8(S+1)|b<<8;n.leftSideBearing=0!=(32768&y)?y-65536:y}return n},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphKernAdvance=function(e,t,a){var r,i,s=e.data.sub(e.kern,e.data.get_length()-e.kern);if(0==e.kern)return 0;var n=s.readU8(2);if((s.readU8(3)|n<<8)<1)return 0;var o=s.readU8(8);if(1!=(s.readU8(9)|o<<8))return 0;for(var h=0,_=s.readU8(10),l=(s.readU8(11)|_<<8)-1,u=t<<16|a;h<=l;){var d=18+6*(i=h+l>>1),c=s.readU8(d),g=s.readU8(d+1),p=s.readU8(d+2);if(u<(r=s.readU8(d+3)|p<<8|g<<16|c<<24))l=i-1;else{if(!(r<u)){var f=22+6*i,m=s.readU8(f),k=s.readU8(f+1)|m<<8;return 0!=(32768&k)?k-65536:k}h=i+1}}return 0},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointKernAdvance=function(e,t,a){return 0==e.kern?0:kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphKernAdvance(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t),kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,a))},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointHMetrics=function(e,t){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t))},kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics=function(e){var t=new kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics,a=e.data,r=e.hhea+4,i=a.readU8(r),s=a.readU8(r+1)|i<<8;t.ascent=0!=(32768&s)?s-65536:s;var n=e.data,o=e.hhea+6,h=n.readU8(o),_=n.readU8(o+1)|h<<8;t.descent=0!=(32768&_)?_-65536:_;var l=e.data,u=e.hhea+8,d=l.readU8(u),c=l.readU8(u+1)|d<<8;return t.lineGap=0!=(32768&c)?c-65536:c,t},kha_graphics2_truetype_StbTruetype.stbtt_GetFontBoundingBox=function(e){var t=new kha_graphics2_truetype_Stbtt_$temp_$rect,a=e.data,r=e.head+36,i=a.readU8(r),s=a.readU8(r+1)|i<<8;t.x0=0!=(32768&s)?s-65536:s;var n=e.data,o=e.head+38,h=n.readU8(o),_=n.readU8(o+1)|h<<8;t.y0=0!=(32768&_)?_-65536:_;var l=e.data,u=e.head+40,d=l.readU8(u),c=l.readU8(u+1)|d<<8;t.x1=0!=(32768&c)?c-65536:c;var g=e.data,p=e.head+42,f=g.readU8(p),m=g.readU8(p+1)|f<<8;return t.y1=0!=(32768&m)?m-65536:m,t},kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight=function(e,t){var a=e.data,r=e.hhea+4,i=a.readU8(r),s=a.readU8(r+1)|i<<8,n=e.data,o=e.hhea+6,h=n.readU8(o),_=n.readU8(o+1)|h<<8;return t/((0!=(32768&s)?s-65536:s)-(0!=(32768&_)?_-65536:_))},kha_graphics2_truetype_StbTruetype.stbtt_ScaleForMappingEmToPixels=function(e,t){var a=e.data,r=e.head+18,i=a.readU8(r);return t/(a.readU8(r+1)|i<<8)},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel=function(e,t,a,r,i,s){var n=new kha_graphics2_truetype_Stbtt_$temp_$rect;if(kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox(e,t,n)){var o=n.x0,h=n.x1,_=n.y0,l=n.y1;n.x0=Math.floor(o*a+i),n.y0=Math.floor(-l*r+s),n.x1=Math.ceil(h*a+i),n.y1=Math.ceil(-_*r+s)}else n.x0=0,n.y0=0,n.x1=0,n.y1=0;return n},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox=function(e,t,a,r){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,t,a,r,0,0)},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBoxSubpixel=function(e,t,a,r,i,s){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t),a,r,i,s)},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBox=function(e,t,a,r){return kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBoxSubpixel(e,t,a,r,0,0)},kha_graphics2_truetype_StbTruetype.stbtt__new_active=function(e,t,a,r){var i=new kha_graphics2_truetype_Stbtt_$_$active_$edge,s=(e[t].x1-e[t].x0)/(e[t].y1-e[t].y0);return null==i||(i.fdx=s,i.fdy=0!=s?1/s:0,i.fx=e[t].x0+s*(r-e[t].y0),i.fx-=a,i.direction=e[t].invert?1:-1,i.sy=e[t].y0,i.ey=e[t].y1,i.next=null),i},kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge=function(e,t,a,r,i,s,n,o){if(s!=o){if(!(s<o))throw new js__$Boot_HaxeError("Error");if(!(r.sy<=r.ey))throw new js__$Boot_HaxeError("Error");if(!(s>r.ey||o<r.sy)){if(s<r.sy&&(i+=(n-i)*(r.sy-s)/(o-s),s=r.sy),o>r.ey&&(n+=(n-i)*(r.ey-o)/(o-s),o=r.ey),i==a){if(!(n<=a+1))throw new js__$Boot_HaxeError("Error")}else if(i==a+1){if(!(a<=n))throw new js__$Boot_HaxeError("Error")}else if(i<=a){if(!(n<=a))throw new js__$Boot_HaxeError("Error")}else if(a+1<=i){if(!(a+1<=n))throw new js__$Boot_HaxeError("Error")}else if(!(a<=n&&n<=a+1))throw new js__$Boot_HaxeError("Error");if(i<=a&&n<=a){var h=t+a,_=e;_[h]=_[h]+r.direction*(o-s)}else if(!(a+1<=i&&a+1<=n)){if(!(a<=i&&i<=a+1&&a<=n&&n<=a+1))throw new js__$Boot_HaxeError("Error");var l=t+a,u=e;u[l]=u[l]+r.direction*(o-s)*(1-(i-a+(n-a))/2)}}}},kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new=function(e,t,a,r,i,s){for(var n=s+1;null!=i;){if(!(i.ey>=s))throw new js__$Boot_HaxeError("Error");if(0==i.fdx){var o=i.fx;o<r&&(0<=o?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,0|o,i,o,s,o,n),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(t,a-1,o+1|0,i,o,s,o,n)):kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(t,a-1,0,i,o,s,o,n))}else{var h,_,l,u,d=i.fx,c=i.fdx,g=d+c,p=i.fdy;if(!(i.sy<=n&&i.ey>=s))throw new js__$Boot_HaxeError("Error");if(i.sy>s?(h=d+c*(i.sy-s),l=i.sy):(h=d,l=s),i.ey<n?(_=d+c*(i.ey-s),u=i.ey):(_=g,u=n),0<=h&&0<=_&&h<r&&_<r)if((0|h)==(0|_)){var f=0|h,m=u-l;if(!(0<=f&&f<r))throw new js__$Boot_HaxeError("Error");var k=f,v=e;v[k]=v[k]+i.direction*(1-(h-f+(_-f))/2)*m;var S=a+f,b=t;b[S]=b[S]+i.direction*m}else{if(_<h){var y=l=n-(l-s);l=u=n-(u-s),u=y,y=_,_=h,h=y,c=-c,p=-p,y=d,d=g,g=y}var x=0|h,w=0|_,I=(x+1-d)*p+s,T=i.direction,C=T*(I-l),E=x,B=e;B[E]=B[E]+C*(1-(h-x+(x+1-x))/2);for(var P=T*p,A=x+1,L=w;A<L;){var $=A++,N=e;N[$]=N[$]+(C+P/2),C+=P}if(I+=p*(w-(x+1)),!(Math.abs(C)<=1.01))throw new js__$Boot_HaxeError("Error");var R=w,V=e;V[R]=V[R]+(C+T*(1-(w-w+(_-w))/2)*(u-I));var M=a+w,F=t;F[M]=F[M]+T*(u-l)}else for(var H=0,O=r;H<O;){var U=H++,D=s,z=U,W=U+1,G=g,j=n,K=(U-d)/c+s,X=(U+1-d)/c+s;d<z&&W<G?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,z,K),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,z,K,W,X),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,W,X,G,j)):G<z&&W<d?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,W,X),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,W,X,z,K),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,z,K,G,j)):d<z&&z<G?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,z,K),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,z,K,G,j)):G<z&&z<d?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,z,K),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,z,K,G,j)):d<W&&W<G?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,W,X),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,W,X,G,j)):G<W&&W<d?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,W,X),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,W,X,G,j)):kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,G,j)}}i=i.next}},kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges=function(e,t,a,r,i,s){var n,o,h=null,_=0,l=0;64<e.w?n=new Array(2*e.w+1):n=new Array(129);var u=n;o=e.w;var d=s;for(t[l+a].y0=s+e.h+1;_<e.h;){for(var c=d+0,g=d+1,p=h,f=null,m=0,k=e.w;m<k;){n[m++]=0}for(var v=0,S=e.w+1;v<S;){u[o+v++]=0}for(;null!=p;){var b=p;if(b.ey<=c){if(null==f?h=b.next:f.next=b.next,p=b.next,0==b.direction)throw new js__$Boot_HaxeError("Error");b.direction=0}else p=(f=p).next}for(;t[l].y0<=g;){if(t[l].y0!=t[l].y1){var y=kha_graphics2_truetype_StbTruetype.stbtt__new_active(t,l,i,c);if(!(y.ey>=c))throw new js__$Boot_HaxeError("Error");y.next=h,h=y}++l}null!=h&&kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new(n,u,o+1,e.w,h,c);for(var x=0,w=0,I=e.w;w<I;){var T=w++;x+=u[o+T];var C=n[T]+x,E=0|(C=255*Math.abs(C)+.5);255<E&&(E=255),e.pixels.writeU8(e.pixels_offset+_*e.stride+T,E)}for(f=null,p=h;null!=p;){var B=p;B.fx+=B.fdx,p=(f=p).next}++d,++_}},kha_graphics2_truetype_StbTruetype.STBTT__COMPARE=function(e,t){return e.y0<t.y0},kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort=function(e,t){for(var a,r=1,i=t;r<i;){var s=r++,n=e[s],o=n;for(a=s;0<a;){var h=e[a-1];if(!kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(o,h))break;e[a]=e[a-1],--a}s!=a&&(e[a]=n)}},kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort=function(e,t,a){for(;12<a;){var r,i=a>>1,s=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t],e[t+i]),n=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t+i],e[t+a-1]);if(s!=n){var o=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t],e[t+a-1])==n?0:a-1;r=e[t+o],e[t+o]=e[t+i],e[t+i]=r}r=e[t],e[t]=e[t+i],e[t+i]=r;for(var h=1,_=a-1;;){for(;kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t+h],e[t]);)++h;for(;kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t],e[t+_]);)--_;if(_<=h)break;r=e[t+h],e[t+h]=e[t+_],e[t+_]=r,++h,--_}_<a-h?(kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(e,t,_),t+=h,a-=h):(kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(e,t+h,a-h),a=_)}},kha_graphics2_truetype_StbTruetype.stbtt__sort_edges=function(e,t){kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(e,0,t),kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort(e,t)},kha_graphics2_truetype_StbTruetype.stbtt__rasterize=function(e,t,a,r,i,s,n,o,h,_,l){for(var u,d=l?-s:s,c=0,g=0,p=r;g<p;){c+=a[g++]}var f=new Array(c+1);if(null!=f){for(var m=0,k=f.length;m<k;){f[m++]=new kha_graphics2_truetype_Stbtt_$_$edge}for(var v=c=0,S=0,b=r;S<b;){var y=S++,x=t,w=0+v;v+=a[y],u=a[y]-1;for(var I=0,T=a[y];I<T;){var C=I++,E=C,B=u;x[w+u].y!=x[w+C].y?(f[c].invert=!1,(l?x[w+u].y>x[w+C].y:x[w+u].y<x[w+C].y)&&(f[c].invert=!0,E=u,B=C),f[c].x0=x[w+E].x*i+n,f[c].y0=1*(x[w+E].y*d+o),f[c].x1=x[w+B].x*i+n,f[c].y1=1*(x[w+B].y*d+o),++c,u=C):u=C}}kha_graphics2_truetype_StbTruetype.stbtt__sort_edges(f,c),kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges(e,f,c,1,h,_)}},kha_graphics2_truetype_StbTruetype.stbtt__add_point=function(e,t,a,r){null!=e&&(e[t].x=a,e[t].y=r)},kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve=function(e,t,a,r,i,s,n,o,h,_){var l=(a+2*i+n)/4,u=(r+2*s+o)/4,d=(a+n)/2-l,c=(r+o)/2-u;return 16<_||(h<d*d+c*c?(kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(e,t,a,r,(a+i)/2,(r+s)/2,l,u,h,_+1),kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(e,t,l,u,(i+n)/2,(s+o)/2,n,o,h,_+1)):(kha_graphics2_truetype_StbTruetype.stbtt__add_point(e,t.value,n,o),t.value+=1)),1},kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves=function(e,t,a,r,i){for(var s=null,n=0,o=a*a,h=0,_=0,l=0,u=t;l<u;){1==e[l++].type&&++h}if(0==(i.value=h))return null;var d=new Array(h);if(r.value=d,null==r.value)return i.value=0,null;for(var c=0;c<2;){var g=0,p=0;if(1==c++){if(null==(s=new Array(n)))return r.value=null,i.value=0,null;for(var f=0,m=s.length;f<m;){s[f++]=new kha_graphics2_truetype_Stbtt_$_$point}}h=-1;for(var k=n=0,v=t;k<v;){var S=k++;switch(e[S].type){case 1:0<=h&&(r.value[h]=n-_),++h,_=n,g=e[S].x,p=e[S].y,kha_graphics2_truetype_StbTruetype.stbtt__add_point(s,n++,g,p);break;case 2:g=e[S].x,p=e[S].y,kha_graphics2_truetype_StbTruetype.stbtt__add_point(s,n++,g,p);break;case 3:var b={value:n};kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(s,b,g,p,e[S].cx,e[S].cy,e[S].x,e[S].y,o,0),n=b.value,g=e[S].x,p=e[S].y}}r.value[h]=n-_}return s},kha_graphics2_truetype_StbTruetype.stbtt_Rasterize=function(e,t,a,r,i,s,n,o,h,_,l){var u,d=s<i?s:i,c=0,g={value:c},p=new kha_graphics2_truetype_VectorOfIntPointer,f=kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves(a,r,t/d,p,g);c=g.value,u=p.value,null!=f&&kha_graphics2_truetype_StbTruetype.stbtt__rasterize(e,f,u,c,i,s,n,o,h,_,l)},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel=function(e,t,a,r,i,s,n){var o=new kha_graphics2_truetype_Stbtt_$_$bitmap,h=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,s),_=h.length;if(0==t&&(t=a),0==a){if(0==t)return null;a=t}var l=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,s,t,a,r,i),u=l.x0,d=l.y0,c=l.x1,g=l.y1;return o.w=c-u,o.h=g-d,o.pixels=null,n.width=o.w,n.height=o.h,n.xoff=u,n.yoff=d,0!=o.w&&0!=o.h&&(o.pixels=kha_internal_BytesBlob.alloc(o.w*o.h),null!=o.pixels&&(o.stride=o.w,kha_graphics2_truetype_StbTruetype.stbtt_Rasterize(o,.35,h,_,t,a,r,i,u,d,!0))),o.pixels},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmap=function(e,t,a,r,i){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel(e,t,a,0,0,r,i)},kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel=function(e,t,a,r,i,s,n,o,h,_,l){var u,d,c=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,l),g=null==c?0:c.length,p=new kha_graphics2_truetype_Stbtt_$_$bitmap,f=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,l,n,o,h,_);u=f.x0,d=f.y0,p.pixels=t,p.pixels_offset=a,p.w=r,p.h=i,p.stride=s,0!=p.w&&0!=p.h&&kha_graphics2_truetype_StbTruetype.stbtt_Rasterize(p,.35,c,g,n,o,h,_,u,d,!0)},kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap=function(e,t,a,r,i,s,n,o,h){kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel(e,t,a,r,i,s,n,o,0,0,h)},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapSubpixel=function(e,t,a,r,i,s,n){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel(e,t,a,r,i,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,s),n)},kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmapSubpixel=function(e,t,a,r,i,s,n,o,h,_,l){kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel(e,t,a,r,i,s,n,o,h,_,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,l))},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmap=function(e,t,a,r,i){return kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapSubpixel(e,t,a,0,0,r,i)},kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmap=function(e,t,a,r,i,s,n,o,h){kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmapSubpixel(e,t,a,r,i,s,n,o,0,0,h)},kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap=function(e,t,a,r,i,s,n,o){var h=new kha_graphics2_truetype_Stbtt_$fontinfo;if(!kha_graphics2_truetype_StbTruetype.stbtt_InitFont(h,e,t))return-1;for(var _=0,l=i*s;_<l;){var u=_++;r.writeU8(u,0)}for(var d=1,c=d,g=1,p=kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(h,a),f=0,m=0;m<n.length;){var k=n[m];++m;var v=kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(h,k),S=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics(h,v),b=S.advanceWidth,y=(S.leftSideBearing,kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox(h,v,p,p)),x=y.x0,w=y.y0,I=y.x1-x,T=y.y1-w;if(i<=c+I+1&&(d=g,c=1),s<=d+T+1)return-f;if(i<=c+I)throw new js__$Boot_HaxeError("Error");if(s<=d+T)throw new js__$Boot_HaxeError("Error");kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap(h,r,c+d*i,I,T,i,p,p,v),o[f].x0=c,o[f].y0=d,o[f].x1=c+I,o[f].y1=d+T,o[f].xadvance=p*b,o[f].xoff=x,o[f].yoff=w,c=c+I+1,g<d+T+1&&(g=d+T+1),++f}return g},kha_graphics2_truetype_StbTruetype.stbtt_GetBakedQuad=function(e,t,a,r,i,s,n,o){var h=o?0:-.5,_=1/t,l=1/a,u=e[r],d=Math.floor(i.value+u.xoff+.5),c=Math.floor(s.value+u.yoff+.5);n.x0=d+h,n.y0=c+h,n.x1=d+u.x1-u.x0+h,n.y1=c+u.y1-u.y0+h,n.s0=u.x0*_,n.t0=u.y0*l,n.s1=u.x1*_,n.t1=u.y1*l,i.value+=u.xadvance};var kha_graphics4_ConstantLocation=$hxClasses["kha.graphics4.ConstantLocation"]=function(){};kha_graphics4_ConstantLocation.__name__=!0;var kha_graphics4_CubeMap=$hxClasses["kha.graphics4.CubeMap"]=function(e){this.texture_=e};kha_graphics4_CubeMap.__name__=!0,kha_graphics4_CubeMap.__interfaces__=[kha_Resource,kha_Canvas],kha_graphics4_CubeMap.getRenderTargetFormat=function(e){switch(e){case 0:return 0;case 2:return 3;case 3:return 4;case 4:return 1;default:return 0}},kha_graphics4_CubeMap.getDepthBufferBits=function(e){switch(e){case 0:return-1;case 1:case 2:case 3:return 24;case 4:return 32;case 5:return 16}},kha_graphics4_CubeMap.getStencilBufferBits=function(e){switch(e){case 0:case 1:return-1;case 2:case 3:case 4:return 8;case 5:return 0}},kha_graphics4_CubeMap.getTextureFormat=function(e){switch(e){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;default:return 1}},kha_graphics4_CubeMap.createRenderTarget=function(e,t,a,r){null==r&&(r=0),null==a&&(a=0),null==t&&(t=0);var i=new kha_graphics4_CubeMap(null);return i.format=t,i.renderTarget_=Krom.createRenderTargetCubeMap(e,kha_graphics4_CubeMap.getDepthBufferBits(a),kha_graphics4_CubeMap.getRenderTargetFormat(t),kha_graphics4_CubeMap.getStencilBufferBits(a),r),i},kha_graphics4_CubeMap.prototype={texture_:null,renderTarget_:null,format:null,graphics4:null,unload:function(){},lock:function(e){return null==e&&(e=0),null},unlock:function(){},width:null,get_width:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.width},height:null,get_height:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.height},g1:null,get_g1:function(){return null},g2:null,get_g2:function(){return null},g4:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new kha_krom_Graphics(this)),this.graphics4},__class__:kha_graphics4_CubeMap};var kha_graphics4_FragmentShader=$hxClasses["kha.graphics4.FragmentShader"]=function(e,t){null!=e&&(this.shader=Krom.createFragmentShader(e[0].bytes.b.bufferValue,t[0]))};kha_graphics4_FragmentShader.__name__=!0,kha_graphics4_FragmentShader.fromSource=function(e){var t=new kha_graphics4_FragmentShader(null,null);return t.shader=Krom.createFragmentShaderFromSource(e),t},kha_graphics4_FragmentShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_FragmentShader};var kha_graphics4_GeometryShader=$hxClasses["kha.graphics4.GeometryShader"]=function(e,t){this.shader=Krom.createGeometryShader(e[0].bytes.b.bufferValue,t[0])};kha_graphics4_GeometryShader.__name__=!0,kha_graphics4_GeometryShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_GeometryShader};var kha_graphics4_Graphics=$hxClasses["kha.graphics4.Graphics"]=function(){};kha_graphics4_Graphics.__name__=!0,kha_graphics4_Graphics.prototype={begin:null,beginFace:null,beginEye:null,end:null,vsynced:null,refreshRate:null,clear:null,viewport:null,scissor:null,disableScissor:null,setVertexBuffer:null,setVertexBuffers:null,setIndexBuffer:null,setTexture:null,setTextureDepth:null,setTextureArray:null,setVideoTexture:null,setImageTexture:null,setTextureParameters:null,setTexture3DParameters:null,setTextureCompareMode:null,setCubeMapCompareMode:null,setCubeMap:null,setCubeMapDepth:null,setStencilReferenceValue:null,renderTargetsInvertedY:null,instancedRenderingAvailable:null,setPipeline:null,setBool:null,setInt:null,setFloat:null,setFloat2:null,setFloat3:null,setFloat4:null,setFloats:null,setVector2:null,setVector3:null,setVector4:null,setMatrix:null,setMatrix3:null,drawIndexedVertices:null,drawIndexedVerticesInstanced:null,flush:null,__class__:kha_graphics4_Graphics};var kha_graphics4_ImageShaderPainter=$hxClasses["kha.graphics4.ImageShaderPainter"]=function(e){this.destinationBlend=0,this.sourceBlend=0,this.myPipeline=null,this.bilinearMipmaps=!1,this.bilinear=!1,this.g=e,kha_graphics4_ImageShaderPainter.bufferIndex=0,kha_graphics4_ImageShaderPainter.initShaders(),this.initBuffers(),this.projectionLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getTextureUnit("tex")};kha_graphics4_ImageShaderPainter.__name__=!0,kha_graphics4_ImageShaderPainter.initShaders=function(){null==kha_graphics4_ImageShaderPainter.structure&&(kha_graphics4_ImageShaderPainter.structure=kha_graphics4_Graphics2.createImageVertexStructure()),null==kha_graphics4_ImageShaderPainter.shaderPipeline&&(kha_graphics4_ImageShaderPainter.shaderPipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_ImageShaderPainter.structure),kha_graphics4_ImageShaderPainter.shaderPipeline.compile())},kha_graphics4_ImageShaderPainter.prototype={projectionMatrix:null,bilinear:null,bilinearMipmaps:null,g:null,myPipeline:null,projectionLocation:null,textureLocation:null,sourceBlend:null,destinationBlend:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return null==e?(this.projectionLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getTextureUnit("tex")):(this.projectionLocation=e.getConstantLocation("projectionMatrix"),this.textureLocation=e.getTextureUnit("tex")),this.myPipeline=e},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==kha_graphics4_ImageShaderPainter.rectVertexBuffer){kha_graphics4_ImageShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(6e3,kha_graphics4_ImageShaderPainter.structure,1),kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock(),kha_graphics4_ImageShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(9e3,0);for(var e=kha_graphics4_ImageShaderPainter.indexBuffer.lock(),t=0;t<1500;){var a=t++;e[3*a*2]=4*a,e[3*a*2+1]=4*a+1,e[3*a*2+2]=4*a+2,e[3*a*2+3]=4*a,e[3*a*2+4]=4*a+2,e[3*a*2+5]=4*a+3}kha_graphics4_ImageShaderPainter.indexBuffer.unlock()}},setRectVertices:function(e,t,a,r,i,s,n,o){var h=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[h]=e,kha_graphics4_ImageShaderPainter.rectVertices[h+1]=t,kha_graphics4_ImageShaderPainter.rectVertices[h+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[h+9]=a,kha_graphics4_ImageShaderPainter.rectVertices[h+10]=r,kha_graphics4_ImageShaderPainter.rectVertices[h+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[h+18]=i,kha_graphics4_ImageShaderPainter.rectVertices[h+19]=s,kha_graphics4_ImageShaderPainter.rectVertices[h+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[h+27]=n,kha_graphics4_ImageShaderPainter.rectVertices[h+28]=o,kha_graphics4_ImageShaderPainter.rectVertices[h+29]=-5},setRectTexCoords:function(e,t,a,r){var i=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[i+3]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+4]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+12]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+13]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+21]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+22]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+30]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+31]=r},setRectColor:function(e,t,a,r){var i=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[i+5]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+6]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+7]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+8]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+14]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+15]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+16]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+17]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+23]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+24]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+25]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+26]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+32]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+33]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+34]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+35]=r},drawBuffer:function(){kha_graphics4_ImageShaderPainter.rectVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_ImageShaderPainter.rectVertexBuffer),this.g.setIndexBuffer(kha_graphics4_ImageShaderPainter.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_ImageShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setTexture(this.textureLocation,kha_graphics4_ImageShaderPainter.lastTexture),this.g.setTextureParameters(this.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,this.bilinearMipmaps?2:0),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,2*kha_graphics4_ImageShaderPainter.bufferIndex*3),this.g.setTexture(this.textureLocation,null),kha_graphics4_ImageShaderPainter.bufferIndex=0,kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock()},setBilinearFilter:function(e){this.end(),this.bilinear=e},setBilinearMipmapFilter:function(e){this.end(),this.bilinearMipmaps=e},drawImage:function(e,t,a,r,i,s,n,o,h,_,l){var u=e;(1500<=kha_graphics4_ImageShaderPainter.bufferIndex+1||null!=kha_graphics4_ImageShaderPainter.lastTexture&&u!=kha_graphics4_ImageShaderPainter.lastTexture)&&this.drawBuffer();var d=.00392156862745098*((16711680&l)>>>16),c=.00392156862745098*((65280&l)>>>8),g=.00392156862745098*(255&l),p=.00392156862745098*(l>>>24)*_,f=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[f+5]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+6]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+7]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+8]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+14]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+15]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+16]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+17]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+23]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+24]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+25]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+26]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+32]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+33]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+34]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+35]=p;var m=u.get_width()/u.get_realWidth(),k=u.get_height()/u.get_realHeight(),v=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[v+3]=0,kha_graphics4_ImageShaderPainter.rectVertices[v+4]=k,kha_graphics4_ImageShaderPainter.rectVertices[v+12]=0,kha_graphics4_ImageShaderPainter.rectVertices[v+13]=0,kha_graphics4_ImageShaderPainter.rectVertices[v+21]=m,kha_graphics4_ImageShaderPainter.rectVertices[v+22]=0,kha_graphics4_ImageShaderPainter.rectVertices[v+30]=m,kha_graphics4_ImageShaderPainter.rectVertices[v+31]=k;var S=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[S]=t,kha_graphics4_ImageShaderPainter.rectVertices[S+1]=a,kha_graphics4_ImageShaderPainter.rectVertices[S+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[S+9]=r,kha_graphics4_ImageShaderPainter.rectVertices[S+10]=i,kha_graphics4_ImageShaderPainter.rectVertices[S+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[S+18]=s,kha_graphics4_ImageShaderPainter.rectVertices[S+19]=n,kha_graphics4_ImageShaderPainter.rectVertices[S+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[S+27]=o,kha_graphics4_ImageShaderPainter.rectVertices[S+28]=h,kha_graphics4_ImageShaderPainter.rectVertices[S+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=u},drawImage2:function(e,t,a,r,i,s,n,o,h,_,l,u,d,c,g){var p=e;(1500<=kha_graphics4_ImageShaderPainter.bufferIndex+1||null!=kha_graphics4_ImageShaderPainter.lastTexture&&p!=kha_graphics4_ImageShaderPainter.lastTexture)&&this.drawBuffer();var f=t/p.get_realWidth(),m=a/p.get_realHeight(),k=(t+r)/p.get_realWidth(),v=(a+i)/p.get_realHeight(),S=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[S+3]=f,kha_graphics4_ImageShaderPainter.rectVertices[S+4]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+12]=f,kha_graphics4_ImageShaderPainter.rectVertices[S+13]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+21]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+22]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+30]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+31]=v;var b=.00392156862745098*((16711680&g)>>>16),y=.00392156862745098*((65280&g)>>>8),x=.00392156862745098*(255&g),w=.00392156862745098*(g>>>24)*c,I=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[I+5]=b,kha_graphics4_ImageShaderPainter.rectVertices[I+6]=y,kha_graphics4_ImageShaderPainter.rectVertices[I+7]=x,kha_graphics4_ImageShaderPainter.rectVertices[I+8]=w,kha_graphics4_ImageShaderPainter.rectVertices[I+14]=b,kha_graphics4_ImageShaderPainter.rectVertices[I+15]=y,kha_graphics4_ImageShaderPainter.rectVertices[I+16]=x,kha_graphics4_ImageShaderPainter.rectVertices[I+17]=w,kha_graphics4_ImageShaderPainter.rectVertices[I+23]=b,kha_graphics4_ImageShaderPainter.rectVertices[I+24]=y,kha_graphics4_ImageShaderPainter.rectVertices[I+25]=x,kha_graphics4_ImageShaderPainter.rectVertices[I+26]=w,kha_graphics4_ImageShaderPainter.rectVertices[I+32]=b,kha_graphics4_ImageShaderPainter.rectVertices[I+33]=y,kha_graphics4_ImageShaderPainter.rectVertices[I+34]=x,kha_graphics4_ImageShaderPainter.rectVertices[I+35]=w;var T=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[T]=s,kha_graphics4_ImageShaderPainter.rectVertices[T+1]=n,kha_graphics4_ImageShaderPainter.rectVertices[T+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[T+9]=o,kha_graphics4_ImageShaderPainter.rectVertices[T+10]=h,kha_graphics4_ImageShaderPainter.rectVertices[T+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[T+18]=_,kha_graphics4_ImageShaderPainter.rectVertices[T+19]=l,kha_graphics4_ImageShaderPainter.rectVertices[T+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[T+27]=u,kha_graphics4_ImageShaderPainter.rectVertices[T+28]=d,kha_graphics4_ImageShaderPainter.rectVertices[T+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=p},drawImageScale:function(e,t,a,r,i,s,n,o,h,_,l){var u=e;(1500<=kha_graphics4_ImageShaderPainter.bufferIndex+1||null!=kha_graphics4_ImageShaderPainter.lastTexture&&u!=kha_graphics4_ImageShaderPainter.lastTexture)&&this.drawBuffer();var d=t/u.get_realWidth(),c=a/u.get_realHeight(),g=(t+r)/u.get_realWidth(),p=(a+i)/u.get_realHeight(),f=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[f+3]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+4]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+12]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+13]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+21]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+22]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+30]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+31]=p;var m=.00392156862745098*((16711680&l)>>>16),k=.00392156862745098*((65280&l)>>>8),v=.00392156862745098*(255&l),S=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[S+5]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+6]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+7]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+8]=_,kha_graphics4_ImageShaderPainter.rectVertices[S+14]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+15]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+16]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+17]=_,kha_graphics4_ImageShaderPainter.rectVertices[S+23]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+24]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+25]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+26]=_,kha_graphics4_ImageShaderPainter.rectVertices[S+32]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+33]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+34]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+35]=_;var b=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[b]=s,kha_graphics4_ImageShaderPainter.rectVertices[b+1]=h,kha_graphics4_ImageShaderPainter.rectVertices[b+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[b+9]=s,kha_graphics4_ImageShaderPainter.rectVertices[b+10]=n,kha_graphics4_ImageShaderPainter.rectVertices[b+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[b+18]=o,kha_graphics4_ImageShaderPainter.rectVertices[b+19]=n,kha_graphics4_ImageShaderPainter.rectVertices[b+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[b+27]=o,kha_graphics4_ImageShaderPainter.rectVertices[b+28]=h,kha_graphics4_ImageShaderPainter.rectVertices[b+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=u},end:function(){0<kha_graphics4_ImageShaderPainter.bufferIndex&&this.drawBuffer(),kha_graphics4_ImageShaderPainter.lastTexture=null},__class__:kha_graphics4_ImageShaderPainter};var kha_graphics4_ColoredShaderPainter=$hxClasses["kha.graphics4.ColoredShaderPainter"]=function(e){this.destinationBlend=0,this.sourceBlend=0,this.myPipeline=null,this.g=e,kha_graphics4_ColoredShaderPainter.bufferIndex=0,kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0,kha_graphics4_ColoredShaderPainter.initShaders(),this.initBuffers(),this.projectionLocation=kha_graphics4_ColoredShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix")};kha_graphics4_ColoredShaderPainter.__name__=!0,kha_graphics4_ColoredShaderPainter.initShaders=function(){null==kha_graphics4_ColoredShaderPainter.structure&&(kha_graphics4_ColoredShaderPainter.structure=kha_graphics4_Graphics2.createColoredVertexStructure()),null==kha_graphics4_ColoredShaderPainter.shaderPipeline&&(kha_graphics4_ColoredShaderPainter.shaderPipeline=kha_graphics4_Graphics2.createColoredPipeline(kha_graphics4_ColoredShaderPainter.structure),kha_graphics4_ColoredShaderPainter.shaderPipeline.compile())},kha_graphics4_ColoredShaderPainter.prototype={projectionMatrix:null,g:null,myPipeline:null,projectionLocation:null,sourceBlend:null,destinationBlend:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return this.projectionLocation=null==e?kha_graphics4_ColoredShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"):e.getConstantLocation("projectionMatrix"),this.myPipeline=e},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==kha_graphics4_ColoredShaderPainter.rectVertexBuffer){kha_graphics4_ColoredShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(400,kha_graphics4_ColoredShaderPainter.structure,1),kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock(),kha_graphics4_ColoredShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(600,0);for(var e=kha_graphics4_ColoredShaderPainter.indexBuffer.lock(),t=0;t<100;){var a=t++;e[3*a*2]=4*a,e[3*a*2+1]=4*a+1,e[3*a*2+2]=4*a+2,e[3*a*2+3]=4*a,e[3*a*2+4]=4*a+2,e[3*a*2+5]=4*a+3}kha_graphics4_ColoredShaderPainter.indexBuffer.unlock(),kha_graphics4_ColoredShaderPainter.triangleVertexBuffer=new kha_graphics4_VertexBuffer(300,kha_graphics4_ColoredShaderPainter.structure,1),kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock(),kha_graphics4_ColoredShaderPainter.triangleIndexBuffer=new kha_graphics4_IndexBuffer(300,0);for(var r=kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.lock(),i=0;i<100;){var s=i++;r[3*s]=3*s,r[3*s+1]=3*s+1,r[3*s+2]=3*s+2}kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.unlock()}},setRectVertices:function(e,t,a,r,i,s,n,o){var h=7*kha_graphics4_ColoredShaderPainter.bufferIndex*4;kha_graphics4_ColoredShaderPainter.rectVertices[h]=e,kha_graphics4_ColoredShaderPainter.rectVertices[h+1]=t,kha_graphics4_ColoredShaderPainter.rectVertices[h+2]=-5,kha_graphics4_ColoredShaderPainter.rectVertices[h+7]=a,kha_graphics4_ColoredShaderPainter.rectVertices[h+8]=r,kha_graphics4_ColoredShaderPainter.rectVertices[h+9]=-5,kha_graphics4_ColoredShaderPainter.rectVertices[h+14]=i,kha_graphics4_ColoredShaderPainter.rectVertices[h+15]=s,kha_graphics4_ColoredShaderPainter.rectVertices[h+16]=-5,kha_graphics4_ColoredShaderPainter.rectVertices[h+21]=n,kha_graphics4_ColoredShaderPainter.rectVertices[h+22]=o,kha_graphics4_ColoredShaderPainter.rectVertices[h+23]=-5},setRectColors:function(e,t){var a=7*kha_graphics4_ColoredShaderPainter.bufferIndex*4,r=e*(.00392156862745098*(t>>>24));kha_graphics4_ColoredShaderPainter.rectVertices[a+3]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+4]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+5]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+6]=r,kha_graphics4_ColoredShaderPainter.rectVertices[a+10]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+11]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+12]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+13]=r,kha_graphics4_ColoredShaderPainter.rectVertices[a+17]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+18]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+19]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+20]=r,kha_graphics4_ColoredShaderPainter.rectVertices[a+24]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+25]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+26]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+27]=r},setTriVertices:function(e,t,a,r,i,s){var n=7*kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3;kha_graphics4_ColoredShaderPainter.triangleVertices[n]=e,kha_graphics4_ColoredShaderPainter.triangleVertices[n+1]=t,kha_graphics4_ColoredShaderPainter.triangleVertices[n+2]=-5,kha_graphics4_ColoredShaderPainter.triangleVertices[n+7]=a,kha_graphics4_ColoredShaderPainter.triangleVertices[n+8]=r,kha_graphics4_ColoredShaderPainter.triangleVertices[n+9]=-5,kha_graphics4_ColoredShaderPainter.triangleVertices[n+14]=i,kha_graphics4_ColoredShaderPainter.triangleVertices[n+15]=s,kha_graphics4_ColoredShaderPainter.triangleVertices[n+16]=-5},setTriColors:function(e,t){var a=7*kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3,r=e*(.00392156862745098*(t>>>24));kha_graphics4_ColoredShaderPainter.triangleVertices[a+3]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.triangleVertices[a+4]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.triangleVertices[a+5]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.triangleVertices[a+6]=r,kha_graphics4_ColoredShaderPainter.triangleVertices[a+10]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.triangleVertices[a+11]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.triangleVertices[a+12]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.triangleVertices[a+13]=r,kha_graphics4_ColoredShaderPainter.triangleVertices[a+17]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.triangleVertices[a+18]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.triangleVertices[a+19]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.triangleVertices[a+20]=r},drawBuffer:function(e){e||0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&this.drawTriBuffer(!0),kha_graphics4_ColoredShaderPainter.rectVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.rectVertexBuffer),this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_ColoredShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,2*kha_graphics4_ColoredShaderPainter.bufferIndex*3),kha_graphics4_ColoredShaderPainter.bufferIndex=0,kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock()},drawTriBuffer:function(e){e||0<kha_graphics4_ColoredShaderPainter.bufferIndex&&this.drawBuffer(!0),kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.triangleVertexBuffer),this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.triangleIndexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_ColoredShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,3*kha_graphics4_ColoredShaderPainter.triangleBufferIndex),kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0,kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock()},fillRect:function(e,t,a,r,i,s,n,o,h,_){0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&this.drawTriBuffer(!0),100<=kha_graphics4_ColoredShaderPainter.bufferIndex+1&&this.drawBuffer(!1),this.setRectColors(e,t),this.setRectVertices(a,r,i,s,n,o,h,_),++kha_graphics4_ColoredShaderPainter.bufferIndex},fillTriangle:function(e,t,a,r,i,s,n,o){0<kha_graphics4_ColoredShaderPainter.bufferIndex&&this.drawBuffer(!0),100<=kha_graphics4_ColoredShaderPainter.triangleBufferIndex+1&&this.drawTriBuffer(!1),this.setTriColors(e,t),this.setTriVertices(a,r,i,s,n,o),++kha_graphics4_ColoredShaderPainter.triangleBufferIndex},endTris:function(e){0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&this.drawTriBuffer(e)},endRects:function(e){0<kha_graphics4_ColoredShaderPainter.bufferIndex&&this.drawBuffer(e)},end:function(){0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&this.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&this.drawBuffer(!1)},__class__:kha_graphics4_ColoredShaderPainter};var kha_graphics4_TextShaderPainter=$hxClasses["kha.graphics4.TextShaderPainter"]=function(e){this.bakedQuadCache=new kha_AlignedQuad,this.destinationBlend=0,this.sourceBlend=0,this.bilinear=!1,this.myPipeline=null,this.g=e,kha_graphics4_TextShaderPainter.bufferIndex=0,kha_graphics4_TextShaderPainter.initShaders(),this.initBuffers(),this.projectionLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getTextureUnit("tex")};kha_graphics4_TextShaderPainter.__name__=!0,kha_graphics4_TextShaderPainter.initShaders=function(){null==kha_graphics4_TextShaderPainter.structure&&(kha_graphics4_TextShaderPainter.structure=kha_graphics4_Graphics2.createTextVertexStructure()),null==kha_graphics4_TextShaderPainter.shaderPipeline&&(kha_graphics4_TextShaderPainter.shaderPipeline=kha_graphics4_Graphics2.createTextPipeline(kha_graphics4_TextShaderPainter.structure),kha_graphics4_TextShaderPainter.shaderPipeline.compile())},kha_graphics4_TextShaderPainter.findIndex=function(e){kha_graphics2_Graphics.fontGlyphs;for(var t=kha_KravurImage.charBlocks,a=0,r=0,i=t.length/2|0;r<i;){var s=r++,n=t[2*s],o=t[2*s+1];if(n<=e&&e<=o)return a+e-n;a+=o-n+1}return 0},kha_graphics4_TextShaderPainter.prototype={projectionMatrix:null,font:null,g:null,myPipeline:null,projectionLocation:null,textureLocation:null,fontSize:null,bilinear:null,sourceBlend:null,destinationBlend:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return null==e?(this.projectionLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getTextureUnit("tex")):(this.projectionLocation=e.getConstantLocation("projectionMatrix"),this.textureLocation=e.getTextureUnit("tex")),this.myPipeline=e},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==kha_graphics4_TextShaderPainter.rectVertexBuffer){kha_graphics4_TextShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(400,kha_graphics4_TextShaderPainter.structure,1),kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock(),kha_graphics4_TextShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(600,0);for(var e=kha_graphics4_TextShaderPainter.indexBuffer.lock(),t=0;t<100;){var a=t++;e[3*a*2]=4*a,e[3*a*2+1]=4*a+1,e[3*a*2+2]=4*a+2,e[3*a*2+3]=4*a,e[3*a*2+4]=4*a+2,e[3*a*2+5]=4*a+3}kha_graphics4_TextShaderPainter.indexBuffer.unlock()}},setRectVertices:function(e,t,a,r,i,s,n,o){var h=9*kha_graphics4_TextShaderPainter.bufferIndex*4;kha_graphics4_TextShaderPainter.rectVertices[h]=e,kha_graphics4_TextShaderPainter.rectVertices[h+1]=t,kha_graphics4_TextShaderPainter.rectVertices[h+2]=-5,kha_graphics4_TextShaderPainter.rectVertices[h+9]=a,kha_graphics4_TextShaderPainter.rectVertices[h+10]=r,kha_graphics4_TextShaderPainter.rectVertices[h+11]=-5,kha_graphics4_TextShaderPainter.rectVertices[h+18]=i,kha_graphics4_TextShaderPainter.rectVertices[h+19]=s,kha_graphics4_TextShaderPainter.rectVertices[h+20]=-5,kha_graphics4_TextShaderPainter.rectVertices[h+27]=n,kha_graphics4_TextShaderPainter.rectVertices[h+28]=o,kha_graphics4_TextShaderPainter.rectVertices[h+29]=-5},setRectTexCoords:function(e,t,a,r){var i=9*kha_graphics4_TextShaderPainter.bufferIndex*4;kha_graphics4_TextShaderPainter.rectVertices[i+3]=e,kha_graphics4_TextShaderPainter.rectVertices[i+4]=r,kha_graphics4_TextShaderPainter.rectVertices[i+12]=e,kha_graphics4_TextShaderPainter.rectVertices[i+13]=t,kha_graphics4_TextShaderPainter.rectVertices[i+21]=a,kha_graphics4_TextShaderPainter.rectVertices[i+22]=t,kha_graphics4_TextShaderPainter.rectVertices[i+30]=a,kha_graphics4_TextShaderPainter.rectVertices[i+31]=r},setRectColors:function(e,t){var a=9*kha_graphics4_TextShaderPainter.bufferIndex*4,r=e*(.00392156862745098*(t>>>24));kha_graphics4_TextShaderPainter.rectVertices[a+5]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+6]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+7]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+8]=r,kha_graphics4_TextShaderPainter.rectVertices[a+14]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+15]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+16]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+17]=r,kha_graphics4_TextShaderPainter.rectVertices[a+23]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+24]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+25]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+26]=r,kha_graphics4_TextShaderPainter.rectVertices[a+32]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+33]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+34]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+35]=r},drawBuffer:function(){kha_graphics4_TextShaderPainter.rectVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_TextShaderPainter.rectVertexBuffer),this.g.setIndexBuffer(kha_graphics4_TextShaderPainter.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_TextShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setTexture(this.textureLocation,kha_graphics4_TextShaderPainter.lastTexture),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.setTextureParameters(this.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,0),this.g.drawIndexedVertices(0,2*kha_graphics4_TextShaderPainter.bufferIndex*3),this.g.setTexture(this.textureLocation,null),kha_graphics4_TextShaderPainter.bufferIndex=0,kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock()},setBilinearFilter:function(e){this.end(),this.bilinear=e},setFont:function(e){this.font=js_Boot.__cast(e,kha_Kravur)},text:null,startString:function(e){this.text=e},charCodeAt:function(e){return HxOverrides.cca(this.text,e)},stringLength:function(){return this.text.length},endString:function(){this.text=null},bakedQuadCache:null,drawString:function(e,t,a,r,i,s){var n=this.font._get(this.fontSize),o=n.getTexture();null!=kha_graphics4_TextShaderPainter.lastTexture&&o!=kha_graphics4_TextShaderPainter.lastTexture&&this.drawBuffer(),kha_graphics4_TextShaderPainter.lastTexture=o;var h=r,_=i;this.startString(e);for(var l=0,u=this.stringLength();l<u;){var d=l++,c=n.getBakedQuad(this.bakedQuadCache,kha_graphics4_TextShaderPainter.findIndex(this.charCodeAt(d)),h,_);if(null!=c){100<=kha_graphics4_TextShaderPainter.bufferIndex+1&&this.drawBuffer(),this.setRectColors(t,a),this.setRectTexCoords(c.s0*o.get_width()/o.get_realWidth(),c.t0*o.get_height()/o.get_realHeight(),c.s1*o.get_width()/o.get_realWidth(),c.t1*o.get_height()/o.get_realHeight());var g=c.x0,p=c.y1,f=s._02*g+s._12*p+s._22,m=(s._00*g+s._10*p+s._20)/f,k=(s._01*g+s._11*p+s._21)/f,v=c.x0,S=c.y0,b=s._02*v+s._12*S+s._22,y=(s._00*v+s._10*S+s._20)/b,x=(s._01*v+s._11*S+s._21)/b,w=c.x1,I=c.y0,T=s._02*w+s._12*I+s._22,C=(s._00*w+s._10*I+s._20)/T,E=(s._01*w+s._11*I+s._21)/T,B=c.x1,P=c.y1,A=s._02*B+s._12*P+s._22,L=(s._00*B+s._10*P+s._20)/A,$=(s._01*B+s._11*P+s._21)/A;this.setRectVertices(m,k,y,x,C,E,L,$),h+=c.xadvance,++kha_graphics4_TextShaderPainter.bufferIndex}}this.endString()},drawCharacters:function(e,t,a,r,i,s,n,o){var h=this.font._get(this.fontSize),_=h.getTexture();null!=kha_graphics4_TextShaderPainter.lastTexture&&_!=kha_graphics4_TextShaderPainter.lastTexture&&this.drawBuffer(),kha_graphics4_TextShaderPainter.lastTexture=_;for(var l=s,u=n,d=t,c=t+a;d<c;){var g=d++,p=h.getBakedQuad(this.bakedQuadCache,kha_graphics4_TextShaderPainter.findIndex(e[g]),l,u);if(null!=p){100<=kha_graphics4_TextShaderPainter.bufferIndex+1&&this.drawBuffer(),this.setRectColors(r,i),this.setRectTexCoords(p.s0*_.get_width()/_.get_realWidth(),p.t0*_.get_height()/_.get_realHeight(),p.s1*_.get_width()/_.get_realWidth(),p.t1*_.get_height()/_.get_realHeight());var f=p.x0,m=p.y1,k=o._02*f+o._12*m+o._22,v=(o._00*f+o._10*m+o._20)/k,S=(o._01*f+o._11*m+o._21)/k,b=p.x0,y=p.y0,x=o._02*b+o._12*y+o._22,w=(o._00*b+o._10*y+o._20)/x,I=(o._01*b+o._11*y+o._21)/x,T=p.x1,C=p.y0,E=o._02*T+o._12*C+o._22,B=(o._00*T+o._10*C+o._20)/E,P=(o._01*T+o._11*C+o._21)/E,A=p.x1,L=p.y1,$=o._02*A+o._12*L+o._22,N=(o._00*A+o._10*L+o._20)/$,R=(o._01*A+o._11*L+o._21)/$;this.setRectVertices(v,S,w,I,B,P,N,R),l+=p.xadvance,++kha_graphics4_TextShaderPainter.bufferIndex}}},end:function(){0<kha_graphics4_TextShaderPainter.bufferIndex&&this.drawBuffer(),kha_graphics4_TextShaderPainter.lastTexture=null},__class__:kha_graphics4_TextShaderPainter};var kha_graphics4_Graphics2=$hxClasses["kha.graphics4.Graphics2"]=function(e){this.myMipmapScaleQuality=kha_graphics2_ImageScaleQuality.High,this.myImageScaleQuality=kha_graphics2_ImageScaleQuality.High,kha_graphics2_Graphics.call(this),this.set_color(-1),this.canvas=e,this.g=e.get_g4(),this.imagePainter=new kha_graphics4_ImageShaderPainter(this.g),this.coloredPainter=new kha_graphics4_ColoredShaderPainter(this.g),this.textPainter=new kha_graphics4_TextShaderPainter(this.g),this.textPainter.fontSize=this.get_fontSize(),this.projectionMatrix=new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this.setProjection(),null==kha_graphics4_Graphics2.videoPipeline&&(kha_graphics4_Graphics2.videoPipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_Graphics2.createImageVertexStructure()),kha_graphics4_Graphics2.videoPipeline.fragmentShader=kha_Shaders.painter_video_frag,kha_graphics4_Graphics2.videoPipeline.vertexShader=kha_Shaders.painter_video_vert,kha_graphics4_Graphics2.videoPipeline.compile())};kha_graphics4_Graphics2.__name__=!0,kha_graphics4_Graphics2.upperPowerOfTwo=function(e){return--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e},kha_graphics4_Graphics2.createImageVertexStructure=function(){var e=new kha_graphics4_VertexStructure;return e.add("vertexPosition",2),e.add("texPosition",1),e.add("vertexColor",3),e},kha_graphics4_Graphics2.createImagePipeline=function(e){var t=new kha_graphics4_PipelineState;return t.fragmentShader=kha_Shaders.painter_image_frag,t.vertexShader=kha_Shaders.painter_image_vert,t.inputLayout=[e],t.blendSource=1,t.blendDestination=5,t.alphaBlendSource=1,t.alphaBlendDestination=5,t},kha_graphics4_Graphics2.createColoredVertexStructure=function(){var e=new kha_graphics4_VertexStructure;return e.add("vertexPosition",2),e.add("vertexColor",3),e},kha_graphics4_Graphics2.createColoredPipeline=function(e){var t=new kha_graphics4_PipelineState;return t.fragmentShader=kha_Shaders.painter_colored_frag,t.vertexShader=kha_Shaders.painter_colored_vert,t.inputLayout=[e],t.blendSource=3,t.blendDestination=5,t.alphaBlendSource=3,t.alphaBlendDestination=5,t},kha_graphics4_Graphics2.createTextVertexStructure=function(){var e=new kha_graphics4_VertexStructure;return e.add("vertexPosition",2),e.add("texPosition",1),e.add("vertexColor",3),e},kha_graphics4_Graphics2.createTextPipeline=function(e){var t=new kha_graphics4_PipelineState;return t.fragmentShader=kha_Shaders.painter_text_frag,t.vertexShader=kha_Shaders.painter_text_vert,t.inputLayout=[e],t.blendSource=3,t.blendDestination=5,t.alphaBlendSource=3,t.alphaBlendDestination=5,t},kha_graphics4_Graphics2.__super__=kha_graphics2_Graphics,kha_graphics4_Graphics2.prototype=$extend(kha_graphics2_Graphics.prototype,{myColor:null,myFont:null,projectionMatrix:null,imagePainter:null,coloredPainter:null,textPainter:null,canvas:null,g:null,setProjection:function(){var e=this.canvas.get_width(),t=this.canvas.get_height();if(this.canvas instanceof kha_Framebuffer){var a=this.projectionMatrix,r=2/e,i=-e/e,s=2/(0-t),n=-t/(0-t);a._00=r,a._10=0,a._20=0,a._30=i,a._01=0,a._11=s,a._21=0,a._31=n,a._02=0,a._12=0,a._22=-.002000200020002,a._32=-1.0002000200020003,a._03=0,a._13=0,a._23=0,a._33=1}else if(kha_Image.get_nonPow2Supported()||(e=kha_graphics4_Graphics2.upperPowerOfTwo(e),t=kha_graphics4_Graphics2.upperPowerOfTwo(t)),this.g.renderTargetsInvertedY()){var o=this.projectionMatrix,h=2/e,_=-e/e,l=2/t,u=-t/t;o._00=h,o._10=0,o._20=0,o._30=_,o._01=0,o._11=l,o._21=0,o._31=u,o._02=0,o._12=0,o._22=-.002000200020002,o._32=-1.0002000200020003,o._03=0,o._13=0,o._23=0,o._33=1}else{var d=this.projectionMatrix,c=2/e,g=-e/e,p=2/(0-t),f=-t/(0-t);d._00=c,d._10=0,d._20=0,d._30=g,d._01=0,d._11=p,d._21=0,d._31=f,d._02=0,d._12=0,d._22=-.002000200020002,d._32=-1.0002000200020003,d._03=0,d._13=0,d._23=0,d._33=1}this.imagePainter.setProjection(this.projectionMatrix),this.coloredPainter.setProjection(this.projectionMatrix),this.textPainter.setProjection(this.projectionMatrix)},drawImage:function(e,t,a){var r=this.coloredPainter;0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&r.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&r.drawBuffer(!1),this.textPainter.end();var i=t+e.get_width(),s=a+e.get_height(),n=this.transformations[this.transformations.length-1],o=t,h=s,_=n._02*o+n._12*h+n._22,l=(n._00*o+n._10*h+n._20)/_,u=(n._01*o+n._11*h+n._21)/_,d=this.transformations[this.transformations.length-1],c=t,g=a,p=d._02*c+d._12*g+d._22,f=(d._00*c+d._10*g+d._20)/p,m=(d._01*c+d._11*g+d._21)/p,k=this.transformations[this.transformations.length-1],v=i,S=a,b=k._02*v+k._12*S+k._22,y=(k._00*v+k._10*S+k._20)/b,x=(k._01*v+k._11*S+k._21)/b,w=this.transformations[this.transformations.length-1],I=i,T=s,C=w._02*I+w._12*T+w._22,E=(w._00*I+w._10*T+w._20)/C,B=(w._01*I+w._11*T+w._21)/C,P=this.imagePainter,A=this.get_opacity(),L=this.get_color(),$=e;(1500<=kha_graphics4_ImageShaderPainter.bufferIndex+1||null!=kha_graphics4_ImageShaderPainter.lastTexture&&$!=kha_graphics4_ImageShaderPainter.lastTexture)&&P.drawBuffer();var N=.00392156862745098*((16711680&L)>>>16),R=.00392156862745098*((65280&L)>>>8),V=.00392156862745098*(255&L),M=.00392156862745098*(L>>>24)*A,F=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[F+5]=N,kha_graphics4_ImageShaderPainter.rectVertices[F+6]=R,kha_graphics4_ImageShaderPainter.rectVertices[F+7]=V,kha_graphics4_ImageShaderPainter.rectVertices[F+8]=M,kha_graphics4_ImageShaderPainter.rectVertices[F+14]=N,kha_graphics4_ImageShaderPainter.rectVertices[F+15]=R,kha_graphics4_ImageShaderPainter.rectVertices[F+16]=V,kha_graphics4_ImageShaderPainter.rectVertices[F+17]=M,kha_graphics4_ImageShaderPainter.rectVertices[F+23]=N,kha_graphics4_ImageShaderPainter.rectVertices[F+24]=R,kha_graphics4_ImageShaderPainter.rectVertices[F+25]=V,kha_graphics4_ImageShaderPainter.rectVertices[F+26]=M,kha_graphics4_ImageShaderPainter.rectVertices[F+32]=N,kha_graphics4_ImageShaderPainter.rectVertices[F+33]=R,kha_graphics4_ImageShaderPainter.rectVertices[F+34]=V,kha_graphics4_ImageShaderPainter.rectVertices[F+35]=M;var H=$.get_width()/$.get_realWidth(),O=$.get_height()/$.get_realHeight(),U=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[U+3]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+4]=O,kha_graphics4_ImageShaderPainter.rectVertices[U+12]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+13]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+21]=H,kha_graphics4_ImageShaderPainter.rectVertices[U+22]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+30]=H,kha_graphics4_ImageShaderPainter.rectVertices[U+31]=O;var D=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[D]=l,kha_graphics4_ImageShaderPainter.rectVertices[D+1]=u,kha_graphics4_ImageShaderPainter.rectVertices[D+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[D+9]=f,kha_graphics4_ImageShaderPainter.rectVertices[D+10]=m,kha_graphics4_ImageShaderPainter.rectVertices[D+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[D+18]=y,kha_graphics4_ImageShaderPainter.rectVertices[D+19]=x,kha_graphics4_ImageShaderPainter.rectVertices[D+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[D+27]=E,kha_graphics4_ImageShaderPainter.rectVertices[D+28]=B,kha_graphics4_ImageShaderPainter.rectVertices[D+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=$},drawScaledSubImage:function(e,t,a,r,i,s,n,o,h){var _=this.coloredPainter;0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&_.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&_.drawBuffer(!1),this.textPainter.end();var l=this.transformations[this.transformations.length-1],u=s,d=n+h,c=l._02*u+l._12*d+l._22,g=(l._00*u+l._10*d+l._20)/c,p=(l._01*u+l._11*d+l._21)/c,f=this.transformations[this.transformations.length-1],m=s,k=n,v=f._02*m+f._12*k+f._22,S=(f._00*m+f._10*k+f._20)/v,b=(f._01*m+f._11*k+f._21)/v,y=this.transformations[this.transformations.length-1],x=s+o,w=n,I=y._02*x+y._12*w+y._22,T=(y._00*x+y._10*w+y._20)/I,C=(y._01*x+y._11*w+y._21)/I,E=this.transformations[this.transformations.length-1],B=s+o,P=n+h,A=E._02*B+E._12*P+E._22,L=(E._00*B+E._10*P+E._20)/A,$=(E._01*B+E._11*P+E._21)/A,N=this.imagePainter,R=this.get_opacity(),V=this.get_color(),M=e;(1500<=kha_graphics4_ImageShaderPainter.bufferIndex+1||null!=kha_graphics4_ImageShaderPainter.lastTexture&&M!=kha_graphics4_ImageShaderPainter.lastTexture)&&N.drawBuffer();var F=t/M.get_realWidth(),H=a/M.get_realHeight(),O=(t+r)/M.get_realWidth(),U=(a+i)/M.get_realHeight(),D=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[D+3]=F,kha_graphics4_ImageShaderPainter.rectVertices[D+4]=U,kha_graphics4_ImageShaderPainter.rectVertices[D+12]=F,kha_graphics4_ImageShaderPainter.rectVertices[D+13]=H,kha_graphics4_ImageShaderPainter.rectVertices[D+21]=O,kha_graphics4_ImageShaderPainter.rectVertices[D+22]=H,kha_graphics4_ImageShaderPainter.rectVertices[D+30]=O,kha_graphics4_ImageShaderPainter.rectVertices[D+31]=U;var z=.00392156862745098*((16711680&V)>>>16),W=.00392156862745098*((65280&V)>>>8),G=.00392156862745098*(255&V),j=.00392156862745098*(V>>>24)*R,K=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[K+5]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+6]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+7]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+8]=j,kha_graphics4_ImageShaderPainter.rectVertices[K+14]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+15]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+16]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+17]=j,kha_graphics4_ImageShaderPainter.rectVertices[K+23]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+24]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+25]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+26]=j,kha_graphics4_ImageShaderPainter.rectVertices[K+32]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+33]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+34]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+35]=j;var X=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[X]=g,kha_graphics4_ImageShaderPainter.rectVertices[X+1]=p,kha_graphics4_ImageShaderPainter.rectVertices[X+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[X+9]=S,kha_graphics4_ImageShaderPainter.rectVertices[X+10]=b,kha_graphics4_ImageShaderPainter.rectVertices[X+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[X+18]=T,kha_graphics4_ImageShaderPainter.rectVertices[X+19]=C,kha_graphics4_ImageShaderPainter.rectVertices[X+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[X+27]=L,kha_graphics4_ImageShaderPainter.rectVertices[X+28]=$,kha_graphics4_ImageShaderPainter.rectVertices[X+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=M},get_color:function(){return this.myColor},set_color:function(e){return this.myColor=e},drawRect:function(e,t,a,r,i){null==i&&(i=1),this.imagePainter.end(),this.textPainter.end();var s=this.transformations[this.transformations.length-1],n=e-i/2,o=t+i/2,h=s._02*n+s._12*o+s._22,_=(s._00*n+s._10*o+s._20)/h,l=(s._01*n+s._11*o+s._21)/h,u=new kha_math_FastVector2(_,l),d=this.transformations[this.transformations.length-1],c=e-i/2,g=t-i/2,p=d._02*c+d._12*g+d._22,f=(d._00*c+d._10*g+d._20)/p,m=(d._01*c+d._11*g+d._21)/p,k=new kha_math_FastVector2(f,m),v=this.transformations[this.transformations.length-1],S=e+a+i/2,b=t-i/2,y=v._02*S+v._12*b+v._22,x=(v._00*S+v._10*b+v._20)/y,w=(v._01*S+v._11*b+v._21)/y,I=new kha_math_FastVector2(x,w),T=this.transformations[this.transformations.length-1],C=e+a+i/2,E=t+i/2,B=T._02*C+T._12*E+T._22,P=(T._00*C+T._10*E+T._20)/B,A=(T._01*C+T._11*E+T._21)/B,L=new kha_math_FastVector2(P,A);this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,k.x,k.y,I.x,I.y,L.x,L.y);var $=this.transformations[this.transformations.length-1],N=e-i/2,R=t+r-i/2,V=$._02*N+$._12*R+$._22,M=($._00*N+$._10*R+$._20)/V,F=($._01*N+$._11*R+$._21)/V;u=new kha_math_FastVector2(M,F);var H=this.transformations[this.transformations.length-1],O=e-i/2,U=t+i/2,D=H._02*O+H._12*U+H._22,z=(H._00*O+H._10*U+H._20)/D,W=(H._01*O+H._11*U+H._21)/D;k=new kha_math_FastVector2(z,W);var G=this.transformations[this.transformations.length-1],j=e+i/2,K=t+i/2,X=G._02*j+G._12*K+G._22,Y=(G._00*j+G._10*K+G._20)/X,Z=(G._01*j+G._11*K+G._21)/X;I=new kha_math_FastVector2(Y,Z);var Q=this.transformations[this.transformations.length-1],q=e+i/2,J=t+r-i/2,ee=Q._02*q+Q._12*J+Q._22,te=(Q._00*q+Q._10*J+Q._20)/ee,ae=(Q._01*q+Q._11*J+Q._21)/ee;L=new kha_math_FastVector2(te,ae),this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,k.x,k.y,I.x,I.y,L.x,L.y);var re=this.transformations[this.transformations.length-1],ie=e-i/2,se=t+r+i/2,ne=re._02*ie+re._12*se+re._22,oe=(re._00*ie+re._10*se+re._20)/ne,he=(re._01*ie+re._11*se+re._21)/ne;u=new kha_math_FastVector2(oe,he);var _e=this.transformations[this.transformations.length-1],le=e-i/2,ue=t+r-i/2,de=_e._02*le+_e._12*ue+_e._22,ce=(_e._00*le+_e._10*ue+_e._20)/de,ge=(_e._01*le+_e._11*ue+_e._21)/de;k=new kha_math_FastVector2(ce,ge);var pe=this.transformations[this.transformations.length-1],fe=e+a+i/2,me=t+r-i/2,ke=pe._02*fe+pe._12*me+pe._22,ve=(pe._00*fe+pe._10*me+pe._20)/ke,Se=(pe._01*fe+pe._11*me+pe._21)/ke;I=new kha_math_FastVector2(ve,Se);var be=this.transformations[this.transformations.length-1],ye=e+a+i/2,xe=t+r+i/2,we=be._02*ye+be._12*xe+be._22,Ie=(be._00*ye+be._10*xe+be._20)/we,Te=(be._01*ye+be._11*xe+be._21)/we;L=new kha_math_FastVector2(Ie,Te),this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,k.x,k.y,I.x,I.y,L.x,L.y);var Ce=this.transformations[this.transformations.length-1],Ee=e+a-i/2,Be=t+r-i/2,Pe=Ce._02*Ee+Ce._12*Be+Ce._22,Ae=(Ce._00*Ee+Ce._10*Be+Ce._20)/Pe,Le=(Ce._01*Ee+Ce._11*Be+Ce._21)/Pe;u=new kha_math_FastVector2(Ae,Le);var $e=this.transformations[this.transformations.length-1],Ne=e+a-i/2,Re=t+i/2,Ve=$e._02*Ne+$e._12*Re+$e._22,Me=($e._00*Ne+$e._10*Re+$e._20)/Ve,Fe=($e._01*Ne+$e._11*Re+$e._21)/Ve;k=new kha_math_FastVector2(Me,Fe);var He=this.transformations[this.transformations.length-1],Oe=e+a+i/2,Ue=t+i/2,De=He._02*Oe+He._12*Ue+He._22,ze=(He._00*Oe+He._10*Ue+He._20)/De,We=(He._01*Oe+He._11*Ue+He._21)/De;I=new kha_math_FastVector2(ze,We);var Ge=this.transformations[this.transformations.length-1],je=e+a+i/2,Ke=t+r-i/2,Xe=Ge._02*je+Ge._12*Ke+Ge._22,Ye=(Ge._00*je+Ge._10*Ke+Ge._20)/Xe,Ze=(Ge._01*je+Ge._11*Ke+Ge._21)/Xe;L=new kha_math_FastVector2(Ye,Ze),this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,k.x,k.y,I.x,I.y,L.x,L.y)},fillRect:function(e,t,a,r){this.imagePainter.end(),this.textPainter.end();var i=this.transformations[this.transformations.length-1],s=e,n=t+r,o=i._02*s+i._12*n+i._22,h=(i._00*s+i._10*n+i._20)/o,_=(i._01*s+i._11*n+i._21)/o,l=this.transformations[this.transformations.length-1],u=e,d=t,c=l._02*u+l._12*d+l._22,g=(l._00*u+l._10*d+l._20)/c,p=(l._01*u+l._11*d+l._21)/c,f=this.transformations[this.transformations.length-1],m=e+a,k=t,v=f._02*m+f._12*k+f._22,S=(f._00*m+f._10*k+f._20)/v,b=(f._01*m+f._11*k+f._21)/v,y=this.transformations[this.transformations.length-1],x=e+a,w=t+r,I=y._02*x+y._12*w+y._22,T=(y._00*x+y._10*w+y._20)/I,C=(y._01*x+y._11*w+y._21)/I;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),h,_,g,p,S,b,T,C)},drawString:function(e,t,a){this.imagePainter.end();var r=this.coloredPainter;0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&r.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&r.drawBuffer(!1),this.textPainter.drawString(e,this.get_opacity(),this.get_color(),t,a,this.transformations[this.transformations.length-1])},drawCharacters:function(e,t,a,r,i){this.imagePainter.end();var s=this.coloredPainter;0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&s.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&s.drawBuffer(!1),this.textPainter.drawCharacters(e,t,a,this.get_opacity(),this.get_color(),r,i,this.transformations[this.transformations.length-1])},get_font:function(){return this.myFont},set_font:function(e){return this.textPainter.setFont(e),this.myFont=e},set_fontSize:function(e){return kha_graphics2_Graphics.prototype.set_fontSize.call(this,this.textPainter.fontSize=e)},drawLine:function(e,t,a,r,i){var s;null==i&&(i=1),this.imagePainter.end(),this.textPainter.end(),(s=r==t?new kha_math_FastVector2(0,-1):new kha_math_FastVector2(1,-(a-e)/(r-t))).set_length(i);var n=new kha_math_FastVector2(e+.5*s.x,t+.5*s.y),o=new kha_math_FastVector2(a+.5*s.x,r+.5*s.y),h=new kha_math_FastVector2(n.x-s.x,n.y-s.y),_=new kha_math_FastVector2(o.x-s.x,o.y-s.y),l=this.transformations[this.transformations.length-1],u=l._02*n.x+l._12*n.y+l._22,d=(l._00*n.x+l._10*n.y+l._20)/u,c=(l._01*n.x+l._11*n.y+l._21)/u;n=new kha_math_FastVector2(d,c);var g=this.transformations[this.transformations.length-1],p=g._02*o.x+g._12*o.y+g._22,f=(g._00*o.x+g._10*o.y+g._20)/p,m=(g._01*o.x+g._11*o.y+g._21)/p;o=new kha_math_FastVector2(f,m);var k=this.transformations[this.transformations.length-1],v=k._02*h.x+k._12*h.y+k._22,S=(k._00*h.x+k._10*h.y+k._20)/v,b=(k._01*h.x+k._11*h.y+k._21)/v;h=new kha_math_FastVector2(S,b);var y=this.transformations[this.transformations.length-1],x=y._02*_.x+y._12*_.y+y._22,w=(y._00*_.x+y._10*_.y+y._20)/x,I=(y._01*_.x+y._11*_.y+y._21)/x;_=new kha_math_FastVector2(w,I),this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),n.x,n.y,o.x,o.y,h.x,h.y),this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),h.x,h.y,o.x,o.y,_.x,_.y)},fillTriangle:function(e,t,a,r,i,s){this.imagePainter.end(),this.textPainter.end();var n=this.transformations[this.transformations.length-1],o=e,h=t,_=n._02*o+n._12*h+n._22,l=(n._00*o+n._10*h+n._20)/_,u=(n._01*o+n._11*h+n._21)/_,d=this.transformations[this.transformations.length-1],c=a,g=r,p=d._02*c+d._12*g+d._22,f=(d._00*c+d._10*g+d._20)/p,m=(d._01*c+d._11*g+d._21)/p,k=this.transformations[this.transformations.length-1],v=i,S=s,b=k._02*v+k._12*S+k._22,y=(k._00*v+k._10*S+k._20)/b,x=(k._01*v+k._11*S+k._21)/b;this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),l,u,f,m,y,x)},myImageScaleQuality:null,get_imageScaleQuality:function(){return this.myImageScaleQuality},set_imageScaleQuality:function(e){return this.imagePainter.setBilinearFilter(e==kha_graphics2_ImageScaleQuality.High),this.textPainter.setBilinearFilter(e==kha_graphics2_ImageScaleQuality.High),this.myImageScaleQuality=e},myMipmapScaleQuality:null,get_mipmapScaleQuality:function(){return this.myMipmapScaleQuality},set_mipmapScaleQuality:function(e){return this.imagePainter.setBilinearMipmapFilter(e==kha_graphics2_ImageScaleQuality.High),this.myMipmapScaleQuality=e},setPipeline:function(e){this.flush(),this.imagePainter.set_pipeline(e),this.coloredPainter.set_pipeline(e),this.textPainter.set_pipeline(e),null!=e&&this.g.setPipeline(e)},scissor:function(e,t,a,r){this.flush(),this.g.scissor(e,t,a,r)},disableScissor:function(){this.flush(),this.g.disableScissor()},begin:function(e,t){null==e&&(e=!0),this.g.begin(),e&&this.clear(t),this.setProjection()},clear:function(e){this.flush(),this.g.clear(null==e?-16777216:e)},flush:function(){this.imagePainter.end(),this.textPainter.end();var e=this.coloredPainter;0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&e.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&e.drawBuffer(!1)},end:function(){this.flush(),this.g.end()},drawVideoInternal:function(e,t,a,r,i){},drawVideo:function(e,t,a,r,i){this.setPipeline(kha_graphics4_Graphics2.videoPipeline),this.drawVideoInternal(e,t,a,r,i),this.setPipeline(null)},__class__:kha_graphics4_Graphics2});var kha_graphics4_IndexBuffer=$hxClasses["kha.graphics4.IndexBuffer"]=function(e,t,a){null==a&&(a=!1),this.indexCount=e,this.buffer=Krom.createIndexBuffer(e)};kha_graphics4_IndexBuffer.__name__=!0,kha_graphics4_IndexBuffer.prototype={buffer:null,_data:null,indexCount:null,delete:function(){Krom.deleteIndexBuffer(this.buffer),this.buffer=null},lock:function(e,t){return this._data=Krom.lockIndexBuffer(this.buffer),null==e&&(e=0),null==t&&(t=this.indexCount),this._data.subarray(e,e+t)},unlock:function(){Krom.unlockIndexBuffer(this.buffer)},set:function(){Krom.setIndexBuffer(this.buffer)},count:function(){return this.indexCount},__class__:kha_graphics4_IndexBuffer};var kha_graphics4_PipelineStateBase=$hxClasses["kha.graphics4.PipelineStateBase"]=function(){this.inputLayout=null,this.vertexShader=null,this.fragmentShader=null,this.geometryShader=null,this.tessellationControlShader=null,this.tessellationEvaluationShader=null,this.cullMode=2,this.depthWrite=!1,this.depthMode=0,this.stencilMode=0,this.stencilBothPass=0,this.stencilDepthFail=0,this.stencilFail=0,this.stencilReferenceValue=kha_graphics4_StencilValue.Static(0),this.stencilReadMask=255,this.stencilWriteMask=255,this.blendSource=1,this.blendDestination=2,this.blendOperation=0,this.alphaBlendSource=1,this.alphaBlendDestination=2,this.alphaBlendOperation=0,this.colorWriteMasksRed=[],this.colorWriteMasksGreen=[],this.colorWriteMasksBlue=[],this.colorWriteMasksAlpha=[],this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.conservativeRasterization=!1};kha_graphics4_PipelineStateBase.__name__=!0,kha_graphics4_PipelineStateBase.prototype={inputLayout:null,vertexShader:null,fragmentShader:null,geometryShader:null,tessellationControlShader:null,tessellationEvaluationShader:null,cullMode:null,depthWrite:null,depthMode:null,stencilMode:null,stencilBothPass:null,stencilDepthFail:null,stencilFail:null,stencilReferenceValue:null,stencilReadMask:null,stencilWriteMask:null,blendSource:null,blendDestination:null,blendOperation:null,alphaBlendSource:null,alphaBlendDestination:null,alphaBlendOperation:null,colorWriteMasksRed:null,colorWriteMasksGreen:null,colorWriteMasksBlue:null,colorWriteMasksAlpha:null,set_colorWriteMask:function(e){var t=this.colorWriteMasksAlpha[0]=e,a=this.colorWriteMasksGreen[0]=t,r=this.colorWriteMasksBlue[0]=a;return this.colorWriteMasksRed[0]=r},get_colorWriteMaskRed:function(){return this.colorWriteMasksRed[0]},set_colorWriteMaskRed:function(e){return this.colorWriteMasksRed[0]=e},get_colorWriteMaskGreen:function(){return this.colorWriteMasksGreen[0]},set_colorWriteMaskGreen:function(e){return this.colorWriteMasksGreen[0]=e},get_colorWriteMaskBlue:function(){return this.colorWriteMasksBlue[0]},set_colorWriteMaskBlue:function(e){return this.colorWriteMasksBlue[0]=e},get_colorWriteMaskAlpha:function(){return this.colorWriteMasksAlpha[0]},set_colorWriteMaskAlpha:function(e){return this.colorWriteMasksAlpha[0]=e},conservativeRasterization:null,__class__:kha_graphics4_PipelineStateBase};var kha_graphics4_PipelineState=$hxClasses["kha.graphics4.PipelineState"]=function(){kha_graphics4_PipelineStateBase.call(this),this.pipeline=Krom.createPipeline()};kha_graphics4_PipelineState.__name__=!0,kha_graphics4_PipelineState.convertCullMode=function(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2}},kha_graphics4_PipelineState.convertCompareMode=function(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 6;case 7:return 7}},kha_graphics4_PipelineState.convertStencilAction=function(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 6;case 7:return 7}},kha_graphics4_PipelineState.convertBlendingFactor=function(e){switch(e){case 0:case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 9:return 8;case 10:return 9}},kha_graphics4_PipelineState.__super__=kha_graphics4_PipelineStateBase,kha_graphics4_PipelineState.prototype=$extend(kha_graphics4_PipelineStateBase.prototype,{pipeline:null,delete:function(){Krom.deletePipeline(this.pipeline),this.pipeline=null},compile:function(){var e=0<this.inputLayout.length?this.inputLayout[0]:null,t=1<this.inputLayout.length?this.inputLayout[1]:null,a=2<this.inputLayout.length?this.inputLayout[2]:null,r=3<this.inputLayout.length?this.inputLayout[3]:null,i=null!=this.geometryShader?this.geometryShader.shader:null,s=null!=this.tessellationControlShader?this.tessellationControlShader.shader:null,n=null!=this.tessellationEvaluationShader?this.tessellationEvaluationShader.shader:null,o=0,h=this.stencilReferenceValue;1==h._hx_index&&(o=h.value);Krom.compilePipeline(this.pipeline,e,t,a,r,this.inputLayout.length,this.vertexShader.shader,this.fragmentShader.shader,i,s,n,{cullMode:kha_graphics4_PipelineState.convertCullMode(this.cullMode),depthWrite:this.depthWrite,depthMode:kha_graphics4_PipelineState.convertCompareMode(this.depthMode),stencilMode:kha_graphics4_PipelineState.convertCompareMode(this.stencilMode),stencilBothPass:kha_graphics4_PipelineState.convertStencilAction(this.stencilBothPass),stencilDepthFail:kha_graphics4_PipelineState.convertStencilAction(this.stencilDepthFail),stencilFail:kha_graphics4_PipelineState.convertStencilAction(this.stencilFail),stencilReferenceValue:o,stencilReadMask:this.stencilReadMask,stencilWriteMask:this.stencilWriteMask,blendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.blendSource),blendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.blendDestination),alphaBlendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendSource),alphaBlendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendDestination),colorWriteMaskRed:this.colorWriteMasksRed,colorWriteMaskGreen:this.colorWriteMasksGreen,colorWriteMaskBlue:this.colorWriteMasksBlue,colorWriteMaskAlpha:this.colorWriteMasksAlpha,conservativeRasterization:this.conservativeRasterization})},set:function(){Krom.setPipeline(this.pipeline)},getConstantLocation:function(e){return Krom.getConstantLocation(this.pipeline,e)},getTextureUnit:function(e){return Krom.getTextureUnit(this.pipeline,e)},__class__:kha_graphics4_PipelineState});var kha_graphics4_StencilValue=$hxEnums["kha.graphics4.StencilValue"]={__ename__:!0,__constructs__:["Dynamic","Static"],Dynamic:{_hx_index:0,__enum__:"kha.graphics4.StencilValue",toString:$estr},Static:($_=function(e){return{_hx_index:1,value:e,__enum__:"kha.graphics4.StencilValue",toString:$estr}},$_.__params__=["value"],$_)},kha_graphics4_TessellationControlShader=$hxClasses["kha.graphics4.TessellationControlShader"]=function(e,t){this.shader=Krom.createTessellationControlShader(e[0].bytes.b.bufferValue,t[0])};kha_graphics4_TessellationControlShader.__name__=!0,kha_graphics4_TessellationControlShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_TessellationControlShader};var kha_graphics4_TessellationEvaluationShader=$hxClasses["kha.graphics4.TessellationEvaluationShader"]=function(e,t){this.shader=Krom.createTessellationEvaluationShader(e[0].bytes.b.bufferValue,t[0])};kha_graphics4_TessellationEvaluationShader.__name__=!0,kha_graphics4_TessellationEvaluationShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_TessellationEvaluationShader};var kha_graphics4_TextureUnit=$hxClasses["kha.graphics4.TextureUnit"]=function(){};kha_graphics4_TextureUnit.__name__=!0;var kha_graphics4_VertexBuffer=$hxClasses["kha.graphics4.VertexBuffer"]=function(e,t,a,r,i){null==i&&(i=!1),null==r&&(r=0),this.vertexCount=e,this.structure=t,this.buffer=Krom.createVertexBuffer(e,t.elements,a,r)};kha_graphics4_VertexBuffer.__name__=!0,kha_graphics4_VertexBuffer.prototype={buffer:null,_data:null,vertexCount:null,structure:null,delete:function(){Krom.deleteVertexBuffer(this.buffer),this.buffer=null},lock:function(e,t){return this._data=Krom.lockVertexBuffer(this.buffer),this._data},lockInt16:function(e,t){return new Int16Array(this.lock(e,t).buffer)},unlock:function(){Krom.unlockVertexBuffer(this.buffer)},stride:function(){return this.structure.byteSize()},count:function(){return this.vertexCount},set:function(e){return Krom.setVertexBuffer(this.buffer),0},__class__:kha_graphics4_VertexBuffer};var kha_graphics4_VertexElement=$hxClasses["kha.graphics4.VertexElement"]=function(e,t){this.name=e,this.data=t};kha_graphics4_VertexElement.__name__=!0,kha_graphics4_VertexElement.prototype={name:null,data:null,__class__:kha_graphics4_VertexElement};var kha_graphics4_VertexShader=$hxClasses["kha.graphics4.VertexShader"]=function(e,t){null!=e&&(this.shader=Krom.createVertexShader(e[0].bytes.b.bufferValue,t[0]))};kha_graphics4_VertexShader.__name__=!0,kha_graphics4_VertexShader.fromSource=function(e){var t=new kha_graphics4_VertexShader(null,null);return t.shader=Krom.createVertexShaderFromSource(e),t},kha_graphics4_VertexShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_VertexShader};var kha_graphics4_VertexStructure=$hxClasses["kha.graphics4.VertexStructure"]=function(){this.elements=[],this.instanced=!1};kha_graphics4_VertexStructure.__name__=!0,kha_graphics4_VertexStructure.prototype={elements:null,instanced:null,add:function(e,t){this.elements.push(new kha_graphics4_VertexElement(e,t))},size:function(){return this.elements.length},byteSize:function(){for(var e=0,t=0,a=this.elements.length;t<a;){var r=t++;e+=this.dataByteSize(this.elements[r].data)}return e},dataByteSize:function(e){switch(e){case 0:return 4;case 1:return 8;case 2:return 12;case 3:return 16;case 4:return 64;case 5:return 4;case 6:return 8}},get:function(e){return this.elements[e]},__class__:kha_graphics4_VertexStructure};var kha_graphics5_Graphics=$hxClasses["kha.graphics5.Graphics"]=function(){};kha_graphics5_Graphics.__name__=!0,kha_graphics5_Graphics.prototype={renderTargetsInvertedY:null,begin:null,end:null,swapBuffers:null,__class__:kha_graphics5_Graphics};var kha_graphics5_RenderTarget=$hxClasses["kha.graphics5.RenderTarget"]=function(){};kha_graphics5_RenderTarget.__name__=!0;var kha_input_Gamepad=$hxClasses["kha.input.Gamepad"]=$hx_exports.kha.input.Gamepad=function(e,t){null==t&&(t="unknown"),null==e&&(e=0),this.index=e,this.axisListeners=[],this.buttonListeners=[],kha_input_Gamepad.instances[e]=this};kha_input_Gamepad.__name__=!0,kha_input_Gamepad.get=function(e){return null==e&&(e=0),e>=kha_input_Gamepad.instances.length?null:kha_input_Gamepad.instances[e]},kha_input_Gamepad.notifyOnConnect=function(e,t){null!=e&&kha_input_Gamepad.connectListeners.push(e),null!=t&&kha_input_Gamepad.disconnectListeners.push(t)},kha_input_Gamepad.removeConnect=function(e,t){null!=e&&HxOverrides.remove(kha_input_Gamepad.connectListeners,e),null!=t&&HxOverrides.remove(kha_input_Gamepad.disconnectListeners,t)},kha_input_Gamepad.sendConnectEvent=function(e){kha_input_Gamepad.instances[e].connected=!0;for(var t=0,a=kha_input_Gamepad.connectListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_input_Gamepad.sendDisconnectEvent=function(e){kha_input_Gamepad.instances[e].connected=!1;for(var t=0,a=kha_input_Gamepad.disconnectListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_input_Gamepad.prototype={index:null,notify:function(e,t){null!=e&&this.axisListeners.push(e),null!=t&&this.buttonListeners.push(t)},remove:function(e,t){null!=e&&HxOverrides.remove(this.axisListeners,e),null!=t&&HxOverrides.remove(this.buttonListeners,t)},axisListeners:null,buttonListeners:null,id:null,connected:null,get_id:function(){return kha_SystemImpl.getGamepadId(this.index)},sendAxisEvent:function(e,t){for(var a=0,r=this.axisListeners;a<r.length;){var i=r[a];++a,i(e,t)}},sendButtonEvent:function(e,t){for(var a=0,r=this.buttonListeners;a<r.length;){var i=r[a];++a,i(e,t)}},__class__:kha_input_Gamepad};var kha_netsync_Controller=$hxClasses["kha.netsync.Controller"]=function(){this.__id=kha_netsync_ControllerBuilder.nextId++,this._inputBuffer=new haxe_io_Bytes(new ArrayBuffer(1))};kha_netsync_Controller.__name__=!0,kha_netsync_Controller.prototype={__id:null,_inputBufferIndex:null,_inputBuffer:null,_id:function(){return this.__id},_receive:function(e){},__class__:kha_netsync_Controller};var kha_input_Keyboard=$hxClasses["kha.input.Keyboard"]=$hx_exports.kha.input.Keyboard=function(){kha_netsync_Controller.call(this),this.downListeners=[],this.upListeners=[],this.pressListeners=[],kha_input_Keyboard.instance=this};kha_input_Keyboard.__name__=!0,kha_input_Keyboard.get=function(e){return null==e&&(e=0),kha_SystemImpl.getKeyboard(e)},kha_input_Keyboard.__super__=kha_netsync_Controller,kha_input_Keyboard.prototype=$extend(kha_netsync_Controller.prototype,{notify:function(e,t,a){null!=e&&this.downListeners.push(e),null!=t&&this.upListeners.push(t),null!=a&&this.pressListeners.push(a)},remove:function(e,t,a){null!=e&&HxOverrides.remove(this.downListeners,e),null!=t&&HxOverrides.remove(this.upListeners,t),null!=a&&HxOverrides.remove(this.pressListeners,a)},show:function(){},hide:function(){},downListeners:null,upListeners:null,pressListeners:null,sendDownEvent:function(e){for(var t=0,a=this.downListeners;t<a.length;){var r=a[t];++t,r(e)}},sendUpEvent:function(e){for(var t=0,a=this.upListeners;t<a.length;){var r=a[t];++t,r(e)}},sendPressEvent:function(e){for(var t=0,a=this.pressListeners;t<a.length;){var r=a[t];++t,r(e)}},_receive:function(e){},__class__:kha_input_Keyboard});var kha_input_Mouse=$hxClasses["kha.input.Mouse"]=$hx_exports.kha.input.Mouse=function(){kha_netsync_Controller.call(this),kha_input_Mouse.instance=this};kha_input_Mouse.__name__=!0,kha_input_Mouse.get=function(e){return null==e&&(e=0),kha_SystemImpl.getMouse(e)},kha_input_Mouse.__super__=kha_netsync_Controller,kha_input_Mouse.prototype=$extend(kha_netsync_Controller.prototype,{notify:function(e,t,a,r,i){this.notifyWindowed(0,e,t,a,r,i)},remove:function(e,t,a,r,i){this.removeWindowed(0,e,t,a,r,i)},notifyWindowed:function(e,t,a,r,i,s){if(null!=t){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=e;)this.windowDownListeners.push([]);this.windowDownListeners[e].push(t)}if(null!=a){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=e;)this.windowUpListeners.push([]);this.windowUpListeners[e].push(a)}if(null!=r){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=e;)this.windowMoveListeners.push([]);this.windowMoveListeners[e].push(r)}if(null!=i){for(null==this.windowWheelListeners&&(this.windowWheelListeners=[]);this.windowWheelListeners.length<=e;)this.windowWheelListeners.push([]);this.windowWheelListeners[e].push(i)}if(null!=s){for(null==this.windowLeaveListeners&&(this.windowLeaveListeners=[]);this.windowLeaveListeners.length<=e;)this.windowLeaveListeners.push([]);this.windowLeaveListeners[e].push(s)}},removeWindowed:function(e,t,a,r,i,s){null!=t&&(null!=this.windowDownListeners?e<this.windowDownListeners.length?HxOverrides.remove(this.windowDownListeners[e],t):haxe_Log.trace('no downListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:110,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no downListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:114,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=a&&(null!=this.windowUpListeners?e<this.windowUpListeners.length?HxOverrides.remove(this.windowUpListeners[e],a):haxe_Log.trace('no upListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:124,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no upListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:128,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=r&&(null!=this.windowMoveListeners?e<this.windowMoveListeners.length?HxOverrides.remove(this.windowMoveListeners[e],r):haxe_Log.trace('no moveListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:138,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no moveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:142,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=i&&(null!=this.windowWheelListeners?e<this.windowWheelListeners.length?HxOverrides.remove(this.windowWheelListeners[e],i):haxe_Log.trace('no wheelListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:152,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no wheelListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:156,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=s&&(null!=this.windowLeaveListeners?e<this.windowLeaveListeners.length?HxOverrides.remove(this.windowLeaveListeners[e],s):haxe_Log.trace('no leaveListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:166,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no leaveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:170,className:"kha.input.Mouse",methodName:"removeWindowed"}))},lock:function(){},unlock:function(){},canLock:function(){return!1},isLocked:function(){return!1},notifyOnLockChange:function(e,t){},removeFromLockChange:function(e,t){},hideSystemCursor:function(){},showSystemCursor:function(){},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,windowWheelListeners:null,windowLeaveListeners:null,sendLeaveEvent:function(e){if(null!=this.windowLeaveListeners)for(var t=0,a=this.windowLeaveListeners[e];t<a.length;){var r=a[t];++t,r()}},sendDownEvent:function(e,t,a,r){if(null!=this.windowDownListeners)for(var i=0,s=this.windowDownListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendUpEvent:function(e,t,a,r){if(null!=this.windowUpListeners)for(var i=0,s=this.windowUpListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendMoveEvent:function(e,t,a,r,i){if(null!=this.windowMoveListeners)for(var s=0,n=this.windowMoveListeners[e];s<n.length;){var o=n[s];++s,o(t,a,r,i)}},sendWheelEvent:function(e,t){if(null!=this.windowWheelListeners)for(var a=0,r=this.windowWheelListeners[e];a<r.length;){var i=r[a];++a,i(t)}},_receive:function(e){},__class__:kha_input_Mouse});var kha_input_MouseImpl=$hxClasses["kha.input.MouseImpl"]=function(){kha_input_Mouse.call(this)};kha_input_MouseImpl.__name__=!0,kha_input_MouseImpl.__super__=kha_input_Mouse,kha_input_MouseImpl.prototype=$extend(kha_input_Mouse.prototype,{lock:function(){kha_SystemImpl.lockMouse()},unlock:function(){kha_SystemImpl.unlockMouse()},canLock:function(){return kha_SystemImpl.canLockMouse()},isLocked:function(){return kha_SystemImpl.isMouseLocked()},notifyOnLockChange:function(e,t){kha_SystemImpl.notifyOfMouseLockChange(e,t)},removeFromLockChange:function(e,t){kha_SystemImpl.removeFromMouseLockChange(e,t)},hideSystemCursor:function(){kha_SystemImpl.hideSystemCursor()},showSystemCursor:function(){kha_SystemImpl.showSystemCursor()},_receive:function(e){},__class__:kha_input_MouseImpl});var kha_input_Pen=$hxClasses["kha.input.Pen"]=function(){kha_input_Pen.instance=this};kha_input_Pen.__name__=!0,kha_input_Pen.get=function(e){return null==e&&(e=0),kha_SystemImpl.getPen(e)},kha_input_Pen.prototype={notify:function(e,t,a){this.notifyWindowed(0,e,t,a)},remove:function(e,t,a){this.removeWindowed(0,e,t,a)},notifyWindowed:function(e,t,a,r){if(null!=t){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=e;)this.windowDownListeners.push([]);this.windowDownListeners[e].push(t)}if(null!=a){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=e;)this.windowUpListeners.push([]);this.windowUpListeners[e].push(a)}if(null!=r){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=e;)this.windowMoveListeners.push([]);this.windowMoveListeners[e].push(r)}},removeWindowed:function(e,t,a,r){null!=t&&null!=this.windowDownListeners&&e<this.windowDownListeners.length&&HxOverrides.remove(this.windowDownListeners[e],t),null!=a&&null!=this.windowUpListeners&&e<this.windowUpListeners.length&&HxOverrides.remove(this.windowUpListeners[e],a),null!=r&&null!=this.windowMoveListeners&&e<this.windowMoveListeners.length&&HxOverrides.remove(this.windowMoveListeners[e],r)},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,sendDownEvent:function(e,t,a,r){if(null!=this.windowDownListeners)for(var i=0,s=this.windowDownListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendUpEvent:function(e,t,a,r){if(null!=this.windowUpListeners)for(var i=0,s=this.windowUpListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendMoveEvent:function(e,t,a,r){if(null!=this.windowMoveListeners)for(var i=0,s=this.windowMoveListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},__class__:kha_input_Pen};var kha_input_Surface=$hxClasses["kha.input.Surface"]=$hx_exports.kha.input.Surface=function(){this.touchStartListeners=[],this.touchEndListeners=[],this.moveListeners=[],kha_input_Surface.instance=this};kha_input_Surface.__name__=!0,kha_input_Surface.get=function(e){return null==e&&(e=0),0!=e?null:kha_input_Surface.instance},kha_input_Surface.prototype={notify:function(e,t,a){null!=e&&this.touchStartListeners.push(e),null!=t&&this.touchEndListeners.push(t),null!=a&&this.moveListeners.push(a)},remove:function(e,t,a){null!=e&&HxOverrides.remove(this.touchStartListeners,e),null!=t&&HxOverrides.remove(this.touchEndListeners,t),null!=a&&this.moveListeners.push(a)},touchStartListeners:null,touchEndListeners:null,moveListeners:null,sendTouchStartEvent:function(e,t,a){for(var r=0,i=this.touchStartListeners;r<i.length;){var s=i[r];++r,s(e,t,a)}},sendTouchEndEvent:function(e,t,a){for(var r=0,i=this.touchEndListeners;r<i.length;){var s=i[r];++r,s(e,t,a)}},sendMoveEvent:function(e,t,a){for(var r=0,i=this.moveListeners;r<i.length;){var s=i[r];++r,s(e,t,a)}},__class__:kha_input_Surface};var kha_internal_BytesBlob=$hxClasses["kha.internal.BytesBlob"]=function(e){this.bytes=e};kha_internal_BytesBlob.__name__=!0,kha_internal_BytesBlob.__interfaces__=[kha_Resource],kha_internal_BytesBlob.fromBytes=function(e){return new kha_internal_BytesBlob(e)},kha_internal_BytesBlob.alloc=function(e){return new kha_internal_BytesBlob(new haxe_io_Bytes(new ArrayBuffer(e)))},kha_internal_BytesBlob.readF32=function(e){var t=0==(-2147483648&e)?1:-1,a=e>>23&255,r=8388607&e;switch(a){case 0:return 0;case 255:return 0!=r?NaN:0<t?1/0:-1/0;default:return t*((r+8388608)/8388608)*Math.pow(2,a-127)}},kha_internal_BytesBlob.bit=function(e,t){if(1==(e>>>t&1)){return 0,!0}return 0,!1},kha_internal_BytesBlob.toText=function(e,t){for(var a="",r=0,i=t;r<i;){var s=r++;a+=String.fromCodePoint(e[s])}return a},kha_internal_BytesBlob.prototype={bytes:null,sub:function(e,t){return new kha_internal_BytesBlob(this.bytes.sub(e,t))},length:null,get_length:function(){return this.bytes.length},writeU8:function(e,t){this.bytes.b[e]=t},readU8:function(e){var t=this.bytes.b[e];return++e,t},readS8:function(e){var t=this.bytes.b[e];return++e,(0==(128&t)?1:-1)*(t&=127)},readU16BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1];return e+=2,256*t+a},readU16LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1];return e+=2,256*a+t},readU32LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3];return e+=4,t+256*a+256*r*256+256*i*256*256},readU32BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3];return e+=4,i+256*r+256*a*256+256*t*256*256},readS16BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1];e+=2;var r=0==(128&t)?1:-1;return t&=127,-1==r?256*t-32767+a:256*t+a},readS16LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=0==(128&a)?1:-1;return a&=127,e+=2,-1==r?256*a-32767+t:256*a+t},readS32LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3],s=0==(128&i)?1:-1;return i&=127,e+=4,-1==s?-2147483647+t+256*a+256*r*256+256*i*256*256:t+256*a+256*r*256+256*i*256*256},readS32BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3],s=0==(128&t)?1:-1;return t&=127,e+=4,-1==s?-2147483647+i+256*r+256*a*256+256*t*256*256:i+256*r+256*a*256+256*t*256*256},readF32LE:function(e){return kha_internal_BytesBlob.readF32(this.readS32LE(e))},readF32BE:function(e){return kha_internal_BytesBlob.readF32(this.readS32BE(e))},toString:function(){return this.bytes.toString()},readUtf8Char:function(e){if(e.value>=this.get_length())return-1;var t=this.readU8(e.value);++e.value;var a=0;if(kha_internal_BytesBlob.bit(t,7))if(kha_internal_BytesBlob.bit(t,7)&&kha_internal_BytesBlob.bit(t,6)&&!kha_internal_BytesBlob.bit(t,5)){var r=31&t,i=this.readU8(e.value);++e.value,a=r<<6|63&i}else kha_internal_BytesBlob.bit(t,7)&&kha_internal_BytesBlob.bit(t,6)&&kha_internal_BytesBlob.bit(t,5)&&!kha_internal_BytesBlob.bit(t,4)?e.value+=2:kha_internal_BytesBlob.bit(t,7)&&kha_internal_BytesBlob.bit(t,6)&&kha_internal_BytesBlob.bit(t,5)&&kha_internal_BytesBlob.bit(t,4)&&!kha_internal_BytesBlob.bit(t,3)&&(e.value+=3);else a=t;return a},readUtf8Block:function(e,t){var a=0;if(t.value>=this.get_length())return"";for(;a<2e3;){var r=this.readUtf8Char(t);if(r<0)break;e[a]=r,++a}return kha_internal_BytesBlob.toText(e,a)},readUtf8String:function(){var e=new Array(2e3),t="",a=0;3<=this.get_length()&&239==this.bytes.b[0]&&187==this.bytes.b[1]&&191==this.bytes.b[2]&&(a=3);for(var r={value:a};r.value<this.get_length();)t+=this.readUtf8Block(e,r);return t},toBytes:function(){return this.bytes},unload:function(){this.bytes=null},__class__:kha_internal_BytesBlob};var kha_krom_Graphics=$hxClasses["kha.krom.Graphics"]=function(e){this.renderTarget=e};kha_krom_Graphics.__name__=!0,kha_krom_Graphics.__interfaces__=[kha_graphics4_Graphics],kha_krom_Graphics.prototype={renderTarget:null,begin:function(e){Krom.begin(this.renderTarget,e)},beginFace:function(e){Krom.beginFace(this.renderTarget,e)},beginEye:function(e){},end:function(){Krom.end()},flush:function(){},vsynced:function(){return!0},refreshRate:function(){return 60},clear:function(e,t,a){var r=0;null!=e&&(r|=1),null!=t&&(r|=2),null!=a&&(r|=4),Krom.clear(r,null==e?0:e,t,a)},viewport:function(e,t,a,r){Krom.viewport(e,t,a,r)},setVertexBuffer:function(e){e.set(0)},setVertexBuffers:function(e){Krom.setVertexBuffers(e)},setIndexBuffer:function(e){e.set()},setCubeMap:function(e,t){null!=t&&(null!=t.texture_?Krom.setTexture(e,t.texture_):Krom.setRenderTarget(e,t.renderTarget_))},setCubeMapDepth:function(e,t){null!=t&&Krom.setTextureDepth(e,t.renderTarget_)},setTexture:function(e,t){null!=t&&(null!=t.texture_?Krom.setTexture(e,t.texture_):Krom.setRenderTarget(e,t.renderTarget_))},setTextureDepth:function(e,t){null!=t&&Krom.setTextureDepth(e,t.renderTarget_)},setTextureArray:function(e,t){},setVideoTexture:function(e,t){},setImageTexture:function(e,t){null!=t&&Krom.setImageTexture(e,t.texture_)},setTextureParameters:function(e,t,a,r,i,s){Krom.setTextureParameters(e,t,a,r,i,s)},setTexture3DParameters:function(e,t,a,r,i,s,n){Krom.setTexture3DParameters(e,t,a,r,i,s,n)},setTextureCompareMode:function(e,t){Krom.setTextureCompareMode(e,t)},setCubeMapCompareMode:function(e,t){Krom.setCubeMapCompareMode(e,t)},setPipeline:function(e){e.set()},setStencilReferenceValue:function(e){},setBool:function(e,t){Krom.setBool(e,t)},setInt:function(e,t){Krom.setInt(e,t)},setFloat:function(e,t){Krom.setFloat(e,t)},setFloat2:function(e,t,a){Krom.setFloat2(e,t,a)},setFloat3:function(e,t,a,r){Krom.setFloat3(e,t,a,r)},setFloat4:function(e,t,a,r,i){Krom.setFloat4(e,t,a,r,i)},setFloats:function(e,t){Krom.setFloats(e,t.buffer)},setVector2:function(e,t){Krom.setFloat2(e,t.x,t.y)},setVector3:function(e,t){Krom.setFloat3(e,t.x,t.y,t.z)},setVector4:function(e,t){Krom.setFloat4(e,t.x,t.y,t.z,t.w)},setMatrix:function(e,t){kha_krom_Graphics.mat[0]=t._00,kha_krom_Graphics.mat[1]=t._01,kha_krom_Graphics.mat[2]=t._02,kha_krom_Graphics.mat[3]=t._03,kha_krom_Graphics.mat[4]=t._10,kha_krom_Graphics.mat[5]=t._11,kha_krom_Graphics.mat[6]=t._12,kha_krom_Graphics.mat[7]=t._13,kha_krom_Graphics.mat[8]=t._20,kha_krom_Graphics.mat[9]=t._21,kha_krom_Graphics.mat[10]=t._22,kha_krom_Graphics.mat[11]=t._23,kha_krom_Graphics.mat[12]=t._30,kha_krom_Graphics.mat[13]=t._31,kha_krom_Graphics.mat[14]=t._32,kha_krom_Graphics.mat[15]=t._33,Krom.setMatrix(e,kha_krom_Graphics.mat.buffer)},setMatrix3:function(e,t){kha_krom_Graphics.mat[0]=t._00,kha_krom_Graphics.mat[1]=t._01,kha_krom_Graphics.mat[2]=t._02,kha_krom_Graphics.mat[3]=t._10,kha_krom_Graphics.mat[4]=t._11,kha_krom_Graphics.mat[5]=t._12,kha_krom_Graphics.mat[6]=t._20,kha_krom_Graphics.mat[7]=t._21,kha_krom_Graphics.mat[8]=t._22,Krom.setMatrix3(e,kha_krom_Graphics.mat.buffer)},drawIndexedVertices:function(e,t){null==t&&(t=-1),null==e&&(e=0),Krom.drawIndexedVertices(e,t)},drawIndexedVerticesInstanced:function(e,t,a){null==a&&(a=-1),null==t&&(t=0),Krom.drawIndexedVerticesInstanced(e,t,a)},instancedRenderingAvailable:function(){return!0},scissor:function(e,t,a,r){Krom.scissor(e,t,a,r)},disableScissor:function(){Krom.disableScissor()},renderTargetsInvertedY:function(){return Krom.renderTargetsInvertedY()},__class__:kha_krom_Graphics};var kha_krom_Sound=$hxClasses["kha.krom.Sound"]=function(e){kha_Sound.call(this);var t=e.length/4|0,a=new Float32Array(t);this.uncompressedData=a;for(var r=0,i=t;r<i;){var s=r++;this.uncompressedData[s]=e.getFloat(4*s)}this.compressedData=null};kha_krom_Sound.__name__=!0,kha_krom_Sound.__super__=kha_Sound,kha_krom_Sound.prototype=$extend(kha_Sound.prototype,{uncompress:function(e){e()},unload:function(){kha_Sound.prototype.unload.call(this)},__class__:kha_krom_Sound});var kha_math_FastMatrix3=$hxClasses["kha.math.FastMatrix3"]=function(e,t,a,r,i,s,n,o,h){this._00=e,this._10=t,this._20=a,this._01=r,this._11=i,this._21=s,this._02=n,this._12=o,this._22=h};kha_math_FastMatrix3.__name__=!0,kha_math_FastMatrix3.fromMatrix3=function(e){return new kha_math_FastMatrix3(e._00,e._10,e._20,e._01,e._11,e._21,e._02,e._12,e._22)},kha_math_FastMatrix3.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:kha_math_FastMatrix3};var kha_math_FastMatrix4=$hxClasses["kha.math.FastMatrix4"]=function(e,t,a,r,i,s,n,o,h,_,l,u,d,c,g,p){this._00=e,this._10=t,this._20=a,this._30=r,this._01=i,this._11=s,this._21=n,this._31=o,this._02=h,this._12=_,this._22=l,this._32=u,this._03=d,this._13=c,this._23=g,this._33=p};kha_math_FastMatrix4.__name__=!0,kha_math_FastMatrix4.fromMatrix4=function(e){return new kha_math_FastMatrix4(e._00,e._10,e._20,e._30,e._01,e._11,e._21,e._31,e._02,e._12,e._22,e._32,e._03,e._13,e._23,e._33)},kha_math_FastMatrix4.orthogonalProjection=function(e,t,a,r,i,s){return new kha_math_FastMatrix4(2/(t-e),0,0,-(t+e)/(t-e),0,2/(r-a),0,-(r+a)/(r-a),0,0,-2/(s-i),-(s+i)/(s-i),0,0,0,1)},kha_math_FastMatrix4.perspectiveProjection=function(e,t,a,r){var i=1/Math.tan(e/2);return new kha_math_FastMatrix4(i/t,0,0,0,0,i,0,0,0,0,(r+a)/(a-r),2*r*a/(a-r),0,0,-1,0)},kha_math_FastMatrix4.lookAt=function(e,t,a){var r=new kha_math_FastVector3(t.x-e.x,t.y-e.y,t.z-e.z);r.set_length(1);var i=r.y*a.z-r.z*a.y,s=r.z*a.x-r.x*a.z,n=r.x*a.y-r.y*a.x,o=new kha_math_FastVector3(i,s,n);o.set_length(1);var h=o.y*r.z-o.z*r.y,_=o.z*r.x-o.x*r.z,l=o.x*r.y-o.y*r.x;return new kha_math_FastMatrix4(o.x,o.y,o.z,-(o.x*e.x+o.y*e.y+o.z*e.z),h,_,l,-(h*e.x+_*e.y+l*e.z),-r.x,-r.y,-r.z,r.x*e.x+r.y*e.y+r.z*e.z,0,0,0,1)},kha_math_FastMatrix4.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:kha_math_FastMatrix4};var kha_math_FastVector2=$hxClasses["kha.math.FastVector2"]=function(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t};kha_math_FastVector2.__name__=!0,kha_math_FastVector2.fromVector2=function(e){return new kha_math_FastVector2(e.x,e.y)},kha_math_FastVector2.prototype={x:null,y:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,e},toString:function(){return"FastVector2("+this.x+", "+this.y+")"},__class__:kha_math_FastVector2};var kha_math_FastVector3=$hxClasses["kha.math.FastVector3"]=function(e,t,a){null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a};kha_math_FastVector3.__name__=!0,kha_math_FastVector3.fromVector3=function(e){return new kha_math_FastVector3(e.x,e.y,e.z)},kha_math_FastVector3.prototype={x:null,y:null,z:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,e},toString:function(){return"FastVector3("+this.x+", "+this.y+", "+this.z+")"},__class__:kha_math_FastVector3};var kha_math_FastVector4=$hxClasses["kha.math.FastVector4"]=function(e,t,a,r){null==r&&(r=1),null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a,this.w=r};kha_math_FastVector4.__name__=!0,kha_math_FastVector4.fromVector4=function(e){return new kha_math_FastVector4(e.x,e.y,e.z,e.w)},kha_math_FastVector4.prototype={x:null,y:null,z:null,w:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,this.w*=a,e},toString:function(){return"FastVector4("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},__class__:kha_math_FastVector4};var kha_math_Matrix3=$hxClasses["kha.math.Matrix3"]=function(e,t,a,r,i,s,n,o,h){this._00=e,this._10=t,this._20=a,this._01=r,this._11=i,this._21=s,this._02=n,this._12=o,this._22=h};kha_math_Matrix3.__name__=!0,kha_math_Matrix3.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:kha_math_Matrix3};var kha_math_Matrix4=$hxClasses["kha.math.Matrix4"]=function(e,t,a,r,i,s,n,o,h,_,l,u,d,c,g,p){this._00=e,this._10=t,this._20=a,this._30=r,this._01=i,this._11=s,this._21=n,this._31=o,this._02=h,this._12=_,this._22=l,this._32=u,this._03=d,this._13=c,this._23=g,this._33=p};kha_math_Matrix4.__name__=!0,kha_math_Matrix4.orthogonalProjection=function(e,t,a,r,i,s){return new kha_math_Matrix4(2/(t-e),0,0,-(t+e)/(t-e),0,2/(r-a),0,-(r+a)/(r-a),0,0,-2/(s-i),-(s+i)/(s-i),0,0,0,1)},kha_math_Matrix4.perspectiveProjection=function(e,t,a,r){var i=1/Math.tan(e/2);return new kha_math_Matrix4(i/t,0,0,0,0,i,0,0,0,0,(r+a)/(a-r),2*r*a/(a-r),0,0,-1,0)},kha_math_Matrix4.lookAt=function(e,t,a){var r=new kha_math_Vector3(t.x-e.x,t.y-e.y,t.z-e.z);r.set_length(1);var i=r.y*a.z-r.z*a.y,s=r.z*a.x-r.x*a.z,n=r.x*a.y-r.y*a.x,o=new kha_math_Vector3(i,s,n);o.set_length(1);var h=o.y*r.z-o.z*r.y,_=o.z*r.x-o.x*r.z,l=o.x*r.y-o.y*r.x;return new kha_math_Matrix4(o.x,o.y,o.z,-(o.x*e.x+o.y*e.y+o.z*e.z),h,_,l,-(h*e.x+_*e.y+l*e.z),-r.x,-r.y,-r.z,r.x*e.x+r.y*e.y+r.z*e.z,0,0,0,1)},kha_math_Matrix4.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:kha_math_Matrix4};var kha_math_Vector2=$hxClasses["kha.math.Vector2"]=function(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t};kha_math_Vector2.__name__=!0,kha_math_Vector2.prototype={x:null,y:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,e},__class__:kha_math_Vector2};var kha_math_Vector3=$hxClasses["kha.math.Vector3"]=function(e,t,a){null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a};kha_math_Vector3.__name__=!0,kha_math_Vector3.prototype={x:null,y:null,z:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,e},__class__:kha_math_Vector3};var kha_math_Vector4=$hxClasses["kha.math.Vector4"]=function(e,t,a,r){null==r&&(r=1),null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a,this.w=r};kha_math_Vector4.__name__=!0,kha_math_Vector4.prototype={x:null,y:null,z:null,w:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,this.w*=a,e},__class__:kha_math_Vector4};var kha_netsync_Client=$hxClasses["kha.netsync.Client"]=function(){};kha_netsync_Client.__name__=!0,kha_netsync_Client.prototype={get_id:null,id:null,send:null,receive:null,onClose:null,__class__:kha_netsync_Client};var kha_netsync_ControllerBuilder=$hxClasses["kha.netsync.ControllerBuilder"]=function(){};kha_netsync_ControllerBuilder.__name__=!0;var kha_netsync_Entity=$hxClasses["kha.netsync.Entity"]=function(){};kha_netsync_Entity.__name__=!0,kha_netsync_Entity.prototype={_id:null,_size:null,_send:null,_receive:null,__class__:kha_netsync_Entity};var kha_netsync_LocalClient=$hxClasses["kha.netsync.LocalClient"]=function(e){this.myId=e};kha_netsync_LocalClient.__name__=!0,kha_netsync_LocalClient.__interfaces__=[kha_netsync_Client],kha_netsync_LocalClient.prototype={myId:null,send:function(e,t){},receive:function(e){},onClose:function(e){},controllers:null,get_controllers:function(){return null},id:null,get_id:function(){return this.myId},__class__:kha_netsync_LocalClient};var kha_netsync_State=$hxClasses["kha.netsync.State"]=function(e,t){this.time=e,this.data=t};kha_netsync_State.__name__=!0,kha_netsync_State.prototype={time:null,data:null,__class__:kha_netsync_State};var kha_netsync_Session=$hxClasses["kha.netsync.Session"]=function(e,t,a){this.ping=1,this.currentPlayers=0,this.controllers=new haxe_ds_IntMap,this.entities=new haxe_ds_IntMap,(kha_netsync_Session.instance=this).maxPlayers=e,this.address=t,this.port=a};kha_netsync_Session.__name__=!0,kha_netsync_Session.the=function(){return kha_netsync_Session.instance},kha_netsync_Session.prototype={entities:null,controllers:null,maxPlayers:null,currentPlayers:null,ping:null,address:null,port:null,startCallback:null,refusedCallback:null,resetCallback:null,localClient:null,network:null,updateTaskId:null,pingTaskId:null,me:null,get_me:function(){return this.localClient},addEntity:function(e){var t=this.entities,a=e._id();t.h[a]=e},addController:function(e){haxe_Log.trace("Adding controller id "+e._id(),{fileName:"kha/netsync/Session.hx",lineNumber:88,className:"kha.netsync.Session",methodName:"addController"}),e._inputBufferIndex=0;var t=this.controllers,a=e._id();t.h[a]=e},sendControllerUpdate:function(e,t){if(this.controllers.h.hasOwnProperty(e)){if(this.controllers.h[e]._inputBuffer.length<this.controllers.h[e]._inputBufferIndex+4+t.length){var a=new haxe_io_Bytes(new ArrayBuffer(this.controllers.h[e]._inputBufferIndex+4+t.length));a.blit(0,this.controllers.h[e]._inputBuffer,0,this.controllers.h[e]._inputBufferIndex),this.controllers.h[e]._inputBuffer=a}this.controllers.h[e]._inputBuffer.setInt32(this.controllers.h[e]._inputBufferIndex,t.length),this.controllers.h[e]._inputBuffer.blit(this.controllers.h[e]._inputBufferIndex+4,t,0,t.length),this.controllers.h[e]._inputBufferIndex+=4+t.length}},sendPing:function(){var e=new haxe_io_Bytes(new ArrayBuffer(5));e.b[0]=4,e.setFloat(1,kha_Scheduler.realTime()),this.sendToServer(e)},sendPlayerUpdate:function(){},receive:function(e,t){switch(e.b[0]){case 0:var a=e.b[1];this.localClient=new kha_netsync_LocalClient(a),kha_Scheduler.resetTime(),this.startCallback();break;case 1:for(var r=e.getDouble(1),i=9,s=this.entities.iterator();s.hasNext();){var n=s.next();n._receive(i,e),i+=n._size()}kha_Scheduler.warp(r);break;case 3:switch(e.b[1]){case 0:break;case 1:this.executeRPC(e)}break;case 4:var o=e.getFloat(1);this.ping=kha_Scheduler.realTime()-o;break;case 5:this.refusedCallback();break;case 6:this.currentPlayers=e.getInt32(1)}},executeRPC:function(e){var t=[],a=e.getInt32(2),r=6,i=e.getUInt16(r);r+=2;for(var s="",n=0,o=i;n<o;){n++;var h=e.b[r];s+=String.fromCodePoint(h),++r}var _=e.getUInt16(r);r+=2;for(var l="",u=0,d=_;u<d;){u++;var c=e.b[r];l+=String.fromCodePoint(c),++r}for(;r<e.length;){var g=e.b[r];switch(++r,g){case 66:var p=1==e.b[r];++r,haxe_Log.trace("Bool: "+(null==p?"null":""+p),{fileName:"kha/netsync/Session.hx",lineNumber:295,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(p);break;case 70:var f=e.getDouble(r);r+=8,haxe_Log.trace("Float: "+f,{fileName:"kha/netsync/Session.hx",lineNumber:300,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(f);break;case 73:var m=e.getInt32(r);r+=4,haxe_Log.trace("Int: "+m,{fileName:"kha/netsync/Session.hx",lineNumber:305,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(m);break;case 83:var k=e.getUInt16(r);r+=2;for(var v="",S=0,b=k;S<b;){S++;var y=e.b[r];v+=String.fromCodePoint(y),++r}haxe_Log.trace("String: "+v,{fileName:"kha/netsync/Session.hx",lineNumber:315,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(v);break;default:haxe_Log.trace("Unknown argument type.",{fileName:"kha/netsync/Session.hx",lineNumber:318,className:"kha.netsync.Session",methodName:"executeRPC"})}}-1==a?Reflect.field($hxClasses[s],l+"_remotely").apply(null,t):Reflect.field(kha_netsync_SyncBuilder.objects[a],l+"_remotely").apply(kha_netsync_SyncBuilder.objects[a],t)},waitForStart:function(e,t,a,r,i){var s=this;this.startCallback=e,this.refusedCallback=t,this.resetCallback=i,this.network=new kha.netsync.Network(this.address,this.port,a,function(){r(),s.reset()}),this.network.listen(function(e){s.receive(e)}),this.updateTaskId=kha_Scheduler.addFrameTask($bind(this,this.update),0),this.ping=1,this.pingTaskId=kha_Scheduler.addTimeTask($bind(this,this.sendPing),0,1)},reset:function(){kha_Scheduler.removeFrameTask(this.updateTaskId),kha_Scheduler.removeTimeTask(this.pingTaskId),this.currentPlayers=0,this.ping=1,this.controllers=new haxe_ds_IntMap,this.entities=new haxe_ds_IntMap,this.resetCallback()},update:function(){for(var e=this.controllers.iterator();e.hasNext();){var t=e.next();if(0<t._inputBufferIndex){var a=new haxe_io_Bytes(new ArrayBuffer(22+t._inputBufferIndex));a.b[0]=2,a.setInt32(1,t._id()),a.setDouble(5,kha_Scheduler.time()),a.setInt32(13,kha_System.windowWidth(0)),a.setInt32(17,kha_System.windowHeight(0)),a.b[21]=0,a.blit(22,t._inputBuffer,0,t._inputBufferIndex),this.sendToServer(a),t._inputBufferIndex=0}}},sendToServer:function(e){this.network.send(e,!1)},__class__:kha_netsync_Session};var kha_netsync_SyncBuilder=$hxClasses["kha.netsync.SyncBuilder"]=function(){};kha_netsync_SyncBuilder.__name__=!0;var kha_simd_Float32x4=$hxClasses["kha.simd.Float32x4"]=function(e,t,a,r){this._0=e,this._1=t,this._2=a,this._3=r};kha_simd_Float32x4.__name__=!0,kha_simd_Float32x4.create=function(){return new kha_simd_Float32x4(0,0,0,0)},kha_simd_Float32x4.loadAllFast=function(e){return new kha_simd_Float32x4(e,e,e,e)},kha_simd_Float32x4.load=function(e,t,a,r){return new kha_simd_Float32x4(e,t,a,r)},kha_simd_Float32x4.loadFast=function(e,t,a,r){return new kha_simd_Float32x4(e,t,a,r)},kha_simd_Float32x4.get=function(e,t){var a=0;switch(t){case 0:a=e._0;break;case 1:a=e._1;break;case 2:a=e._2;break;case 3:a=e._3}return a},kha_simd_Float32x4.getFast=function(e,t){switch(t){case 0:return e._0;case 1:return e._1;case 2:return e._2;case 3:return e._3}return 0},kha_simd_Float32x4.abs=function(e){return new kha_simd_Float32x4(Math.abs(e._0),Math.abs(e._1),Math.abs(e._2),Math.abs(e._3))},kha_simd_Float32x4.add=function(e,t){return new kha_simd_Float32x4(e._0+t._0,e._1+t._1,e._2+t._2,e._3+t._3)},kha_simd_Float32x4.div=function(e,t){return new kha_simd_Float32x4(e._0/t._0,e._1/t._1,e._2/t._2,e._3/t._3)},kha_simd_Float32x4.mul=function(e,t){return new kha_simd_Float32x4(e._0*t._0,e._1*t._1,e._2*t._2,e._3*t._3)},kha_simd_Float32x4.neg=function(e){return new kha_simd_Float32x4(-e._0,-e._1,-e._2,-e._3)},kha_simd_Float32x4.reciprocalApproximation=function(e){return new kha_simd_Float32x4(0,0,0,0)},kha_simd_Float32x4.reciprocalSqrtApproximation=function(e){return new kha_simd_Float32x4(0,0,0,0)},kha_simd_Float32x4.sub=function(e,t){return new kha_simd_Float32x4(e._0-t._0,e._1-t._1,e._2-t._2,e._3-t._3)},kha_simd_Float32x4.sqrt=function(e){return new kha_simd_Float32x4(Math.sqrt(e._0),Math.sqrt(e._1),Math.sqrt(e._2),Math.sqrt(e._3))},kha_simd_Float32x4.prototype={_0:null,_1:null,_2:null,_3:null,__class__:kha_simd_Float32x4};var zui_Handle=$hxClasses["zui.Handle"]=function(e){this.changed=!1,this.dragY=0,this.dragX=0,this.dragEnabled=!1,this.dragging=!1,this.lastMaxY=0,this.lastMaxX=0,this.layout=0,this.scrollEnabled=!1,this.scrollOffset=0,this.scrolling=!1,this.redraws=2,this.texture=null,this.text="",this.value=0,this.color=-1,this.position=0,this.selected=!1,null!=e&&(null!=e.selected&&(this.selected=e.selected),null!=e.position&&(this.position=e.position),null!=e.value&&(this.value=e.value),null!=e.text&&(this.text=e.text),null!=e.color&&(this.color=e.color),null!=e.layout&&(this.layout=e.layout))};zui_Handle.__name__=!0,zui_Handle.prototype={selected:null,position:null,color:null,value:null,text:null,texture:null,redraws:null,scrolling:null,scrollOffset:null,scrollEnabled:null,layout:null,lastMaxX:null,lastMaxY:null,dragging:null,dragEnabled:null,dragX:null,dragY:null,changed:null,children:null,nest:function(e,t){for(null==this.children&&(this.children=[]);this.children.length<=e;)this.children.push(null);return null==this.children[e]&&(this.children[e]=new zui_Handle(t)),this.children[e]},__class__:zui_Handle};var zui_Canvas=$hxClasses["zui.Canvas"]=function(){};zui_Canvas.__name__=!0,zui_Canvas.draw=function(e,t,a){-1==zui_Canvas.screenW&&(zui_Canvas.screenW=kha_System.windowWidth(),zui_Canvas.screenH=kha_System.windowHeight()),zui_Canvas.events=[],(zui_Canvas._ui=e).begin(a),e.g=a;for(var r=0,i=t.elements;r<i.length;){var s=i[r];++r,null==s.parent&&zui_Canvas.drawElement(e,t,s)}return e.end(),zui_Canvas.events},zui_Canvas.drawElement=function(e,t,a,r,i){if(null==i&&(i=0),null==r&&(r=0),null!=a&&0!=a.visible){e._x=t.x+(a.x*zui_Canvas._ui.SCALE|0)+(r*zui_Canvas._ui.SCALE|0),e._y=t.y+(a.y*zui_Canvas._ui.SCALE|0)+(i*zui_Canvas._ui.SCALE|0),e._w=a.width*zui_Canvas._ui.SCALE|0;var s=t.width*zui_Canvas._ui.SCALE|0,n=t.height*zui_Canvas._ui.SCALE|0;switch(a.anchor){case 1:e._x-=(s-zui_Canvas.screenW)/2;break;case 2:e._x-=s-zui_Canvas.screenW;break;case 3:e._y-=(n-zui_Canvas.screenH)/2;break;case 4:e._x-=(s-zui_Canvas.screenW)/2,e._y-=(n-zui_Canvas.screenH)/2;break;case 5:e._x-=s-zui_Canvas.screenW,e._y-=(n-zui_Canvas.screenH)/2;break;case 6:e._y-=n-zui_Canvas.screenH;break;case 7:e._x-=(s-zui_Canvas.screenW)/2,e._y-=n-zui_Canvas.screenH;break;case 8:e._x-=s-zui_Canvas.screenW,e._y-=n-zui_Canvas.screenH}var o=null!=a.rotation&&0!=a.rotation;switch(o&&e.g.pushRotation(a.rotation,e._x+(a.width*zui_Canvas._ui.SCALE|0)/2,e._y+(a.height*zui_Canvas._ui.SCALE|0)/2),a.type){case 0:var h=e.ops.font,_=e.fontSize,l=e.t.TEXT_COL;null!=a.asset&&StringTools.endsWith(a.asset,".ttf")&&(e.ops.font=zui_Canvas.getAsset(t,a.asset)),e.fontSize=a.height*zui_Canvas._ui.SCALE|0,e.t.TEXT_COL=a.color,e.text(a.text),e.ops.font=h,e.fontSize=_,e.t.TEXT_COL=l;break;case 1:var u=zui_Canvas.getAsset(t,a.asset),d=null!=a.asset&&StringTools.endsWith(a.asset,".ttf");if(null!=u&&!d){e.imageScrollAlign=!1;var c=null!=a.color?a.color:-1;if(3==e.image(u,c,a.height*zui_Canvas._ui.SCALE|0)){var g=a.event;null!=g&&""!=g&&zui_Canvas.events.push(g)}e.imageScrollAlign=!0}break;case 2:var p=e.t.BUTTON_H;if(e.t.BUTTON_H=a.height*zui_Canvas._ui.SCALE|0,e.button(a.text)){var f=a.event;null!=f&&""!=f&&zui_Canvas.events.push(f)}e.t.BUTTON_H=p;break;case 3:break;case 6:e.check(zui_Canvas.h.nest(a.id),a.text);break;case 7:e.inlineRadio(zui_Canvas.h.nest(a.id),a.text.split(";"));break;case 8:e.combo(zui_Canvas.h.nest(a.id),a.text.split(";"));break;case 9:var m=e.g.get_color();e.g.set_color(a.color),e.g.fillRect(e._x,e._y,e._w,a.height*zui_Canvas._ui.SCALE|0),e.g.set_color(m);break;case 10:e.slider(zui_Canvas.h.nest(a.id),a.text,0,1,!0);break;case 11:e.textInput(zui_Canvas.h.nest(a.id),a.text)}if(null!=a.children)for(var k=0,v=a.children;k<v.length;){var S=v[k];++k,zui_Canvas.drawElement(e,t,zui_Canvas.elemById(t,S),a.x+r,a.y+i)}o&&e.g.popTransformation()}},zui_Canvas.getText=function(e,t){return t.text},zui_Canvas.getAsset=function(e,t){for(var a=0,r=e.assets;a<r.length;){var i=r[a];if(++a,i.name==t)return zui_Canvas.assetMap.h[i.id]}return null},zui_Canvas.getElementId=function(e){if(-1==zui_Canvas.elemId)for(var t=0,a=e.elements;t<a.length;){var r=a[t];++t,zui_Canvas.elemId<r.id&&(zui_Canvas.elemId=r.id)}return++zui_Canvas.elemId},zui_Canvas.getAssetId=function(e){if(-1==zui_Canvas.assetId)for(var t=0,a=e.assets;t<a.length;){var r=a[t];++t,zui_Canvas.assetId<r.id&&(zui_Canvas.assetId=r.id)}return++zui_Canvas.assetId},zui_Canvas.elemById=function(e,t){for(var a=0,r=e.elements;a<r.length;){var i=r[a];if(++a,i.id==t)return i}return null},zui_Canvas.scaled=function(e){return e*zui_Canvas._ui.SCALE|0};var zui_Ext=$hxClasses["zui.Ext"]=function(){};zui_Ext.__name__=!0,zui_Ext.floatInput=function(e,t,a,r){null==r&&(r=0),null==a&&(a=""),t.text=null==t.value?"null":""+t.value;var i=e.textInput(t,a,r);return t.value=parseFloat(i),t.value},zui_Ext.list=function(e,t,a,r){var i=0;null==r&&(r={});for(var s=null!=r.addCb?r.addCb:function(e){a.push(e)},n=null!=r.removeCb?r.removeCb:function(e){a.splice(e,1)},o=null!=r.getNameCb?r.getNameCb:function(e){return a[e]},h=null!=r.setNameCb?r.setNameCb:function(e,t){a[e]=t},_=null!=r.getLabelCb?r.getLabelCb:function(e){return""},l=r.itemDrawCb,u=null!=r.showRadio&&r.showRadio,d=null==r.editable||r.editable,c=null==r.showAdd||r.showAdd,g=null!=r.addLabel?r.addLabel:"Add",p=0;p<a.length;){u?(e.row([.12,.68,.2]),e.radio(t.nest(0),p,"")&&(i=p)):e.row([.8,.2]);var f=t.nest(p);f.text=o(p),d?h(p,e.textInput(f,_(p))):e.text(o(p)),e.button("X")?n(p):++p,null!=l&&l(f.nest(p),p-1)}return c&&e.button(g)&&s("untitled"),i},zui_Ext.panelList=function(e,t,a,r,i,s,n,o,h,_,l){null==l&&(l="Add"),null==_&&(_=!0),null==h&&(h=!0),null==r&&(r=function(e){a.push(e)}),null==i&&(i=function(e){a.splice(e,1)}),null==s&&(s=function(e){return a[e]}),null==n&&(n=function(e,t){a[e]=t});for(var u=0;u<a.length;){e.row([.12,.68,.2]);var d=e.panel(t.nest(u),"",0),c=t.nest(u);h?n(u,e.textInput(c,s(u))):e.text(s(u)),e.button("X")?i(u):++u,null!=o&&d&&o(c.nest(u),u-1)}_&&e.button(l)&&r("untitled")},zui_Ext.colorPicker=function(e,t,a){null==a&&(a=!1);var r=e.slider(t.nest(0,{value:.00392156862745098*((16711680&t.color)>>>16)}),"R",0,1,!0),i=e.slider(t.nest(1,{value:.00392156862745098*((65280&t.color)>>>8)}),"G",0,1,!0),s=e.slider(t.nest(2,{value:.00392156862745098*(255&t.color)}),"B",0,1,!0),n=.00392156862745098*(t.color>>>24);a&&(n=e.slider(t.nest(3,{value:n}),"A",0,1,!0));var o=kha__$Color_Color_$Impl_$.fromFloats(r,i,s,n);return e.text("",2,o),o},zui_Ext.initPath=function(e,t){e.text="Windows"==t?"C:\\Users":"/"},zui_Ext.fileBrowser=function(e,t,a){null==a&&(a=!1);var r="/",i="ls ",s=kha_System.get_systemId();"Windows"==s&&(i="dir /b ",a&&(i+="/ad "),r="\\",t.text=StringTools.replace(t.text,"\\\\","\\"),t.text=StringTools.replace(t.text,"\r","")),""==t.text&&zui_Ext.initPath(t,s);var n="Windows"==s?Krom.savePath():"/tmp";n+=r+"dir.txt",t.text!=zui_Ext.lastPath&&Krom.sysCommand(i+'"'+t.text+'" > "'+n+'"'),zui_Ext.lastPath=t.text;var o=haxe_io_Bytes.ofData(Krom.loadBlob(n)).toString().split("\n"),h=t.text.indexOf("/"),_=t.text.indexOf("\\");(-1<h&&t.text.length-1>h||-1<_&&t.text.length-1>_)&&e.button("..",0)&&(t.text=t.text.substring(0,t.text.lastIndexOf(r)),2==t.text.length&&":"==t.text.charAt(1)&&(t.text+=r));for(var l=0;l<o.length;){var u=o[l];++l,""!=u&&"."!=u.charAt(0)&&(e.button(u,0)&&(t.text.charAt(t.text.length-1)!=r&&(t.text+=r),t.text+=u))}return t.text},zui_Ext.colorWheel=function(e,t,a,r,i){null==i&&(i=!1),null==a&&(a=!1),null==r&&(r=e._w),zui_Ext.rgbToHsv(.00392156862745098*((16711680&t.color)>>>16),.00392156862745098*((65280&t.color)>>>8),.00392156862745098*(255&t.color),zui_Ext.ar);var s=zui_Ext.ar[0],n=zui_Ext.ar[1],o=zui_Ext.ar[2],h=.00392156862745098*(t.color>>>24),_=e._x,l=e._y;null!=e.currentWindow&&e.currentWindow.scrollEnabled||(r-=e.t.SCROLL_W*e.SCALE|0,_+=(e.t.SCROLL_W*e.SCALE|0)/2),e.image(e.ops.color_wheel,kha__$Color_Color_$Impl_$.fromFloats(o,o,o));var u=_+r/2,d=l+(e._y-l)/2,c=.7*r,g=c/2,p=u,f=d+n*g,m=s*(2*Math.PI),k=Math.cos(m)*(p-u)-Math.sin(m)*(f-d)+u,v=Math.sin(m)*(p-u)+Math.cos(m)*(f-d)+d;p=k,f=v,e.g.set_color(-16777216),e.g.fillRect(p-3,f-3,6,6),e.g.set_color(-1),e.g.fillRect(p-2,f-2,4,4),i&&(a?e.row([.3333333333333333,.3333333333333333,.3333333333333333]):e.row([.5,.5]));var S=t.nest(0);S.value=Math.round(100*o)/100,o=e.slider(S,"Value",0,1,!0),a&&(h=e.slider(t.nest(1,{value:Math.round(100*h)/100}),"Alpha",0,1,!0));var b=u+e._windowX,y=d+e._windowY;if(e.inputStarted&&e.getInputInRect(b-g,y-g,c,c)&&(zui_Ext.wheelSelectedHande=t),e.inputReleased&&(zui_Ext.wheelSelectedHande=null),e.inputDown&&zui_Ext.wheelSelectedHande==t){var x=b-e.inputX,w=y-e.inputY;n=Math.min(Math.sqrt(x*x+w*w),g)/g;var I=Math.atan2(e.inputX-b,e.inputY-y);I<0&&(I=Math.PI+(Math.PI-Math.abs(I))),s=(I=2*Math.PI-I)/(2*Math.PI),t.changed=e.changed=!0}return zui_Ext.hsvToRgb(s,n,o,zui_Ext.ar),t.color=kha__$Color_Color_$Impl_$.fromFloats(zui_Ext.ar[0],zui_Ext.ar[1],zui_Ext.ar[2],h),e.text("",2,t.color),t.color},zui_Ext.dist=function(e,t,a,r){var i=e-a,s=t-r;return Math.sqrt(i*i+s*s)},zui_Ext.fract=function(e){return e-(0|e)},zui_Ext.mix=function(e,t,a){return e*(1-a)+t*a},zui_Ext.clamp=function(e,t,a){return Math.min(Math.max(e,t),a)},zui_Ext.step=function(e,t){return t<e?0:1},zui_Ext.hsvToRgb=function(e,t,a,r){var i=e+1,s=Math.abs(6*(i-(0|i))-3),n=e+.6666666666666666,o=Math.abs(6*(n-(0|n))-3),h=e+.3333333333333333,_=Math.abs(6*(h-(0|h))-3);r[0]=a*(1-t+Math.min(Math.max(s-1,0),1)*t),r[1]=a*(1-t+Math.min(Math.max(o-1,0),1)*t),r[2]=a*(1-t+Math.min(Math.max(_-1,0),1)*t)},zui_Ext.rgbToHsv=function(e,t,a,r){var i=t<a?0:1,s=a*(1-i)+t*i,n=t<a?0:1,o=t*(1-n)+a*n,h=t<a?0:1,_=t<a?0:1,l=e<s?0:1,u=s*(1-l)+e*l,d=e<s?0:1,c=o*(1-d)+o*d,g=e<s?0:1,p=(.6666666666666666*(1-_)+-.3333333333333333*_)*(1-g)+(-1*(1-h)+0*h)*g,f=e<s?0:1,m=e*(1-f)+s*f,k=u-Math.min(m,c);r[0]=Math.abs(p+(m-c)/(6*k+1e-10)),r[1]=k/(u+1e-10),r[2]=u};var zui_Id=$hxClasses["zui.Id"]=function(){};zui_Id.__name__=!0;var zui_Themes=$hxClasses["zui.Themes"]=function(){};zui_Themes.__name__=!0;var zui_Zui=$hxClasses["zui.Zui"]=function(e){this.restoreY=-1,this.restoreX=-1,this.checkSelectImage=null,this.elementsBaked=!1,this.tabScroll=0,this.tabHandle=null,this.tabNames=null,this.tooltipTime=0,this.tooltipShown=!1,this.tooltipY=0,this.tooltipX=0,this.tooltipInvertY=!1,this.tooltipImg=null,this.tooltipText="",this.comboToSubmit=0,this.submitComboHandle=null,this.comboSelectedWindow=null,this.comboSelectedHandle=null,this.tabPressedHandle=null,this.tabPressed=!1,this.textToSubmit="",this.submitTextHandle=null,this.textSelectedHandle=null,this.windowHeader=0,this.scrollingHandle=null,this.windowEnded=!0,this.imageScrollAlign=!0,this.scrollAlign=0,this.curRatio=-1,this.highlightAnchor=0,this.cursorY=0,this.cursorX=0,this.key=null,this.isAltDown=!1,this.isCtrlDown=!1,this.isShiftDown=!1,this.isKeyDown=!1,this.inputWheelDelta=0,this.inputEnabled=!0,this.inputRegistered=!1,this.scrollEnabled=!0,this.imageInvertY=!1,this.alwaysRedraw=!1,this.changed=!1,this.isReleased=!1,this.isHovered=!1,this.isPushed=!1,this.isStarted=!1,this.isTyping=!1,this.isScrolling=!1,null==e.theme&&(e.theme=zui_Themes.dark),this.t=e.theme,null==e.khaWindowId&&(e.khaWindowId=0),null==e.scaleFactor&&(e.scaleFactor=1),null==e.scaleTexture&&(e.scaleTexture=1),null==e.autoNotifyInput&&(e.autoNotifyInput=!0),this.ops=e,this.setScale(e.scaleFactor),e.autoNotifyInput&&this.registerInput(),this.bakeElements()};function $getIterator(e){return e instanceof Array?HxOverrides.iter(e):e.iterator()}zui_Zui.__name__=!0,zui_Zui.prototype={isScrolling:null,isTyping:null,isStarted:null,isPushed:null,isHovered:null,isReleased:null,changed:null,alwaysRedraw:null,imageInvertY:null,scrollEnabled:null,inputRegistered:null,inputEnabled:null,inputX:null,inputY:null,inputInitialX:null,inputInitialY:null,inputDX:null,inputDY:null,inputWheelDelta:null,inputStarted:null,inputStartedR:null,inputReleased:null,inputReleasedR:null,inputDown:null,inputDownR:null,isKeyDown:null,isShiftDown:null,isCtrlDown:null,isAltDown:null,key:null,char:null,cursorX:null,cursorY:null,highlightAnchor:null,ratios:null,curRatio:null,xBeforeSplit:null,wBeforeSplit:null,g:null,globalG:null,t:null,SCALE:null,ops:null,fontSize:null,fontOffsetY:null,arrowOffsetX:null,arrowOffsetY:null,titleOffsetX:null,buttonOffsetY:null,checkOffsetX:null,checkOffsetY:null,checkSelectOffsetX:null,checkSelectOffsetY:null,radioOffsetX:null,radioOffsetY:null,radioSelectOffsetX:null,radioSelectOffsetY:null,scrollAlign:null,imageScrollAlign:null,_x:null,_y:null,_w:null,_h:null,_windowX:null,_windowY:null,_windowW:null,_windowH:null,currentWindow:null,windowEnded:null,scrollingHandle:null,windowHeader:null,textSelectedHandle:null,textSelectedCurrentText:null,submitTextHandle:null,textToSubmit:null,tabPressed:null,tabPressedHandle:null,comboSelectedHandle:null,comboSelectedWindow:null,comboSelectedAlign:null,comboSelectedTexts:null,comboSelectedLabel:null,comboSelectedX:null,comboSelectedY:null,comboSelectedW:null,submitComboHandle:null,comboToSubmit:null,tooltipText:null,tooltipImg:null,tooltipInvertY:null,tooltipX:null,tooltipY:null,tooltipShown:null,tooltipTime:null,tabNames:null,tabHandle:null,tabScroll:null,elementsBaked:null,checkSelectImage:null,setScale:function(e){this.ops.scaleFactor=e,this.SCALE=this.ops.scaleFactor*this.ops.scaleTexture,this.fontSize=this.t.FONT_SIZE*this.ops.scaleFactor|0;var t=this.ops.font.height(this.fontSize);this.fontOffsetY=(this.t.ELEMENT_H*this.SCALE-t)/2,this.arrowOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.ARROW_SIZE*this.SCALE)/2,this.arrowOffsetX=this.arrowOffsetY,this.titleOffsetX=(2*this.arrowOffsetX+this.t.ARROW_SIZE*this.SCALE)/this.SCALE,this.buttonOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.BUTTON_H*this.SCALE)/2,this.checkOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.CHECK_SIZE*this.SCALE)/2,this.checkOffsetX=this.checkOffsetY,this.checkSelectOffsetY=(this.t.CHECK_SIZE*this.SCALE-this.t.CHECK_SELECT_SIZE*this.SCALE)/2,this.checkSelectOffsetX=this.checkSelectOffsetY,this.radioOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.CHECK_SIZE*this.SCALE)/2,this.radioOffsetX=this.radioOffsetY,this.radioSelectOffsetY=(this.t.CHECK_SIZE*this.SCALE-this.t.CHECK_SELECT_SIZE*this.SCALE)/2,this.radioSelectOffsetX=this.radioSelectOffsetY,this.elementsBaked=!1},bakeElements:function(){null!=this.checkSelectImage&&this.checkSelectImage.unload(),this.checkSelectImage=kha_Image.createRenderTarget(this.t.CHECK_SELECT_SIZE*this.SCALE|0,this.t.CHECK_SELECT_SIZE*this.SCALE|0,null,0,1,this.ops.khaWindowId);var e=this.checkSelectImage.get_g2();e.begin(!0,0),e.set_color(this.t.ACCENT_SELECT_COL),e.drawLine(0,0,this.checkSelectImage.get_width(),this.checkSelectImage.get_height(),2*this.SCALE),e.drawLine(this.checkSelectImage.get_width(),0,0,this.checkSelectImage.get_height(),2*this.SCALE),e.end(),this.elementsBaked=!0},remove:function(){this.ops.autoNotifyInput&&this.unregisterInput()},registerInput:function(){kha_input_Mouse.get().notifyWindowed(this.ops.khaWindowId,$bind(this,this.onMouseDown),$bind(this,this.onMouseUp),$bind(this,this.onMouseMove),$bind(this,this.onMouseWheel)),kha_input_Keyboard.get().notify($bind(this,this.onKeyDown),$bind(this,this.onKeyUp),$bind(this,this.onKeyPress)),kha_System.notifyOnCutCopyPaste($bind(this,this.onCut),$bind(this,this.onCopy),$bind(this,this.onPaste)),this.inputRegistered=!0},unregisterInput:function(){kha_input_Mouse.get().removeWindowed(this.ops.khaWindowId,$bind(this,this.onMouseDown),$bind(this,this.onMouseUp),$bind(this,this.onMouseMove),$bind(this,this.onMouseWheel)),kha_input_Keyboard.get().remove($bind(this,this.onKeyDown),$bind(this,this.onKeyUp),$bind(this,this.onKeyPress)),this.endInput(),this.inputX=this.inputY=0,this.inputRegistered=!1},begin:function(e){this.elementsBaked||this.bakeElements(),this.changed=!1,this.globalG=e,this._x=0,this._y=0,this._w=0,this._h=0},end:function(e){null==e&&(e=!0),this.windowEnded||this.endWindow(),null!=this.comboSelectedHandle&&this.drawCombo(),e&&this.endInput(),null!=this.tabPressedHandle&&(this.tabPressedHandle=null)},endInput:function(){this.isKeyDown=!1,this.inputStarted=!1,this.inputStartedR=!1,this.inputReleased=!1,this.inputReleasedR=!1,this.inputDX=0,this.inputDY=0,this.inputWheelDelta=0,zui_Zui.textToPaste="",zui_Zui.isCut=!1},beginLayout:function(e,t,a,r){this.elementsBaked||this.bakeElements(),this.currentWindow=null,this.g=e,this._windowX=0,this._windowY=0,this._windowW=r,this._x=t,this._y=a,this._w=r},endLayout:function(e){null==e&&(e=!0),e&&this.endInput()},inputChanged:function(){return!!(0!=this.inputDX||0!=this.inputDY||0!=this.inputWheelDelta||this.inputStarted||this.inputStartedR||this.inputReleased||this.inputReleasedR||this.inputDown||this.inputDownR)||this.isKeyDown},windowDirty:function(e,t,a,r,i){var s=t+e.dragX,n=a+e.dragY,o=this.getInputInRect(s,n,r,i)&&this.inputChanged();return!!(this.alwaysRedraw||this.isScrolling||this.isTyping)||o},window:function(e,t,a,r,i,s){return null==s&&(s=!1),null!=e.texture&&r==e.texture.get_width()&&i==e.texture.get_height()||this.resize(e,r,i,this.ops.khaWindowId),this.windowEnded||this.endWindow(),this.windowEnded=!1,this.g=e.texture.get_g2(),this.currentWindow=e,this._windowX=t+e.dragX,this._windowY=a+e.dragY,this._windowW=r,this._windowH=i,this.windowHeader=0,this.windowDirty(e,t,a,r,i)&&(e.redraws=2),0!=e.redraws&&(this._x=0,this._y=e.scrollOffset,1==e.layout&&(r=this.t.ELEMENT_W*this.SCALE|0),this._w=e.scrollEnabled?r-(this.t.SCROLL_W*this.SCALE|0):r,this._h=i,this.tooltipText="",this.tooltipImg=null,this.tabNames=null,this.t.FILL_WINDOW_BG?this.g.begin(!0,this.t.WINDOW_BG_COL):(this.g.begin(!0,0),this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._x,this._y-e.scrollOffset,e.lastMaxX,e.lastMaxY)),(e.dragEnabled=s)&&(this.inputStarted&&this.getInputInRect(this._windowX,this._windowY,this._windowW,15)?e.dragging=!0:this.inputReleased&&(e.dragging=!1),e.dragging&&(e.redraws=2,e.dragX+=0|this.inputDX,e.dragY+=0|this.inputDY),this._y+=15,this.windowHeader+=15),!0)},endWindow:function(e){null==e&&(e=!0);var t=this.currentWindow;if(null!=t){if(0<t.redraws||this.isScrolling||this.isTyping){null!=this.tabNames&&this.drawTabs(),t.dragEnabled&&(this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(0,0,this._windowW,15));var a=this._y-t.scrollOffset;if(a<this._windowH||1==t.layout||!this.scrollEnabled)t.scrollEnabled=!1,t.scrollOffset=0;else{t.scrollEnabled=!0,this.tabScroll<0&&(t.scrollOffset=this.tabScroll,this.tabScroll=0);var r=a-this._windowH,i=-t.scrollOffset/r,s=this._windowH*Math.abs(this._windowH/a);s=Math.max(s,this.t.ELEMENT_H*this.SCALE);var n=this._windowH-s,o=r/n,h=n*i;this.inputStarted&&this.getInputInRect(this._windowX+this._windowW-(this.t.SCROLL_W*this.SCALE|0),h+this._windowY,this.t.SCROLL_W*this.SCALE|0,s)&&(t.scrolling=!0,this.scrollingHandle=t,this.isScrolling=!0),t.scrolling?this.scroll(this.inputDY*o,a):0!=this.inputWheelDelta&&this.scroll(this.inputWheelDelta*(this.t.ELEMENT_H*this.SCALE),a),0<t.scrollOffset?t.scrollOffset=0:a+t.scrollOffset<this._windowH&&(t.scrollOffset=this._windowH-a),this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._windowW-(this.t.SCROLL_W*this.SCALE|0),this._windowY,this.t.SCROLL_W*this.SCALE|0,this._windowH),this.g.set_color(this.t.ACCENT_COL),this.g.fillRect(this._windowW-(this.t.SCROLL_W*this.SCALE|0)-this.scrollAlign,h,this.t.SCROLL_W*this.SCALE|0,s)}t.lastMaxX=this._x,t.lastMaxY=this._y,0==t.layout?t.lastMaxX+=this._windowW:t.lastMaxY+=this._windowH,t.redraws--,this.g.end()}this.windowEnded=!0,e&&this.globalG.begin(!1),this.globalG.set_color(this.t.WINDOW_TINT_COL),this.globalG.drawScaledImage(t.texture,this._windowX,this._windowY,t.texture.get_width()/this.ops.scaleTexture,t.texture.get_height()/this.ops.scaleTexture),""!=this.tooltipText||null!=this.tooltipImg?(this.tooltipShown||(this.tooltipShown=!0,this.tooltipX=this.inputX,this.tooltipTime=kha_Scheduler.time()),kha_Scheduler.time()-this.tooltipTime>this.t.TOOLTIP_DELAY&&(""!=this.tooltipText?this.drawTooltip():this.drawTooltipImage())):this.tooltipShown=!1,e&&this.globalG.end()}},scroll:function(e,t){this.currentWindow.scrollOffset-=e},restoreX:null,restoreY:null,tab:function(e,t){null==this.tabNames&&(this.tabNames=[],this.tabHandle=e,this.windowHeader+=this.buttonOffsetY+this.t.BUTTON_H*this.SCALE,this.restoreX=this.inputX,this.restoreY=this.inputY,this.getInputInRect(this._windowX,this._windowY,this._windowW,this.windowHeader)&&(this.inputX=this.inputY=-1)),this.tabNames.push(t);var a=e.position==this.tabNames.length-1;return a&&this.endElement(),a},drawTabs:function(){if(this.inputX=this.restoreX,this.inputY=this.restoreY,null!=this.currentWindow){var e=0,t=this._y;this._y=this.currentWindow.dragEnabled?15:0,this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(0,this._y,this._windowW,this.buttonOffsetY+this.t.BUTTON_H*this.SCALE),this.g.set_color(this.t.ACCENT_COL),this.g.fillRect(this.buttonOffsetY,this._y+this.buttonOffsetY+this.t.BUTTON_H*this.SCALE,this._windowW-2*this.buttonOffsetY,this.t.LINE_STRENGTH*this.SCALE);for(var a=0,r=this.tabNames.length;a<r;){var i=a++;this._x=e,this._w=this.ops.font.width(this.fontSize,this.tabNames[i])+2*this.buttonOffsetY+14*this.SCALE|0;var s=this.getReleased(),n=this.getPushed(),o=this.getHover();if(s){var h=this.tabHandle.nest(this.tabHandle.position);h.scrollOffset=this.currentWindow.scrollOffset,h=this.tabHandle.nest(i),this.tabScroll=h.scrollOffset,this.tabHandle.position=i,this.currentWindow.redraws=3}var _=this.tabHandle.position==i;this.g.set_color(n?this.t.ACCENT_HOVER_COL:o?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL),e+=this._w+5;var l=this.g,u=this._x+this.buttonOffsetY,d=this._y+this.buttonOffsetY,c=this._w,g=this.t.BUTTON_H*this.SCALE,p=0;0==p&&(p=this.t.LINE_STRENGTH*this.SCALE),_?l.drawRect(u,d,c,g,p):l.fillRect(u,d,c,g),this.g.set_color(this.t.BUTTON_TEXT_COL),this.drawString(this.g,this.tabNames[i],this.t.TEXT_OFFSET,0,0),_&&(this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._x+this.buttonOffsetY+1,this._y+this.buttonOffsetY+this.t.BUTTON_H*this.SCALE,this._w-1,this.t.LINE_STRENGTH*this.SCALE))}this._x=0,this._y=t,this._w=0|(this.currentWindow.scrollEnabled?this._windowW-(this.t.SCROLL_W*this.SCALE|0):this._windowW)}},panel:function(e,t,a,r){return null==r&&(r=!1),null==a&&(a=0),this.isVisible(this.t.ELEMENT_H*this.SCALE)&&(this.getReleased()&&(e.selected=!e.selected),0<a&&(this.g.set_color(this.t.PANEL_BG_COL),this.g.fillRect(this._x,this._y,this._w,this.t.ELEMENT_H*this.SCALE)),r?this.drawTree(e.selected):this.drawArrow(e.selected),this.g.set_color(this.t.PANEL_TEXT_COL),this.g.set_opacity(1),this.drawString(this.g,t,this.titleOffsetX,0)),this.endElement(),e.selected},image:function(e,t,a){null==t&&(t=-1);var r=e.get_width()*this.SCALE,i=e.get_height()*this.SCALE,s=Math.min(r,this._w),n=this._x;if(this.imageScrollAlign&&(s=Math.min(r,this._w-2*this.buttonOffsetY),n+=this.buttonOffsetY,!(null!=this.currentWindow&&this.currentWindow.scrollEnabled))){var o=-1==this.curRatio?1:this.ratios[this.curRatio];s-=(this.t.SCROLL_W*this.SCALE|0)*o,n+=(this.t.SCROLL_W*this.SCALE|0)*o/2}var h=null==a?s/r:a/i;if(null==a?a=i*h:s=r*h,!this.isVisible(a))return this.endElement(a),0;var _=this.getStarted(a),l=this.getPushed(a),u=this.getReleased(a);this.getHover();this.g.set_color(t);var d=a;return this.imageInvertY?this.g.drawScaledImage(e,n,this._y+d,s,-d):this.g.drawScaledImage(e,n,this._y,s,d),this.endElement(a),_?1:u?3:l?2:0},text:function(e,t,a){null==a&&(a=0),null==t&&(t=0),this.isVisible(this.t.ELEMENT_H*this.SCALE)&&(this.getReleased(),0!=a&&(this.g.set_color(a),this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,e,this.t.TEXT_OFFSET,0,t)),this.endElement()},startTextEdit:function(e){this.isTyping=!0,this.submitTextHandle=this.textSelectedHandle,this.textToSubmit=this.textSelectedCurrentText,this.textSelectedHandle=e,this.textSelectedCurrentText=e.text,this.tabPressed=!1,this.tabPressedHandle=e,this.cursorX=e.text.length,this.cursorY=0,this.highlightAnchor=0,null!=kha_input_Keyboard.get()&&kha_input_Keyboard.get().show()},submitTextEdit:function(){this.submitTextHandle.text=this.textToSubmit,this.submitTextHandle.changed=this.changed=!0,this.submitTextHandle=null,this.textToSubmit="",this.textSelectedCurrentText=""},updateTextEdit:function(e){null==e&&(e=0);var t=this.textSelectedCurrentText;this.isKeyDown&&(37==this.key?0<this.cursorX&&this.cursorX--:39==this.key?this.cursorX<t.length&&this.cursorX++:8==this.key?0<this.cursorX&&this.highlightAnchor==this.cursorX?(t=HxOverrides.substr(t,0,this.cursorX-1)+HxOverrides.substr(t,this.cursorX,t.length),this.cursorX--):this.highlightAnchor<this.cursorX?(t=HxOverrides.substr(t,0,this.highlightAnchor)+HxOverrides.substr(t,this.cursorX,t.length),this.cursorX=this.highlightAnchor):t=HxOverrides.substr(t,0,this.cursorX)+HxOverrides.substr(t,this.highlightAnchor,t.length):46==this.key?this.highlightAnchor==this.cursorX?t=HxOverrides.substr(t,0,this.cursorX)+HxOverrides.substr(t,this.cursorX+1,null):this.highlightAnchor<this.cursorX?(t=HxOverrides.substr(t,0,this.highlightAnchor)+HxOverrides.substr(t,this.cursorX,t.length),this.cursorX=this.highlightAnchor):t=HxOverrides.substr(t,0,this.cursorX)+HxOverrides.substr(t,this.highlightAnchor,t.length):13==this.key?this.deselectText():27==this.key?(this.textSelectedCurrentText=this.textSelectedHandle.text,this.deselectText()):9==this.key?(this.tabPressed=!0,this.deselectText(),this.key=null):36==this.key?this.cursorX=0:35==this.key?this.cursorX=t.length:16!=this.key&&20!=this.key&&17!=this.key&&18!=this.key&&null!=this.char&&""!=this.char&&32<=HxOverrides.cca(this.char,0)&&127!=HxOverrides.cca(this.char,0)&&(t=HxOverrides.substr(t,0,this.highlightAnchor)+this.char+HxOverrides.substr(t,this.cursorX,null),this.cursorX++),this.isShiftDown&&(37==this.key||39==this.key)||this.isCtrlDown||(this.highlightAnchor=this.cursorX));""!=zui_Zui.textToPaste&&(t=HxOverrides.substr(t,0,this.highlightAnchor)+zui_Zui.textToPaste+HxOverrides.substr(t,this.cursorX,null),this.cursorX+=zui_Zui.textToPaste.length,this.highlightAnchor=this.cursorX,zui_Zui.textToPaste=""),this.highlightAnchor==this.cursorX?zui_Zui.textToCopy=t:this.highlightAnchor<this.cursorX?zui_Zui.textToCopy=t.substring(this.highlightAnchor,this.cursorX):zui_Zui.textToCopy=t.substring(this.cursorX,this.highlightAnchor),zui_Zui.isCut&&(this.highlightAnchor==this.cursorX?t="":this.highlightAnchor<this.cursorX?(t=HxOverrides.substr(t,0,this.highlightAnchor)+HxOverrides.substr(t,this.cursorX,t.length),this.cursorX=this.highlightAnchor):t=HxOverrides.substr(t,0,this.cursorX)+HxOverrides.substr(t,this.highlightAnchor,t.length));var a=this.t.TEXT_OFFSET,r=this.t.ELEMENT_H*this.SCALE,i=r-3*this.buttonOffsetY;if(this.highlightAnchor!=this.cursorX){var s=this.cursorX,n=this.highlightAnchor;this.highlightAnchor<this.cursorX&&(s=this.highlightAnchor,n=this.cursorX);var o=HxOverrides.substr(t,s,n-s),h=this.g.get_font().width(this.g.get_fontSize(),o),_=this.g.get_font().width(this.g.get_fontSize(),HxOverrides.substr(t,0,s)),l=0==e?this._x+_+a:this._x+this._w-h-a;2==e&&(l-=this.g.get_font().width(this.g.get_fontSize(),HxOverrides.substr(t,n,t.length))),this.g.fillRect(l,this._y+this.cursorY*r+1.5*this.buttonOffsetY,h*this.SCALE,i)}if(kha_Scheduler.time()%(2*this.t.FLASH_SPEED)<this.t.FLASH_SPEED){this.g.set_color(this.t.TEXT_COL);var u=0==e?HxOverrides.substr(t,0,this.cursorX):t.substring(this.cursorX,t.length),d=this.g.get_font().width(this.g.get_fontSize(),u),c=0==e?this._x+d+a:this._x+this._w-d-a;this.g.fillRect(c,this._y+this.cursorY*r+1.5*this.buttonOffsetY,this.SCALE,i)}this.textSelectedCurrentText=t},textInput:function(e,t,a){if(null==a&&(a=0),null==t&&(t=""),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.text;var r=this.getHover();this.g.set_color(r?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var i=this.g,s=this._x+this.buttonOffsetY,n=this._y+this.buttonOffsetY,o=this._w-2*this.buttonOffsetY,h=this.t.BUTTON_H*this.SCALE,_=0;0==_&&(_=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?i.fillRect(s,n,o,h):i.drawRect(s,n,o,h,_);var l=this.getReleased()||this.tabPressed;if(this.textSelectedHandle!=e&&l&&this.startTextEdit(e),this.textSelectedHandle==e&&this.updateTextEdit(a),this.submitTextHandle==e?this.submitTextEdit():e.changed=!1,""!=t){this.g.set_color(this.t.LABEL_COL);var u=2==a?0:2,d=0==u?7:0;this.drawString(this.g,t,d,0,u)}return this.g.set_color(this.t.TEXT_COL),this.textSelectedHandle!=e?this.drawString(this.g,e.text,null,0,a):this.drawString(this.g,this.textSelectedCurrentText,null,0,a),this.endElement(),e.text},deselectText:function(){this.submitTextHandle=this.textSelectedHandle,this.textToSubmit=this.textSelectedCurrentText,this.textSelectedHandle=null,this.isTyping=!1,null!=this.currentWindow&&(this.currentWindow.redraws=2),null!=kha_input_Keyboard.get()&&kha_input_Keyboard.get().hide(),this.highlightAnchor=this.cursorX},button:function(e,t){if(null==t&&(t=1),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),!1;var a=this.getReleased(),r=this.getPushed(),i=this.getHover();this.g.set_color(r?this.t.BUTTON_PRESSED_COL:i?this.t.BUTTON_HOVER_COL:this.t.BUTTON_COL);var s=this.g,n=this._x+this.buttonOffsetY,o=this._y+this.buttonOffsetY,h=this._w-2*this.buttonOffsetY,_=this.t.BUTTON_H*this.SCALE,l=0;return 0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_BUTTON_BG?s.fillRect(n,o,h,_):s.drawRect(n,o,h,_,l),this.g.set_color(this.t.BUTTON_TEXT_COL),this.drawString(this.g,e,this.t.TEXT_OFFSET,0,t),this.endElement(),a},check:function(e,t){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.selected;this.getReleased()?(e.selected=!e.selected,e.changed=this.changed=!0):e.changed=!1;var a=this.getHover();return this.drawCheck(e.selected,a),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,t,this.titleOffsetX,0,0),this.endElement(),e.selected},radio:function(e,t,a){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position==t;this.getReleased()?(e.position=t,e.changed=this.changed=!0):e.changed=!1;var r=this.getHover();return this.drawRadio(e.position==t,r),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,a,this.titleOffsetX,0),this.endElement(),e.position==t},inlineRadio:function(e,t){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position;this.getReleased()?(++e.position>=t.length&&(e.position=0),e.changed=this.changed=!0):e.changed=!1;var a=this.getHover();return this.drawInlineRadio(t[e.position],a),this.endElement(),e.position},combo:function(e,t,a,r,i){if(null==i&&(i=0),null==r&&(r=!1),null==a&&(a=""),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position;if(this.getReleased()&&null==this.comboSelectedHandle&&(this.inputEnabled=!1,this.comboSelectedHandle=e,this.comboSelectedWindow=this.currentWindow,this.comboSelectedAlign=i,this.comboSelectedTexts=t,this.comboSelectedLabel=a,this.comboSelectedX=this._x+this._windowX|0,this.comboSelectedY=this._y+this._windowY+this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE|0,this.comboSelectedW=0|this._w),e==this.submitComboHandle?(e.position=this.comboToSubmit,this.submitComboHandle=null,e.changed=this.changed=!0):e.changed=!1,this.getHover()){this.g.set_color(this.t.ACCENT_HOVER_COL);var s=this.g,n=this._x+this.buttonOffsetY,o=this._y+this.buttonOffsetY,h=this._w-2*this.buttonOffsetY,_=this.t.BUTTON_H*this.SCALE,l=0;0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?s.fillRect(n,o,h,_):s.drawRect(n,o,h,_,l)}else{this.g.set_color(this.t.ACCENT_COL);var u=this.g,d=this._x+this.buttonOffsetY,c=this._y+this.buttonOffsetY,g=this._w-2*this.buttonOffsetY,p=this.t.BUTTON_H*this.SCALE,f=0;0==f&&(f=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?u.fillRect(d,c,g,p):u.drawRect(d,c,g,p,f)}var m=this._x+this._w-this.arrowOffsetX-8,k=this._y+this.arrowOffsetY+3;return this.g.fillTriangle(m,k,m+this.t.ARROW_SIZE*this.SCALE,k,m+this.t.ARROW_SIZE*this.SCALE/2,k+this.t.ARROW_SIZE*this.SCALE/2),this.g.set_color(this.t.TEXT_COL),r&&""!=a&&(0==i&&(this._x-=15),this.drawString(this.g,a,null,0,0==i?2:0),0==i&&(this._x+=15)),2==i&&(this._x-=15),this.drawString(this.g,t[e.position],null,0,i),2==i&&(this._x+=15),this.endElement(),e.position},slider:function(e,t,a,r,i,s,n,o,h){if(null==h&&(h=!0),null==o&&(o=2),null==n&&(n=!0),null==s&&(s=100),null==i&&(i=!1),null==r&&(r=1),null==a&&(a=0),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.value;if(this.getStarted()&&(e.scrolling=!0,this.scrollingHandle=e,this.isScrolling=!0),e.changed=!1,e.scrolling){var _=r-a,l=this._x+this._windowX+this.buttonOffsetY,u=_/(this._w-2*this.buttonOffsetY),d=a+(this.inputX-l)*u;e.value=Math.round(d*s)/s,e.value<a?e.value=a:e.value>r&&(e.value=r),e.changed=this.changed=!0}var c=this.getHover();this.drawSlider(e.value,a,r,i,c),(this.getReleased()||this.tabPressed)&&h&&(e.text=e.value+"",this.startTextEdit(e));var g=0==o?2:0;return this.textSelectedHandle==e&&this.updateTextEdit(g),this.submitTextHandle==e&&(this.submitTextEdit(),e.value=parseFloat(e.text)),this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,t,null,0,o),n&&(this.g.set_color(this.t.TEXT_COL),this.textSelectedHandle!=e?this.drawString(this.g,e.value+"",null,0,g):this.drawString(this.g,this.textSelectedCurrentText,null,0,g)),this.endElement(),e.value},separator:function(e,t){null==t&&(t=!0),null==e&&(e=4),this.isVisible(this.t.ELEMENT_H*this.SCALE)&&t&&(this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(this._x,this._y,this._w,e*this.SCALE)),this._y+=e*this.SCALE},tooltip:function(e){this.tooltipText=e,this.tooltipY=this._y+this._windowY},tooltipImage:function(e){this.tooltipImg=e,this.tooltipInvertY=this.imageInvertY,this.tooltipY=this._y+this._windowY},drawArrow:function(e){var t=this._x+this.arrowOffsetX,a=this._y+this.arrowOffsetY;this.g.set_color(this.t.ARROW_COL),e?this.g.fillTriangle(t,a,t+this.t.ARROW_SIZE*this.SCALE,a,t+this.t.ARROW_SIZE*this.SCALE/2,a+this.t.ARROW_SIZE*this.SCALE):this.g.fillTriangle(t,a,t,a+this.t.ARROW_SIZE*this.SCALE,t+this.t.ARROW_SIZE*this.SCALE,a+this.t.ARROW_SIZE*this.SCALE/2)},drawTree:function(e){var t=this._x+this.arrowOffsetX+1,a=this._y+this.arrowOffsetY+1;this.g.set_color(this.t.ARROW_COL),e?this.g.fillRect(t,a+3.5-1,7,7/8):(this.g.fillRect(t,a+3.5-1,7,7/8),this.g.fillRect(t+3.5-1,a,7/8,7))},drawCheck:function(e,t){var a=this._x+this.checkOffsetX,r=this._y+this.checkOffsetY;this.g.set_color(t?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var i=this.g,s=this.t.CHECK_SIZE*this.SCALE,n=this.t.CHECK_SIZE*this.SCALE,o=0;0==o&&(o=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?i.fillRect(a,r,s,n):i.drawRect(a,r,s,n,o),e&&(this.g.set_color(-1),this.g.drawImage(this.checkSelectImage,a+this.checkSelectOffsetX,r+this.checkSelectOffsetY))},drawRadio:function(e,t){var a=this._x+this.radioOffsetX,r=this._y+this.radioOffsetY;this.g.set_color(t?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var i=this.g,s=this.t.CHECK_SIZE*this.SCALE,n=this.t.CHECK_SIZE*this.SCALE,o=0;0==o&&(o=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?i.fillRect(a,r,s,n):i.drawRect(a,r,s,n,o),e&&(this.g.set_color(this.t.ACCENT_SELECT_COL),this.g.fillRect(a+this.radioSelectOffsetX,r+this.radioSelectOffsetY,this.t.CHECK_SELECT_SIZE*this.SCALE,this.t.CHECK_SELECT_SIZE*this.SCALE))},drawInlineRadio:function(e,t){t?(this.g.set_color(this.t.ACCENT_HOVER_COL),this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)):(this.g.set_color(this.t.ACCENT_COL),this.g.drawRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,e,this.titleOffsetX,0,1)},drawSlider:function(e,t,a,r,i){var s=this._x+this.buttonOffsetY,n=this._y+this.buttonOffsetY,o=this._w-2*this.buttonOffsetY;this.g.set_color(i?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var h=this.g,_=this.t.BUTTON_H*this.SCALE,l=0;0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?h.fillRect(s,n,o,_):h.drawRect(s,n,o,_,l),this.g.set_color(i?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var u=(e-t)/(a-t),d=8*this.SCALE,c=r?s:s+(o-d)*u,g=r?o*u:d;g=Math.min(g,o),this.g.fillRect(c,n,g,this.t.BUTTON_H*this.SCALE)},drawCombo:function(){var e=this.g;this.globalG.set_color(-14540254);var t=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE;this.globalG.begin(!1),this.globalG.fillRect(this.comboSelectedX,this.comboSelectedY,this.comboSelectedW,(this.comboSelectedTexts.length+1)*t),this.beginLayout(this.globalG,this.comboSelectedX,this.comboSelectedY,this.comboSelectedW),this.inputEnabled=!0;for(var a=0,r=this.comboSelectedTexts.length;a<r;){var i=a++;if(this.button(this.comboSelectedTexts[i],this.comboSelectedAlign)){this.comboToSubmit=i,this.submitComboHandle=this.comboSelectedHandle,null!=this.comboSelectedWindow&&(this.comboSelectedWindow.redraws=2);break}}this.text(this.comboSelectedLabel),this.inputReleased&&!zui_Zui.comboFirst?(this.comboSelectedHandle=null,zui_Zui.comboFirst=!0):zui_Zui.comboFirst=!1,this.inputEnabled=null==this.comboSelectedHandle,this.endLayout(!1),this.globalG.end(),this.g=e},drawTooltip:function(){this.globalG.set_color(this.t.TEXT_COL);for(var e=this.tooltipText.split("\n"),t=0,a=0;a<e.length;){var r=e[a];++a;var i=this.ops.font.width(this.fontSize,r);t<i&&(t=i)}this.tooltipX=Math.min(this.tooltipX,kha_System.windowWidth()-t-20),this.globalG.fillRect(this.tooltipX,this.tooltipY,t+20,this.t.ELEMENT_H*this.SCALE*e.length*.6),this.globalG.set_font(this.ops.font),this.globalG.set_fontSize(this.fontSize),this.globalG.set_color(this.t.ACCENT_COL);for(var s=0,n=e.length;s<n;){var o=s++;this.globalG.drawString(e[o],this.tooltipX+5,this.tooltipY+o*this.fontSize)}},drawTooltipImage:function(){this.tooltipX=Math.min(this.tooltipX,kha_System.windowWidth()-this.tooltipImg.get_width()-20),this.globalG.set_color(-16777216),this.globalG.fillRect(this.tooltipX,this.tooltipY,this.tooltipImg.get_width(),this.tooltipImg.get_height()),this.globalG.set_color(-1),this.tooltipInvertY?this.globalG.drawScaledImage(this.tooltipImg,this.tooltipX,this.tooltipY+this.tooltipImg.get_height(),this.tooltipImg.get_width(),-this.tooltipImg.get_height()):this.globalG.drawImage(this.tooltipImg,this.tooltipX,this.tooltipY)},drawString:function(e,t,a,r,i){null==i&&(i=0),null==r&&(r=0);var s=this._w/(this.fontSize/2|0)|0;t.length>s&&(t=t.substring(0,s)+".."),null==a&&(a=this.t.TEXT_OFFSET),a*=this.SCALE,e.set_font(this.ops.font),e.set_fontSize(this.fontSize),1==i?a=this._w/2-this.ops.font.width(this.fontSize,t)/2:2==i&&(a=this._w-this.ops.font.width(this.fontSize,t)-this.t.TEXT_OFFSET),e.drawString(t,this._x+a,this._y+this.fontOffsetY+r)},endElement:function(e){null!=this.currentWindow?0==this.currentWindow.layout?-1==this.curRatio||null!=this.ratios&&this.curRatio==this.ratios.length-1?(null==e&&(e=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE),this._y+=e,null!=this.ratios&&this.curRatio==this.ratios.length-1&&(this.curRatio=-1,this.ratios=null,this._x=this.xBeforeSplit,this._w=this.wBeforeSplit)):(this.curRatio++,this._x+=this._w,this._w=this.wBeforeSplit*this.ratios[this.curRatio]|0):this._x+=this._w+this.t.ELEMENT_OFFSET*this.SCALE:this._y+=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE},row:function(e){this.ratios=e,this.curRatio=0,this.xBeforeSplit=this._x,this.wBeforeSplit=this._w,this._w=this._w*e[this.curRatio]|0},indent:function(){this._x+=this.t.TAB_W*this.SCALE|0,this._w-=this.t.TAB_W*this.SCALE|0},unindent:function(){this._x-=this.t.TAB_W*this.SCALE|0,this._w+=this.t.TAB_W*this.SCALE|0},fill:function(e,t,a,r,i){this.g.set_color(i),this.g.fillRect(this._x+e*this.SCALE,this._y+t*this.SCALE,a*this.SCALE,r*this.SCALE),this.g.set_color(-1)},drawRect:function(e,t,a,r,i,s,n){null==n&&(n=0),0==n&&(n=this.t.LINE_STRENGTH*this.SCALE),t?e.fillRect(a,r,i,s):e.drawRect(a,r,i,s,n)},isVisible:function(e){return null==this.currentWindow||0<this._y+e&&this._y<this.currentWindow.texture.get_height()},getReleased:function(e){return null==e&&(e=-1),this.isReleased=this.inputEnabled&&this.inputReleased&&this.getHover(e)&&this.getInitialHover(e),this.isReleased},getPushed:function(e){return null==e&&(e=-1),this.isPushed=this.inputEnabled&&this.inputDown&&this.getHover(e)&&this.getInitialHover(e),this.isPushed},getStarted:function(e){return null==e&&(e=-1),this.isStarted=this.inputEnabled&&this.inputStarted&&this.getHover(e),this.isStarted},getInitialHover:function(e){return null==e&&(e=-1),-1==e&&(e=this.t.ELEMENT_H*this.SCALE),!!(this.inputEnabled&&this.inputInitialX>=this._windowX+this._x&&this.inputInitialX<this._windowX+this._x+this._w&&this.inputInitialY>=this._windowY+this._y)&&this.inputInitialY<this._windowY+this._y+e},getHover:function(e){return null==e&&(e=-1),-1==e&&(e=this.t.ELEMENT_H*this.SCALE),this.isHovered=this.inputEnabled&&this.inputX>=this._windowX+this._x&&this.inputX<this._windowX+this._x+this._w&&this.inputY>=this._windowY+this._y&&this.inputY<this._windowY+this._y+e,this.isHovered},getInputInRect:function(e,t,a,r,i){return null==i&&(i=1),!!(this.inputEnabled&&this.inputX>=e*i&&this.inputX<(e+a)*i&&this.inputY>=t*i)&&this.inputY<(t+r)*i},onMouseDown:function(e,t,a){0==e?this.inputStarted=!0:this.inputStartedR=!0,0==e?this.inputDown=!0:this.inputDownR=!0;var r=t*this.ops.scaleTexture|0,i=a*this.ops.scaleTexture|0;this.setInputPosition(r,i),this.inputInitialX=r,this.inputInitialY=i},onMouseUp:function(e,t,a){0==e?this.isScrolling?(this.isScrolling=!1,null!=this.scrollingHandle&&(this.scrollingHandle.scrolling=!1),t==this.inputInitialX&&a==this.inputInitialY&&(this.inputReleased=!0)):this.inputReleased=!0:1==e&&(this.inputReleasedR=!0),0==e?this.inputDown=!1:this.inputDownR=!1,this.setInputPosition(t*this.ops.scaleTexture|0,a*this.ops.scaleTexture|0),this.deselectText()},onMouseMove:function(e,t,a,r){this.setInputPosition(e*this.ops.scaleTexture|0,t*this.ops.scaleTexture|0)},onMouseWheel:function(e){this.inputWheelDelta=e},setInputPosition:function(e,t){this.inputDX+=e-this.inputX,this.inputDY+=t-this.inputY,this.inputX=e,this.inputY=t},onKeyDown:function(e){switch(this.key=e,this.isKeyDown=!0,e){case 16:this.isShiftDown=!0;break;case 17:this.isCtrlDown=!0;break;case 18:this.isAltDown=!0;break;case 32:this.char=" "}},onKeyUp:function(e){switch(e){case 16:this.isShiftDown=!1;break;case 17:this.isCtrlDown=!1;break;case 18:this.isAltDown=!1}},onKeyPress:function(e){this.char=e,this.isKeyDown=!0},onCut:function(){return zui_Zui.isCut=!0,this.onCopy()},onCopy:function(){return zui_Zui.textToCopy},onPaste:function(e){zui_Zui.textToPaste=e},ELEMENT_W:function(){return this.t.ELEMENT_W*this.SCALE},ELEMENT_H:function(){return this.t.ELEMENT_H*this.SCALE},ELEMENT_OFFSET:function(){return this.t.ELEMENT_OFFSET*this.SCALE},ARROW_SIZE:function(){return this.t.ARROW_SIZE*this.SCALE},BUTTON_H:function(){return this.t.BUTTON_H*this.SCALE},CHECK_SIZE:function(){return this.t.CHECK_SIZE*this.SCALE},CHECK_SELECT_SIZE:function(){return this.t.CHECK_SELECT_SIZE*this.SCALE},SCROLL_W:function(){return this.t.SCROLL_W*this.SCALE|0},TEXT_OFFSET:function(){return this.t.TEXT_OFFSET},TAB_W:function(){return this.t.TAB_W*this.SCALE|0},LINE_STRENGTH:function(){return this.t.LINE_STRENGTH*this.SCALE},resize:function(e,t,a,r){null==r&&(r=0),e.redraws=2,null!=e.texture&&e.texture.unload(),e.texture=kha_Image.createRenderTarget(t,a,0,0,1,r),e.texture.get_g2().set_imageScaleQuality(kha_graphics2_ImageScaleQuality.High)},__class__:zui_Zui};var $fid=0;function $bind(e,t){return null==t?null:(null==t.__id__&&(t.__id__=$fid++),null==e.hx__closures__?e.hx__closures__={}:a=e.hx__closures__[t.__id__],null==a&&(a=t.bind(e),e.hx__closures__[t.__id__]=a),a);var a}$hxClasses.Math=Math,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),String.prototype.__class__=$hxClasses.String=String,String.__name__=!0,$hxClasses.Array=Array,Array.__name__=!0,Date.prototype.__class__=$hxClasses.Date=Date,Date.__name__="Date";var Int={},Dynamic={},Float=Number,Bool=Boolean,Class={},Enum={};haxe_ds_ObjectMap.count=0;var __map_reserved={};Object.defineProperty(js__$Boot_HaxeError.prototype,"message",{get:function(){return String(this.val)}}),null==ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=js_html__$ArrayBuffer_ArrayBufferCompat.sliceImpl),Elements.defaultWindowW=240,Elements.windowW=Elements.defaultWindowW,Elements.coffX=70,Elements.coffY=50,Elements.modalW=625,Elements.modalH=545,Elements.modalHeaderH=66,Elements.modalRectW=625,Elements.modalRectH=545,Elements.path="/",Main.cwd="",haxe_Unserializer.DEFAULT_RESOLVER=new haxe__$Unserializer_DefaultResolver,haxe_Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",haxe_io_FPHelper.helper=new DataView(new ArrayBuffer(8)),js_Boot.__toStr={}.toString,kha_Assets.images=new kha__$Assets_ImageList,kha_Assets.sounds=new kha__$Assets_SoundList,kha_Assets.blobs=new kha__$Assets_BlobList,kha_Assets.fonts=new kha__$Assets_FontList,kha_Assets.videos=new kha__$Assets_VideoList,kha__$Color_Color_$Impl_$.Black=-16777216,kha__$Color_Color_$Impl_$.White=-1,kha__$Color_Color_$Impl_$.Red=-65536,kha__$Color_Color_$Impl_$.Blue=-16776961,kha__$Color_Color_$Impl_$.Green=-16711936,kha__$Color_Color_$Impl_$.Magenta=-65281,kha__$Color_Color_$Impl_$.Yellow=-256,kha__$Color_Color_$Impl_$.Cyan=-16711681,kha__$Color_Color_$Impl_$.Purple=-8388480,kha__$Color_Color_$Impl_$.Pink=-16181,kha__$Color_Color_$Impl_$.Orange=-23296,kha__$Color_Color_$Impl_$.Transparent=0,kha__$Color_Color_$Impl_$.invMaxChannelValue=.00392156862745098,kha_Display.displays=[],kha_FontStyle.Default=new kha_FontStyle(!1,!1,!1),kha_Scheduler.timeWarpSaveTime=10,kha_Scheduler.DIF_COUNT=3,kha_Scheduler.maxframetime=.5,kha_Scheduler.startTime=0,kha_Shaders.painter_colored_fragData0="s274:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgpvdXQgdmVjNCBGcmFnQ29sb3I7CmluIHZlYzQgZnJhZ21lbnRDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIEZyYWdDb2xvciA9IGZyYWdtZW50Q29sb3I7Cn0KCg",kha_Shaders.painter_image_fragData0="s506:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgppbiB2ZWMyIHRleENvb3JkOwppbiB2ZWM0IGNvbG9yOwpvdXQgdmVjNCBGcmFnQ29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZSh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgRnJhZ0NvbG9yID0gdGV4Y29sb3I7Cn0KCg",kha_Shaders.painter_colored_vertData0="s439:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWM0IGZyYWdtZW50Q29sb3I7CmluIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgZnJhZ21lbnRDb2xvciA9IHZlcnRleENvbG9yOwp9Cgo",kha_Shaders.painter_image_vertData0="s508:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHRleFBvc2l0aW9uOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK",kha_Shaders.painter_text_fragData0="s402:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgpvdXQgdmVjNCBGcmFnQ29sb3I7CmluIHZlYzQgZnJhZ21lbnRDb2xvcjsKaW4gdmVjMiB0ZXhDb29yZDsKCnZvaWQgbWFpbigpCnsKICAgIEZyYWdDb2xvciA9IHZlYzQoZnJhZ21lbnRDb2xvci54eXosIHRleHR1cmUodGV4LCB0ZXhDb29yZCkueCAqIGZyYWdtZW50Q29sb3Iudyk7Cn0KCg",kha_Shaders.painter_text_vertData0="s530:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBmcmFnbWVudENvbG9yOwppbiB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBmcmFnbWVudENvbG9yID0gdmVydGV4Q29sb3I7Cn0KCg",kha_Shaders.painter_video_fragData0="s506:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgppbiB2ZWMyIHRleENvb3JkOwppbiB2ZWM0IGNvbG9yOwpvdXQgdmVjNCBGcmFnQ29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZSh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgRnJhZ0NvbG9yID0gdGV4Y29sb3I7Cn0KCg",kha_Shaders.painter_video_vertData0="s508:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHRleFBvc2l0aW9uOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK",kha_System.renderListeners=[],kha_System.foregroundListeners=[],kha_System.resumeListeners=[],kha_System.pauseListeners=[],kha_System.backgroundListeners=[],kha_System.shutdownListeners=[],kha_System.dropFilesListeners=[],kha_SystemImpl.maxGamepads=4,kha_SystemImpl.mouseLockListeners=[],kha_Window.windows=[],kha__$WindowOptions_WindowFeatures_$Impl_$.None=0,kha__$WindowOptions_WindowFeatures_$Impl_$.FeatureResizable=1,kha__$WindowOptions_WindowFeatures_$Impl_$.FeatureMinimizable=2,kha__$WindowOptions_WindowFeatures_$Impl_$.FeatureMaximizable=4,kha__$WindowOptions_WindowFeatures_$Impl_$.FeatureBorderless=8,kha__$WindowOptions_WindowFeatures_$Impl_$.FeatureOnTop=16,kha_audio2_Audio1.channelCount=16,kha_audio2_ogg_tools_Crc32.POLY=79764919,kha_audio2_ogg_vorbis_VorbisDecodeState.INVALID_BITS=-1,kha_audio2_ogg_vorbis_VorbisTools.EOP=-1,kha_audio2_ogg_vorbis_VorbisTools.M__PI=3.141592653589793,kha_audio2_ogg_vorbis_VorbisTools.DIVTAB_NUMER=32,kha_audio2_ogg_vorbis_VorbisTools.DIVTAB_DENOM=64,kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE=[1.0649863e-7,1.1341951e-7,1.2079015e-7,1.2863978e-7,1.3699951e-7,1.4590251e-7,1.5538408e-7,1.6548181e-7,1.7623575e-7,1.8768855e-7,1.9988561e-7,2.128753e-7,2.2670913e-7,2.4144197e-7,2.5713223e-7,2.7384213e-7,2.9163793e-7,3.1059021e-7,3.3077411e-7,3.5226968e-7,3.7516214e-7,3.9954229e-7,4.255068e-7,4.5315863e-7,4.8260743e-7,5.1396998e-7,5.4737065e-7,5.8294187e-7,6.2082472e-7,6.6116941e-7,7.0413592e-7,7.4989464e-7,7.9862701e-7,8.505263e-7,9.0579828e-7,9.6466216e-7,10273513e-13,10941144e-13,11652161e-13,12409384e-13,13215816e-13,14074654e-13,14989305e-13,15963394e-13,17000785e-13,18105592e-13,19282195e-13,20535261e-13,21869758e-13,23290978e-13,24804557e-13,26416497e-13,2813319e-12,29961443e-13,31908506e-13,33982101e-13,36190449e-13,38542308e-13,41047004e-13,4371447e-12,46555282e-13,49580707e-13,5280274e-12,5623416e-12,59888572e-13,63780469e-13,67925283e-13,72339451e-13,77040476e-13,82047e-10,87378876e-13,93057248e-13,99104632e-13,10554501e-12,11240392e-12,11970856e-12,12748789e-12,13577278e-12,14459606e-12,15399272e-12,16400004e-12,17465768e-12,18600792e-12,19809576e-12,21096914e-12,22467911e-12,23928002e-12,25482978e-12,27139006e-12,28902651e-12,30780908e-12,32781225e-12,34911534e-12,37180282e-12,39596466e-12,42169667e-12,4491009e-11,47828601e-12,50936773e-12,54246931e-12,57772202e-12,61526565e-12,65524908e-12,69783085e-12,74317983e-12,79147585e-12,8429104e-11,89768747e-12,95602426e-12,.00010181521,.00010843174,.00011547824,.00012298267,.00013097477,.00013948625,.00014855085,.00015820453,.00016848555,.00017943469,.00019109536,.00020351382,.00021673929,.00023082423,.00024582449,.00026179955,.00027881276,.00029693158,.00031622787,.00033677814,.00035866388,.00038197188,.00040679456,.00043323036,.00046138411,.00049136745,.00052329927,.00055730621,.00059352311,.00063209358,.00067317058,716917e-9,.0007635063,.00081312324,.00086596457,.00092223983,.00098217216,.0010459992,.0011139742,.0011863665,.0012634633,.0013455702,.0014330129,.0015261382,.0016253153,.0017309374,.0018434235,.0019632195,.0020908006,.0022266726,.0023713743,.0025254795,.0026895994,.0028643847,.0030505286,.0032487691,.0034598925,.0036847358,.0039241906,.0041792066,.004450795,.0047400328,.0050480668,.0053761186,.0057254891,.0060975636,.0064938176,.0069158225,.0073652516,.0078438871,.0083536271,.0088964928,.009474637,.010090352,.01074608,.011444421,.012188144,.012980198,.013823725,.014722068,.015678791,.016697687,.017782797,.018938423,.020169149,.021479854,.022875735,.02436233,.025945531,.027631618,.029427276,.031339626,.033376252,.035545228,.037855157,.040315199,.042935108,.045725273,.048696758,.051861348,.055231591,.05882085,.062643361,.066714279,.071049749,.075666962,.080584227,.085821044,.091398179,.097337747,.1036633,.11039993,.11757434,.12521498,.13335215,.14201813,.15124727,.16107617,.1715438,.18269168,.19456402,.20720788,.22067342,.23501402,.25028656,.26655159,.28387361,.30232132,.32196786,.34289114,.36517414,.38890521,.41417847,.44109412,.4697589,.50028648,.53279791,.56742212,.6042964,.64356699,.68538959,.72993007,.77736504,.8278826,.88168307,.9389798,1],kha_audio2_ogg_vorbis_data_Codebook.NO_CODE=255,kha_audio2_ogg_vorbis_data_Codebook.delay=0,kha_audio2_ogg_vorbis_data_Header.PACKET_ID=1,kha_audio2_ogg_vorbis_data_Header.PACKET_COMMENT=3,kha_audio2_ogg_vorbis_data_Header.PACKET_SETUP=5,kha_audio2_ogg_vorbis_data_PageFlag.CONTINUED_PACKET=1,kha_audio2_ogg_vorbis_data_PageFlag.FIRST_PAGE=2,kha_audio2_ogg_vorbis_data_PageFlag.LAST_PAGE=4,kha_audio2_ogg_vorbis_data_Setting.MAX_CHANNELS=16,kha_audio2_ogg_vorbis_data_Setting.PUSHDATA_CRC_COUNT=4,kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_LENGTH=10,kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_TABLE_SIZE=1024,kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_TABLE_MASK=1023,kha_graphics2_Graphics.fontGlyphs=function(e){for(var t=[],a=32;a<256;){var r=a++;t.push(r)}return t}(),kha_graphics2_truetype_StbTruetype.STBTT_vmove=1,kha_graphics2_truetype_StbTruetype.STBTT_vline=2,kha_graphics2_truetype_StbTruetype.STBTT_vcurve=3,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_DONTCARE=0,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_BOLD=1,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_ITALIC=2,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_UNDERSCORE=4,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_NONE=8,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_UNICODE=0,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_MAC=1,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_ISO=2,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_MICROSOFT=3,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_1_0=0,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_1_1=1,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_ISO_10646=2,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_2_0_BMP=3,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_2_0_FULL=4,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_SYMBOL=0,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_UNICODE_BMP=1,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_SHIFTJIS=2,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_UNICODE_FULL=10,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_ROMAN=0,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_ARABIC=4,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_JAPANESE=1,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_HEBREW=5,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_CHINESE_TRAD=2,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_GREEK=6,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_KOREAN=3,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_RUSSIAN=7,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_ENGLISH=1033,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_ITALIAN=1040,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_CHINESE=2052,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_JAPANESE=1041,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_DUTCH=1043,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_KOREAN=1042,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_FRENCH=1036,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_RUSSIAN=1049,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_GERMAN=1031,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_SPANISH=1033,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_HEBREW=1037,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_SWEDISH=1053,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ENGLISH=0,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_JAPANESE=11,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ARABIC=12,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_KOREAN=23,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_DUTCH=4,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_RUSSIAN=32,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_FRENCH=1,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_SPANISH=6,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_GERMAN=2,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_SWEDISH=5,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_HEBREW=10,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_CHINESE_SIMPLIFIED=33,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ITALIAN=3,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_CHINESE_TRAD=19,kha_graphics2_truetype_StbTruetype.STBTT_MAX_OVERSAMPLE=8,kha_graphics2_truetype_StbTruetype.STBTT_RASTERIZER_VERSION=2,kha_graphics4_ImageShaderPainter.bufferSize=1500,kha_graphics4_ImageShaderPainter.vertexSize=9,kha_graphics4_ColoredShaderPainter.bufferSize=100,kha_graphics4_ColoredShaderPainter.triangleBufferSize=100,kha_graphics4_TextShaderPainter.bufferSize=100,kha_input_Gamepad.__meta__={statics:{sendConnectEvent:{input:null},sendDisconnectEvent:{input:null}},fields:{sendAxisEvent:{input:null},sendButtonEvent:{input:null}}},kha_input_Gamepad.instances=[],kha_input_Gamepad.connectListeners=[],kha_input_Gamepad.disconnectListeners=[],kha_input_Keyboard.__meta__={fields:{sendDownEvent:{input:null},sendUpEvent:{input:null},sendPressEvent:{input:null}}},kha_input_Mouse.__meta__={fields:{sendLeaveEvent:{input:null},sendDownEvent:{input:null},sendUpEvent:{input:null},sendMoveEvent:{input:null},sendWheelEvent:{input:null}}},kha_internal_BytesBlob.bufferSize=2e3,kha_krom_Graphics.mat=new Float32Array(16),kha_math_FastMatrix3.width=3,kha_math_FastMatrix3.height=3,kha_math_FastMatrix4.width=4,kha_math_FastMatrix4.height=4,kha_math_Matrix3.width=3,kha_math_Matrix3.height=3,kha_math_Matrix4.width=4,kha_math_Matrix4.height=4,kha_netsync_ControllerBuilder.nextId=0,kha_netsync_Session.START=0,kha_netsync_Session.ENTITY_UPDATES=1,kha_netsync_Session.CONTROLLER_UPDATES=2,kha_netsync_Session.REMOTE_CALL=3,kha_netsync_Session.PING=4,kha_netsync_Session.SESSION_ERROR=5,kha_netsync_Session.PLAYER_UPDATES=6,kha_netsync_Session.RPC_SERVER=0,kha_netsync_Session.RPC_ALL=1,kha_netsync_SyncBuilder.nextId=0,kha_netsync_SyncBuilder.objects=[],zui_Handle.global=new zui_Handle,zui_Canvas.assetMap=new haxe_ds_IntMap,zui_Canvas.events=[],zui_Canvas.screenW=-1,zui_Canvas.screenH=-1,zui_Canvas.locale="en",zui_Canvas.h=new zui_Handle,zui_Canvas.elemId=-1,zui_Canvas.assetId=-1,zui_Ext.lastPath="",zui_Ext.kx=1,zui_Ext.ky=.6666666666666666,zui_Ext.kz=.3333333333333333,zui_Ext.kw=3,zui_Ext.ar=[0,0,0],zui_Ext.Kx=0,zui_Ext.Ky=-.3333333333333333,zui_Ext.Kz=.6666666666666666,zui_Ext.Kw=-1,zui_Ext.e=1e-10,zui_Id.i=0,zui_Themes.dark={FONT_SIZE:13,ELEMENT_W:100,ELEMENT_H:22,ELEMENT_OFFSET:2,ARROW_SIZE:5,BUTTON_H:17,CHECK_SIZE:15,CHECK_SELECT_SIZE:8,SCROLL_W:8,TEXT_OFFSET:8,TAB_W:12,LINE_STRENGTH:1,FLASH_SPEED:.5,TOOLTIP_DELAY:1,FILL_WINDOW_BG:!1,FILL_BUTTON_BG:!0,FILL_ACCENT_BG:!1,WINDOW_BG_COL:-14671840,WINDOW_TINT_COL:-1,ACCENT_COL:-12566464,ACCENT_HOVER_COL:-11513776,ACCENT_SELECT_COL:-10066330,PANEL_BG_COL:-16777216,PANEL_TEXT_COL:-1118482,BUTTON_COL:-13948117,BUTTON_TEXT_COL:-3487289,BUTTON_HOVER_COL:-12895429,BUTTON_PRESSED_COL:-15000805,TEXT_COL:-3487289,LABEL_COL:-5592406,ARROW_COL:-3487289,SEPARATOR_COL:-14277082},zui_Themes.light={FONT_SIZE:26,ELEMENT_W:200,ELEMENT_H:44,ELEMENT_OFFSET:4,ARROW_SIZE:10,BUTTON_H:34,CHECK_SIZE:30,CHECK_SELECT_SIZE:16,SCROLL_W:16,TEXT_OFFSET:16,TAB_W:24,LINE_STRENGTH:2,FLASH_SPEED:.5,TOOLTIP_DELAY:1,FILL_WINDOW_BG:!1,FILL_BUTTON_BG:!0,FILL_ACCENT_BG:!1,WINDOW_BG_COL:-1052689,WINDOW_TINT_COL:-14540254,ACCENT_COL:-1118482,ACCENT_HOVER_COL:-4473925,ACCENT_SELECT_COL:-5592406,PANEL_BG_COL:-1,PANEL_TEXT_COL:-14540254,BUTTON_COL:-3355444,BUTTON_TEXT_COL:-14540254,BUTTON_HOVER_COL:-5000269,BUTTON_PRESSED_COL:-5131855,TEXT_COL:-6710887,LABEL_COL:-5592406,ARROW_COL:-3487289,SEPARATOR_COL:-6710887},zui_Zui.textToPaste="",zui_Zui.textToCopy="",zui_Zui.isCut=!1,zui_Zui.comboFirst=!0,Main.main();