var $hx_exports="undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this;$hx_exports.kha=$hx_exports.kha||{},$hx_exports.kha.input=$hx_exports.kha.input||{},$hx_exports.kha._Color=$hx_exports.kha._Color||{};var $_,$global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,$hxClasses=$hxClasses||{},$estr=function(){return js_Boot.__string_rec(this,"")},$hxEnums={};function $extend(e,t){function a(){}a.prototype=e;var r=new a;for(var i in t)r[i]=t[i];return t.toString!==Object.prototype.toString&&(r.toString=t.toString),r}var Elements=$hxClasses.Elements=function(e){if(this.lastCanvasH=0,this.lastCanvasW=0,this.lastH=0,this.lastW=0,this.hwin=zui_Handle.global.nest(0,null),this.selectedElem=null,this.selectedFrame=0,this.filesDone=null,this.foldersOnly=!1,this.showFiles=!1,this.zoom=1,this.resizeCanvas=!1,this.dragAsset=null,this.assetNames=[""],this.dragBottom=!1,this.dragRight=!1,this.dragTop=!1,this.dragLeft=!1,this.drag=!1,this.dropPath="",0<(this.canvas=e).assets.length){var t=e.assets;e.assets=[];for(var a=0;a<t.length;){var r=t[a];++a,this.importAsset(r.file)}}kha_Assets.loadEverything($bind(this,this.loaded))};Elements.__name__=!0,Elements.get_uiw=function(){return Elements.windowW*Main.prefs.scaleFactor|0},Elements.toRelative=function(e,t){e=haxe_io_Path.normalize(e),t=haxe_io_Path.normalize(t);for(var a=[],r=e.split("/"),i=t.split("/"),s=0;r[s]==i[s];)++s;for(var n=0,_=i.length-s;n<_;){n++;a.push("..")}for(var h=s,o=r.length;h<o;){var l=h++;a.push(r[l])}return a.join("/")},Elements.toAbsolute=function(e,t){return haxe_io_Path.normalize(t+"/"+e)},Elements.toDegrees=function(e){return 57.29578*e},Elements.toRadians=function(e){return.0174532924*e},Elements.prototype={ui:null,cui:null,canvas:null,toolbarw:null,get_toolbarw:function(){return 60*this.ui.SCALE|0},dropPath:null,drag:null,dragLeft:null,dragTop:null,dragRight:null,dragBottom:null,assetNames:null,dragAsset:null,resizeCanvas:null,zoom:null,showFiles:null,foldersOnly:null,filesDone:null,uimodal:null,selectedFrame:null,selectedElem:null,hwin:null,lastW:null,lastH:null,lastCanvasW:null,lastCanvasH:null,loaded:function(){var t=this,e=Reflect.copy(zui_Themes.dark);e.FILL_WINDOW_BG=!0,this.ui=new zui_Zui({scaleFactor:Main.prefs.scaleFactor,font:kha_Assets.fonts.DroidSans,theme:e,color_wheel:kha_Assets.images.color_wheel}),this.cui=new zui_Zui({scaleFactor:1,font:kha_Assets.fonts.DroidSans,autoNotifyInput:!0,theme:zui_Themes.light}),this.uimodal=new zui_Zui({font:kha_Assets.fonts.DroidSans,scaleFactor:Main.prefs.scaleFactor}),kha_System.notifyOnDropFiles(function(e){t.dropPath=StringTools.rtrim(e),t.dropPath=Elements.toRelative(t.dropPath,Main.cwd)}),kha_System.notifyOnFrames($bind(this,this.onFrames)),kha_Scheduler.addTimeTask($bind(this,this.update),0,.016666666666666666)},importAsset:function(s){var n=this,e=StringTools.endsWith(s,".jpg")||StringTools.endsWith(s,".png")||StringTools.endsWith(s,".k")||StringTools.endsWith(s,".hdr"),t=StringTools.endsWith(s,".ttf"),a=Elements.toAbsolute(s,Main.cwd);a="Windows"==kha_System.get_systemId()?StringTools.replace(a,"/","\\"):a,e?kha_Assets.loadImageFromPath(a,!1,function(e){var t=s.split("/"),a=t[t.length-1],r=zui_Canvas.getAssetId(n.canvas),i={name:a,file:s,id:r};n.canvas.assets.push(i),zui_Canvas.assetMap.h[i.id]=e,n.assetNames.push(a),n.hwin.redraws=2},null,{fileName:"Elements.hx",lineNumber:120,className:"Elements",methodName:"importAsset"}):t&&kha_Assets.loadFontFromPath(a,function(e){var t=s.split("/"),a=t[t.length-1],r=zui_Canvas.getAssetId(n.canvas),i={name:a,file:s,id:r};n.canvas.assets.push(i),zui_Canvas.assetMap.h[i.id]=e,n.assetNames.push(a),n.hwin.redraws=2},null,{fileName:"Elements.hx",lineNumber:132,className:"Elements",methodName:"importAsset"})},unique:function(e){return e},makeElem:function(e){var t="",a=this.cui.t.ELEMENT_H;switch(e){case 0:t=this.unique("Text");break;case 1:t=this.unique("Image"),a=100;break;case 2:t=this.unique("Button");break;case 3:t=this.unique("Empty"),a=100;break;case 6:t=this.unique("Check");break;case 7:t=this.unique("Radio");break;case 8:t=this.unique("Combo");break;case 9:t=this.unique("Shape"),a=100;break;case 10:t=this.unique("Slider");break;case 11:t=this.unique("Input")}var r={id:zui_Canvas.getElementId(this.canvas),type:e,name:t,event:"",x:0,y:0,width:150,height:a,rotation:0,text:"My "+t,asset:"",color:-1,anchor:0,parent:null,children:[],visible:!0};return this.canvas.elements.push(r),r},getEnumTexts:function(){return 0<this.assetNames.length?this.assetNames:[""]},getAssetIndex:function(e){for(var t=0,a=this.canvas.assets.length;t<a;){var r=t++;if(e==this.canvas.assets[r].name)return r+1}return 0},resize:function(){null!=Elements.grid&&(Elements.grid.unload(),Elements.grid=null),null!=Elements.timeline&&(Elements.timeline.unload(),Elements.timeline=null)},drawGrid:function(){var e=kha_System.windowWidth()+80,t=kha_System.windowHeight()+80;Elements.grid=kha_Image.createRenderTarget(e,t),Elements.grid.get_g2().begin(!0,-14408668);for(var a=0,r=1+(t/40|0);a<r;){var i=a++;Elements.grid.get_g2().set_color(-14145496),Elements.grid.get_g2().drawLine(0,40*i,e,40*i),Elements.grid.get_g2().set_color(-13487566),Elements.grid.get_g2().drawLine(0,40*i+20,e,40*i+20)}for(var s=0,n=1+(e/40|0);s<n;){var _=s++;Elements.grid.get_g2().set_color(-14145496),Elements.grid.get_g2().drawLine(40*_,0,40*_,t),Elements.grid.get_g2().set_color(-13487566),Elements.grid.get_g2().drawLine(40*_+20,0,40*_+20,t)}Elements.grid.get_g2().end()},drawTimeline:function(){var e=this.ui.SCALE;Elements.timeline=kha_Image.createRenderTarget(kha_System.windowWidth()-Elements.get_uiw()-this.get_toolbarw(),60*e|0);var t=Elements.timeline.get_g2();t.begin(!0,-14540254),t.set_font(kha_Assets.fonts.DroidSans),t.set_fontSize(16*e|0);for(var a=Elements.timeline.get_width()/(11*e)|0,r=0,i=1+(a/5|0);r<i;){var s=r++;t.drawString(5*s+"",55*s*e,0)}for(var n=0,_=a;n<_;){var h=n++;t.set_color(h%5==0?-12303292:-13421773),t.fillRect(11*h*e,30*e,10*e,30*e)}t.end()},onFrames:function(e){var l=this,t=e[0];""!=this.dropPath&&(this.importAsset(this.dropPath),this.dropPath=""),null==Elements.grid&&this.drawGrid(),null==Elements.timeline&&this.drawTimeline();var a=t.get_g2();if(a.begin(),a.set_color(-1),a.drawImage(Elements.grid,Elements.coffX%40-40,Elements.coffY%40-40),this.canvas.x=Elements.coffX,this.canvas.y=Elements.coffY,a.drawRect(this.canvas.x,this.canvas.y,this.canvas.width*this.cui.SCALE|0,this.canvas.height*this.cui.SCALE|0,1),a.drawRect(this.canvas.x+(this.canvas.width*this.cui.SCALE|0)-3,this.canvas.y+(this.canvas.height*this.cui.SCALE|0)-3,6,6,1),zui_Canvas.screenW=this.canvas.width,zui_Canvas.screenH=this.canvas.height,zui_Canvas.draw(this.cui,this.canvas,a),null!=this.selectedElem){a.set_color(-1);var r=this.absx(this.selectedElem)*this.cui.SCALE|0,i=this.absy(this.selectedElem)*this.cui.SCALE|0,s=this.selectedElem.width*this.cui.SCALE|0,n=this.selectedElem.height*this.cui.SCALE|0;a.drawRect(this.canvas.x+r,this.canvas.y+i,s,n),a.drawRect(this.canvas.x+r-3,this.canvas.y+i-3,6,6),a.drawRect(this.canvas.x+r-3+s/2,this.canvas.y+i-3,6,6),a.drawRect(this.canvas.x+r-3+s,this.canvas.y+i-3,6,6),a.drawRect(this.canvas.x+r-3,this.canvas.y+i-3+n/2,6,6),a.drawRect(this.canvas.x+r-3+s,this.canvas.y+i-3+n/2,6,6),a.drawRect(this.canvas.x+r-3,this.canvas.y+i-3+n,6,6),a.drawRect(this.canvas.x+r-3+s/2,this.canvas.y+i-3+n,6,6),a.drawRect(this.canvas.x+r-3+s,this.canvas.y+i-3+n,6,6)}a.set_color(-1);var _=kha_System.windowHeight()-Elements.timeline.get_height();a.drawImage(Elements.timeline,this.get_toolbarw(),_),a.set_color(-14656100);var h=this.ui.SCALE;if(a.fillRect(this.get_toolbarw()+11*this.selectedFrame*h,_+30*h,10*h,30*h),a.end(),this.ui.begin(a),this.ui.window(zui_Handle.global.nest(1,null),0,0,this.get_toolbarw(),kha_System.windowHeight())&&this.ui.tab(zui_Handle.global.nest(2,null),"Tools")&&(this.ui._y=50,this.ui.button("Empty")&&(this.selectedElem=this.makeElem(3)),this.ui.button("Text")&&(this.selectedElem=this.makeElem(0)),this.ui.button("Shape")&&(this.selectedElem=this.makeElem(9)),this.ui.button("Image")&&(this.selectedElem=this.makeElem(1)),this.ui.button("Button")&&(this.selectedElem=this.makeElem(2)),this.ui.button("Check")&&(this.selectedElem=this.makeElem(6)),this.ui.button("Radio")&&(this.selectedElem=this.makeElem(7)),this.ui.button("Combo")&&(this.selectedElem=this.makeElem(8)),this.ui.button("Slider")&&(this.selectedElem=this.makeElem(10)),this.ui.button("Input")&&(this.selectedElem=this.makeElem(11))),this.ui.window(zui_Handle.global.nest(3,null),this.get_toolbarw(),0,kha_System.windowWidth()-Elements.get_uiw()-this.get_toolbarw(),(this.ui.t.ELEMENT_H+2)*this.ui.SCALE|0)&&this.ui.tab(zui_Handle.global.nest(4,null),this.canvas.name),this.ui.window(this.hwin,kha_System.windowWidth()-Elements.get_uiw(),0,Elements.get_uiw(),kha_System.windowHeight())){var o=zui_Handle.global.nest(5,null);if(this.ui.tab(o,"Project")){if(this.ui.button("Save")){this.canvas.x=0,this.canvas.y=0,Krom.fileSaveBytes(Main.prefs.path,haxe_io_Bytes.ofString(JSON.stringify(this.canvas)).b.bufferValue);var u=HxOverrides.substr(Main.prefs.path,0,Main.prefs.path.length-5);u+=".files";for(var d="",c=0,g=this.canvas.assets;c<g.length;){var p=g[c];++c,d+=p.file+"\n"}Krom.fileSaveBytes(u,haxe_io_Bytes.ofString(d).b.bufferValue),this.canvas.x=Elements.coffX,this.canvas.y=Elements.coffY}if(this.ui.panel(zui_Handle.global.nest(6,{selected:!1}),"Canvas")){this.ui.button("New")&&(this.canvas.elements=[],this.selectedElem=null);var f=this.ui,m=zui_Handle.global.nest(7,{text:this.canvas.name});this.canvas.name=f.textInput(m,"Name",2),this.ui.row([.5,.5]);var k=zui_Handle.global.nest(8,{text:this.canvas.width+""}),v=zui_Handle.global.nest(9,{text:this.canvas.height+""});k.text=this.canvas.width+"",v.text=this.canvas.height+"";var S=this.ui.textInput(k,"Width",2),b=this.ui.textInput(v,"Height",2);this.canvas.width=Std.parseInt(S),this.canvas.height=Std.parseInt(b)}if(this.ui.panel(zui_Handle.global.nest(10,{selected:!0}),"Outliner")){var y=null;y=function(e,t){var a=!1;l.selectedElem==t&&(l.ui.g.set_color(-14656100),l.ui.g.fillRect(0,l.ui._y,l.ui._windowW,l.ui.t.ELEMENT_H*l.ui.SCALE),l.ui.g.set_color(-1));var r=l.ui.getStarted();if(r&&!l.ui.inputDownR&&(l.selectedElem=t),r&&l.ui.inputDownR)if(t==l.selectedElem){if(null!=t.parent){var i=l.elemById(t.parent);HxOverrides.remove(i.children,t.id),t.parent=null,t.x+=l.absx(i),t.y+=l.absy(i)}}else null==t.children&&(t.children=[]),t.children.push(l.selectedElem.id),l.selectedElem.parent=t.id,l.selectedElem.x-=l.absx(t),l.selectedElem.y-=l.absy(t);if(null!=t.children&&0<t.children.length?(l.ui.row([.07692307692307693,.9230769230769231]),a=l.ui.panel(e.nest(t.id,{selected:!0}),"",0,!0),l.ui.text(t.name)):(l.ui._x+=18,l.ui.text(t.name),l.ui._x-=18),a)for(var s=0,n=t.children.length;s<n;){var _=s++,h=t.children[t.children.length-1-_];l.ui.indent();var o=l.elemById(h);y(e,o),l.ui.unindent()}};for(var x=0,w=this.canvas.elements.length;x<w;){var T=x++,I=this.canvas.elements[this.canvas.elements.length-1-T];if(null==I.parent){var E=zui_Handle.global.nest(11,null);y(E,I)}}this.ui.row([.3333333333333333,.3333333333333333,.3333333333333333]);this.canvas.elements;this.ui.button("Up")&&null!=this.selectedElem&&this.moveElem(1),this.ui.button("Down")&&null!=this.selectedElem&&this.moveElem(-1),this.ui.button("Remove")&&null!=this.selectedElem&&this.removeSelectedElem()}if(null!=this.selectedElem){var C=this.selectedElem,B=C.id;if(this.ui.panel(zui_Handle.global.nest(12,{selected:!0}),"Properties")){var L=null==C.visible||C.visible;C.visible=this.ui.check(zui_Handle.global.nest(13,null).nest(B,{selected:L}),"Visible"),C.name=this.ui.textInput(zui_Handle.global.nest(14,null).nest(B,{text:C.name}),"Name",2),C.text=this.ui.textInput(zui_Handle.global.nest(15,null).nest(B,{text:C.text}),"Text",2),this.ui.row([.25,.25,.25,.25]);var P=C.x+"",A=zui_Handle.global.nest(16,null).nest(B,{text:P}),$=C.y+"",N=zui_Handle.global.nest(17,null).nest(B,{text:$});A.text=C.x+"",N.text=C.y+"";var R=this.ui.textInput(A,"X",2),F=this.ui.textInput(N,"Y",2);C.x=parseFloat(R),C.y=parseFloat(F);var V=C.width+"",M=zui_Handle.global.nest(18,null).nest(B,{text:V}),H=C.height+"",O=zui_Handle.global.nest(19,null).nest(B,{text:H});M.text=C.width+"",O.text=C.height+"";var U=this.ui.textInput(M,"W",2),D=this.ui.textInput(O,"H",2);C.width=0|parseFloat(U),C.height=0|parseFloat(D);var G=null==C.rotation?0:C.rotation,z=zui_Handle.global.nest(20,null).nest(B,{value:57.29578*G});C.rotation=.0174532924*this.ui.slider(z,"Rotation",0,360,!0);var W=this.ui.combo(zui_Handle.global.nest(21,null).nest(B,{position:this.getAssetIndex(C.asset)}),this.getEnumTexts(),"Asset",!0,2);C.asset=this.getEnumTexts()[W],C.color=zui_Ext.colorWheel(this.ui,zui_Handle.global.nest(22,null).nest(B,{color:C.color}),!0,null,!0)}this.ui.panel(zui_Handle.global.nest(23,{selected:!1}),"Align");if(this.ui.panel(zui_Handle.global.nest(24,{selected:!1}),"Anchor")){var j=zui_Handle.global.nest(25,null).nest(B,{position:C.anchor});this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(j,0,"Top-Left"),this.ui.radio(j,1,"Top"),this.ui.radio(j,2,"Top-Right"),this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(j,3,"Left"),this.ui.radio(j,4,"Center"),this.ui.radio(j,5,"Right"),this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(j,6,"Bot-Left"),this.ui.radio(j,7,"Bottom"),this.ui.radio(j,8,"Bot-Right"),C.anchor=j.position}this.ui.panel(zui_Handle.global.nest(26,{selected:!1}),"Script")&&(C.event=this.ui.textInput(zui_Handle.global.nest(27,null).nest(B,{text:C.event}),"Event",2));this.ui.panel(zui_Handle.global.nest(28,{selected:!1}),"Timeline")}}if(this.ui.tab(o,"Assets"))if(this.ui.button("Import Asset")&&(this.showFiles=!0,this.foldersOnly=!1,this.filesDone=function(e){e=StringTools.rtrim(e),e=Elements.toRelative(e,Main.cwd),l.importAsset(e)}),0<this.canvas.assets.length){this.ui.text("(Drag and drop assets to canvas)",1);for(var K=this.canvas.assets.length-1;0<=K;){var X=this.canvas.assets[K];StringTools.endsWith(X.name,".ttf")||1!=this.ui.image(this.getImage(X))||(this.dragAsset=X),this.ui.row([.875,.125]),X.name=this.ui.textInput(zui_Handle.global.nest(29,null).nest(X.id,{text:X.name}),"",2),this.assetNames[K+1]=X.name,this.ui.button("X")&&(this.getImage(X).unload(),this.canvas.assets.splice(K,1),this.assetNames.splice(K+1,1)),--K}}else this.ui.text("(Drag and drop images and fonts here)",1);if(this.ui.tab(o,"Preferences")){var Y=zui_Handle.global.nest(30,{value:1});this.ui.slider(Y,"UI Scale",.5,4,!0),this.ui.changed&&!this.ui.inputDown&&(this.ui.setScale(Y.value),Elements.windowW=Elements.defaultWindowW*Y.value|0);var Z=this.ui,Q=zui_Handle.global.nest(31,{selected:!0});Main.prefs.window_vsync=Z.check(Q,"VSync");this.ui.panel(zui_Handle.global.nest(32,{selected:!0}),"Console")}}if(this.ui.end(),a.begin(!1),null!=this.dragAsset){var q=Math.min(128,this.getImage(this.dragAsset).get_width()),J=q/this.getImage(this.dragAsset).get_width(),ee=this.getImage(this.dragAsset).get_height()*J;a.drawScaledImage(this.getImage(this.dragAsset),this.ui.inputX,this.ui.inputY,q,ee)}a.end(),0<this.lastW&&(this.lastW!=kha_System.windowWidth()||this.lastH!=kha_System.windowHeight())?this.resize():0<this.lastCanvasW&&(this.lastCanvasW!=this.canvas.width||this.lastCanvasH!=this.canvas.height)&&this.resize(),this.lastW=kha_System.windowWidth(),this.lastH=kha_System.windowHeight(),this.lastCanvasW=this.canvas.width,this.lastCanvasH=this.canvas.height,this.showFiles&&this.renderFiles(a)},elemById:function(e){for(var t=0,a=this.canvas.elements;t<a.length;){var r=a[t];if(++t,r.id==e)return r}return null},moveElem:function(e){for(var t=this.canvas.elements,a=t.indexOf(this.selectedElem),r=this.selectedElem.parent;!((a+=e)<0||a>=t.length);)if(t[a].parent==r){HxOverrides.remove(t,this.selectedElem),t.splice(a,0,this.selectedElem);break}},getImage:function(e){return zui_Canvas.assetMap.h[e.id]},removeElem:function(e){if(null!=e.children)for(var t=0,a=e.children;t<a.length;){var r=a[t];++t,this.removeElem(this.elemById(r))}HxOverrides.remove(this.canvas.elements,e),null!=e.parent&&(HxOverrides.remove(this.elemById(e.parent).children,e.id),e.parent=null)},removeSelectedElem:function(){this.removeElem(this.selectedElem),this.selectedElem=null},acceptDrag:function(e){var t=this.makeElem(1);t.asset=this.assetNames[e+1],t.x=this.ui.inputX-this.canvas.x,t.y=this.ui.inputY-this.canvas.y,t.width=this.getImage(this.canvas.assets[e]).get_width(),t.height=this.getImage(this.canvas.assets[e]).get_height(),this.selectedElem=t},hitbox:function(e,t,a,r){return this.ui.inputX>e&&this.ui.inputX<e+a&&this.ui.inputY>t&&this.ui.inputY<t+r},update:function(){if(this.ui.inputReleased&&null!=this.dragAsset){if(this.ui.inputX<kha_System.windowWidth()-Elements.get_uiw()){for(var e=0,t=0,a=this.canvas.assets.length;t<a;){var r=t++;if(this.canvas.assets[r]==this.dragAsset){e=r;break}}this.acceptDrag(e)}this.dragAsset=null}if(null==this.dragAsset){if(this.updateCanvas(),null!=Elements.timeline){var i=kha_System.windowHeight()-Elements.timeline.get_height();this.ui.inputDown&&this.ui.inputY>i&&this.ui.inputX<kha_System.windowWidth()-Elements.get_uiw()&&this.ui.inputX>this.get_toolbarw()&&(this.selectedFrame=(this.ui.inputX-this.get_toolbarw())/11/this.ui.SCALE|0)}if(null!=this.selectedElem){var s=this.selectedElem,n=this.absx(s)*this.cui.SCALE|0,_=this.absy(s)*this.cui.SCALE|0,h=s.width*this.cui.SCALE|0,o=s.height*this.cui.SCALE|0;this.ui.inputStarted&&this.ui.inputDown&&this.hitbox(this.canvas.x+n-4,this.canvas.y+_-4,h+4,o+4)&&(this.drag=!0,this.dragLeft=this.dragRight=this.dragTop=this.dragBottom=!1,this.ui.inputX>this.canvas.x+n+h-4?this.dragRight=!0:this.ui.inputX<this.canvas.x+n+4&&(this.dragLeft=!0),this.ui.inputY>this.canvas.y+_+o-4?this.dragBottom=!0:this.ui.inputY<this.canvas.y+_+4&&(this.dragTop=!0)),this.ui.inputReleased&&this.drag&&(this.drag=!1),this.drag&&(this.hwin.redraws=2,this.dragRight?s.width+=0|this.ui.inputDX:this.dragLeft&&(s.x+=0|this.ui.inputDX,s.width-=0|this.ui.inputDX),this.dragBottom?s.height+=0|this.ui.inputDY:this.dragTop&&(s.y+=0|this.ui.inputDY,s.height-=0|this.ui.inputDY),1!=s.type&&(s.width<1&&(s.width=1),s.height<1&&(s.height=1)),this.dragLeft||this.dragRight||this.dragBottom||this.dragTop||(s.x+=this.ui.inputDX,s.y+=this.ui.inputDY)),this.ui.isKeyDown&&!this.ui.isTyping&&(37==this.ui.key&&s.x--,39==this.ui.key&&s.x++,38==this.ui.key&&s.y--,40==this.ui.key&&s.y++,8!=this.ui.key&&"x"!=this.ui.char||this.removeSelectedElem(),this.hwin.redraws=2)}this.updateFiles()}},updateCanvas:function(){if(!(this.showFiles||this.ui.inputX>kha_System.windowWidth()-Elements.get_uiw())){if(this.ui.inputStarted&&this.ui.inputDownR){this.canvas.elements.length;for(var e=0,t=this.canvas.elements;e<t.length;){var a=t[e];++e;var r=this.absx(a)*this.cui.SCALE|0,i=this.absy(a)*this.cui.SCALE|0,s=a.width*this.cui.SCALE|0,n=a.height*this.cui.SCALE|0;if(this.hitbox(this.canvas.x+r,this.canvas.y+i,s,n)&&this.selectedElem!=a){this.selectedElem=a;break}}}this.ui.inputDownR&&(Elements.coffX+=0|this.ui.inputDX,Elements.coffY+=0|this.ui.inputDY),0!=this.ui.inputWheelDelta&&(this.zoom+=-this.ui.inputWheelDelta/10,this.zoom<.4?this.zoom=.4:1<this.zoom&&(this.zoom=1),this.zoom=Math.round(10*this.zoom)/10,this.cui.SCALE=this.cui.ops.scaleFactor*this.zoom),this.ui.inputStarted&&this.hitbox(this.canvas.x+(this.canvas.width*this.cui.SCALE|0)-3,this.canvas.y+(this.canvas.height*this.cui.SCALE|0)-3,6,6)&&(this.resizeCanvas=!0),this.ui.inputReleased&&this.resizeCanvas&&(this.resizeCanvas=!1),this.resizeCanvas&&(this.canvas.width+=0|this.ui.inputDX,this.canvas.height+=0|this.ui.inputDY,this.canvas.width<1&&(this.canvas.width=1),this.canvas.height<1&&(this.canvas.height=1))}},updateFiles:function(){if(this.showFiles&&this.ui.inputReleased){var e=kha_System.windowWidth(),t=kha_System.windowHeight(),a=e/2-Elements.modalRectW/2,r=e/2+Elements.modalRectW/2,i=t/2-Elements.modalRectH/2,s=t/2+Elements.modalRectH/2;(this.ui.inputX<a||this.ui.inputX>r||this.ui.inputY<i+Elements.modalHeaderH||this.ui.inputY>s)&&(this.showFiles=!1)}},renderFiles:function(e){var t=kha_System.windowWidth(),a=kha_System.windowHeight(),r=t/2-Elements.modalW/2,i=a/2-Elements.modalH/2;e.set_color(-14671840),e.fillRect(r,i,Elements.modalW,Elements.modalH);var s=t/2-Elements.modalRectW/2|0,n=t/2+Elements.modalRectW/2|0,_=a/2-Elements.modalRectH/2|0,h=a/2+Elements.modalRectH/2|0;if(_+=Elements.modalHeaderH,e.end(),this.uimodal.begin(e),this.uimodal.window(zui_Handle.global.nest(33,null),s,_,Elements.modalRectW,Elements.modalRectH-100)){var o=zui_Handle.global.nest(34,null);o.text=this.uimodal.textInput(o),Elements.path=zui_Ext.fileBrowser(this.uimodal,o,this.foldersOnly)}this.uimodal.end(!1),e.begin(!1),this.uimodal.beginLayout(e,n-100,h-30,100),this.uimodal.button("OK")&&(this.showFiles=!1,this.filesDone(Elements.path)),this.uimodal.endLayout(!1),this.uimodal.beginLayout(e,n-200,h-30,100),this.uimodal.button("Cancel")&&(this.showFiles=!1),this.uimodal.endLayout(),e.begin(!1)},absx:function(e){return null==e?0:e.x+this.absx(this.elemById(e.parent))},absy:function(e){return null==e?0:e.y+this.absy(this.elemById(e.parent))},scaled:function(e){return e*this.cui.SCALE|0},__class__:Elements};var HxOverrides=$hxClasses.HxOverrides=function(){};HxOverrides.__name__=!0,HxOverrides.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),a=new Date;return a.setTime(0),a.setUTCHours(t[0]),a.setUTCMinutes(t[1]),a.setUTCSeconds(t[2]),a;case 10:var r=e.split("-");return new Date(r[0],r[1]-1,r[2],0,0,0);case 19:var i=e.split(" "),s=i[0].split("-"),n=i[1].split(":");return new Date(s[0],s[1]-1,s[2],n[0],n[1],n[2]);default:throw new js__$Boot_HaxeError("Invalid date format : "+e)}},HxOverrides.cca=function(e,t){var a=e.charCodeAt(t);if(a==a)return a},HxOverrides.substr=function(e,t,a){if(null==a)a=e.length;else if(a<0){if(0!=t)return"";a=e.length+a}return e.substr(t,a)},HxOverrides.remove=function(e,t){var a=e.indexOf(t);return-1!=a&&(e.splice(a,1),!0)},HxOverrides.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Lambda=$hxClasses.Lambda=function(){};Lambda.__name__=!0,Lambda.array=function(e){for(var t=[],a=$getIterator(e);a.hasNext();){var r=a.next();t.push(r)}return t};var Main=$hxClasses.Main=function(){};Main.__name__=!0,Main.main=function(){var e=1600,t=900;e>kha_Display.get_primary().get_width()&&(e=kha_Display.get_primary().get_width()),t>kha_Display.get_primary().get_height()-30&&(t=kha_Display.get_primary().get_height()-30),kha_System.init({title:"Armory2D",width:e,height:t,resizable:!0,maximizable:!0},Main.initialized)},Main.initialized=function(){Main.prefs={path:"",scaleFactor:1};var e=Krom.getArgCount();if(4<e&&(Main.prefs.path=Krom.getArg(4)),5<e){var t=parseFloat(Krom.getArg(5));Main.prefs.scaleFactor=t}var a=Main.prefs.path.split("/");a.pop(),Main.cwd=a.join("/");var r="Windows"==kha_System.get_systemId()?StringTools.replace(Main.prefs.path,"/","\\"):Main.prefs.path;kha_Assets.loadBlobFromPath(r,function(e){var t=JSON.parse(e.toString());Main.inst=new Elements(t)},null,{fileName:"Main.hx",lineNumber:36,className:"Main",methodName:"initialized"})},Math.__name__=!0;var Reflect=$hxClasses.Reflect=function(){};Reflect.__name__=!0,Reflect.field=function(e,t){try{return e[t]}catch(e){e instanceof js__$Boot_HaxeError&&e.val;return null}},Reflect.fields=function(e){var t=[];if(null!=e){var a=Object.prototype.hasOwnProperty;for(var r in e)"__id__"!=r&&"hx__closures__"!=r&&a.call(e,r)&&t.push(r)}return t},Reflect.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},Reflect.copy=function(e){for(var t={},a=0,r=Reflect.fields(e);a<r.length;){var i=r[a];++a,t[i]=Reflect.field(e,i)}return t};var Std=$hxClasses.Std=function(){};Std.__name__=!0,Std.string=function(e){return js_Boot.__string_rec(e,"")},Std.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=HxOverrides.cca(e,1)&&88!=HxOverrides.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t};var StringTools=$hxClasses.StringTools=function(){};StringTools.__name__=!0,StringTools.endsWith=function(e,t){var a=t.length,r=e.length;return a<=r&&HxOverrides.substr(e,r-a,a)==t},StringTools.isSpace=function(e,t){var a=HxOverrides.cca(e,t);return 8<a&&a<14||32==a},StringTools.rtrim=function(e){for(var t=e.length,a=0;a<t&&StringTools.isSpace(e,t-a-1);)++a;return 0<a?HxOverrides.substr(e,0,t-a):e},StringTools.replace=function(e,t,a){return e.split(t).join(a)};var Type=$hxClasses.Type=function(){};Type.__name__=!0,Type.createEnum=function(e,t,a){var r=Reflect.field(e,t);if(null==r)throw new js__$Boot_HaxeError("No such constructor "+t);if(Reflect.isFunction(r)){if(null==a)throw new js__$Boot_HaxeError("Constructor "+t+" need parameters");return r.apply(e,a)}if(null!=a&&0!=a.length)throw new js__$Boot_HaxeError("Constructor "+t+" does not need parameters");return r},Type.getInstanceFields=function(e){var t=[];for(var a in e.prototype)t.push(a);return HxOverrides.remove(t,"__class__"),HxOverrides.remove(t,"__properties__"),t};var _$UInt_UInt_$Impl_$=$hxClasses["_UInt.UInt_Impl_"]={};_$UInt_UInt_$Impl_$.__name__=!0,_$UInt_UInt_$Impl_$.gt=function(e,t){var a=e<0;return a!=t<0?a:t<e},_$UInt_UInt_$Impl_$.gte=function(e,t){var a=e<0;return a!=t<0?a:t<=e},_$UInt_UInt_$Impl_$.toFloat=function(e){return e<0?4294967296+e:e+0};var haxe_IMap=$hxClasses["haxe.IMap"]=function(){};haxe_IMap.__name__=!0;var haxe__$Int64__$_$_$Int64=$hxClasses["haxe._Int64.___Int64"]=function(e,t){this.high=e,this.low=t};haxe__$Int64__$_$_$Int64.__name__=!0,haxe__$Int64__$_$_$Int64.prototype={high:null,low:null,__class__:haxe__$Int64__$_$_$Int64};var haxe_Log=$hxClasses["haxe.Log"]=function(){};haxe_Log.__name__=!0,haxe_Log.formatOutput=function(e,t){var a=Std.string(e);if(null==t)return a;var r=t.fileName+":"+t.lineNumber;if(null!=t&&null!=t.customParams)for(var i=0,s=t.customParams;i<s.length;){var n=s[i];++i,a+=", "+Std.string(n)}return r+": "+a},haxe_Log.trace=function(e,t){var a=haxe_Log.formatOutput(e,t);"undefined"!=typeof console&&null!=console.log&&console.log(a)};var haxe__$Unserializer_DefaultResolver=$hxClasses["haxe._Unserializer.DefaultResolver"]=function(){};haxe__$Unserializer_DefaultResolver.__name__=!0,haxe__$Unserializer_DefaultResolver.prototype={resolveClass:function(e){return $hxClasses[e]},resolveEnum:function(e){return $hxEnums[e]},__class__:haxe__$Unserializer_DefaultResolver};var haxe_Unserializer=$hxClasses["haxe.Unserializer"]=function(e){this.buf=e,this.length=e.length,this.pos=0,this.scache=[],this.cache=[];var t=haxe_Unserializer.DEFAULT_RESOLVER;null==t&&(t=new haxe__$Unserializer_DefaultResolver,haxe_Unserializer.DEFAULT_RESOLVER=t),this.resolver=t};haxe_Unserializer.__name__=!0,haxe_Unserializer.initCodes=function(){for(var e=[],t=0,a=haxe_Unserializer.BASE64.length;t<a;){var r=t++;e[haxe_Unserializer.BASE64.charCodeAt(r)]=r}return e},haxe_Unserializer.run=function(e){return new haxe_Unserializer(e).unserialize()},haxe_Unserializer.prototype={buf:null,pos:null,length:null,cache:null,scache:null,resolver:null,readDigits:function(){for(var e=0,t=!1,a=this.pos;;){var r=this.buf.charCodeAt(this.pos);if(r!=r)break;if(45!=r){if(r<48||57<r)break;e=10*e+(r-48),this.pos++}else{if(this.pos!=a)break;t=!0,this.pos++}}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(t!=t)break;if(!(43<=t&&t<58||101==t||69==t))break;this.pos++}return parseFloat(HxOverrides.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw new js__$Boot_HaxeError("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw new js__$Boot_HaxeError("Invalid object key");var a=this.unserialize();e[t]=a}this.pos++},unserializeEnum:function(e,t){if(58!=this.buf.charCodeAt(this.pos++))throw new js__$Boot_HaxeError("Invalid enum format");var a=this.readDigits();if(0==a)return Type.createEnum(e,t);for(var r=[];0<a--;)r.push(this.unserialize());return Type.createEnum(e,t,r)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize(),t=this.resolver.resolveClass(e);if(null==t)throw new js__$Boot_HaxeError("Class not found "+e);return t;case 66:var a=this.unserialize(),r=this.resolver.resolveEnum(a);if(null==r)throw new js__$Boot_HaxeError("Enum not found "+a);return r;case 67:var i=this.unserialize(),s=this.resolver.resolveClass(i);if(null==s)throw new js__$Boot_HaxeError("Class not found "+i);var n=Object.create(s.prototype);if(this.cache.push(n),n.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw new js__$Boot_HaxeError("Invalid custom data");return n;case 77:var _=new haxe_ds_ObjectMap;this.cache.push(_);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var h=this.unserialize();_.set(h,this.unserialize())}return this.pos++,_;case 82:var o=this.readDigits();if(o<0||o>=this.scache.length)throw new js__$Boot_HaxeError("Invalid string reference");return this.scache[o];case 97:this.buf;var l=[];for(this.cache.push(l);;){var u=this.buf.charCodeAt(this.pos);if(104==u){this.pos++;break}if(117==u){this.pos++;var d=this.readDigits();l[l.length+d-1]=null}else l.push(this.unserialize())}return l;case 98:var c=new haxe_ds_StringMap;this.cache.push(c);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var g=this.unserialize(),p=this.unserialize();null!=__map_reserved[g]?c.setReserved(g,p):c.h[g]=p}return this.pos++,c;case 99:var f=this.unserialize(),m=this.resolver.resolveClass(f);if(null==m)throw new js__$Boot_HaxeError("Class not found "+f);var k=Object.create(m.prototype);return this.cache.push(k),this.unserializeObject(k),k;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:var v=this.unserialize(),S=this.resolver.resolveEnum(v);if(null==S)throw new js__$Boot_HaxeError("Enum not found "+v);this.pos++;var b=this.readDigits(),y=S.__constructs__.slice()[b];if(null==y)throw new js__$Boot_HaxeError("Unknown enum index "+v+"@"+b);var x=this.unserializeEnum(S,y);return this.cache.push(x),x;case 107:return NaN;case 108:var w=new haxe_ds_List;this.cache.push(w);for(this.buf;104!=this.buf.charCodeAt(this.pos);)w.add(this.unserialize());return this.pos++,w;case 109:return-1/0;case 110:return null;case 111:var T={};return this.cache.push(T),this.unserializeObject(T),T;case 112:return 1/0;case 113:var I=new haxe_ds_IntMap;this.cache.push(I);this.buf;for(var E=this.buf.charCodeAt(this.pos++);58==E;){var C=this.readDigits(),B=this.unserialize();I.h[C]=B,E=this.buf.charCodeAt(this.pos++)}if(104!=E)throw new js__$Boot_HaxeError("Invalid IntMap format");return I;case 114:var L=this.readDigits();if(L<0||L>=this.cache.length)throw new js__$Boot_HaxeError("Invalid reference");return this.cache[L];case 115:var P=this.readDigits(),A=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<P)throw new js__$Boot_HaxeError("Invalid bytes length");var $=haxe_Unserializer.CODES;null==$&&($=haxe_Unserializer.initCodes(),haxe_Unserializer.CODES=$);for(var N=this.pos,R=3&P,F=N+(P-R),V=new haxe_io_Bytes(new ArrayBuffer(3*(P>>2)+(2<=R?R-1:0))),M=0;N<F;){var H=$[A.charCodeAt(N++)],O=$[A.charCodeAt(N++)];V.b[M++]=255&(H<<2|O>>4);var U=$[A.charCodeAt(N++)];V.b[M++]=255&(O<<4|U>>2);var D=$[A.charCodeAt(N++)];V.b[M++]=255&(U<<6|D)}if(2<=R){var G=$[A.charCodeAt(N++)],z=$[A.charCodeAt(N++)];if(V.b[M++]=255&(G<<2|z>>4),3==R){var W=$[A.charCodeAt(N++)];V.b[M++]=255&(z<<4|W>>2)}}return this.pos+=P,this.cache.push(V),V;case 116:return!0;case 118:var j;return 48<=this.buf.charCodeAt(this.pos)&&this.buf.charCodeAt(this.pos)<=57&&48<=this.buf.charCodeAt(this.pos+1)&&this.buf.charCodeAt(this.pos+1)<=57&&48<=this.buf.charCodeAt(this.pos+2)&&this.buf.charCodeAt(this.pos+2)<=57&&48<=this.buf.charCodeAt(this.pos+3)&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(j=HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19)),this.pos+=19):j=new Date(this.readFloat()),this.cache.push(j),j;case 119:var K=this.unserialize(),X=this.resolver.resolveEnum(K);if(null==X)throw new js__$Boot_HaxeError("Enum not found "+K);var Y=this.unserializeEnum(X,this.unserialize());return this.cache.push(Y),Y;case 120:throw js__$Boot_HaxeError.wrap(this.unserialize());case 121:var Z=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<Z)throw new js__$Boot_HaxeError("Invalid string length");var Q=HxOverrides.substr(this.buf,this.pos,Z);return this.pos+=Z,Q=decodeURIComponent(Q.split("+").join(" ")),this.scache.push(Q),Q;case 122:return 0}throw this.pos--,new js__$Boot_HaxeError("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:haxe_Unserializer};var haxe_ds_IntMap=$hxClasses["haxe.ds.IntMap"]=function(){this.h={}};haxe_ds_IntMap.__name__=!0,haxe_ds_IntMap.__interfaces__=[haxe_IMap],haxe_ds_IntMap.prototype={h:null,keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return HxOverrides.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},__class__:haxe_ds_IntMap};var haxe_ds_List=$hxClasses["haxe.ds.List"]=function(){this.length=0};haxe_ds_List.__name__=!0,haxe_ds_List.prototype={h:null,q:null,length:null,add:function(e){var t=new haxe_ds__$List_ListNode(e,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++},iterator:function(){return new haxe_ds__$List_ListIterator(this.h)},__class__:haxe_ds_List};var haxe_ds__$List_ListNode=$hxClasses["haxe.ds._List.ListNode"]=function(e,t){this.item=e,this.next=t};haxe_ds__$List_ListNode.__name__=!0,haxe_ds__$List_ListNode.prototype={item:null,next:null,__class__:haxe_ds__$List_ListNode};var haxe_ds__$List_ListIterator=$hxClasses["haxe.ds._List.ListIterator"]=function(e){this.head=e};haxe_ds__$List_ListIterator.__name__=!0,haxe_ds__$List_ListIterator.prototype={head:null,hasNext:function(){return null!=this.head},next:function(){var e=this.head.item;return this.head=this.head.next,e},__class__:haxe_ds__$List_ListIterator};var haxe_ds_ObjectMap=$hxClasses["haxe.ds.ObjectMap"]=function(){this.h={__keys__:{}}};haxe_ds_ObjectMap.__name__=!0,haxe_ds_ObjectMap.__interfaces__=[haxe_IMap],haxe_ds_ObjectMap.prototype={h:null,set:function(e,t){var a=e.__id__||(e.__id__=++haxe_ds_ObjectMap.count);this.h[a]=t,this.h.__keys__[a]=e},__class__:haxe_ds_ObjectMap};var haxe_ds_StringMap=$hxClasses["haxe.ds.StringMap"]=function(){this.h={}};haxe_ds_StringMap.__name__=!0,haxe_ds_StringMap.__interfaces__=[haxe_IMap],haxe_ds_StringMap.prototype={h:null,rh:null,setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},existsReserved:function(e){return null!=this.rh&&this.rh.hasOwnProperty("$"+e)},__class__:haxe_ds_StringMap};var haxe_io_Bytes=$hxClasses["haxe.io.Bytes"]=function(e){this.length=e.byteLength,this.b=new Uint8Array(e),(this.b.bufferValue=e).hxBytes=this,e.bytes=this.b};haxe_io_Bytes.__name__=!0,haxe_io_Bytes.ofString=function(e){for(var t=[],a=0;a<e.length;){var r=e.charCodeAt(a++);55296<=r&&r<=56319&&(r=r-55232<<10|1023&e.charCodeAt(a++)),r<=127?t.push(r):(r<=2047?t.push(192|r>>6):(r<=65535?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|r>>12&63)),t.push(128|r>>6&63)),t.push(128|63&r))}return new haxe_io_Bytes(new Uint8Array(t).buffer)},haxe_io_Bytes.ofData=function(e){var t=e.hxBytes;return null!=t?t:new haxe_io_Bytes(e)},haxe_io_Bytes.prototype={length:null,b:null,data:null,blit:function(e,t,a,r){if(e<0||a<0||r<0||e+r>this.length||a+r>t.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);0==a&&r==t.b.byteLength?this.b.set(t.b,e):this.b.set(t.b.subarray(a,a+r),e)},sub:function(e,t){if(e<0||t<0||e+t>this.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);return new haxe_io_Bytes(this.b.buffer.slice(e+this.b.byteOffset,e+this.b.byteOffset+t))},getDouble:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat64(e,!0)},getFloat:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat32(e,!0)},setDouble:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat64(e,t,!0)},setFloat:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat32(e,t,!0)},getUInt16:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getUint16(e,!0)},getInt32:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getInt32(e,!0)},setInt32:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(e,t,!0)},getString:function(e,t){if(e<0||t<0||e+t>this.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);for(var a="",r=this.b,i=String.fromCharCode,s=e,n=e+t;s<n;){var _=r[s++];if(_<128){if(0==_)break;a+=i(_)}else if(_<224)a+=i((63&_)<<6|127&r[s++]);else if(_<240){a+=i((31&_)<<12|(127&r[s++])<<6|127&r[s++])}else{var h=(15&_)<<18|(127&r[s++])<<12|(127&r[s++])<<6|127&r[s++];a+=i(55232+(h>>10)),a+=i(1023&h|56320)}}return a},toString:function(){return this.getString(0,this.length)},__class__:haxe_io_Bytes};var haxe_io_BytesBuffer=$hxClasses["haxe.io.BytesBuffer"]=function(){this.pos=0,this.size=0};haxe_io_BytesBuffer.__name__=!0,haxe_io_BytesBuffer.prototype={buffer:null,view:null,u8:null,pos:null,size:null,addByte:function(e){this.pos==this.size&&this.grow(1),this.view.setUint8(this.pos++,e)},addBytes:function(e,t,a){if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);if(this.pos+a>this.size&&this.grow(a),0!=this.size){var r=new Uint8Array(e.b.buffer,e.b.byteOffset+t,a);this.u8.set(r,this.pos),this.pos+=a}},grow:function(e){for(var t=this.pos+e,a=0==this.size?16:this.size;a<t;)a=3*a>>1;var r=new ArrayBuffer(a),i=new Uint8Array(r);0<this.size&&i.set(this.u8),this.size=a,this.buffer=r,this.u8=i,this.view=new DataView(this.buffer)},getBytes:function(){if(0==this.size)return new haxe_io_Bytes(new ArrayBuffer(0));var e=new haxe_io_Bytes(this.buffer);return e.length=this.pos,e},__class__:haxe_io_BytesBuffer};var haxe_io_Input=$hxClasses["haxe.io.Input"]=function(){};haxe_io_Input.__name__=!0,haxe_io_Input.prototype={bigEndian:null,readByte:function(){throw new js__$Boot_HaxeError("Not implemented")},readBytes:function(e,t,a){var r=a,i=e.b;if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);try{for(;0<r;)i[t]=this.readByte(),++t,--r}catch(e){var s=e instanceof js__$Boot_HaxeError?e.val:e;if(!(s instanceof haxe_io_Eof))throw e}return a-r},readFullBytes:function(e,t,a){for(;0<a;){var r=this.readBytes(e,t,a);if(0==r)throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);t+=r,a-=r}},read:function(e){for(var t=new haxe_io_Bytes(new ArrayBuffer(e)),a=0;0<e;){var r=this.readBytes(t,a,e);if(0==r)throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);a+=r,e-=r}return t},readInt32:function(){var e=this.readByte(),t=this.readByte(),a=this.readByte(),r=this.readByte();return this.bigEndian?r|a<<8|t<<16|e<<24:e|t<<8|a<<16|r<<24},readString:function(e){var t=new haxe_io_Bytes(new ArrayBuffer(e));return this.readFullBytes(t,0,e),t.toString()},__class__:haxe_io_Input};var haxe_io_BytesInput=$hxClasses["haxe.io.BytesInput"]=function(e,t,a){if(null==t&&(t=0),null==a&&(a=e.length-t),t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);this.b=e.b,this.pos=t,this.len=a,this.totlen=a};haxe_io_BytesInput.__name__=!0,haxe_io_BytesInput.__super__=haxe_io_Input,haxe_io_BytesInput.prototype=$extend(haxe_io_Input.prototype,{b:null,pos:null,len:null,totlen:null,set_position:function(e){return e<0?e=0:e>this.totlen&&(e=this.totlen),this.len=this.totlen-e,this.pos=e},readByte:function(){if(0==this.len)throw new js__$Boot_HaxeError(new haxe_io_Eof);return this.len--,this.b[this.pos++]},readBytes:function(e,t,a){if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);if(0==this.len&&0<a)throw new js__$Boot_HaxeError(new haxe_io_Eof);this.len<a&&(a=this.len);for(var r=this.b,i=e.b,s=0,n=a;s<n;){var _=s++;i[t+_]=r[this.pos+_]}return this.pos+=a,this.len-=a,a},__class__:haxe_io_BytesInput});var haxe_io_Output=$hxClasses["haxe.io.Output"]=function(){};haxe_io_Output.__name__=!0,haxe_io_Output.prototype={bigEndian:null,writeByte:function(e){throw new js__$Boot_HaxeError("Not implemented")},writeBytes:function(e,t,a){if(t<0||a<0||t+a>e.length)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);for(var r=e.b,i=a;0<i;)this.writeByte(r[t]),++t,--i;return a},write:function(e){for(var t=e.length,a=0;0<t;){var r=this.writeBytes(e,a,t);if(0==r)throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);a+=r,t-=r}},writeFloat:function(e){this.writeInt32(haxe_io_FPHelper.floatToI32(e))},writeInt32:function(e){this.bigEndian?(this.writeByte(e>>>24),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8&255),this.writeByte(e>>16&255),this.writeByte(e>>>24))},__class__:haxe_io_Output};var haxe_io_BytesOutput=$hxClasses["haxe.io.BytesOutput"]=function(){this.b=new haxe_io_BytesBuffer};haxe_io_BytesOutput.__name__=!0,haxe_io_BytesOutput.__super__=haxe_io_Output,haxe_io_BytesOutput.prototype=$extend(haxe_io_Output.prototype,{b:null,writeByte:function(e){this.b.addByte(e)},writeBytes:function(e,t,a){return this.b.addBytes(e,t,a),a},getBytes:function(){return this.b.getBytes()},__class__:haxe_io_BytesOutput});var haxe_io_Eof=$hxClasses["haxe.io.Eof"]=function(){};haxe_io_Eof.__name__=!0,haxe_io_Eof.prototype={toString:function(){return"Eof"},__class__:haxe_io_Eof};var haxe_io_Error=$hxEnums["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:$estr},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:$estr},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:$estr},Custom:($_=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}},$_.__params__=["e"],$_)},haxe_io_FPHelper=$hxClasses["haxe.io.FPHelper"]=function(){};haxe_io_FPHelper.__name__=!0,haxe_io_FPHelper.i32ToFloat=function(e){return haxe_io_FPHelper.helper.setInt32(0,e,!0),haxe_io_FPHelper.helper.getFloat32(0,!0)},haxe_io_FPHelper.floatToI32=function(e){return haxe_io_FPHelper.helper.setFloat32(0,e,!0),haxe_io_FPHelper.helper.getInt32(0,!0)};var haxe_io_Path=$hxClasses["haxe.io.Path"]=function(){};haxe_io_Path.__name__=!0,haxe_io_Path.normalize=function(e){if("/"==(e=e.split("\\").join("/")))return"/";for(var t=[],a=0,r=e.split("/");a<r.length;){var i=r[a];++a,".."==i&&0<t.length&&".."!=t[t.length-1]?t.pop():"."!=i&&t.push(i)}for(var s=t.join("/"),n="",_=!1,h=!1,o=0,l=s.length;o<l;){var u=o++,d=s.charCodeAt(u);switch(d){case 47:if(_){var c=d;_=!1,h&&(n+="/",h=!1),n+=String.fromCharCode(c)}else h=!0;break;case 58:n+=":",_=!0;break;default:var g=d;_=!1,h&&(n+="/",h=!1),n+=String.fromCharCode(g)}}return n};var js__$Boot_HaxeError=$hxClasses["js._Boot.HaxeError"]=function(e){Error.call(this),this.val=e,Error.captureStackTrace&&Error.captureStackTrace(this,js__$Boot_HaxeError)};js__$Boot_HaxeError.__name__=!0,js__$Boot_HaxeError.wrap=function(e){return e instanceof Error?e:new js__$Boot_HaxeError(e)},js__$Boot_HaxeError.__super__=Error,js__$Boot_HaxeError.prototype=$extend(Error.prototype,{val:null,__class__:js__$Boot_HaxeError});var js_Boot=$hxClasses["js.Boot"]=function(){};js_Boot.__name__=!0,js_Boot.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var a=js_Boot.__nativeClassName(e);return null!=a?js_Boot.__resolveNativeClass(a):null},js_Boot.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var a=typeof e;switch("function"==a&&(e.__name__||e.__ename__)&&(a="object"),a){case"function":return"<function>";case"object":if(e.__enum__){var r=$hxEnums[e.__enum__],i=r.__constructs__[e._hx_index],s=r[i];if(s.__params__){t+="\t";for(var n=i+"(",_=[],h=0,o=s.__params__;h<o.length;){var l=o[h];++h,_.push(js_Boot.__string_rec(e[l],t))}return n+_.join(",")+")"}return i}if(e instanceof Array){var u="[";t+="\t";for(var d=0,c=e.length;d<c;){var g=d++;u+=(0<g?",":"")+js_Boot.__string_rec(e[g],t)}return u+="]"}var p;try{p=e.toString}catch(e){e instanceof js__$Boot_HaxeError&&e.val;return"???"}if(null!=p&&p!=Object.toString&&"function"==typeof p){var f=e.toString();if("[object Object]"!=f)return f}var m=null,k="{\n";t+="\t";var v=null!=e.hasOwnProperty;for(var m in e)v&&!e.hasOwnProperty(m)||"prototype"!=m&&"__class__"!=m&&"__super__"!=m&&"__interfaces__"!=m&&"__properties__"!=m&&(2!=k.length&&(k+=", \n"),k+=t+m+" : "+js_Boot.__string_rec(e[m],t));return k+="\n"+(t=t.substring(1))+"}";case"string":return e;default:return String(e)}},js_Boot.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var a=e.__interfaces__;if(null!=a)for(var r=0,i=a.length;r<i;){var s=a[r++];if(s==t||js_Boot.__interfLoop(s,t))return!0}return js_Boot.__interfLoop(e.__super__,t)},js_Boot.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array&&null==e.__enum__;case Bool:return"boolean"==typeof e;case Dynamic:return!0;case Float:return"number"==typeof e;case Int:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(js_Boot.__interfLoop(js_Boot.getClass(e),t))return!0}else if("object"==typeof t&&js_Boot.__isNativeObj(t)&&e instanceof t)return!0;return t==Class&&null!=e.__name__||(t==Enum&&null!=e.__ename__||$hxEnums[e.__enum__]==t)}},js_Boot.__cast=function(e,t){if(js_Boot.__instanceof(e,t))return e;throw new js__$Boot_HaxeError("Cannot cast "+Std.string(e)+" to "+Std.string(t))},js_Boot.__nativeClassName=function(e){var t=js_Boot.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},js_Boot.__isNativeObj=function(e){return null!=js_Boot.__nativeClassName(e)},js_Boot.__resolveNativeClass=function(e){return $global[e]};var js_html_compat_ArrayBuffer=$hxClasses["js.html.compat.ArrayBuffer"]=function(e){if(e instanceof Array&&null==e.__enum__)this.a=e,this.byteLength=e.length;else{var t=e;this.a=[];for(var a=0,r=t;a<r;){var i=a++;this.a[i]=0}this.byteLength=t}};js_html_compat_ArrayBuffer.__name__=!0,js_html_compat_ArrayBuffer.sliceImpl=function(e,t){var a=new Uint8Array(this,e,null==t?null:t-e),r=new ArrayBuffer(a.byteLength);return new Uint8Array(r).set(a),r},js_html_compat_ArrayBuffer.prototype={byteLength:null,a:null,slice:function(e,t){return new js_html_compat_ArrayBuffer(this.a.slice(e,t))},__class__:js_html_compat_ArrayBuffer};var js_html_compat_DataView=$hxClasses["js.html.compat.DataView"]=function(e,t,a){if(this.buf=e,this.offset=null==t?0:t,this.length=null==a?e.byteLength-this.offset:a,this.offset<0||this.length<0||this.offset+this.length>e.byteLength)throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);this.byteLength=this.length,this.byteOffset=this.offset,this.buffer=this.buf};js_html_compat_DataView.__name__=!0,js_html_compat_DataView.prototype={buf:null,offset:null,length:null,byteLength:null,byteOffset:null,buffer:null,getInt8:function(e){var t=this.buf.a[this.offset+e];return 128<=t?t-256:t},getUint8:function(e){return this.buf.a[this.offset+e]},getInt16:function(e,t){var a=this.getUint16(e,t);return 32768<=a?a-65536:a},getUint16:function(e,t){return t?this.buf.a[this.offset+e]|this.buf.a[this.offset+e+1]<<8:this.buf.a[this.offset+e]<<8|this.buf.a[this.offset+e+1]},getInt32:function(e,t){var a=this.offset+e,r=this.buf.a[a++],i=this.buf.a[a++],s=this.buf.a[a++],n=this.buf.a[a++];return t?r|i<<8|s<<16|n<<24:n|s<<8|i<<16|r<<24},getUint32:function(e,t){var a=this.getInt32(e,t);return a<0?a+4294967296:a},getFloat32:function(e,t){var a=this.getInt32(e,t),r=1-(a>>>31<<1),i=a>>23&255;return 255==i?0==(8388607&a)?0<r?1/0:-1/0:NaN:r*(0==i?(8388607&a)<<1:8388607&a|8388608)*Math.pow(2,i-150)},getFloat64:function(e,t){var a=this.getInt32(e,t),r=this.getInt32(e+4,t),i=t?a:r,s=t?r:a,n=1-(s>>>31<<1),_=s>>20&2047;if(2047==_)return 0==i&&0==(1048575&s)?0<n?1/0:-1/0:NaN;var h=2220446049250313e-31*(4294967296*(1048575&s)+2147483648*(i>>>31)+(2147483647&i));return 0==_?h*=2:h+=1,n*h*Math.pow(2,_-1023)},setInt8:function(e,t){this.buf.a[e+this.offset]=t<0?t+128&255:255&t},setUint8:function(e,t){this.buf.a[e+this.offset]=255&t},setInt16:function(e,t,a){this.setUint16(e,t<0?t+65536:t,a)},setUint16:function(e,t,a){var r=e+this.offset;a?(this.buf.a[r++]=255&t,this.buf.a[r]=t>>8&255):(this.buf.a[r++]=t>>8&255,this.buf.a[r]=255&t)},setInt32:function(e,t,a){this.setUint32(e,t,a)},setUint32:function(e,t,a){var r=e+this.offset;a?(this.buf.a[r++]=255&t,this.buf.a[r++]=t>>8&255,this.buf.a[r++]=t>>16&255,this.buf.a[r++]=t>>>24):(this.buf.a[r++]=t>>>24,this.buf.a[r++]=t>>16&255,this.buf.a[r++]=t>>8&255,this.buf.a[r++]=255&t)},setFloat32:function(e,t,a){var r;if(0==t)r=0;else{var i=t<0?-t:t,s=Math.floor(Math.log(i)/.6931471805599453);127<s?r=2139095040:(s<=-127?(s=-127,i*=71362384635298e31):i=8388608*(i/Math.pow(2,s)-1),r=(t<0?-2147483648:0)|s+127<<23|Math.round(i))}this.setUint32(e,r,a)},setFloat64:function(e,t,a){var r=haxe_io_FPHelper.i64tmp;if(0==t)r.low=0,r.high=0;else if(isFinite(t)){var i=t<0?-t:t,s=Math.floor(Math.log(i)/.6931471805599453);if(1023<s)r.low=-1,r.high=2146435071;else{s<=-1023?(s=-1023,i/=22250738585072014e-324):i=i/Math.pow(2,s)-1;var n=Math.round(4503599627370496*i),_=0|n,h=n/4294967296|0;r.low=_,r.high=(t<0?-2147483648:0)|s+1023<<20|h}}else r.low=0,r.high=0<t?2146435072:-1048576;var o=r;a?(this.setUint32(e,o.low,!0),this.setUint32(e+4,o.high,!0)):(this.setUint32(e,o.high,!1),this.setUint32(e+4,o.low,!1))},__class__:js_html_compat_DataView};var js_html_compat_Float32Array=$hxClasses["js.html.compat.Float32Array"]=function(){};js_html_compat_Float32Array.__name__=!0,js_html_compat_Float32Array._new=function(e,t,a){var r;if("number"==typeof e){r=[];for(var i=0,s=e;i<s;){r[i++]=0}r.byteLength=r.length<<2;for(var n=[],_=r.byteOffset=0,h=r.length<<2;_<h;){_++;n.push(0)}r.buffer=new js_html_compat_ArrayBuffer(n)}else if(e instanceof js_html_compat_ArrayBuffer){var o=e;null==t&&(t=0),null==a&&(a=o.byteLength-t>>2),r=[];for(var l=0,u=a;l<u;){l++;var d=o.a[t++]|o.a[t++]<<8|o.a[t++]<<16|o.a[t++]<<24;r.push(haxe_io_FPHelper.i32ToFloat(d))}r.byteLength=r.length<<2,r.byteOffset=t,r.buffer=o}else{if(!(e instanceof Array&&null==e.__enum__))throw new js__$Boot_HaxeError("TODO "+Std.string(e));r=e.slice();for(var c=[],g=0;g<r.length;){var p=r[g];++g;var f=haxe_io_FPHelper.floatToI32(p);c.push(255&f),c.push(f>>8&255),c.push(f>>16&255),c.push(f>>>24)}r.byteLength=r.length<<2,r.byteOffset=0,r.buffer=new js_html_compat_ArrayBuffer(c)}return r.subarray=js_html_compat_Float32Array._subarray,r.set=js_html_compat_Float32Array._set,r},js_html_compat_Float32Array._set=function(e,t){if(null==t&&(t=0),e.buffer instanceof js_html_compat_ArrayBuffer){var a=e;if(e.byteLength+t>this.byteLength)throw new js__$Boot_HaxeError("set() outside of range");for(var r=0,i=e.byteLength;r<i;){var s=r++;this[s+t]=a[s]}}else{if(!(e instanceof Array&&null==e.__enum__))throw new js__$Boot_HaxeError("TODO");var n=e;if(n.length+t>this.byteLength)throw new js__$Boot_HaxeError("set() outside of range");for(var _=0,h=n.length;_<h;){var o=_++;this[o+t]=n[o]}}},js_html_compat_Float32Array._subarray=function(e,t){var a=js_html_compat_Float32Array._new(this.slice(e,t));return a.byteOffset=4*e,a};var js_html_compat_Uint8Array=$hxClasses["js.html.compat.Uint8Array"]=function(){};js_html_compat_Uint8Array.__name__=!0,js_html_compat_Uint8Array._new=function(e,t,a){var r;if("number"==typeof e){r=[];for(var i=0,s=e;i<s;){r[i++]=0}r.byteLength=r.length,r.byteOffset=0,r.buffer=new js_html_compat_ArrayBuffer(r)}else if(e instanceof js_html_compat_ArrayBuffer){var n=e;null==t&&(t=0),null==a&&(a=n.byteLength-t),(r=0==t?n.a:n.a.slice(t,t+a)).byteLength=r.length,r.byteOffset=t,r.buffer=n}else{if(!(e instanceof Array&&null==e.__enum__))throw new js__$Boot_HaxeError("TODO "+Std.string(e));(r=e.slice()).byteLength=r.length,r.byteOffset=0,r.buffer=new js_html_compat_ArrayBuffer(r)}return r.subarray=js_html_compat_Uint8Array._subarray,r.set=js_html_compat_Uint8Array._set,r},js_html_compat_Uint8Array._set=function(e,t){if(null==t&&(t=0),e.buffer instanceof js_html_compat_ArrayBuffer){var a=e;if(e.byteLength+t>this.byteLength)throw new js__$Boot_HaxeError("set() outside of range");for(var r=0,i=e.byteLength;r<i;){var s=r++;this[s+t]=a[s]}}else{if(!(e instanceof Array&&null==e.__enum__))throw new js__$Boot_HaxeError("TODO");var n=e;if(n.length+t>this.byteLength)throw new js__$Boot_HaxeError("set() outside of range");for(var _=0,h=n.length;_<h;){var o=_++;this[o+t]=n[o]}}},js_html_compat_Uint8Array._subarray=function(e,t){var a=js_html_compat_Uint8Array._new(this.slice(e,t));return a.byteOffset=e,a};var kha__$Assets_ImageList=$hxClasses["kha._Assets.ImageList"]=function(){this.names=["color_wheel"],this.color_wheelDescription={name:"color_wheel",original_height:270,original_width:360,files:["color_wheel.png"],type:"image"},this.color_wheelName="color_wheel",this.color_wheel=null};kha__$Assets_ImageList.__name__=!0,kha__$Assets_ImageList.prototype={get:function(e){return Reflect.field(this,e)},color_wheel:null,color_wheelName:null,color_wheelDescription:null,color_wheelLoad:function(t,e){var a;if(null!=e)a=e;else{var r=haxe_Log.trace,i={fileName:"kha/internal/AssetsBuilder.hx",lineNumber:130,className:"kha._Assets.ImageList",methodName:"color_wheelLoad"};a=function(e){r(e,i)}}kha_Assets.loadImage("color_wheel",function(e){t()},a,{fileName:"kha/internal/AssetsBuilder.hx",lineNumber:130,className:"kha._Assets.ImageList",methodName:"color_wheelLoad"})},color_wheelUnload:function(){this.color_wheel.unload(),this.color_wheel=null},names:null,__class__:kha__$Assets_ImageList};var kha__$Assets_SoundList=$hxClasses["kha._Assets.SoundList"]=function(){this.names=[]};kha__$Assets_SoundList.__name__=!0,kha__$Assets_SoundList.prototype={get:function(e){return Reflect.field(this,e)},names:null,__class__:kha__$Assets_SoundList};var kha__$Assets_BlobList=$hxClasses["kha._Assets.BlobList"]=function(){this.names=[]};kha__$Assets_BlobList.__name__=!0,kha__$Assets_BlobList.prototype={get:function(e){return Reflect.field(this,e)},names:null,__class__:kha__$Assets_BlobList};var kha__$Assets_FontList=$hxClasses["kha._Assets.FontList"]=function(){this.names=["DroidSans"],this.DroidSansDescription={name:"DroidSans",files:["DroidSans.ttf"],type:"font"},this.DroidSansName="DroidSans",this.DroidSans=null};kha__$Assets_FontList.__name__=!0,kha__$Assets_FontList.prototype={get:function(e){return Reflect.field(this,e)},DroidSans:null,DroidSansName:null,DroidSansDescription:null,DroidSansLoad:function(t,e){var a;if(null!=e)a=e;else{var r=haxe_Log.trace,i={fileName:"kha/internal/AssetsBuilder.hx",lineNumber:142,className:"kha._Assets.FontList",methodName:"DroidSansLoad"};a=function(e){r(e,i)}}kha_Assets.loadFont("DroidSans",function(e){t()},a,{fileName:"kha/internal/AssetsBuilder.hx",lineNumber:142,className:"kha._Assets.FontList",methodName:"DroidSansLoad"})},DroidSansUnload:function(){this.DroidSans.unload(),this.DroidSans=null},names:null,__class__:kha__$Assets_FontList};var kha__$Assets_VideoList=$hxClasses["kha._Assets.VideoList"]=function(){this.names=[]};kha__$Assets_VideoList.__name__=!0,kha__$Assets_VideoList.prototype={get:function(e){return Reflect.field(this,e)},names:null,__class__:kha__$Assets_VideoList};var kha_Assets=$hxClasses["kha.Assets"]=function(){};kha_Assets.__name__=!0,kha_Assets.loadEverything=function(e,t,a,r){for(var i=0,s=0,n=Type.getInstanceFields(kha__$Assets_BlobList);s<n.length;){var _=n[s];++s,StringTools.endsWith(_,"Load")&&(i+=1)}for(var h=0,o=Type.getInstanceFields(kha__$Assets_ImageList);h<o.length;){var l=o[h];++h,StringTools.endsWith(l,"Load")&&(i+=1)}for(var u=0,d=Type.getInstanceFields(kha__$Assets_SoundList);u<d.length;){var c=d[u];++u,StringTools.endsWith(c,"Load")&&(i+=1)}for(var g=0,p=Type.getInstanceFields(kha__$Assets_FontList);g<p.length;){var f=p[g];++g,StringTools.endsWith(f,"Load")&&(i+=1)}for(var m=0,k=Type.getInstanceFields(kha__$Assets_VideoList);m<k.length;){var v=k[m];++m,StringTools.endsWith(v,"Load")&&(i+=1)}if(0!=i){for(var S=i,b=function(){S-=1,kha_Assets.progress=1-S/i,0==S&&e()},y=0,x=Type.getInstanceFields(kha__$Assets_BlobList);y<x.length;){var w=x[y];if(++y,StringTools.endsWith(w,"Load")){var T=HxOverrides.substr(w,0,w.length-4),I=Reflect.field(kha_Assets.blobs,T+"Description");null==t||t(I)?Reflect.field(kha_Assets.blobs,w)(b,function(e){if(null==r)haxe_Log.trace;b()}):b()}}for(var E=0,C=Type.getInstanceFields(kha__$Assets_ImageList);E<C.length;){var B=C[E];if(++E,StringTools.endsWith(B,"Load")){var L=HxOverrides.substr(B,0,B.length-4),P=Reflect.field(kha_Assets.images,L+"Description");null==t||t(P)?Reflect.field(kha_Assets.images,B)(b,function(e){if(null==r)haxe_Log.trace;b()}):b()}}for(var A=0,$=Type.getInstanceFields(kha__$Assets_SoundList);A<$.length;){var N=[$[A]];if(++A,StringTools.endsWith(N[0],"Load")){var R=HxOverrides.substr(N[0],0,N[0].length-4),F=[Reflect.field(kha_Assets.sounds,R+"Description")];null==t||t(F[0])?Reflect.field(kha_Assets.sounds,N[0])(function(e,t){return function(){null==a||a(e[0])?Reflect.field(kha_Assets.sounds,t[0].substring(0,t[0].length-4)).uncompress(b):b()}}(F,N),null!=r?r:function(t,a){return function(e){a[0](e,t[0])}}([{fileName:"kha/Assets.hx",lineNumber:172,className:"kha.Assets",methodName:"loadEverything"}],[haxe_Log.trace])):b()}}for(var V=0,M=Type.getInstanceFields(kha__$Assets_FontList);V<M.length;){var H=M[V];if(++V,StringTools.endsWith(H,"Load")){var O=HxOverrides.substr(H,0,H.length-4),U=Reflect.field(kha_Assets.fonts,O+"Description");null==t||t(U)?Reflect.field(kha_Assets.fonts,H)(b,function(e){if(null==r)haxe_Log.trace;b()}):b()}}for(var D=0,G=Type.getInstanceFields(kha__$Assets_VideoList);D<G.length;){var z=G[D];if(++D,StringTools.endsWith(z,"Load")){var W=HxOverrides.substr(z,0,z.length-4),j=Reflect.field(kha_Assets.videos,W+"Description");null==t||t(j)?Reflect.field(kha_Assets.videos,z)(b,function(e){if(null==r)haxe_Log.trace;b()}):b()}}}else e()},kha_Assets.loadImage=function(t,a,e,r){var i,s=Reflect.field(kha_Assets.images,t+"Description");if(null!=e)i=e;else{var n=haxe_Log.trace,_=r;i=function(e){n(e,_)}}kha_LoaderImpl.loadImageFromDescription(s,function(e){kha_Assets.images[t]=e,a(e)},i)},kha_Assets.loadImageFromPath=function(e,t,a,r,i){var s,n={files:[e],readable:t};if(null!=r)s=r;else{var _=haxe_Log.trace,h=i;s=function(e){_(e,h)}}kha_LoaderImpl.loadImageFromDescription(n,a,s)},kha_Assets.get_imageFormats=function(){return kha_LoaderImpl.getImageFormats()},kha_Assets.loadBlob=function(t,a,e,r){var i,s=Reflect.field(kha_Assets.blobs,t+"Description");if(null!=e)i=e;else{var n=haxe_Log.trace,_=r;i=function(e){n(e,_)}}kha_LoaderImpl.loadBlobFromDescription(s,function(e){kha_Assets.blobs[t]=e,a(e)},i)},kha_Assets.loadBlobFromPath=function(e,t,a,r){var i,s={files:[e]};if(null!=a)i=a;else{var n=haxe_Log.trace,_=r;i=function(e){n(e,_)}}kha_LoaderImpl.loadBlobFromDescription(s,t,i)},kha_Assets.loadSound=function(t,a,e,r){var i,s=Reflect.field(kha_Assets.sounds,t+"Description");if(null!=e)i=e;else{var n=haxe_Log.trace,_=r;i=function(e){n(e,_)}}kha_LoaderImpl.loadSoundFromDescription(s,function(e){kha_Assets.sounds[t]=e,a(e)},i)},kha_Assets.loadSoundFromPath=function(e,t,a,r){var i,s={files:[e]};if(null!=a)i=a;else{var n=haxe_Log.trace,_=r;i=function(e){n(e,_)}}kha_LoaderImpl.loadSoundFromDescription(s,t,i)},kha_Assets.get_soundFormats=function(){return kha_LoaderImpl.getSoundFormats()},kha_Assets.loadFont=function(t,a,e,r){var i,s=Reflect.field(kha_Assets.fonts,t+"Description");if(null!=e)i=e;else{var n=haxe_Log.trace,_=r;i=function(e){n(e,_)}}kha_LoaderImpl.loadFontFromDescription(s,function(e){kha_Assets.fonts[t]=e,a(e)},i)},kha_Assets.loadFontFromPath=function(e,t,a,r){var i,s={files:[e]};if(null!=a)i=a;else{var n=haxe_Log.trace,_=r;i=function(e){n(e,_)}}kha_LoaderImpl.loadFontFromDescription(s,t,i)},kha_Assets.get_fontFormats=function(){return["ttf"]},kha_Assets.loadVideo=function(t,a,e,r){var i,s=Reflect.field(kha_Assets.videos,t+"Description");if(null!=e)i=e;else{var n=haxe_Log.trace,_=r;i=function(e){n(e,_)}}kha_LoaderImpl.loadVideoFromDescription(s,function(e){kha_Assets.videos[t]=e,a(e)},i)},kha_Assets.loadVideoFromPath=function(e,t,a,r){var i,s={files:[e]};if(null!=a)i=a;else{var n=haxe_Log.trace,_=r;i=function(e){n(e,_)}}kha_LoaderImpl.loadVideoFromDescription(s,t,i)},kha_Assets.get_videoFormats=function(){return kha_LoaderImpl.getVideoFormats()},kha_Assets.reporter=function(e,t){if(null!=e)return e;var a=haxe_Log.trace,r=t;return function(e){a(e,r)}};var kha_Canvas=$hxClasses["kha.Canvas"]=function(){};kha_Canvas.__name__=!0,kha_Canvas.prototype={get_g4:null,get_g2:null,get_g1:null,get_height:null,get_width:null,width:null,height:null,g1:null,g2:null,g4:null,__class__:kha_Canvas};var kha__$Color_Color_$Impl_$=$hxClasses["kha._Color.Color_Impl_"]=$hx_exports.kha._Color.Color_Impl_={};kha__$Color_Color_$Impl_$.__name__=!0,kha__$Color_Color_$Impl_$.fromValue=function(e){return kha__$Color_Color_$Impl_$._new(e)},kha__$Color_Color_$Impl_$.fromBytes=function(e,t,a,r){return null==r&&(r=255),kha__$Color_Color_$Impl_$._new(r<<24|e<<16|t<<8|a)},kha__$Color_Color_$Impl_$.fromFloats=function(e,t,a,r){return null==r&&(r=1),kha__$Color_Color_$Impl_$._new((255*r|0)<<24|(255*e|0)<<16|(255*t|0)<<8|255*a|0)},kha__$Color_Color_$Impl_$.fromString=function(e){if(7!=e.length&&9!=e.length||35!=e.charCodeAt(0))throw new js__$Boot_HaxeError("Invalid Color string: '"+e+"'");var t=Std.parseInt("0x"+HxOverrides.substr(e,1,null));return 7==e.length&&(t+=-16777216),kha__$Color_Color_$Impl_$._new(t)},kha__$Color_Color_$Impl_$._new=function(e){return e},kha__$Color_Color_$Impl_$.get_value=function(e){return e},kha__$Color_Color_$Impl_$.set_value=function(e,t){return t},kha__$Color_Color_$Impl_$.get_Rb=function(e){return(16711680&e)>>>16},kha__$Color_Color_$Impl_$.get_Gb=function(e){return(65280&e)>>>8},kha__$Color_Color_$Impl_$.get_Bb=function(e){return 255&e},kha__$Color_Color_$Impl_$.get_Ab=function(e){return e>>>24},kha__$Color_Color_$Impl_$.set_Rb=function(e,t){return e=e>>>24<<24|t<<16|(65280&e)>>>8<<8|255&e,t},kha__$Color_Color_$Impl_$.set_Gb=function(e,t){return e=e>>>24<<24|(16711680&e)>>>16<<16|t<<8|255&e,t},kha__$Color_Color_$Impl_$.set_Bb=function(e,t){return e=e>>>24<<24|(16711680&e)>>>16<<16|(65280&e)>>>8<<8|t,t},kha__$Color_Color_$Impl_$.set_Ab=function(e,t){return e=t<<24|(16711680&e)>>>16<<16|(65280&e)>>>8<<8|255&e,t},kha__$Color_Color_$Impl_$.get_R=function(e){return.00392156862745098*((16711680&e)>>>16)},kha__$Color_Color_$Impl_$.get_G=function(e){return.00392156862745098*((65280&e)>>>8)},kha__$Color_Color_$Impl_$.get_B=function(e){return.00392156862745098*(255&e)},kha__$Color_Color_$Impl_$.get_A=function(e){return.00392156862745098*(e>>>24)},kha__$Color_Color_$Impl_$.set_R=function(e,t){return e=(.00392156862745098*(e>>>24)*255|0)<<24|(255*t|0)<<16|(.00392156862745098*((65280&e)>>>8)*255|0)<<8|.00392156862745098*(255&e)*255|0,t},kha__$Color_Color_$Impl_$.set_G=function(e,t){return e=(.00392156862745098*(e>>>24)*255|0)<<24|(.00392156862745098*((16711680&e)>>>16)*255|0)<<16|(255*t|0)<<8|.00392156862745098*(255&e)*255|0,t},kha__$Color_Color_$Impl_$.set_B=function(e,t){return e=(.00392156862745098*(e>>>24)*255|0)<<24|(.00392156862745098*((16711680&e)>>>16)*255|0)<<16|(.00392156862745098*((65280&e)>>>8)*255|0)<<8|255*t|0,t},kha__$Color_Color_$Impl_$.set_A=function(e,t){return e=(255*t|0)<<24|(.00392156862745098*((16711680&e)>>>16)*255|0)<<16|(.00392156862745098*((65280&e)>>>8)*255|0)<<8|.00392156862745098*(255&e)*255|0,t};var kha_Display=$hxClasses["kha.Display"]=function(e,t){this.num=e,this.isPrimary=t};kha_Display.__name__=!0,kha_Display.init=function(){for(var e=0,t=Krom.displayCount();e<t;){var a=e++;kha_Display.displays.push(new kha_Display(a,Krom.displayIsPrimary(a)))}},kha_Display.get_primary=function(){kha_Display.init();for(var e=0,t=kha_Display.displays;e<t.length;){var a=t[e];if(++e,a.isPrimary)return a}return null},kha_Display.get_all=function(){return kha_Display.init(),kha_Display.displays},kha_Display.prototype={num:null,isPrimary:null,get_available:function(){return!0},get_name:function(){return"Display"},get_x:function(){return Krom.displayX(this.num)},get_y:function(){return Krom.displayY(this.num)},get_width:function(){return Krom.displayWidth(this.num)},get_height:function(){return Krom.displayHeight(this.num)},get_frequency:function(){return 60},get_pixelsPerInch:function(){return Krom.screenDpi()},get_modes:function(){return[]},__class__:kha_Display};var kha_DisplayMode=$hxClasses["kha.DisplayMode"]=function(e,t,a,r){this.width=e,this.height=t,this.frequency=a,this.bitsPerPixel=r};kha_DisplayMode.__name__=!0,kha_DisplayMode.prototype={width:null,height:null,frequency:null,bitsPerPixel:null,__class__:kha_DisplayMode};var kha_FontStyle=$hxClasses["kha.FontStyle"]=function(e,t,a){this.bold=e,this.italic=t,this.underlined=a};kha_FontStyle.__name__=!0,kha_FontStyle.prototype={bold:null,italic:null,underlined:null,getBold:function(){return this.bold},getItalic:function(){return this.italic},getUnderlined:function(){return this.underlined},__class__:kha_FontStyle};var kha_Framebuffer=$hxClasses["kha.Framebuffer"]=function(e,t,a,r,i){this.window=e,this.graphics1=t,this.graphics2=a,this.graphics4=r,this.graphics5=i};kha_Framebuffer.__name__=!0,kha_Framebuffer.__interfaces__=[kha_Canvas],kha_Framebuffer.prototype={window:null,graphics1:null,graphics2:null,graphics4:null,graphics5:null,init:function(e,t,a,r){this.graphics1=e,this.graphics2=t,this.graphics4=a,this.graphics5=r},get_g1:function(){return this.graphics1},get_g2:function(){return this.graphics2},get_g4:function(){return this.graphics4},get_g5:function(){return this.graphics5},width:null,get_width:function(){return kha_System.windowWidth(this.window)},height:null,get_height:function(){return kha_System.windowHeight(this.window)},__class__:kha_Framebuffer};var kha_FramebufferOptions=$hxClasses["kha.FramebufferOptions"]=function(e,t,a,r,i,s){null==s&&(s=1),null==i&&(i=8),null==r&&(r=16),null==a&&(a=32),null==t&&(t=!0),null==e&&(e=60),this.samplesPerPixel=1,this.stencilBufferBits=8,this.depthBufferBits=16,this.colorBufferBits=32,this.verticalSync=!0,this.frequency=60,this.frequency=e,this.verticalSync=t,this.colorBufferBits=a,this.depthBufferBits=r,this.stencilBufferBits=i,this.samplesPerPixel=s};kha_FramebufferOptions.__name__=!0,kha_FramebufferOptions.prototype={frequency:null,verticalSync:null,colorBufferBits:null,depthBufferBits:null,stencilBufferBits:null,samplesPerPixel:null,__class__:kha_FramebufferOptions};var kha_Resource=$hxClasses["kha.Resource"]=function(){};kha_Resource.__name__=!0,kha_Resource.prototype={unload:null,__class__:kha_Resource};var kha_Image=$hxClasses["kha.Image"]=function(e){this.pixels=null,this.texture_=e};kha_Image.__name__=!0,kha_Image.__interfaces__=[kha_Resource,kha_Canvas],kha_Image.getRenderTargetFormat=function(e){switch(e._hx_index){case 0:return 0;case 1:return 5;case 2:return 3;case 3:return 4;case 4:return 1;case 5:return 2;case 6:return 6}},kha_Image.getDepthBufferBits=function(e){switch(e){case 0:return-1;case 1:case 2:case 3:return 24;case 4:return 32;case 5:return 16}},kha_Image.getStencilBufferBits=function(e){switch(e){case 0:case 1:return-1;case 2:case 3:case 4:return 8;case 5:return 0}},kha_Image.getTextureFormat=function(e){switch(e._hx_index){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;case 6:return 7;default:return 1}},kha_Image._fromTexture=function(e){return new kha_Image(e)},kha_Image.fromBytes=function(e,t,a,r,i){null==r&&(r=kha_graphics4_TextureFormat.RGBA32);var s=new kha_Image(null);return s.format=r,s.texture_=Krom.createTextureFromBytes(e.b.bufferValue,t,a,kha_Image.getTextureFormat(r),!0),s},kha_Image.fromBytes3D=function(e,t,a,r,i,s){null==i&&(i=kha_graphics4_TextureFormat.RGBA32);var n=new kha_Image(null);return n.format=i,n.texture_=Krom.createTextureFromBytes3D(e.b.bufferValue,t,a,r,kha_Image.getTextureFormat(i),!0),n},kha_Image.create=function(e,t,a,r){null==a&&(a=kha_graphics4_TextureFormat.RGBA32);var i=new kha_Image(null);return i.format=a,i.texture_=Krom.createTexture(e,t,kha_Image.getTextureFormat(a)),i},kha_Image.create3D=function(e,t,a,r,i){null==r&&(r=kha_graphics4_TextureFormat.RGBA32);var s=new kha_Image(null);return s.format=r,s.texture_=Krom.createTexture3D(e,t,a,kha_Image.getTextureFormat(r)),s},kha_Image.createRenderTarget=function(e,t,a,r,i,s){null==s&&(s=0),null==i&&(i=1),null==r&&(r=0),null==a&&(a=kha_graphics4_TextureFormat.RGBA32);var n=new kha_Image(null);return n.format=a,n.renderTarget_=Krom.createRenderTarget(e,t,kha_Image.getDepthBufferBits(r),kha_Image.getRenderTargetFormat(a),kha_Image.getStencilBufferBits(r),s),n},kha_Image.get_maxSize=function(){return 4096},kha_Image.get_nonPow2Supported=function(){return!0},kha_Image.formatByteSize=function(e){switch(e._hx_index){case 0:return 4;case 1:return 1;case 2:return 16;case 3:return 2;case 4:return 8;case 5:return 4;case 6:return 2}},kha_Image.prototype={texture_:null,renderTarget_:null,format:null,readable:null,graphics1:null,graphics2:null,graphics4:null,isOpaque:function(e,t){return!1},at:function(e,t){return-16777216},unload:function(){Krom.unloadImage(this),this.texture_=null,this.renderTarget_=null},lock:function(e){return null==e&&(e=0),haxe_io_Bytes.ofData(Krom.lockTexture(this.texture_,e))},unlock:function(){Krom.unlockTexture(this.texture_)},pixels:null,getPixels:function(){return null==this.renderTarget_?null:(null==this.pixels&&(this.pixels=new haxe_io_Bytes(new ArrayBuffer(kha_Image.formatByteSize(this.format)*this.get_width()*this.get_height()))),Krom.getRenderTargetPixels(this.renderTarget_,this.pixels.b.bufferValue),this.pixels)},generateMipmaps:function(e){null==this.texture_?Krom.generateRenderTargetMipmaps(this.renderTarget_,e):Krom.generateTextureMipmaps(this.texture_,e)},setMipmaps:function(e){Krom.setMipmaps(this.texture_,e)},setDepthStencilFrom:function(e){Krom.setDepthStencilFrom(this.renderTarget_,e.renderTarget_)},clear:function(e,t,a,r,i,s,n){Krom.clearTexture(this.texture_,e,t,a,r,i,s,n)},width:null,get_width:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.width},height:null,get_height:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.height},depth:null,get_depth:function(){return null!=this.texture_?this.texture_.depth:1},realWidth:null,get_realWidth:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.realWidth},realHeight:null,get_realHeight:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.realHeight},g1:null,get_g1:function(){return null==this.graphics1&&(this.graphics1=new kha_graphics2_Graphics1(this)),this.graphics1},g2:null,get_g2:function(){return null==this.graphics2&&(this.graphics2=new kha_graphics4_Graphics2(this)),this.graphics2},g4:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new kha_krom_Graphics(this)),this.graphics4},__class__:kha_Image};var kha_AlignedQuad=$hxClasses["kha.AlignedQuad"]=function(){};kha_AlignedQuad.__name__=!0,kha_AlignedQuad.prototype={x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,xadvance:null,__class__:kha_AlignedQuad};var kha_KravurImage=$hxClasses["kha.KravurImage"]=function(e,t,a,r,i,s,n,_){this.mySize=e,this.width=i,this.height=s,this.chars=n,this.baseline=t;for(var h=0;h<n.length;){var o=n[h];++h,o.yoff+=this.baseline}this.texture=kha_Image.create(i,s,kha_graphics4_TextureFormat.L8);for(var l=this.texture.lock(),u=0,d=0,c=s;d<c;){d++;for(var g=0,p=i;g<p;){g++;var f=_.readU8(u);l.b[u]=255&f,++u}}this.texture.unlock()};kha_KravurImage.__name__=!0,kha_KravurImage.prototype={mySize:null,chars:null,texture:null,width:null,height:null,baseline:null,getTexture:function(){return this.texture},getBakedQuad:function(e,t,a,r){if(t>=this.chars.length)return null;var i=1/this.width,s=1/this.height,n=this.chars[t];if(null==n)return null;var _=Math.round(a+n.xoff),h=Math.round(r+n.yoff);return e.x0=_,e.y0=h,e.x1=_+n.x1-n.x0,e.y1=h+n.y1-n.y0,e.s0=n.x0*i,e.t0=n.y0*s,e.s1=n.x1*i,e.t1=n.y1*s,e.xadvance=n.xadvance,e},getCharWidth:function(e){if(0==this.chars.length)return 0;var t=kha_KravurImage.gaps[0];if(e<t)return this.chars[0].xadvance;for(var a=1,r=kha_KravurImage.gaps.length/2|0;a<r;){var i=a++,s=kha_KravurImage.gaps[2*i-1],n=kha_KravurImage.gaps[2*i];n-1<e&&(t+=n-1-s)}return e-t>=this.chars.length?this.chars[0].xadvance:this.chars[e-t].xadvance},getHeight:function(){return this.mySize},stringWidth:function(e){for(var t=new String(e),a=0,r=0,i=t.length;r<i;){var s=r++;a+=this.getCharWidth(HxOverrides.cca(t,s))}return a},charactersWidth:function(e,t,a){for(var r=0,i=t,s=t+a;i<s;){var n=i++;r+=this.getCharWidth(e[n])}return r},getBaselinePosition:function(){return this.baseline},__class__:kha_KravurImage};var kha_Kravur=$hxClasses["kha.Kravur"]=function(e){this.images=new haxe_ds_IntMap,this.blob=e};kha_Kravur.__name__=!0,kha_Kravur.__interfaces__=[kha_Resource],kha_Kravur.fromBytes=function(e){return new kha_Kravur(kha_internal_BytesBlob.fromBytes(e))},kha_Kravur.prototype={oldGlyphs:null,blob:null,images:null,_get:function(e,t){if(null==t&&(t=kha_graphics2_Graphics.fontGlyphs),t!=this.oldGlyphs){this.oldGlyphs=t,kha_KravurImage.gaps=[t[0]];for(var a=kha_KravurImage.gaps[0]+1,r=1,i=t.length;r<i;){var s=r++;t[s]!=a?(kha_KravurImage.gaps.push(t[s-1]),kha_KravurImage.gaps.push(t[s]),a=t[s]+1):++a}kha_KravurImage.gaps.push(t[t.length-1])}var n=null==t?e:1e4*e+t.length;if(!this.images.h.hasOwnProperty(n)){for(var _=64,h=32,o=new Array(t.length),l=0,u=o.length;l<u;){o[l++]=new kha_graphics2_truetype_Stbtt_$bakedchar}for(var d=null,c=-1;c<=0;)h<_?h*=2:_*=2,d=kha_internal_BytesBlob.alloc(_*h),c=kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap(this.blob,0,e,d,_,h,t,o);var g=new kha_graphics2_truetype_Stbtt_$fontinfo;kha_graphics2_truetype_StbTruetype.stbtt_InitFont(g,this.blob,0);var p=kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics(g),f=kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(g,e),m=Math.round(p.ascent*f),k=Math.round(p.descent*f),v=Math.round(p.lineGap*f),S=new kha_KravurImage(0|e,m,k,v,_,h,o,d);return this.images.h[n]=S}return this.images.h[n]},height:function(e){return this._get(e).getHeight()},width:function(e,t){return this._get(e).stringWidth(t)},widthOfCharacters:function(e,t,a,r){return this._get(e).charactersWidth(t,a,r)},baseline:function(e){return this._get(e).getBaselinePosition()},unload:function(){this.blob=null,this.images=null},__class__:kha_Kravur};var kha_LoaderImpl=$hxClasses["kha.LoaderImpl"]=function(){};kha_LoaderImpl.__name__=!0,kha_LoaderImpl.getImageFormats=function(){return["png","jpg"]},kha_LoaderImpl.loadImageFromDescription=function(e,t,a){var r=Object.prototype.hasOwnProperty.call(e,"readable")&&e.readable;t(kha_Image._fromTexture(Krom.loadImage(e.files[0],r)))},kha_LoaderImpl.getSoundFormats=function(){return["wav","ogg"]},kha_LoaderImpl.loadSoundFromDescription=function(e,t,a){t(new kha_krom_Sound(haxe_io_Bytes.ofData(Krom.loadSound(e.files[0]))))},kha_LoaderImpl.getVideoFormats=function(){return["webm"]},kha_LoaderImpl.loadVideoFromDescription=function(e,t,a){},kha_LoaderImpl.loadBlobFromDescription=function(e,t,a){t(new kha_internal_BytesBlob(haxe_io_Bytes.ofData(Krom.loadBlob(e.files[0]))))},kha_LoaderImpl.loadFontFromDescription=function(e,t,a){kha_LoaderImpl.loadBlobFromDescription(e,function(e){t(new kha_Kravur(e))},a)};var kha_TimeTask=$hxClasses["kha.TimeTask"]=function(){};kha_TimeTask.__name__=!0,kha_TimeTask.prototype={task:null,start:null,period:null,duration:null,next:null,id:null,groupId:null,active:null,paused:null,__class__:kha_TimeTask};var kha_FrameTask=$hxClasses["kha.FrameTask"]=function(e,t,a){this.task=e,this.priority=t,this.id=a,this.active=!0,this.paused=!1};kha_FrameTask.__name__=!0,kha_FrameTask.prototype={task:null,priority:null,id:null,active:null,paused:null,__class__:kha_FrameTask};var kha_Scheduler=$hxClasses["kha.Scheduler"]=function(){};kha_Scheduler.__name__=!0,kha_Scheduler.init=function(){kha_Scheduler.deltas=[];for(var e=0,t=kha_Scheduler.DIF_COUNT;e<t;){var a=e++;kha_Scheduler.deltas[a]=0}kha_Scheduler.stopped=!0,kha_Scheduler.frame_tasks_sorted=!0,kha_Scheduler.current=kha_Scheduler.lastTime=kha_Scheduler.realTime(),kha_Scheduler.currentFrameTaskId=0,kha_Scheduler.currentTimeTaskId=0,kha_Scheduler.currentGroupId=0,kha_Scheduler.timeTasks=[],kha_Scheduler.pausedTimeTasks=[],kha_Scheduler.outdatedTimeTasks=[],kha_Scheduler.timeTasksScratchpad=[],kha_Scheduler.frameTasks=[],kha_Scheduler.toDeleteFrame=[]},kha_Scheduler.start=function(e){null==e&&(e=!1),kha_Scheduler.vsync=kha_Window.get(0).get_vSynced();var t=kha_Display.get_primary().get_frequency();57<=t&&t<=63&&(t=60),kha_Scheduler.onedifhz=1/t,kha_Scheduler.stopped=!1,kha_Scheduler.resetTime(),kha_Scheduler.lastTime=kha_Scheduler.realTime()-kha_Scheduler.startTime;for(var a=0,r=kha_Scheduler.DIF_COUNT;a<r;){var i=a++;kha_Scheduler.deltas[i]=0}if(e){for(var s=0,n=kha_Scheduler.timeTasks;s<n.length;){var _=n[s];++s,_.paused=!1}for(var h=0,o=kha_Scheduler.frameTasks;h<o.length;){var l=o[h];++h,l.paused=!1}}},kha_Scheduler.stop=function(){kha_Scheduler.stopped=!0},kha_Scheduler.isStopped=function(){return kha_Scheduler.stopped},kha_Scheduler.warpTimeTasksBack=function(e,t){for(var a=0;a<t.length;){var r=t[a];if(++a,r.start>=e)r.next=r.start;else if(0<r.period){var i=e-r.start,s=Math.ceil(i/r.period);r.next=r.start+s*r.period}}},kha_Scheduler.warp=function(e){if(e<kha_Scheduler.lastTime){kha_Scheduler.current=e,kha_Scheduler.lastTime=e,kha_Scheduler.warpTimeTasksBack(e,kha_Scheduler.outdatedTimeTasks),kha_Scheduler.warpTimeTasksBack(e,kha_Scheduler.timeTasks);for(var t=0,a=kha_Scheduler.outdatedTimeTasks;t<a.length;){var r=a[t];++t,r.next>=e&&kha_Scheduler.timeTasksScratchpad.push(r)}for(var i=0,s=kha_Scheduler.timeTasksScratchpad;i<s.length;){var n=s[i];++i,HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,n)}for(var _=0,h=kha_Scheduler.timeTasksScratchpad;_<h.length;){var o=h[_];++_,kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,o)}for(;0<kha_Scheduler.timeTasksScratchpad.length;)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0])}else e>kha_Scheduler.lastTime&&(kha_Scheduler.startTime-=e-kha_Scheduler.lastTime,kha_Scheduler.current=e,kha_Scheduler.lastTime=e,kha_Scheduler.executeTimeTasks(e))},kha_Scheduler.executeFrame=function(){var e=kha_Scheduler.realTime()-kha_Scheduler.startTime-kha_Scheduler.lastTime,t=kha_Scheduler.current;if(0<=e){if(null==kha_network_Session.the())if(e>kha_Scheduler.maxframetime)kha_Scheduler.startTime+=e-kha_Scheduler.maxframetime,t+=e=kha_Scheduler.maxframetime;else if(kha_Scheduler.vsync){for(var a=kha_Scheduler.onedifhz;a<e-kha_Scheduler.onedifhz;)a+=kha_Scheduler.onedifhz;e=a;for(var r=0,i=kha_Scheduler.DIF_COUNT-2;r<i;){var s=r++;e+=kha_Scheduler.deltas[s],kha_Scheduler.deltas[s]=kha_Scheduler.deltas[s+1]}e+=kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2],e/=kha_Scheduler.DIF_COUNT,kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2]=a,t+=e}else{for(var n=0,_=kha_Scheduler.DIF_COUNT-1;n<_;){var h=n++;kha_Scheduler.deltas[h]=kha_Scheduler.deltas[h+1]}kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-1]=e;for(var o=0,l=0,u=kha_Scheduler.DIF_COUNT;l<u;){var d=l++;o+=kha_Scheduler.deltas[d]}t+=o/=kha_Scheduler.DIF_COUNT}else t+=e;kha_Scheduler.lastTime=t,kha_Scheduler.stopped||(kha_Scheduler.current=t);for(var c=0,g=kha_Scheduler.pausedTimeTasks;c<g.length;){var p=g[c];++c,p.next+=e}if(kha_Scheduler.stopped)for(var f=0,m=kha_Scheduler.timeTasks;f<m.length;){var k=m[f];++f,k.next+=e}kha_Scheduler.executeTimeTasks(t);for(var v=0,S=kha_Scheduler.outdatedTimeTasks;v<S.length;){var b=S[v];++v,b.next<t-10&&kha_Scheduler.timeTasksScratchpad.push(b)}for(var y=0,x=kha_Scheduler.timeTasksScratchpad;y<x.length;){var w=x[y];++y,HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,w)}for(;0<kha_Scheduler.timeTasksScratchpad.length;)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0])}kha_Scheduler.sortFrameTasks();for(var T=0,I=kha_Scheduler.frameTasks;T<I.length;){var E=I[T];++T,kha_Scheduler.stopped||E.paused||!E.active||E.task()||(E.active=!1)}for(var C=0,B=kha_Scheduler.frameTasks;C<B.length;){var L=B[C];++C,L.active||kha_Scheduler.toDeleteFrame.push(L)}for(;0<kha_Scheduler.toDeleteFrame.length;)HxOverrides.remove(kha_Scheduler.frameTasks,kha_Scheduler.toDeleteFrame.pop())},kha_Scheduler.executeTimeTasks=function(e){for(;0<kha_Scheduler.timeTasks.length&&(kha_Scheduler.activeTimeTask=kha_Scheduler.timeTasks[0],kha_Scheduler.activeTimeTask.next<=e);)kha_Scheduler.activeTimeTask.next+=kha_Scheduler.activeTimeTask.period,HxOverrides.remove(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask),kha_Scheduler.activeTimeTask.active&&kha_Scheduler.activeTimeTask.task()?0<kha_Scheduler.activeTimeTask.period&&(0==kha_Scheduler.activeTimeTask.duration||kha_Scheduler.activeTimeTask.duration>=kha_Scheduler.activeTimeTask.start+kha_Scheduler.activeTimeTask.next)?kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask):kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,e):(kha_Scheduler.activeTimeTask.active=!1,kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,e));kha_Scheduler.activeTimeTask=null},kha_Scheduler.archiveTimeTask=function(e,t){},kha_Scheduler.time=function(){return kha_Scheduler.current},kha_Scheduler.realTime=function(){return kha_System.get_time()},kha_Scheduler.resetTime=function(){var e=kha_System.get_time(),t=e-kha_Scheduler.startTime;kha_Scheduler.startTime=e;for(var a=0,r=kha_Scheduler.timeTasks;a<r.length;){var i=r[a];++a,i.start-=t,i.next-=t}for(var s=0,n=kha_Scheduler.DIF_COUNT;s<n;){var _=s++;kha_Scheduler.deltas[_]=0}kha_Scheduler.current=0,kha_Scheduler.lastTime=0},kha_Scheduler.addBreakableFrameTask=function(e,t){return kha_Scheduler.frameTasks.push(new kha_FrameTask(e,t,++kha_Scheduler.currentFrameTaskId)),kha_Scheduler.frame_tasks_sorted=!1,kha_Scheduler.currentFrameTaskId},kha_Scheduler.addFrameTask=function(e,t){return kha_Scheduler.addBreakableFrameTask(function(){return e(),!0},t)},kha_Scheduler.pauseFrameTask=function(e,t){for(var a=0,r=kha_Scheduler.frameTasks;a<r.length;){var i=r[a];if(++a,i.id==e){i.paused=t;break}}},kha_Scheduler.removeFrameTask=function(e){for(var t=0,a=kha_Scheduler.frameTasks;t<a.length;){var r=a[t];if(++t,r.id==e){r.active=!1;break}}},kha_Scheduler.generateGroupId=function(){return++kha_Scheduler.currentGroupId},kha_Scheduler.addBreakableTimeTaskToGroup=function(e,t,a,r,i){null==i&&(i=0),null==r&&(r=0);var s=new kha_TimeTask;return s.active=!0,s.task=t,s.id=++kha_Scheduler.currentTimeTaskId,s.groupId=e,s.start=kha_Scheduler.current+a,(s.period=0)!=r&&(s.period=r),(s.duration=0)!=i&&(s.duration=s.start+i),s.next=s.start,kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,s),s.id},kha_Scheduler.addTimeTaskToGroup=function(e,t,a,r,i){return null==i&&(i=0),null==r&&(r=0),kha_Scheduler.addBreakableTimeTaskToGroup(e,function(){return t(),!0},a,r,i)},kha_Scheduler.addBreakableTimeTask=function(e,t,a,r){return null==r&&(r=0),null==a&&(a=0),kha_Scheduler.addBreakableTimeTaskToGroup(0,e,t,a,r)},kha_Scheduler.addTimeTask=function(e,t,a,r){return null==r&&(r=0),null==a&&(a=0),kha_Scheduler.addTimeTaskToGroup(0,e,t,a,r)},kha_Scheduler.getTimeTask=function(e){if(null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.id==e)return kha_Scheduler.activeTimeTask;for(var t=0,a=kha_Scheduler.timeTasks;t<a.length;){var r=a[t];if(++t,r.id==e)return r}for(var i=0,s=kha_Scheduler.pausedTimeTasks;i<s.length;){var n=s[i];if(++i,n.id==e)return n}return null},kha_Scheduler.pauseTimeTask=function(e,t){var a=kha_Scheduler.getTimeTask(e);null!=a&&kha_Scheduler.pauseRunningTimeTask(a,t),null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.id==e&&(kha_Scheduler.activeTimeTask.paused=t)},kha_Scheduler.pauseRunningTimeTask=function(e,t){(e.paused=t)?(HxOverrides.remove(kha_Scheduler.timeTasks,e),kha_Scheduler.pausedTimeTasks.push(e)):(kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,e),HxOverrides.remove(kha_Scheduler.pausedTimeTasks,e))},kha_Scheduler.pauseTimeTasks=function(e,t){for(var a=0,r=kha_Scheduler.timeTasks;a<r.length;){var i=r[a];++a,i.groupId==e&&kha_Scheduler.pauseRunningTimeTask(i,t)}null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.groupId==e&&(kha_Scheduler.activeTimeTask.paused=t)},kha_Scheduler.removeTimeTask=function(e){var t=kha_Scheduler.getTimeTask(e);null!=t&&(t.active=!1,HxOverrides.remove(kha_Scheduler.timeTasks,t))},kha_Scheduler.removeTimeTasks=function(e){for(var t=0,a=kha_Scheduler.timeTasks;t<a.length;){var r=a[t];++t,r.groupId==e&&(r.active=!1,kha_Scheduler.timeTasksScratchpad.push(r))}for(var i=0,s=kha_Scheduler.timeTasksScratchpad;i<s.length;){var n=s[i];++i,HxOverrides.remove(kha_Scheduler.timeTasks,n)}for(;0<kha_Scheduler.timeTasksScratchpad.length;)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0]);null!=kha_Scheduler.activeTimeTask&&kha_Scheduler.activeTimeTask.groupId==e&&(kha_Scheduler.activeTimeTask.active=!1)},kha_Scheduler.numTasksInSchedule=function(){return kha_Scheduler.timeTasks.length+kha_Scheduler.frameTasks.length},kha_Scheduler.insertSorted=function(e,t){for(var a=0,r=e.length;a<r;){var i=a++;if(e[i].next>t.next)return void e.splice(i,0,t)}e.push(t)},kha_Scheduler.sortFrameTasks=function(){kha_Scheduler.frame_tasks_sorted||(kha_Scheduler.frameTasks.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}),kha_Scheduler.frame_tasks_sorted=!0)};var kha_ScreenRotation=$hxEnums["kha.ScreenRotation"]={__ename__:!0,__constructs__:["RotationNone","Rotation90","Rotation180","Rotation270"],RotationNone:{_hx_index:0,__enum__:"kha.ScreenRotation",toString:$estr},Rotation90:{_hx_index:1,__enum__:"kha.ScreenRotation",toString:$estr},Rotation180:{_hx_index:2,__enum__:"kha.ScreenRotation",toString:$estr},Rotation270:{_hx_index:3,__enum__:"kha.ScreenRotation",toString:$estr}},kha_Shaders=$hxClasses["kha.Shaders"]=function(){};kha_Shaders.__name__=!0,kha_Shaders.init=function(){for(var e=[],t=0;t<1;){var a=t++,r=Reflect.field(kha_Shaders,"painter_colored_fragData"+a),i=haxe_Unserializer.run(r);e.push(kha_internal_BytesBlob.fromBytes(i))}kha_Shaders.painter_colored_frag=new kha_graphics4_FragmentShader(e,["painter-colored.frag.glsl"]);for(var s=[],n=0;n<1;){var _=n++,h=Reflect.field(kha_Shaders,"painter_colored_vertData"+_),o=haxe_Unserializer.run(h);s.push(kha_internal_BytesBlob.fromBytes(o))}kha_Shaders.painter_colored_vert=new kha_graphics4_VertexShader(s,["painter-colored.vert.glsl"]);for(var l=[],u=0;u<1;){var d=u++,c=Reflect.field(kha_Shaders,"painter_image_fragData"+d),g=haxe_Unserializer.run(c);l.push(kha_internal_BytesBlob.fromBytes(g))}kha_Shaders.painter_image_frag=new kha_graphics4_FragmentShader(l,["painter-image.frag.glsl"]);for(var p=[],f=0;f<1;){var m=f++,k=Reflect.field(kha_Shaders,"painter_image_vertData"+m),v=haxe_Unserializer.run(k);p.push(kha_internal_BytesBlob.fromBytes(v))}kha_Shaders.painter_image_vert=new kha_graphics4_VertexShader(p,["painter-image.vert.glsl"]);for(var S=[],b=0;b<1;){var y=b++,x=Reflect.field(kha_Shaders,"painter_text_fragData"+y),w=haxe_Unserializer.run(x);S.push(kha_internal_BytesBlob.fromBytes(w))}kha_Shaders.painter_text_frag=new kha_graphics4_FragmentShader(S,["painter-text.frag.glsl"]);for(var T=[],I=0;I<1;){var E=I++,C=Reflect.field(kha_Shaders,"painter_text_vertData"+E),B=haxe_Unserializer.run(C);T.push(kha_internal_BytesBlob.fromBytes(B))}kha_Shaders.painter_text_vert=new kha_graphics4_VertexShader(T,["painter-text.vert.glsl"]);for(var L=[],P=0;P<1;){var A=P++,$=Reflect.field(kha_Shaders,"painter_video_fragData"+A),N=haxe_Unserializer.run($);L.push(kha_internal_BytesBlob.fromBytes(N))}kha_Shaders.painter_video_frag=new kha_graphics4_FragmentShader(L,["painter-video.frag.glsl"]);for(var R=[],F=0;F<1;){var V=F++,M=Reflect.field(kha_Shaders,"painter_video_vertData"+V),H=haxe_Unserializer.run(M);R.push(kha_internal_BytesBlob.fromBytes(H))}kha_Shaders.painter_video_vert=new kha_graphics4_VertexShader(R,["painter-video.vert.glsl"])};var kha_Sound=$hxClasses["kha.Sound"]=function(){};kha_Sound.__name__=!0,kha_Sound.__interfaces__=[kha_Resource],kha_Sound.prototype={compressedData:null,uncompressedData:null,uncompress:function(e){if(null==this.uncompressedData){var t=new haxe_io_BytesOutput,a=kha_audio2_ogg_vorbis_Reader.readAll(this.compressedData,t,!0),r=t.getBytes(),i=r.length/4|0;if(1==a.channel){var s=new Float32Array(2*i);this.uncompressedData=s;for(var n=0,_=i;n<_;){var h=n++;this.uncompressedData[2*h]=r.getFloat(4*h),this.uncompressedData[2*h+1]=r.getFloat(4*h)}}else{var o=new Float32Array(i);this.uncompressedData=o;for(var l=0,u=i;l<u;){var d=l++;this.uncompressedData[d]=r.getFloat(4*d)}}this.compressedData=null,e()}else e()},unload:function(){this.compressedData=null,this.uncompressedData=null},__class__:kha_Sound};var kha_SystemOptions=$hxClasses["kha.SystemOptions"]=function(e,t,a,r,i){null==a&&(a=600),null==t&&(t=800),null==e&&(e="Kha"),this.framebuffer=null,this.window=null,this.height=600,this.width=800,this.title="Kha",this.title=e,this.width=t,this.height=a,this.window=null==r?new kha_WindowOptions(null,null,null,null,null,null,null,null,null):r,this.framebuffer=null==i?new kha_FramebufferOptions(null,null,null,null,null,null):i};kha_SystemOptions.__name__=!0,kha_SystemOptions.prototype={title:null,width:null,height:null,window:null,framebuffer:null,__class__:kha_SystemOptions};var kha_System=$hxClasses["kha.System"]=function(){};kha_System.__name__=!0,kha_System.init=function(e,t){var a=0;e.resizable&&(a|=1),e.maximizable&&(a|=4),e.minimizable&&(a|=2);var r=e.title,i=e.width,s=e.height,n=new kha_WindowOptions(null,null,null,null,null,null,null,a,e.windowMode),_=new kha_SystemOptions(r,i,s,n,new kha_FramebufferOptions(null,e.vSync,null,null,null,e.samplesPerPixel));kha_System.start(_,function(e){t()})},kha_System.start=function(e,t){kha_System.theTitle=e.title,kha_SystemImpl.init(e,t)},kha_System.get_title=function(){return kha_System.theTitle},kha_System.notifyOnRender=function(t,a){null==a&&(a=0),kha_System.renderListeners.push(function(e){a<e.length&&t(e[a])})},kha_System.notifyOnFrames=function(e){kha_System.renderListeners.push(e)},kha_System.removeFramesListener=function(e){HxOverrides.remove(kha_System.renderListeners,e)},kha_System.notifyOnApplicationState=function(e,t,a,r,i){null!=e&&kha_System.foregroundListeners.push(e),null!=t&&kha_System.resumeListeners.push(t),null!=a&&kha_System.pauseListeners.push(a),null!=r&&kha_System.backgroundListeners.push(r),null!=i&&kha_System.shutdownListeners.push(i)},kha_System.notifyOnDropFiles=function(e){kha_System.dropFilesListeners.push(e)},kha_System.notifyOnCutCopyPaste=function(e,t,a){kha_System.cutListener=e,kha_System.copyListener=t,kha_System.pasteListener=a},kha_System.render=function(e){for(var t=0,a=kha_System.renderListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_System.foreground=function(){for(var e=0,t=kha_System.foregroundListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.resume=function(){for(var e=0,t=kha_System.resumeListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.pause=function(){for(var e=0,t=kha_System.pauseListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.background=function(){for(var e=0,t=kha_System.backgroundListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.shutdown=function(){for(var e=0,t=kha_System.shutdownListeners;e<t.length;){var a=t[e];++e,a()}},kha_System.dropFiles=function(e){for(var t=0,a=kha_System.dropFilesListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_System.get_time=function(){return kha_SystemImpl.getTime()},kha_System.windowWidth=function(e){return null==e&&(e=0),kha_Window.get(e).get_width()},kha_System.windowHeight=function(e){return null==e&&(e=0),kha_Window.get_all()[e].get_height()},kha_System.get_screenRotation=function(){return kha_ScreenRotation.RotationNone},kha_System.get_systemId=function(){return kha_SystemImpl.getSystemId()},kha_System.get_language=function(){return kha_SystemImpl.getLanguage()},kha_System.stop=function(){return kha_SystemImpl.requestShutdown()},kha_System.loadUrl=function(e){kha_SystemImpl.loadUrl(e)},kha_System.canSwitchFullscreen=function(){return!0},kha_System.isFullscreen=function(){return 1==kha_Window.get(0).get_mode()||1==kha_Window.get(0).get_mode()},kha_System.requestFullscreen=function(){kha_Window.get(0).set_mode(1)},kha_System.exitFullscreen=function(){kha_Window.get(0).set_mode(0)},kha_System.notifyOnFullscreenChange=function(e,t){},kha_System.removeFullscreenListener=function(e,t){},kha_System.changeResolution=function(e,t){},kha_System.requestShutdown=function(){kha_System.stop()},kha_System.get_vsync=function(){return kha_Window.get(0).get_vSynced()},kha_System.get_refreshRate=function(){return kha_Display.get_primary().get_frequency()},kha_System.screenDpi=function(){return kha_Display.get_primary().get_pixelsPerInch()};var kha_SystemImpl=$hxClasses["kha.SystemImpl"]=function(){};kha_SystemImpl.__name__=!0,kha_SystemImpl.renderCallback=function(){kha_Scheduler.executeFrame(),kha_System.render([kha_SystemImpl.framebuffer])},kha_SystemImpl.dropFilesCallback=function(e){kha_System.dropFiles(e)},kha_SystemImpl.keyboardDownCallback=function(e){kha_SystemImpl.keyboard.sendDownEvent(e)},kha_SystemImpl.keyboardUpCallback=function(e){kha_SystemImpl.keyboard.sendUpEvent(e)},kha_SystemImpl.keyboardPressCallback=function(e){kha_SystemImpl.keyboard.sendPressEvent(String.fromCharCode(e))},kha_SystemImpl.mouseDownCallback=function(e,t,a){kha_SystemImpl.mouse.sendDownEvent(0,e,t,a)},kha_SystemImpl.mouseUpCallback=function(e,t,a){kha_SystemImpl.mouse.sendUpEvent(0,e,t,a)},kha_SystemImpl.mouseMoveCallback=function(e,t,a,r){kha_SystemImpl.mouse.sendMoveEvent(0,e,t,a,r)},kha_SystemImpl.mouseWheelCallback=function(e){kha_SystemImpl.mouse.sendWheelEvent(0,e)},kha_SystemImpl.penDownCallback=function(e,t,a){kha_SystemImpl.pen.sendDownEvent(0,e,t,a)},kha_SystemImpl.penUpCallback=function(e,t,a){kha_SystemImpl.pen.sendUpEvent(0,e,t,a)},kha_SystemImpl.penMoveCallback=function(e,t,a){kha_SystemImpl.pen.sendMoveEvent(0,e,t,a)},kha_SystemImpl.gamepadAxisCallback=function(e,t,a){kha_SystemImpl.gamepads[e].sendAxisEvent(t,a)},kha_SystemImpl.gamepadButtonCallback=function(e,t,a){kha_SystemImpl.gamepads[e].sendButtonEvent(t,a)},kha_SystemImpl.audioCallback=function(e){var t=new Float32Array(e);kha_SystemImpl.audioOutputData=t,kha_audio2_Audio._callCallback(e);for(var a=0,r=e;a<r;){var i=a++,s=kha_audio2_Audio._readSample();kha_SystemImpl.audioOutputData[i]=s}for(var n=0,_=e;n<_;){var h=n++;Krom.writeAudioBuffer(kha_SystemImpl.audioOutputData[h])}},kha_SystemImpl.init=function(e,t){Krom.init(e.title,e.width,e.height,e.framebuffer.samplesPerPixel,e.framebuffer.verticalSync,e.window.mode,e.window.windowFeatures),kha_SystemImpl.start=Krom.getTime(),haxe_Log.trace=function(e,t){var a=null!=t?t.className+":"+t.lineNumber+": "+Std.string(e):Std.string(e);Krom.log(HxOverrides.substr(a,0,511))},new kha_Window(0),kha_Scheduler.init(),kha_Shaders.init();var a=new kha_krom_Graphics;kha_SystemImpl.framebuffer=new kha_Framebuffer(0,null,null,a),kha_SystemImpl.framebuffer.init(new kha_graphics2_Graphics1(kha_SystemImpl.framebuffer),new kha_graphics4_Graphics2(kha_SystemImpl.framebuffer),a),Krom.setCallback(kha_SystemImpl.renderCallback),Krom.setDropFilesCallback(kha_SystemImpl.dropFilesCallback),kha_SystemImpl.keyboard=new kha_input_Keyboard,kha_SystemImpl.mouse=new kha_input_MouseImpl,kha_SystemImpl.pen=new kha_input_Pen,kha_SystemImpl.gamepads=[];for(var r=0,i=kha_SystemImpl.maxGamepads;r<i;){var s=r++;kha_SystemImpl.gamepads[s]=new kha_input_Gamepad(s)}Krom.setKeyboardDownCallback(kha_SystemImpl.keyboardDownCallback),Krom.setKeyboardUpCallback(kha_SystemImpl.keyboardUpCallback),Krom.setKeyboardPressCallback(kha_SystemImpl.keyboardPressCallback),Krom.setMouseDownCallback(kha_SystemImpl.mouseDownCallback),Krom.setMouseUpCallback(kha_SystemImpl.mouseUpCallback),Krom.setMouseMoveCallback(kha_SystemImpl.mouseMoveCallback),Krom.setMouseWheelCallback(kha_SystemImpl.mouseWheelCallback),Krom.setPenDownCallback(kha_SystemImpl.penDownCallback),Krom.setPenUpCallback(kha_SystemImpl.penUpCallback),Krom.setPenMoveCallback(kha_SystemImpl.penMoveCallback),Krom.setGamepadAxisCallback(kha_SystemImpl.gamepadAxisCallback),Krom.setGamepadButtonCallback(kha_SystemImpl.gamepadButtonCallback),kha_audio2_Audio._init(),kha_audio2_Audio1._init(),Krom.setAudioCallback(kha_SystemImpl.audioCallback),kha_Scheduler.start(),t(kha_Window.get(0))},kha_SystemImpl.initEx=function(e,t,a,r){},kha_SystemImpl.translateWindowMode=function(e){if(null==e)return 0;switch(e){case 0:return 0;case 1:return 1;case 2:return 2}},kha_SystemImpl.getScreenRotation=function(){return kha_ScreenRotation.RotationNone},kha_SystemImpl.getTime=function(){return Krom.getTime()-kha_SystemImpl.start},kha_SystemImpl.getVsync=function(){return!0},kha_SystemImpl.getRefreshRate=function(){return 60},kha_SystemImpl.getSystemId=function(){return Krom.systemId()},kha_SystemImpl.getLanguage=function(){return"en"},kha_SystemImpl.requestShutdown=function(){return Krom.requestShutdown(),!0},kha_SystemImpl.getMouse=function(e){return kha_SystemImpl.mouse},kha_SystemImpl.getPen=function(e){return kha_SystemImpl.pen},kha_SystemImpl.getKeyboard=function(e){return kha_SystemImpl.keyboard},kha_SystemImpl.lockMouse=function(){if(!kha_SystemImpl.isMouseLocked()){Krom.lockMouse();for(var e=0,t=kha_SystemImpl.mouseLockListeners;e<t.length;){var a=t[e];++e,a()}}},kha_SystemImpl.unlockMouse=function(){if(kha_SystemImpl.isMouseLocked()){Krom.unlockMouse();for(var e=0,t=kha_SystemImpl.mouseLockListeners;e<t.length;){var a=t[e];++e,a()}}},kha_SystemImpl.canLockMouse=function(){return Krom.canLockMouse()},kha_SystemImpl.isMouseLocked=function(){return Krom.isMouseLocked()},kha_SystemImpl.notifyOfMouseLockChange=function(e,t){kha_SystemImpl.canLockMouse()&&null!=e&&kha_SystemImpl.mouseLockListeners.push(e)},kha_SystemImpl.removeFromMouseLockChange=function(e,t){kha_SystemImpl.canLockMouse()&&null!=e&&HxOverrides.remove(kha_SystemImpl.mouseLockListeners,e)},kha_SystemImpl.hideSystemCursor=function(){Krom.showMouse(!1)},kha_SystemImpl.showSystemCursor=function(){Krom.showMouse(!0)},kha_SystemImpl.unload=function(){},kha_SystemImpl.canSwitchFullscreen=function(){return!1},kha_SystemImpl.isFullscreen=function(){return!1},kha_SystemImpl.requestFullscreen=function(){},kha_SystemImpl.exitFullscreen=function(){},kha_SystemImpl.notifyOfFullscreenChange=function(e,t){},kha_SystemImpl.removeFromFullscreenChange=function(e,t){},kha_SystemImpl.changeResolution=function(e,t){},kha_SystemImpl.setKeepScreenOn=function(e){},kha_SystemImpl.loadUrl=function(e){},kha_SystemImpl.getGamepadId=function(e){return"unkown"};var kha_Video=$hxClasses["kha.Video"]=function(){};kha_Video.__name__=!0,kha_Video.__interfaces__=[kha_Resource],kha_Video.prototype={width:function(){return 100},height:function(){return 100},play:function(e){null==e&&(e=!1)},pause:function(){},stop:function(){},getLength:function(){return 0},getCurrentPos:function(){return 0},get_position:function(){return 0},set_position:function(e){return 0},getVolume:function(){return 1},setVolume:function(e){},isFinished:function(){return this.getCurrentPos()>=this.getLength()},unload:function(){},__class__:kha_Video};var kha_Window=$hxClasses["kha.Window"]=function(e){this.num=e,kha_Window.windows.push(this)};kha_Window.__name__=!0,kha_Window.create=function(e,t){return null},kha_Window.destroy=function(e){},kha_Window.get=function(e){return kha_Window.windows[e]},kha_Window.get_all=function(){return kha_Window.windows},kha_Window.prototype={num:null,resize:function(e,t){},move:function(e,t){},changeWindowFeatures:function(e){},changeFramebuffer:function(e){},get_x:function(){return 0},set_x:function(e){return 0},get_y:function(){return 0},set_y:function(e){return 0},get_width:function(){return Krom.windowWidth(this.num)},set_width:function(e){return 800},get_height:function(){return Krom.windowHeight(this.num)},set_height:function(e){return 600},get_mode:function(){return 0},set_mode:function(e){return 0},get_visible:function(){return!0},set_visible:function(e){return!0},get_title:function(){return"Kha"},set_title:function(e){return"Kha"},notifyOnResize:function(e){},get_vSynced:function(){return!0},__class__:kha_Window};var kha_WindowOptions=$hxClasses["kha.WindowOptions"]=function(e,t,a,r,i,s,n,_,h){null==h&&(h=0),null==_&&(_=7),null==n&&(n=!0),null==i&&(i=600),null==r&&(r=800),null==a&&(a=-1),null==t&&(t=-1),null==e&&(e="Kha"),this.mode=0,this.windowFeatures=7,this.visible=!0,this.display=null,this.height=600,this.width=800,this.y=-1,this.x=-1,this.title="Kha",this.title=e,this.x=t,this.y=a,this.width=r,this.height=i,this.display=null==s?kha_Display.get_primary():s,this.visible=n,this.windowFeatures=_,this.mode=h};kha_WindowOptions.__name__=!0,kha_WindowOptions.prototype={title:null,x:null,y:null,width:null,height:null,display:null,visible:null,windowFeatures:null,mode:null,__class__:kha_WindowOptions};var kha_arrays__$Float32Array_Float32Array_$Impl_$=$hxClasses["kha.arrays._Float32Array.Float32Array_Impl_"]={};kha_arrays__$Float32Array_Float32Array_$Impl_$.__name__=!0,kha_arrays__$Float32Array_Float32Array_$Impl_$._new=function(e){return new Float32Array(e)},kha_arrays__$Float32Array_Float32Array_$Impl_$.get_buffer=function(e){return e.buffer},kha_arrays__$Float32Array_Float32Array_$Impl_$.get_length=function(e){return e.length},kha_arrays__$Float32Array_Float32Array_$Impl_$.set=function(e,t,a){return e[t]=a},kha_arrays__$Float32Array_Float32Array_$Impl_$.get=function(e,t){return e[t]},kha_arrays__$Float32Array_Float32Array_$Impl_$.data=function(e){return e},kha_arrays__$Float32Array_Float32Array_$Impl_$.arrayRead=function(e,t){return e[t]},kha_arrays__$Float32Array_Float32Array_$Impl_$.arrayWrite=function(e,t,a){return e[t]=a},kha_arrays__$Float32Array_Float32Array_$Impl_$.subarray=function(e,t,a){return e.subarray(t,a)};var kha_arrays__$Uint32Array_Uint32Array_$Impl_$=$hxClasses["kha.arrays._Uint32Array.Uint32Array_Impl_"]={};kha_arrays__$Uint32Array_Uint32Array_$Impl_$.__name__=!0,kha_arrays__$Uint32Array_Uint32Array_$Impl_$._new=function(e){return new Uint32Array(e)},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.get_length=function(e){return e.length},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.set=function(e,t,a){return e[t]=a},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.get=function(e,t){return e[t]},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.data=function(e){return e},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.arrayRead=function(e,t){return e[t]},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.arrayWrite=function(e,t,a){return e[t]=a},kha_arrays__$Uint32Array_Uint32Array_$Impl_$.subarray=function(e,t,a){return e.subarray(t,a)};var kha_audio1_AudioChannel=$hxClasses["kha.audio1.AudioChannel"]=function(){};kha_audio1_AudioChannel.__name__=!0,kha_audio1_AudioChannel.prototype={play:null,pause:null,stop:null,length:null,get_length:null,position:null,get_position:null,get_volume:null,set_volume:null,finished:null,get_finished:null,__class__:kha_audio1_AudioChannel};var kha_audio2_Audio=$hxClasses["kha.audio2.Audio"]=function(){};kha_audio2_Audio.__name__=!0,kha_audio2_Audio._init=function(){kha_audio2_Audio.buffer=new kha_audio2_Buffer(8192,2,44100)},kha_audio2_Audio._callCallback=function(e){if(null!=kha_audio2_Audio.buffer)if(null!=kha_audio2_Audio.audioCallback)kha_audio2_Audio.audioCallback(e,kha_audio2_Audio.buffer);else for(var t=0,a=e;t<a;){t++;kha_audio2_Audio.buffer.data[kha_audio2_Audio.buffer.writeLocation]=0,kha_audio2_Audio.buffer.writeLocation+=1,kha_audio2_Audio.buffer.writeLocation>=kha_audio2_Audio.buffer.size&&(kha_audio2_Audio.buffer.writeLocation=0)}},kha_audio2_Audio._readSample=function(){if(null==kha_audio2_Audio.buffer)return 0;var e=kha_audio2_Audio.buffer.data[kha_audio2_Audio.buffer.readLocation];return kha_audio2_Audio.buffer.readLocation+=1,kha_audio2_Audio.buffer.readLocation>=kha_audio2_Audio.buffer.size&&(kha_audio2_Audio.buffer.readLocation=0),e},kha_audio2_Audio.play=function(e,t){return null==t&&(t=!1),null},kha_audio2_Audio.stream=function(e,t){return null==t&&(t=!1),null};var kha_audio2_Audio1=$hxClasses["kha.audio2.Audio1"]=function(){};kha_audio2_Audio1.__name__=!0,kha_audio2_Audio1._init=function(){var e=new Array(16);kha_audio2_Audio1.soundChannels=e;var t=new Array(16);kha_audio2_Audio1.streamChannels=t;var a=new Array(16);kha_audio2_Audio1.internalSoundChannels=a;var r=new Array(16);kha_audio2_Audio1.internalStreamChannels=r;var i=new Float32Array(512);kha_audio2_Audio1.sampleCache1=i;var s=new Float32Array(512);kha_audio2_Audio1.sampleCache2=s,kha_audio2_Audio.audioCallback=kha_audio2_Audio1.mix},kha_audio2_Audio1.max=function(e,t){return t<e?e:t},kha_audio2_Audio1.min=function(e,t){return e<t?e:t},kha_audio2_Audio1.mix=function(e,t){if(kha_audio2_Audio1.sampleCache1.length<e){var a=new Float32Array(e);kha_audio2_Audio1.sampleCache1=a;var r=new Float32Array(e);kha_audio2_Audio1.sampleCache2=r}for(var i=0,s=e;i<s;){var n=i++;kha_audio2_Audio1.sampleCache2[n]=0}for(var _=0;_<16;){var h=_++;kha_audio2_Audio1.internalSoundChannels[h]=kha_audio2_Audio1.soundChannels[h]}for(var o=0;o<16;){var l=o++;kha_audio2_Audio1.internalStreamChannels[l]=kha_audio2_Audio1.streamChannels[l]}for(var u=0,d=kha_audio2_Audio1.internalSoundChannels;u<d.length;){var c=d[u];if(++u,null!=c&&!c.get_finished()){c.nextSamples(kha_audio2_Audio1.sampleCache1,e,t.samplesPerSecond);for(var g=0,p=e;g<p;){var f=g++,m=f;kha_audio2_Audio1.sampleCache2[m]+=kha_audio2_Audio1.sampleCache1[f]*c.get_volume()}}}for(var k=0,v=kha_audio2_Audio1.internalStreamChannels;k<v.length;){var S=v[k];if(++k,null!=S&&!S.get_finished()){S.nextSamples(kha_audio2_Audio1.sampleCache1,e,t.samplesPerSecond);for(var b=0,y=e;b<y;){var x=b++,w=x;kha_audio2_Audio1.sampleCache2[w]+=kha_audio2_Audio1.sampleCache1[x]*S.get_volume()}}}for(var T=0,I=e;T<I;){var E=T++,C=kha_audio2_Audio1.sampleCache2[E],B=C<1?C:1;t.data[t.writeLocation]=-1<B?B:-1,t.writeLocation+=1,t.writeLocation>=t.size&&(t.writeLocation=0)}},kha_audio2_Audio1.play=function(e,t){null==t&&(t=!1);for(var a=null,r=0;r<16;){var i=r++;if(null==kha_audio2_Audio1.soundChannels[i]||kha_audio2_Audio1.soundChannels[i].get_finished()){(a=new kha_audio2_AudioChannel(t)).data=e.uncompressedData,kha_audio2_Audio1.soundChannels[i]=a;break}}return a},kha_audio2_Audio1._playAgain=function(e){for(var t=0;t<16;){var a=t++;if(null==kha_audio2_Audio1.soundChannels[a]||kha_audio2_Audio1.soundChannels[a].get_finished()||kha_audio2_Audio1.soundChannels[a]==e){kha_audio2_Audio1.soundChannels[a]=e;break}}},kha_audio2_Audio1.stream=function(e,t){null==t&&(t=!1);var a=kha_audio2_Audio.stream(e,t);if(null!=a)return a;for(var r=null,i=0;i<16;){var s=i++;if(null==kha_audio2_Audio1.streamChannels[s]||kha_audio2_Audio1.streamChannels[s].get_finished()){r=new kha_audio2_StreamChannel(e.compressedData,t),kha_audio2_Audio1.streamChannels[s]=r;break}}return r};var kha_audio2_AudioChannel=$hxClasses["kha.audio2.AudioChannel"]=function(e){this.paused=!1,this.looping=e,this.myVolume=1,this.myPosition=0};kha_audio2_AudioChannel.__name__=!0,kha_audio2_AudioChannel.__interfaces__=[kha_audio1_AudioChannel],kha_audio2_AudioChannel.prototype={data:null,myVolume:null,myPosition:null,paused:null,looping:null,nextSamples:function(e,t,a){if(this.paused)for(var r=0,i=t;r<i;){e[r++]=0}else{for(var s=0,n=0;s<t;){for(var _=this.data.length-this.myPosition,h=_<t-s?_:t-s;n<h;)e[s]=this.data[this.myPosition],++this.myPosition,++n,++s;if(!this.looping)break;n=0,this.myPosition>=this.data.length&&(this.myPosition=0)}for(;s<t;)e[s]=0,++s}},play:function(){this.paused=!1,this.get_finished()&&(this.myPosition=0,kha_audio2_Audio1._playAgain(this))},pause:function(){this.paused=!0},stop:function(){this.myPosition=this.data.length},length:null,get_length:function(){return this.data.length/44100/2},position:null,get_position:function(){return this.myPosition/44100/2},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},finished:null,get_finished:function(){return this.myPosition>=this.data.length},__class__:kha_audio2_AudioChannel};var kha_audio2_Buffer=$hxClasses["kha.audio2.Buffer"]=function(e,t,a){this.size=e;var r=new Float32Array(e);this.data=r,this.channels=t,this.samplesPerSecond=a,this.readLocation=0,this.writeLocation=0};kha_audio2_Buffer.__name__=!0,kha_audio2_Buffer.prototype={channels:null,samplesPerSecond:null,data:null,size:null,readLocation:null,writeLocation:null,__class__:kha_audio2_Buffer};var kha_audio2_StreamChannel=$hxClasses["kha.audio2.StreamChannel"]=function(e,t){this.paused=!1,this.atend=!1,this.myVolume=1,this.loop=t,this.reader=kha_audio2_ogg_vorbis_Reader.openFromBytes(e)};kha_audio2_StreamChannel.__name__=!0,kha_audio2_StreamChannel.__interfaces__=[kha_audio1_AudioChannel],kha_audio2_StreamChannel.prototype={reader:null,atend:null,loop:null,myVolume:null,paused:null,nextSamples:function(e,t,a){if(this.paused)for(var r=0,i=t;r<i;){e[r++]=0}else{var s=2*this.reader.read(e,t/2|0,2,a,!0);if(s<t){this.loop?this.reader.set_currentMillisecond(0):this.atend=!0;for(var n=s,_=t;n<_;){e[n++]=0}}}},play:function(){this.paused=!1},pause:function(){this.paused=!0},stop:function(){this.atend=!0},length:null,get_length:function(){return this.reader.get_totalMillisecond()/1e3},position:null,get_position:function(){return this.reader.get_currentMillisecond()/1e3},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},finished:null,get_finished:function(){return this.atend},__class__:kha_audio2_StreamChannel};var kha_audio2_ogg_tools_Crc32=$hxClasses["kha.audio2.ogg.tools.Crc32"]=function(){};kha_audio2_ogg_tools_Crc32.__name__=!0,kha_audio2_ogg_tools_Crc32.init=function(){if(null==kha_audio2_ogg_tools_Crc32.table){var e=new Array(256);kha_audio2_ogg_tools_Crc32.table=e;for(var t=0;t<256;){for(var a=t++,r=a<<24,i=0;i<8;){i++;r=r<<1^(_$UInt_UInt_$Impl_$.gte(r,1<<31)?79764919:0)}kha_audio2_ogg_tools_Crc32.table[a]=r}}},kha_audio2_ogg_tools_Crc32.update=function(e,t){return e<<8^kha_audio2_ogg_tools_Crc32.table[t^e>>>24]};var kha_audio2_ogg_tools_MathTools=$hxClasses["kha.audio2.ogg.tools.MathTools"]=function(){};kha_audio2_ogg_tools_MathTools.__name__=!0,kha_audio2_ogg_tools_MathTools.ilog=function(e){var t=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];return e<16384?e<16?t[e]:e<512?5+t[e>>5]:10+t[e>>10]:e<16777216?e<524288?15+t[e>>15]:20+t[e>>20]:e<536870912?25+t[e>>25]:e<-2147483648?30+t[e>>30]:0};var kha_audio2_ogg_tools_Mdct=$hxClasses["kha.audio2.ogg.tools.Mdct"]=function(){};kha_audio2_ogg_tools_Mdct.__name__=!0,kha_audio2_ogg_tools_Mdct.inverseTransform=function(e,t,a,r,i,s){for(var n=t>>1,_=t>>2,h=t>>3,o=new Array(n),l=n-2,u=0,d=0,c=n;d!=c;)o[l+1]=e[d]*a[u]-e[d+2]*a[u+1],o[l]=e[d]*a[u+1]+e[d+2]*a[u],l-=2,u+=2,d+=4;for(d=n-3;0<=l;)o[l+1]=-e[d+2]*a[u]- -e[d]*a[u+1],o[l]=-e[d+2]*a[u+1]+-e[d]*a[u],l-=2,u+=2,d-=4;for(var g=e,p=o,f=n-8,m=_,k=0,v=_,S=0;0<=f;){var b=p[m+1]-p[k+1],y=p[m]-p[k];g[v+1]=p[m+1]+p[k+1],g[v]=p[m]+p[k],g[S+1]=b*a[f+4]-y*a[f+5],g[S]=y*a[f+4]+b*a[f+5],b=p[m+3]-p[k+3],y=p[m+2]-p[k+2],g[v+3]=p[m+3]+p[k+3],g[v+2]=p[m+2]+p[k+2],g[S+3]=b*a[f]-y*a[f+1],g[S+2]=y*a[f]+b*a[f+1],f-=8,v+=4,S+=4,m+=4,k+=4}for(var x=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],w=(t<16384?t<16?x[t]:t<512?5+x[t>>5]:10+x[t>>10]:t<16777216?t<524288?15+x[t>>15]:20+x[t>>20]:t<536870912?25+x[t>>25]:t<-2147483648?30+x[t>>30]:0)-1,T=n-1-0*_,I=T,E=T+-(t>>3),C=0,B=1+(t>>4>>2);0<--B;){var L=g[I]-g[E],P=g[I+-1]-g[E+-1],A=I,$=g;$[A]=$[A]+g[E];var N=I+-1,R=g;R[N]=R[N]+g[E+-1],g[E]=L*a[C]-P*a[C+1],g[E+-1]=P*a[C]+L*a[C+1],C+=8,L=g[I+-2]-g[E+-2],P=g[I+-3]-g[E+-3];var F=I+-2,V=g;V[F]=V[F]+g[E+-2];var M=I+-3,H=g;H[M]=H[M]+g[E+-3],g[E+-2]=L*a[C]-P*a[C+1],g[E+-3]=P*a[C]+L*a[C+1],C+=8,L=g[I+-4]-g[E+-4],P=g[I+-5]-g[E+-5];var O=I+-4,U=g;U[O]=U[O]+g[E+-4];var D=I+-5,G=g;G[D]=G[D]+g[E+-5],g[E+-4]=L*a[C]-P*a[C+1],g[E+-5]=P*a[C]+L*a[C+1],C+=8,L=g[I+-6]-g[E+-6],P=g[I+-7]-g[E+-7];var z=I+-6,W=g;W[z]=W[z]+g[E+-6];var j=I+-7,K=g;K[j]=K[j]+g[E+-7],g[E+-6]=L*a[C]-P*a[C+1],g[E+-7]=P*a[C]+L*a[C+1],C+=8,I-=8,E-=8}for(var X=n-1-_,Y=X,Z=X+-(t>>3),Q=0,q=1+(t>>4>>2);0<--q;){var J=g[Y]-g[Z],ee=g[Y+-1]-g[Z+-1],te=Y,ae=g;ae[te]=ae[te]+g[Z];var re=Y+-1,ie=g;ie[re]=ie[re]+g[Z+-1],g[Z]=J*a[Q]-ee*a[Q+1],g[Z+-1]=ee*a[Q]+J*a[Q+1],Q+=8,J=g[Y+-2]-g[Z+-2],ee=g[Y+-3]-g[Z+-3];var se=Y+-2,ne=g;ne[se]=ne[se]+g[Z+-2];var _e=Y+-3,he=g;he[_e]=he[_e]+g[Z+-3],g[Z+-2]=J*a[Q]-ee*a[Q+1],g[Z+-3]=ee*a[Q]+J*a[Q+1],Q+=8,J=g[Y+-4]-g[Z+-4],ee=g[Y+-5]-g[Z+-5];var oe=Y+-4,le=g;le[oe]=le[oe]+g[Z+-4];var ue=Y+-5,de=g;de[ue]=de[ue]+g[Z+-5],g[Z+-4]=J*a[Q]-ee*a[Q+1],g[Z+-5]=ee*a[Q]+J*a[Q+1],Q+=8,J=g[Y+-6]-g[Z+-6],ee=g[Y+-7]-g[Z+-7];var ce=Y+-6,ge=g;ge[ce]=ge[ce]+g[Z+-6];var pe=Y+-7,fe=g;fe[pe]=fe[pe]+g[Z+-7],g[Z+-6]=J*a[Q]-ee*a[Q+1],g[Z+-7]=ee*a[Q]+J*a[Q+1],Q+=8,Y-=8,Z-=8}for(var me=n-1-0*h,ke=0,ve=me,Se=me+-(t>>4),be=1+(t>>5>>2);0<--be;){var ye=g[ve]-g[Se],xe=g[ve+-1]-g[Se+-1],we=ve,Te=g;Te[we]=Te[we]+g[Se];var Ie=ve+-1,Ee=g;Ee[Ie]=Ee[Ie]+g[Se+-1],g[Se]=ye*a[ke]-xe*a[ke+1],g[Se+-1]=xe*a[ke]+ye*a[ke+1],ke+=16,ye=g[ve+-2]-g[Se+-2],xe=g[ve+-3]-g[Se+-3];var Ce=ve+-2,Be=g;Be[Ce]=Be[Ce]+g[Se+-2];var Le=ve+-3,Pe=g;Pe[Le]=Pe[Le]+g[Se+-3],g[Se+-2]=ye*a[ke]-xe*a[ke+1],g[Se+-3]=xe*a[ke]+ye*a[ke+1],ke+=16,ye=g[ve+-4]-g[Se+-4],xe=g[ve+-5]-g[Se+-5];var Ae=ve+-4,$e=g;$e[Ae]=$e[Ae]+g[Se+-4];var Ne=ve+-5,Re=g;Re[Ne]=Re[Ne]+g[Se+-5],g[Se+-4]=ye*a[ke]-xe*a[ke+1],g[Se+-5]=xe*a[ke]+ye*a[ke+1],ke+=16,ye=g[ve+-6]-g[Se+-6],xe=g[ve+-7]-g[Se+-7];var Fe=ve+-6,Ve=g;Ve[Fe]=Ve[Fe]+g[Se+-6];var Me=ve+-7,He=g;He[Me]=He[Me]+g[Se+-7],g[Se+-6]=ye*a[ke]-xe*a[ke+1],g[Se+-7]=xe*a[ke]+ye*a[ke+1],ve-=8,Se-=8,ke+=16}for(var Oe=n-1-h,Ue=0,De=Oe,Ge=Oe+-(t>>4),ze=1+(t>>5>>2);0<--ze;){var We=g[De]-g[Ge],je=g[De+-1]-g[Ge+-1],Ke=De,Xe=g;Xe[Ke]=Xe[Ke]+g[Ge];var Ye=De+-1,Ze=g;Ze[Ye]=Ze[Ye]+g[Ge+-1],g[Ge]=We*a[Ue]-je*a[Ue+1],g[Ge+-1]=je*a[Ue]+We*a[Ue+1],Ue+=16,We=g[De+-2]-g[Ge+-2],je=g[De+-3]-g[Ge+-3];var Qe=De+-2,qe=g;qe[Qe]=qe[Qe]+g[Ge+-2];var Je=De+-3,et=g;et[Je]=et[Je]+g[Ge+-3],g[Ge+-2]=We*a[Ue]-je*a[Ue+1],g[Ge+-3]=je*a[Ue]+We*a[Ue+1],Ue+=16,We=g[De+-4]-g[Ge+-4],je=g[De+-5]-g[Ge+-5];var tt=De+-4,at=g;at[tt]=at[tt]+g[Ge+-4];var rt=De+-5,it=g;it[rt]=it[rt]+g[Ge+-5],g[Ge+-4]=We*a[Ue]-je*a[Ue+1],g[Ge+-5]=je*a[Ue]+We*a[Ue+1],Ue+=16,We=g[De+-6]-g[Ge+-6],je=g[De+-7]-g[Ge+-7];var st=De+-6,nt=g;nt[st]=nt[st]+g[Ge+-6];var _t=De+-7,ht=g;ht[_t]=ht[_t]+g[Ge+-7],g[Ge+-6]=We*a[Ue]-je*a[Ue+1],g[Ge+-7]=je*a[Ue]+We*a[Ue+1],De-=8,Ge-=8,Ue+=16}for(var ot=n-1-2*h,lt=0,ut=ot,dt=ot+-(t>>4),ct=1+(t>>5>>2);0<--ct;){var gt=g[ut]-g[dt],pt=g[ut+-1]-g[dt+-1],ft=ut,mt=g;mt[ft]=mt[ft]+g[dt];var kt=ut+-1,vt=g;vt[kt]=vt[kt]+g[dt+-1],g[dt]=gt*a[lt]-pt*a[lt+1],g[dt+-1]=pt*a[lt]+gt*a[lt+1],lt+=16,gt=g[ut+-2]-g[dt+-2],pt=g[ut+-3]-g[dt+-3];var St=ut+-2,bt=g;bt[St]=bt[St]+g[dt+-2];var yt=ut+-3,xt=g;xt[yt]=xt[yt]+g[dt+-3],g[dt+-2]=gt*a[lt]-pt*a[lt+1],g[dt+-3]=pt*a[lt]+gt*a[lt+1],lt+=16,gt=g[ut+-4]-g[dt+-4],pt=g[ut+-5]-g[dt+-5];var wt=ut+-4,Tt=g;Tt[wt]=Tt[wt]+g[dt+-4];var It=ut+-5,Et=g;Et[It]=Et[It]+g[dt+-5],g[dt+-4]=gt*a[lt]-pt*a[lt+1],g[dt+-5]=pt*a[lt]+gt*a[lt+1],lt+=16,gt=g[ut+-6]-g[dt+-6],pt=g[ut+-7]-g[dt+-7];var Ct=ut+-6,Bt=g;Bt[Ct]=Bt[Ct]+g[dt+-6];var Lt=ut+-7,Pt=g;Pt[Lt]=Pt[Lt]+g[dt+-7],g[dt+-6]=gt*a[lt]-pt*a[lt+1],g[dt+-7]=pt*a[lt]+gt*a[lt+1],ut-=8,dt-=8,lt+=16}for(var At=n-1-3*h,$t=0,Nt=At,Rt=At+-(t>>4),Ft=1+(t>>5>>2);0<--Ft;){var Vt=g[Nt]-g[Rt],Mt=g[Nt+-1]-g[Rt+-1],Ht=Nt,Ot=g;Ot[Ht]=Ot[Ht]+g[Rt];var Ut=Nt+-1,Dt=g;Dt[Ut]=Dt[Ut]+g[Rt+-1],g[Rt]=Vt*a[$t]-Mt*a[$t+1],g[Rt+-1]=Mt*a[$t]+Vt*a[$t+1],$t+=16,Vt=g[Nt+-2]-g[Rt+-2],Mt=g[Nt+-3]-g[Rt+-3];var Gt=Nt+-2,zt=g;zt[Gt]=zt[Gt]+g[Rt+-2];var Wt=Nt+-3,jt=g;jt[Wt]=jt[Wt]+g[Rt+-3],g[Rt+-2]=Vt*a[$t]-Mt*a[$t+1],g[Rt+-3]=Mt*a[$t]+Vt*a[$t+1],$t+=16,Vt=g[Nt+-4]-g[Rt+-4],Mt=g[Nt+-5]-g[Rt+-5];var Kt=Nt+-4,Xt=g;Xt[Kt]=Xt[Kt]+g[Rt+-4];var Yt=Nt+-5,Zt=g;Zt[Yt]=Zt[Yt]+g[Rt+-5],g[Rt+-4]=Vt*a[$t]-Mt*a[$t+1],g[Rt+-5]=Mt*a[$t]+Vt*a[$t+1],$t+=16,Vt=g[Nt+-6]-g[Rt+-6],Mt=g[Nt+-7]-g[Rt+-7];var Qt=Nt+-6,qt=g;qt[Qt]=qt[Qt]+g[Rt+-6];var Jt=Nt+-7,ea=g;ea[Jt]=ea[Jt]+g[Rt+-7],g[Rt+-6]=Vt*a[$t]-Mt*a[$t+1],g[Rt+-7]=Mt*a[$t]+Vt*a[$t+1],Nt-=8,Rt-=8,$t+=16}for(var ta=2,aa=w-3>>1;ta<aa;)for(var ra=ta++,ia=t>>ra+2,sa=ia>>1,na=0,_a=1<<ra+1;na<_a;)for(var ha=n-1-ia*na++,oa=1<<ra+3,la=0,ua=ha,da=ha+-sa,ca=1+(t>>ra+4>>2);0<--ca;){var ga=g[ua]-g[da],pa=g[ua+-1]-g[da+-1],fa=ua,ma=g;ma[fa]=ma[fa]+g[da];var ka=ua+-1,va=g;va[ka]=va[ka]+g[da+-1],g[da]=ga*a[la]-pa*a[la+1],g[da+-1]=pa*a[la]+ga*a[la+1],la+=oa,ga=g[ua+-2]-g[da+-2],pa=g[ua+-3]-g[da+-3];var Sa=ua+-2,ba=g;ba[Sa]=ba[Sa]+g[da+-2];var ya=ua+-3,xa=g;xa[ya]=xa[ya]+g[da+-3],g[da+-2]=ga*a[la]-pa*a[la+1],g[da+-3]=pa*a[la]+ga*a[la+1],la+=oa,ga=g[ua+-4]-g[da+-4],pa=g[ua+-5]-g[da+-5];var wa=ua+-4,Ta=g;Ta[wa]=Ta[wa]+g[da+-4];var Ia=ua+-5,Ea=g;Ea[Ia]=Ea[Ia]+g[da+-5],g[da+-4]=ga*a[la]-pa*a[la+1],g[da+-5]=pa*a[la]+ga*a[la+1],la+=oa,ga=g[ua+-6]-g[da+-6],pa=g[ua+-7]-g[da+-7];var Ca=ua+-6,Ba=g;Ba[Ca]=Ba[Ca]+g[da+-6];var La=ua+-7,Pa=g;Pa[La]=Pa[La]+g[da+-7],g[da+-6]=ga*a[la]-pa*a[la+1],g[da+-7]=pa*a[la]+ga*a[la+1],ua-=8,da-=8,la+=oa}for(var Aa=w-3>>1,$a=w-6;Aa<$a;)for(var Na=Aa++,Ra=t>>Na+2,Fa=1<<Na+3,Va=Ra>>1,Ma=1<<Na+1,Ha=0,Oa=n-1,Ua=(t>>Na+6)+1;0<--Ua;){for(var Da=a[Ha],Ga=a[Ha+1],za=a[Ha+Fa],Wa=a[Ha+Fa+1],ja=a[Ha+2*Fa],Ka=a[Ha+2*Fa+1],Xa=a[Ha+3*Fa],Ya=a[Ha+3*Fa+1],Za=Oa,Qa=Oa+-Va,qa=Ma+1;0<--qa;){var Ja=g[Za]-g[Qa],er=g[Za+-1]-g[Qa+-1];g[Za]=g[Za]+g[Qa],g[Za+-1]=g[Za+-1]+g[Qa+-1],g[Qa]=Ja*Da-er*Ga,g[Qa+-1]=er*Da+Ja*Ga,Ja=g[Za+-2]-g[Qa+-2],er=g[Za+-3]-g[Qa+-3],g[Za+-2]=g[Za+-2]+g[Qa+-2],g[Za+-3]=g[Za+-3]+g[Qa+-3],g[Qa+-2]=Ja*za-er*Wa,g[Qa+-3]=er*za+Ja*Wa,Ja=g[Za+-4]-g[Qa+-4],er=g[Za+-5]-g[Qa+-5],g[Za+-4]=g[Za+-4]+g[Qa+-4],g[Za+-5]=g[Za+-5]+g[Qa+-5],g[Qa+-4]=Ja*ja-er*Ka,g[Qa+-5]=er*ja+Ja*Ka,Ja=g[Za+-6]-g[Qa+-6],er=g[Za+-7]-g[Qa+-7],g[Za+-6]=g[Za+-6]+g[Qa+-6],g[Za+-7]=g[Za+-7]+g[Qa+-7],g[Qa+-6]=Ja*Xa-er*Ya,g[Qa+-7]=er*Xa+Ja*Ya,Za-=Ra,Qa-=Ra}Ha+=4*Fa,Oa-=8}for(var tr=n-1,ar=a[t>>3],rr=tr,ir=tr-16*(t>>5);ir<rr;){var sr=g[rr],nr=g[rr+-8];g[rr+-8]=sr-nr,g[rr]=sr+nr,sr=g[rr+-1],nr=g[rr+-9],g[rr+-9]=sr-nr,g[rr+-1]=sr+nr;var _r=(sr=g[rr+-2])-(nr=g[rr+-10]);g[rr+-2]=sr+nr;var hr=(sr=g[rr+-3])-(nr=g[rr+-11]);g[rr+-3]=sr+nr,g[rr+-10]=(_r+hr)*ar,g[rr+-11]=(hr-_r)*ar,sr=g[rr+-4],_r=(nr=g[rr+-12])-sr,g[rr+-4]=sr+nr,hr=(sr=g[rr+-5])-(nr=g[rr+-13]),g[rr+-5]=sr+nr,g[rr+-12]=hr,g[rr+-13]=_r,sr=g[rr+-6],_r=(nr=g[rr+-14])-sr,g[rr+-6]=sr+nr,hr=(sr=g[rr+-7])-(nr=g[rr+-15]),g[rr+-7]=sr+nr,g[rr+-14]=(_r+hr)*ar,g[rr+-15]=(_r-hr)*ar;var or=g[rr],lr=g[rr+-4],ur=or-lr,dr=or+lr,cr=(or=g[rr+-2])+(lr=g[rr+-6]),gr=or-lr;g[rr]=dr+cr,g[rr+-2]=dr-cr;var pr=g[rr+-3]-g[rr+-7];g[rr+-4]=ur+pr,g[rr+-6]=ur-pr;var fr=(or=g[rr+-1])-(lr=g[rr+-5]),mr=or+lr,kr=g[rr+-3]+g[rr+-7];g[rr+-1]=mr+kr,g[rr+-3]=mr-kr,g[rr+-5]=fr-gr,g[rr+-7]=fr+gr;var vr=rr-8,Sr=g[vr],br=g[vr+-4],yr=Sr-br,xr=Sr+br,wr=(Sr=g[vr+-2])+(br=g[vr+-6]),Tr=Sr-br;g[vr]=xr+wr,g[vr+-2]=xr-wr;var Ir=g[vr+-3]-g[vr+-7];g[vr+-4]=yr+Ir,g[vr+-6]=yr-Ir;var Er=(Sr=g[vr+-1])-(br=g[vr+-5]),Cr=Sr+br,Br=g[vr+-3]+g[vr+-7];g[vr+-1]=Cr+Br,g[vr+-3]=Cr-Br,g[vr+-5]=Er-Tr,g[vr+-7]=Er+Tr,rr-=16}for(var Lr=0,Pr=_-4,Ar=n-4;0<=Pr;){var $r=s[Lr];p[Ar+3]=g[$r],p[Ar+2]=g[$r+1],p[Pr+3]=g[$r+2],p[Pr+2]=g[$r+3],$r=s[Lr+1],p[Ar+1]=g[$r],p[Ar]=g[$r+1],p[Pr+1]=g[$r+2],p[Pr]=g[$r+3],Pr-=4,Ar-=4,Lr+=2}for(var Nr=0,Rr=0,Fr=n-4;Rr<Fr;){var Vr=p[Rr]-p[Fr+2],Mr=p[Rr+1]+p[Fr+3],Hr=i[Nr+1]*Vr+i[Nr]*Mr,Or=i[Nr+1]*Mr-i[Nr]*Vr,Ur=p[Rr]+p[Fr+2],Dr=p[Rr+1]-p[Fr+3];p[Rr]=Ur+Hr,p[Rr+1]=Dr+Or,p[Fr+2]=Ur-Hr,p[Fr+3]=Or-Dr,Vr=p[Rr+2]-p[Fr],Mr=p[Rr+3]+p[Fr+1],Hr=i[Nr+3]*Vr+i[Nr+2]*Mr,Or=i[Nr+3]*Mr-i[Nr+2]*Vr,Ur=p[Rr+2]+p[Fr],Dr=p[Rr+3]-p[Fr+1],p[Rr+2]=Ur+Hr,p[Rr+3]=Dr+Or,p[Fr]=Ur-Hr,p[Fr+1]=Or-Dr,Nr+=4,Rr+=4,Fr-=4}for(var Gr=n-8,zr=n-8,Wr=0,jr=n-4,Kr=n,Xr=t-4;0<=zr;){var Yr=o[zr+6]*r[Gr+7]-o[zr+7]*r[Gr+6],Zr=-o[zr+6]*r[Gr+6]-o[zr+7]*r[Gr+7];e[Wr]=Yr,e[jr+3]=-Yr,e[Kr]=Zr,e[Xr+3]=Zr;var Qr=o[zr+4]*r[Gr+5]-o[zr+5]*r[Gr+4],qr=-o[zr+4]*r[Gr+4]-o[zr+5]*r[Gr+5];e[Wr+1]=Qr,e[jr+2]=-Qr,e[Kr+1]=qr,e[Xr+2]=qr,Yr=o[zr+2]*r[Gr+3]-o[zr+3]*r[Gr+2],Zr=-o[zr+2]*r[Gr+2]-o[zr+3]*r[Gr+3],e[Wr+2]=Yr,e[jr+1]=-Yr,e[Kr+2]=Zr,e[Xr+1]=Zr,Qr=o[zr]*r[Gr+1]-o[zr+1]*r[Gr],qr=-o[zr]*r[Gr]-o[zr+1]*r[Gr+1],e[Wr+3]=Qr,e[jr]=-Qr,e[Kr+3]=qr,e[Xr]=qr,Gr-=8,zr-=8,Wr+=4,Kr+=4,jr-=4,Xr-=4}},kha_audio2_ogg_tools_Mdct.step3Iter0Loop=function(e,t,a,r,i){for(var s=a,n=a+r,_=0,h=1+(e>>2);0<--h;){var o=t[s]-t[n],l=t[s+-1]-t[n+-1],u=s,d=t;d[u]=d[u]+t[n];var c=s+-1,g=t;g[c]=g[c]+t[n+-1],t[n]=o*i[_]-l*i[_+1],t[n+-1]=l*i[_]+o*i[_+1],_+=8,o=t[s+-2]-t[n+-2],l=t[s+-3]-t[n+-3];var p=s+-2,f=t;f[p]=f[p]+t[n+-2];var m=s+-3,k=t;k[m]=k[m]+t[n+-3],t[n+-2]=o*i[_]-l*i[_+1],t[n+-3]=l*i[_]+o*i[_+1],_+=8,o=t[s+-4]-t[n+-4],l=t[s+-5]-t[n+-5];var v=s+-4,S=t;S[v]=S[v]+t[n+-4];var b=s+-5,y=t;y[b]=y[b]+t[n+-5],t[n+-4]=o*i[_]-l*i[_+1],t[n+-5]=l*i[_]+o*i[_+1],_+=8,o=t[s+-6]-t[n+-6],l=t[s+-7]-t[n+-7];var x=s+-6,w=t;w[x]=w[x]+t[n+-6];var T=s+-7,I=t;I[T]=I[T]+t[n+-7],t[n+-6]=o*i[_]-l*i[_+1],t[n+-7]=l*i[_]+o*i[_+1],_+=8,s-=8,n-=8}},kha_audio2_ogg_tools_Mdct.step3InnerRLoop=function(e,t,a,r,i,s){for(var n=0,_=a,h=a+r,o=1+(e>>2);0<--o;){var l=t[_]-t[h],u=t[_+-1]-t[h+-1],d=_,c=t;c[d]=c[d]+t[h];var g=_+-1,p=t;p[g]=p[g]+t[h+-1],t[h]=l*i[n]-u*i[n+1],t[h+-1]=u*i[n]+l*i[n+1],n+=s,l=t[_+-2]-t[h+-2],u=t[_+-3]-t[h+-3];var f=_+-2,m=t;m[f]=m[f]+t[h+-2];var k=_+-3,v=t;v[k]=v[k]+t[h+-3],t[h+-2]=l*i[n]-u*i[n+1],t[h+-3]=u*i[n]+l*i[n+1],n+=s,l=t[_+-4]-t[h+-4],u=t[_+-5]-t[h+-5];var S=_+-4,b=t;b[S]=b[S]+t[h+-4];var y=_+-5,x=t;x[y]=x[y]+t[h+-5],t[h+-4]=l*i[n]-u*i[n+1],t[h+-5]=u*i[n]+l*i[n+1],n+=s,l=t[_+-6]-t[h+-6],u=t[_+-7]-t[h+-7];var w=_+-6,T=t;T[w]=T[w]+t[h+-6];var I=_+-7,E=t;E[I]=E[I]+t[h+-7],t[h+-6]=l*i[n]-u*i[n+1],t[h+-7]=u*i[n]+l*i[n+1],_-=8,h-=8,n+=s}},kha_audio2_ogg_tools_Mdct.step3InnerSLoop=function(e,t,a,r,i,s,n,_){for(var h=i[s],o=i[s+1],l=i[s+n],u=i[s+n+1],d=i[s+2*n],c=i[s+2*n+1],g=i[s+3*n],p=i[s+3*n+1],f=a,m=a+r,k=e+1;0<--k;){var v=t[f]-t[m],S=t[f+-1]-t[m+-1];t[f]=t[f]+t[m],t[f+-1]=t[f+-1]+t[m+-1],t[m]=v*h-S*o,t[m+-1]=S*h+v*o,v=t[f+-2]-t[m+-2],S=t[f+-3]-t[m+-3],t[f+-2]=t[f+-2]+t[m+-2],t[f+-3]=t[f+-3]+t[m+-3],t[m+-2]=v*l-S*u,t[m+-3]=S*l+v*u,v=t[f+-4]-t[m+-4],S=t[f+-5]-t[m+-5],t[f+-4]=t[f+-4]+t[m+-4],t[f+-5]=t[f+-5]+t[m+-5],t[m+-4]=v*d-S*c,t[m+-5]=S*d+v*c,v=t[f+-6]-t[m+-6],S=t[f+-7]-t[m+-7],t[f+-6]=t[f+-6]+t[m+-6],t[f+-7]=t[f+-7]+t[m+-7],t[m+-6]=v*g-S*p,t[m+-7]=S*g+v*p,f-=_,m-=_}},kha_audio2_ogg_tools_Mdct.iter54=function(e,t){var a=e[t],r=e[t+-4],i=a-r,s=a+r,n=(a=e[t+-2])+(r=e[t+-6]),_=a-r;e[t]=s+n,e[t+-2]=s-n;var h=e[t+-3]-e[t+-7];e[t+-4]=i+h,e[t+-6]=i-h;var o=(a=e[t+-1])-(r=e[t+-5]),l=a+r,u=e[t+-3]+e[t+-7];e[t+-1]=l+u,e[t+-3]=l-u,e[t+-5]=o-_,e[t+-7]=o+_},kha_audio2_ogg_tools_Mdct.step3InnerSLoopLd654=function(e,t,a,r,i){for(var s=r[i>>3],n=a,_=a-16*e;_<n;){var h=t[n],o=t[n+-8];t[n+-8]=h-o,t[n]=h+o,h=t[n+-1],o=t[n+-9],t[n+-9]=h-o,t[n+-1]=h+o;var l=(h=t[n+-2])-(o=t[n+-10]);t[n+-2]=h+o;var u=(h=t[n+-3])-(o=t[n+-11]);t[n+-3]=h+o,t[n+-10]=(l+u)*s,t[n+-11]=(u-l)*s,h=t[n+-4],l=(o=t[n+-12])-h,t[n+-4]=h+o,u=(h=t[n+-5])-(o=t[n+-13]),t[n+-5]=h+o,t[n+-12]=u,t[n+-13]=l,h=t[n+-6],l=(o=t[n+-14])-h,t[n+-6]=h+o,u=(h=t[n+-7])-(o=t[n+-15]),t[n+-7]=h+o,t[n+-14]=(l+u)*s,t[n+-15]=(l-u)*s;var d=t[n],c=t[n+-4],g=d-c,p=d+c,f=(d=t[n+-2])+(c=t[n+-6]),m=d-c;t[n]=p+f,t[n+-2]=p-f;var k=t[n+-3]-t[n+-7];t[n+-4]=g+k,t[n+-6]=g-k;var v=(d=t[n+-1])-(c=t[n+-5]),S=d+c,b=t[n+-3]+t[n+-7];t[n+-1]=S+b,t[n+-3]=S-b,t[n+-5]=v-m,t[n+-7]=v+m;var y=n-8,x=t[y],w=t[y+-4],T=x-w,I=x+w,E=(x=t[y+-2])+(w=t[y+-6]),C=x-w;t[y]=I+E,t[y+-2]=I-E;var B=t[y+-3]-t[y+-7];t[y+-4]=T+B,t[y+-6]=T-B;var L=(x=t[y+-1])-(w=t[y+-5]),P=x+w,A=t[y+-3]+t[y+-7];t[y+-1]=P+A,t[y+-3]=P-A,t[y+-5]=L-C,t[y+-7]=L+C,n-=16}};var kha_audio2_ogg_vorbis_Reader=$hxClasses["kha.audio2.ogg.vorbis.Reader"]=function(e,t,a){this.seekFunc=t,this.inputLength=a,this.decoder=kha_audio2_ogg_vorbis_VorbisDecoder.start(e),this.decoder.setupSampleNumber(t,a),this.loopStart=this.get_header().comment.get_loopStart(),this.loopLength=this.get_header().comment.get_loopLength()};kha_audio2_ogg_vorbis_Reader.__name__=!0,kha_audio2_ogg_vorbis_Reader.openFromBytes=function(e){var t=new haxe_io_BytesInput(e),a=t;return new kha_audio2_ogg_vorbis_Reader(t,function(e){kha_audio2_ogg_vorbis_Reader.seekBytes(a,e)},e.length)},kha_audio2_ogg_vorbis_Reader.seekBytes=function(e,t){e.set_position(t)},kha_audio2_ogg_vorbis_Reader.readAll=function(e,t,a){null==a&&(a=!1);var r=new haxe_io_BytesInput(e),i=kha_audio2_ogg_vorbis_VorbisDecoder.start(r),s=r;i.setupSampleNumber(function(e){kha_audio2_ogg_vorbis_Reader.seekBytes(s,e)},e.length);for(var n=i.header,_=new Float32Array(4096*n.channel);;){for(var h=i.read(_,4096,n.channel,n.sampleRate,a),o=0,l=h*n.channel;o<l;){var u=o++;t.writeFloat(_[u])}if(0==h)break;h}return i.header},kha_audio2_ogg_vorbis_Reader.prototype={decoder:null,get_header:function(){return this.decoder.header},get_totalSample:function(){return this.decoder.totalSample},get_totalMillisecond:function(){var e=this.decoder.totalSample,t=this.get_header().sampleRate;return _$UInt_UInt_$Impl_$.toFloat(e)/_$UInt_UInt_$Impl_$.toFloat(t)*1e3},get_currentSample:function(){return this.decoder.currentSample},set_currentSample:function(e){return this.decoder.seek(this.seekFunc,this.inputLength,e),this.decoder.currentSample},get_currentMillisecond:function(){var e=this.get_currentSample(),t=this.get_header().sampleRate;return _$UInt_UInt_$Impl_$.toFloat(e)/_$UInt_UInt_$Impl_$.toFloat(t)*1e3},set_currentMillisecond:function(e){var t=e/1e3,a=this.get_header().sampleRate;return this.set_currentSample(Math.floor(_$UInt_UInt_$Impl_$.toFloat(a)*t)),this.get_currentMillisecond()},loopStart:null,loopLength:null,seekFunc:null,inputLength:null,read:function(e,t,a,r,i){return null==i&&(i=!1),this.decoder.ensurePosition(this.seekFunc),null==t&&(t=this.decoder.totalSample),null==a&&(a=this.get_header().channel),null==r&&(r=this.get_header().sampleRate),this.decoder.read(e,t,a,r,i)},clone:function(){var e=Object.create(kha_audio2_ogg_vorbis_Reader.prototype);return e.seekFunc=this.seekFunc,e.inputLength=this.inputLength,e.decoder=this.decoder.clone(this.seekFunc),e.loopStart=this.loopStart,e.loopLength=this.loopLength,e},sampleToMillisecond:function(e){var t=this.get_header().sampleRate;return _$UInt_UInt_$Impl_$.toFloat(e)/_$UInt_UInt_$Impl_$.toFloat(t)*1e3},millisecondToSample:function(e){var t=e/1e3,a=this.get_header().sampleRate;return Math.floor(_$UInt_UInt_$Impl_$.toFloat(a)*t)},__class__:kha_audio2_ogg_vorbis_Reader};var kha_audio2_ogg_vorbis_VorbisDecodeState=$hxClasses["kha.audio2.ogg.vorbis.VorbisDecodeState"]=function(e){this.nextSeg=0,this.firstDecode=!1,this.bytesInSeg=0,this.validBits=0,this.input=e,this.inputPosition=0,this.page=new kha_audio2_ogg_vorbis_data_Page,kha_audio2_ogg_tools_Crc32.init()};kha_audio2_ogg_vorbis_VorbisDecodeState.__name__=!0,kha_audio2_ogg_vorbis_VorbisDecodeState.prototype={page:null,eof:null,pFirst:null,pLast:null,validBits:null,inputPosition:null,input:null,discardSamplesDeferred:null,segments:null,bytesInSeg:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,currentSample:null,previousWindow:null,previousLength:null,finalY:null,firstDecode:null,nextSeg:null,acc:null,lastSeg:null,lastSegWhich:null,endSegWithKnownLoc:null,knownLocForPacket:null,error:null,currentLoc:null,currentLocValid:null,firstAudioPageOffset:null,setup:function(e,t){this.inputPosition+=1;var a=this.input.readByte();this.inputPosition+=a;for(var r=new Array(a),i=0,s=a;i<s;){r[i++]=this.input.readByte()}if(this.segments=r,this.endSegWithKnownLoc=-2,-1!=e||-1!=t)for(var n=a-1;0<=n&&!(this.segments[n]<255);)0<=n&&(this.endSegWithKnownLoc=n,this.knownLocForPacket=e),--n;if(this.firstDecode){for(var _=0,h=new kha_audio2_ogg_vorbis_data_ProbedPage,o=0,l=a;o<l;){var u=o++;_+=this.segments[u]}_+=27+a,h.pageStart=this.firstAudioPageOffset,h.pageEnd=h.pageStart+_,h.firstDecodedSample=0,h.lastDecodedSample=e,this.pFirst=h}this.nextSeg=0},clone:function(e){var t=Object.create(kha_audio2_ogg_vorbis_VorbisDecodeState.prototype);return e(this.inputPosition),t.input=this.input,t.eof=this.eof,t.validBits=this.validBits,t.discardSamplesDeferred=this.discardSamplesDeferred,t.firstDecode=this.firstDecode,t.nextSeg=this.nextSeg,t.bytesInSeg=this.bytesInSeg,t.acc=t.acc,t.lastSeg=this.lastSeg,t.lastSegWhich=this.lastSegWhich,t.currentLoc=this.currentLoc,t.currentLocValid=this.currentLocValid,t.inputPosition=this.inputPosition,t.firstAudioPageOffset=this.firstAudioPageOffset,t.error=this.error,t.segments=this.segments,t.pFirst=this.pFirst,t.pLast=this.pLast,t.page=this.page.clone(),t},next:function(){if(this.lastSeg)return 0;if(-1==this.nextSeg){this.lastSegWhich=this.segments.length-1;try{this.page.start(this)}catch(e){var t=e instanceof js__$Boot_HaxeError?e.val:e;if(t instanceof kha_audio2_ogg_vorbis_data_ReaderError)return this.lastSeg=!0,this.error=t,0;throw e}if(0==(1&this.page.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CONTINUED_PACKET_FLAG_INVALID,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:171,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}))}var e=this.segments[this.nextSeg++];if(e<255&&(this.lastSeg=!0,this.lastSegWhich=this.nextSeg-1),this.nextSeg>=this.segments.length&&(this.nextSeg=-1),0!=this.bytesInSeg)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:184,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}));return this.bytesInSeg=e},startPacket:function(){for(;-1==this.nextSeg;)if(this.page.start(this),0!=(1&this.page.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:193,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"startPacket"}));this.lastSeg=!1,this.validBits=0,this.bytesInSeg=0},maybeStartPacket:function(){if(-1==this.nextSeg){var t,e,a,r,i=!1;try{this.inputPosition+=1,t=this.input.readByte()}catch(e){var s=e instanceof js__$Boot_HaxeError?e.val:e;if(!(s instanceof haxe_io_Eof))throw e;i=!0,t=0}if(i)return!1;if(79==t?(this.inputPosition+=1,r=103!=this.input.readByte()):r=!0,r?a=!0:(this.inputPosition+=1,a=103!=this.input.readByte()),a?e=!0:(this.inputPosition+=1,e=83!=this.input.readByte()),e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:218,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"maybeStartPacket"}));this.page.startWithoutCapturePattern(this)}return this.startPacket(),!0},readBits:function(e){if(this.validBits<0)return 0;if(this.validBits<e){if(24<e)return this.readBits(24)+(this.readBits(e-24)<<24);for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next())){this.validBits=-1;break}if(this.bytesInSeg--,this.inputPosition+=1,this.acc=this.acc+(this.input.readByte()<<this.validBits),this.validBits+=8,!(this.validBits<e))break}if(this.validBits<0)return 0;var t=this.acc&(1<<e)-1;return this.acc=this.acc>>>e,this.validBits-=e,t}var a=this.acc&(1<<e)-1;return this.acc=this.acc>>>e,this.validBits-=e,a},readPacketRaw:function(){return 0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1},readPacket:function(){var e;return 0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,e=this.input.readByte()):e=-1,this.validBits=0,e},flushPacket:function(){for(;0!=this.bytesInSeg||!this.lastSeg&&0!=this.next();)this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()},vorbisValidate:function(){for(var e=new haxe_io_Bytes(new ArrayBuffer(6)),t=0;t<6;){var a,r=t++;0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,a=this.input.readByte()):a=-1,this.validBits=0,e.b[r]=255&a}if("vorbis"!=e.toString())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}))},firstPageValidate:function(){if(1!=this.segments.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"segmentCount",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:308,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}));if(30!=this.segments[0])throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:311,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}))},startFirstDecode:function(){this.firstAudioPageOffset=this.inputPosition,this.firstDecode=!0},capturePattern:function(){var e,t,a;if(this.inputPosition+=1,79==this.input.readByte()?(this.inputPosition+=1,a=103!=this.input.readByte()):a=!0,a?t=!0:(this.inputPosition+=1,t=103!=this.input.readByte()),t?e=!0:(this.inputPosition+=1,e=83!=this.input.readByte()),e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}))},skip:function(e){this.inputPosition+=e;for(var t=new Array(e),a=0,r=e;a<r;){t[a++]=this.input.readByte()}},prepHuffman:function(){if(this.validBits<=24)for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next()))return;if(this.bytesInSeg--,this.inputPosition+=1,this.acc=this.acc+(this.input.readByte()<<this.validBits),this.validBits+=8,!(this.validBits<=24))break}},decode:function(e){this.validBits<10&&this.prepHuffman();var t,a=e.fastHuffman[1023&this.acc];if(0<=a){var r=e.codewordLengths[a];this.acc=this.acc>>>r,this.validBits-=r,this.validBits<0?(this.validBits=0,t=-1):t=a}else t=this.decodeScalarRaw(e);return e.sparse&&(t=e.sortedValues[t]),t},decodeRaw:function(e){this.validBits<10&&this.prepHuffman();var t=e.fastHuffman[1023&this.acc];if(0<=t){var a=e.codewordLengths[t];return this.acc=this.acc>>>a,this.validBits-=a,this.validBits<0?(this.validBits=0,-1):t}return this.decodeScalarRaw(e)},isLastByte:function(){return 0==this.bytesInSeg&&this.lastSeg},finishDecodePacket:function(e,t,a){var r=a.left.start,i=!1,s=t>>1;if(this.firstDecode)this.currentLoc=-s,this.discardSamplesDeferred=t-a.right.end,i=!0,this.firstDecode=!1;else if(0!=this.discardSamplesDeferred)a.left.start+=this.discardSamplesDeferred,r=a.left.start,this.discardSamplesDeferred=0;else;if(this.lastSegWhich==this.endSegWithKnownLoc){if(i&&0!=(4&this.page.flag)){var n=this.knownLocForPacket-(t-a.right.end);if(n<this.currentLoc+a.right.end){var _=n<this.currentLoc?0:n-this.currentLoc;return _+=a.left.start,this.currentLoc+=_,{len:_,left:r,right:a.right.start}}}this.currentLoc=this.knownLocForPacket-(s-a.left.start),i=!0}return i&&(this.currentLoc+=a.right.start-a.left.start),{len:a.right.end,left:r,right:a.right.start}},readInt32:function(){return this.inputPosition+=4,this.input.readInt32()},readByte:function(){return this.inputPosition+=1,this.input.readByte()},read:function(e){this.inputPosition+=e;for(var t=new Array(e),a=0,r=e;a<r;){t[a++]=this.input.readByte()}return t},readBytes:function(e){return this.inputPosition+=e,this.input.read(e)},readString:function(e){return this.inputPosition+=e,this.input.readString(e)},getSampleNumber:function(e,t){var a=this.inputPosition,r=_$UInt_UInt_$Impl_$.gte(t,65536)&&_$UInt_UInt_$Impl_$.gte(t-65536,this.firstAudioPageOffset)?t-65536:this.firstAudioPageOffset;e(this.inputPosition=r);var i=0,s=!1,n=this.findPage(e,t);switch(n._hx_index){case 0:var _=n.last;i=n.end,s=_;break;case 1:throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}))}var h=this.inputPosition;e:for(;!s;){e(this.inputPosition=i);var o=this.findPage(e,t);switch(o._hx_index){case 0:var l=o.last;i=o.end,s=l;break;case 1:break e}r=h+1,h=this.inputPosition}e(this.inputPosition=h),this.inputPosition+=6;for(var u=new Array(6),d=0;d<6;){u[d++]=this.input.readByte()}this.inputPosition+=4;var c=this.input.readInt32();this.inputPosition+=4;var g=this.input.readInt32();if(-1==c&&-1==g||0<g)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:553,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}));return this.pLast=new kha_audio2_ogg_vorbis_data_ProbedPage,this.pLast.pageStart=h,this.pLast.pageEnd=i,this.pLast.lastDecodedSample=c,this.pLast.firstDecodedSample=null,this.pLast.afterPreviousPageStart=r,e(this.inputPosition=a),c},forcePageResync:function(){this.nextSeg=-1},setInputOffset:function(e,t){e(this.inputPosition=t)},findPage:function(e,t){try{for(;;){if(this.inputPosition+=1,79==this.input.readByte()){var a,r,i=this.inputPosition;if(t<i-25)return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound;if(this.inputPosition+=1,103==this.input.readByte()?(this.inputPosition+=1,r=103!=this.input.readByte()):r=!0,r?a=!0:(this.inputPosition+=1,a=83!=this.input.readByte()),a)continue;var s=new Array(27);s[0]=79,s[1]=103,s[2]=103,s[3]=83;for(var n=4;n<27;){var _=n++;this.inputPosition+=1,s[_]=this.input.readByte()}if(0!=s[4]){e(this.inputPosition=i);continue}for(var h=s[22]+(s[23]<<8)+(s[24]<<16)+(s[25]<<24),o=22;o<26;){s[o++]=0}for(var l=0,u=0;u<27;){var d=u++;l=l<<8^kha_audio2_ogg_tools_Crc32.table[s[d]^l>>>24]}var c=0;try{for(var g=0,p=s[26];g<p;){g++;this.inputPosition+=1;var f=this.input.readByte();l=l<<8^kha_audio2_ogg_tools_Crc32.table[f^l>>>24],c+=f}for(var m=0,k=c;m<k;){m++;this.inputPosition+=1;var v=this.input.readByte();l=l<<8^kha_audio2_ogg_tools_Crc32.table[v^l>>>24]}}catch(e){var S=e instanceof js__$Boot_HaxeError?e.val:e;if(S instanceof haxe_io_Eof){return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound}throw e}if(l==h){var b=this.inputPosition;return e(this.inputPosition=i-1),kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.Found(b,0!=(4&s[5]))}}}}catch(e){var y=e instanceof js__$Boot_HaxeError?e.val:e;if(y instanceof haxe_io_Eof){return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound}throw e}},analyzePage:function(e,t){var a=new kha_audio2_ogg_vorbis_data_ProbedPage,r=new Array(255);a.pageStart=this.inputPosition,this.inputPosition+=27;for(var i=new Array(27),s=0;s<27;){i[s++]=this.input.readByte()}var n=i;if(79!=n[0]||103!=n[1]||103!=n[2]||83!=n[3])throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:661,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"analyzePage"}));var _=n[26];this.inputPosition+=_;for(var h=new Array(_),o=0,l=_;o<l;){h[o++]=this.input.readByte()}for(var u=h,d=0,c=0,g=n[26];c<g;){d+=u[c++]}if(a.pageEnd=a.pageStart+27+n[26]+d,a.lastDecodedSample=n[6]+(n[7]<<8)+(n[8]<<16)+(n[9]<<16),0!=(4&n[5]))return a.firstDecodedSample=null,e(this.inputPosition=a.pageStart),a;for(var p=0,f=0==(1&n[5]),m=t.modes.length,k=0,v=n[26];k<v;){var S=k++;if(f){if(0==u[S])return e(this.inputPosition=a.pageStart),null;this.inputPosition+=1;var b=this.input.readByte();if(0!=(1&b))return e(this.inputPosition=a.pageStart),null;b>>=1;var y=m-1,x=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];if(m<=(b&=(1<<(y<16384?y<16?x[y]:y<512?5+x[y>>5]:10+x[y>>10]:y<16777216?y<524288?15+x[y>>15]:20+x[y>>20]:y<536870912?25+x[y>>25]:y<-2147483648?30+x[y>>30]:0))-1))return e(this.inputPosition=a.pageStart),null;r[p++]=t.modes[b].blockflag;var w=u[S]-1;this.inputPosition+=w;for(var T=new Array(w),I=0,E=w;I<E;){T[I++]=this.input.readByte()}}else{var C=u[S];this.inputPosition+=C;for(var B=new Array(C),L=0,P=C;L<P;){B[L++]=this.input.readByte()}}f=u[S]<255}var A=0;1<p&&(A+=r[p-1]?t.blocksize1:t.blocksize0);for(var $=p-2;1<=$;)r[--$]?r[$+1]?A+=t.blocksize1>>1:A+=(t.blocksize1-t.blocksize0>>2)+(t.blocksize0>>1):A+=t.blocksize0>>1,--$;return a.firstDecodedSample=a.lastDecodedSample-A,e(this.inputPosition=a.pageStart),a},decodeScalarRaw:function(e){if(this.prepHuffman(),null==e.sortedCodewords&&null==e.codewords)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:788,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}));var t=e.codewordLengths,a=e.codewords,r=e.sortedCodewords;if(8<e.entries?null!=r:null!=a){for(var i=this.acc,s=(i=(-16711936&(i=(-252645136&(i=(-858993460&(i=(-1431655766&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8)>>>16|i<<16,n=0,_=e.sortedEntries;1<_;){var h=n+(_>>1);_$UInt_UInt_$Impl_$.gte(s,r[h])?(n=h,_-=_>>1):_>>=1}e.sparse||(n=e.sortedValues[n]);var o=t[n];return this.validBits>=o?(this.acc=this.acc>>>o,this.validBits-=o,n):(this.validBits=0,-1)}if(e.sparse)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:830,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}));for(var l=0,u=e.entries;l<u;){var d=l++,c=t[d];if(255!=c&&a[d]==(this.acc&(1<<c)-1))return this.validBits>=c?(this.acc=this.acc>>>c,this.validBits-=c,d):(this.validBits=0,-1)}return this.error=new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:847,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}),this.validBits=0,-1},__class__:kha_audio2_ogg_vorbis_VorbisDecodeState};var kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult=$hxEnums["kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult"]={__ename__:!0,__constructs__:["Found","NotFound"],Found:($_=function(e,t){return{_hx_index:0,end:e,last:t,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:$estr}},$_.__params__=["end","last"],$_),NotFound:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:$estr}},kha_audio2_ogg_vorbis_VorbisDecoder=$hxClasses["kha.audio2.ogg.vorbis.VorbisDecoder"]=function(e,t){this.header=e,this.decodeState=t,this.totalSample=null,this.currentSample=0,this.previousLength=0;var a=new Array(e.channel);this.channelBuffers=a;var r=new Array(e.channel);this.previousWindow=r;var i=new Array(e.channel);this.finalY=i;for(var s=0,n=e.channel;s<n;){var _=s++,h=this.channelBuffers,o=new Array(e.blocksize1);h[_]=o;var l=this.previousWindow,u=new Array(e.blocksize1/2|0);l[_]=u,this.finalY[_]=[]}var d=new Array(2);this.a=d;var c=new Array(2);this.b=c;var g=new Array(2);this.c=g;var p=new Array(2);this.window=p;var f=new Array(2);this.bitReverseData=f,this.initBlocksize(0,e.blocksize0),this.initBlocksize(1,e.blocksize1)};kha_audio2_ogg_vorbis_VorbisDecoder.__name__=!0,kha_audio2_ogg_vorbis_VorbisDecoder.start=function(e){var t=new kha_audio2_ogg_vorbis_VorbisDecodeState(e),a=kha_audio2_ogg_vorbis_data_Header.read(t),r=new kha_audio2_ogg_vorbis_VorbisDecoder(a,t);return t.startFirstDecode(),r.pumpFirstFrame(),r},kha_audio2_ogg_vorbis_VorbisDecoder.prototype={previousWindow:null,previousLength:null,finalY:null,a:null,b:null,c:null,window:null,bitReverseData:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,header:null,currentSample:null,totalSample:null,decodeState:null,read:function(e,t,a,r,i){var s=this.header.sampleRate;if(0!=(_$UInt_UInt_$Impl_$.toFloat(r)%_$UInt_UInt_$Impl_$.toFloat(s)|0))throw new js__$Boot_HaxeError("Unsupported sampleRate : can't convert "+Std.string(_$UInt_UInt_$Impl_$.toFloat(this.header.sampleRate))+" to "+r);if(a%this.header.channel!=0)throw new js__$Boot_HaxeError("Unsupported channels : can't convert "+this.header.channel+" to "+a);var n=this.header.sampleRate,_=_$UInt_UInt_$Impl_$.toFloat(r)/_$UInt_UInt_$Impl_$.toFloat(n)|0,h=a/this.header.channel|0,o=0,l=Math.floor(t/_);null!=this.totalSample&&l>this.totalSample-this.currentSample&&(l=this.totalSample-this.currentSample);for(var u=0;o<l;){var d=this.channelBufferEnd-this.channelBufferStart;l-o<=d&&(d=l-o);for(var c=this.channelBufferStart,g=this.channelBufferStart+d;c<g;)for(var p=c++,f=0,m=_;f<m;){f++;for(var k=0,v=this.header.channel;k<v;)for(var S=k++,b=0,y=h;b<y;){b++;var x=this.channelBuffers[S][p];1<x?x=1:x<-1&&(x=-1),i&&(e[u]=x,++u)}}if(o+=d,this.channelBufferStart+=d,o==l||0==this.getFrameFloat())break}for(var w=o,T=l;w<T;){w++;for(var I=0,E=_;I<E;){I++;for(var C=0,B=this.header.channel;C<B;){C++;for(var L=0,P=h;L<P;){L++;i&&(e[u]=0,++u)}}}}return this.currentSample+=l,l*_},skipSamples:function(e){var t=0;for(null!=this.totalSample&&e>this.totalSample-this.currentSample&&(e=this.totalSample-this.currentSample);t<e;){var a=this.channelBufferEnd-this.channelBufferStart;if(e-t<=a&&(a=e-t),t+=a,this.channelBufferStart+=a,t==e||0==this.getFrameFloat())break}return this.currentSample+=e,e},setupSampleNumber:function(e,t){null==this.totalSample&&(this.totalSample=this.decodeState.getSampleNumber(e,t))},seek:function(e,t,a){if(this.currentSample!=a){if(null==this.totalSample&&(this.setupSampleNumber(e,t),0==this.totalSample))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:187,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));a<0&&(a=0);var r=this.decodeState.pFirst,i=this.decodeState.pLast;if(a>=i.lastDecodedSample&&(a=i.lastDecodedSample-1),a<r.lastDecodedSample)this.seekFrameFromPage(e,r.pageStart,0,a);else{for(var s=0;r.pageEnd<i.pageStart;){var n=r.pageEnd,_=i.afterPreviousPageStart,h=r.lastDecodedSample,o=i.lastDecodedSample;if(null==h||null==o)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:219,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));_$UInt_UInt_$Impl_$.gt(_,n+4e3)&&(_-=4e3);var l=n+Math.floor(_$UInt_UInt_$Impl_$.toFloat(_-n)/_$UInt_UInt_$Impl_$.toFloat(o-h)*(a-h));if(4<=s){var u=n+(_-n>>>1);l=8<=s?u:_$UInt_UInt_$Impl_$.gt(u,l)?l+(u-l>>>1):u+(l-u>>>1)}switch(++s,e(this.decodeState.inputPosition=l),this.decodeState.findPage(e,t)._hx_index){case 0:break;case 1:throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:249,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}var d=this.decodeState.analyzePage(e,this.header);if(null==d)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:255,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));d.afterPreviousPageStart=l,d.pageStart!=i.pageStart?a<d.lastDecodedSample?i=d:r=d:i=d}if(!(r.lastDecodedSample<=a&&a<i.lastDecodedSample))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:275,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));this.seekFrameFromPage(e,i.pageStart,r.lastDecodedSample,a)}}},seekFrameFromPage:function(e,t,a,r){var i=0,s=a;e(this.decodeState.inputPosition=t),this.decodeState.nextSeg=-1;for(var n=0,_=0,h=null,o=null;;){h=o,o=this.decodeState.clone(e);var l=this.decodeInitial();if(null==l){o=h;break}_=l.left.start,n=l.left.end;var u=0==i?n:_;if(r<s+l.right.start-u)break;for(var d=this.decodeState;0!=d.bytesInSeg||!d.lastSeg&&0!=d.next();)d.bytesInSeg--,d.inputPosition+=1,d.input.readByte();s+=l.right.start-u,++i}this.decodeState=o,e(this.decodeState.inputPosition),this.previousLength=0,this.pumpFirstFrame(),this.currentSample=s,this.skipSamples(r-s)},clone:function(e){var t=Object.create(kha_audio2_ogg_vorbis_VorbisDecoder.prototype);t.currentSample=this.currentSample,t.totalSample=this.totalSample,t.previousLength=this.previousLength,t.channelBufferStart=this.channelBufferStart,t.channelBufferEnd=this.channelBufferEnd,t.a=this.a,t.b=this.b,t.c=this.c,t.window=this.window,t.bitReverseData=this.bitReverseData,t.header=this.header,t.decodeState=this.decodeState.clone(e);var a=new Array(this.header.channel);t.channelBuffers=a;var r=new Array(this.header.channel);t.previousWindow=r;var i=new Array(this.header.channel);t.finalY=i;for(var s=0,n=this.header.channel;s<n;){var _=s++;t.channelBuffers[_]=kha_audio2_ogg_vorbis_VorbisTools.copyVector(this.channelBuffers[_]),t.previousWindow[_]=kha_audio2_ogg_vorbis_VorbisTools.copyVector(this.previousWindow[_]),t.finalY[_]=Lambda.array(this.finalY[_])}return t},ensurePosition:function(e){e(this.decodeState.inputPosition)},getFrameFloat:function(){var e=this.decodePacket();if(null==e)return this.channelBufferStart=this.channelBufferEnd=0,0;var t=this.finishFrame(e);return this.channelBufferStart=e.left,this.channelBufferEnd=e.left+t,t},pumpFirstFrame:function(){this.finishFrame(this.decodePacket())},finishFrame:function(e){var t=e.len,a=e.right,r=e.left;if(0!=this.previousLength)for(var i=this.previousLength,s=this.getWindow(i),n=0,_=this.header.channel;n<_;)for(var h=n++,o=this.channelBuffers[h],l=this.previousWindow[h],u=0,d=i;u<d;){var c=u++;o[r+c]=o[r+c]*s[c]+l[c]*s[i-1-c]}var g=this.previousLength;this.previousLength=t-a;for(var p=0,f=this.header.channel;p<f;)for(var m=p++,k=this.previousWindow[m],v=this.channelBuffers[m],S=0,b=t-a;S<b;){var y=S++;k[y]=v[a+y]}return 0==g?0:(t<a&&(a=t),a-r)},getWindow:function(e){if((e<<=1)==this.header.blocksize0)return this.window[0];if(e==this.header.blocksize1)return this.window[1];throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:466,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"getWindow"}))},initBlocksize:function(e,t){var a=t>>1,r=t>>2,i=t>>3,s=this.a,n=new Array(a);s[e]=n;var _=this.b,h=new Array(a);_[e]=h;var o=this.c,l=new Array(r);o[e]=l;var u=this.window,d=new Array(a);u[e]=d;var c=this.bitReverseData,g=new Array(i);c[e]=g,kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors(t,this.a[e],this.b[e],this.c[e]),kha_audio2_ogg_vorbis_VorbisTools.computeWindow(t,this.window[e]),kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse(t,this.bitReverseData[e])},inverseMdct:function(e,t,a){for(var r=a?1:0,i=this.a[r],s=this.b[r],n=this.c[r],_=this.bitReverseData[r],h=t>>1,o=t>>2,l=t>>3,u=new Array(h),d=h-2,c=0,g=0,p=h;g!=p;)u[d+1]=e[g]*i[c]-e[g+2]*i[c+1],u[d]=e[g]*i[c+1]+e[g+2]*i[c],d-=2,c+=2,g+=4;for(g=h-3;0<=d;)u[d+1]=-e[g+2]*i[c]- -e[g]*i[c+1],u[d]=-e[g+2]*i[c+1]+-e[g]*i[c],d-=2,c+=2,g-=4;for(var f=e,m=u,k=h-8,v=o,S=0,b=o,y=0;0<=k;){var x=m[v+1]-m[S+1],w=m[v]-m[S];f[b+1]=m[v+1]+m[S+1],f[b]=m[v]+m[S],f[y+1]=x*i[k+4]-w*i[k+5],f[y]=w*i[k+4]+x*i[k+5],x=m[v+3]-m[S+3],w=m[v+2]-m[S+2],f[b+3]=m[v+3]+m[S+3],f[b+2]=m[v+2]+m[S+2],f[y+3]=x*i[k]-w*i[k+1],f[y+2]=w*i[k]+x*i[k+1],k-=8,b+=4,y+=4,v+=4,S+=4}for(var T=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],I=(t<16384?t<16?T[t]:t<512?5+T[t>>5]:10+T[t>>10]:t<16777216?t<524288?15+T[t>>15]:20+T[t>>20]:t<536870912?25+T[t>>25]:t<-2147483648?30+T[t>>30]:0)-1,E=h-1-0*o,C=E,B=E+-(t>>3),L=0,P=1+(t>>4>>2);0<--P;){var A=f[C]-f[B],$=f[C+-1]-f[B+-1],N=C,R=f;R[N]=R[N]+f[B];var F=C+-1,V=f;V[F]=V[F]+f[B+-1],f[B]=A*i[L]-$*i[L+1],f[B+-1]=$*i[L]+A*i[L+1],L+=8,A=f[C+-2]-f[B+-2],$=f[C+-3]-f[B+-3];var M=C+-2,H=f;H[M]=H[M]+f[B+-2];var O=C+-3,U=f;U[O]=U[O]+f[B+-3],f[B+-2]=A*i[L]-$*i[L+1],f[B+-3]=$*i[L]+A*i[L+1],L+=8,A=f[C+-4]-f[B+-4],$=f[C+-5]-f[B+-5];var D=C+-4,G=f;G[D]=G[D]+f[B+-4];var z=C+-5,W=f;W[z]=W[z]+f[B+-5],f[B+-4]=A*i[L]-$*i[L+1],f[B+-5]=$*i[L]+A*i[L+1],L+=8,A=f[C+-6]-f[B+-6],$=f[C+-7]-f[B+-7];var j=C+-6,K=f;K[j]=K[j]+f[B+-6];var X=C+-7,Y=f;Y[X]=Y[X]+f[B+-7],f[B+-6]=A*i[L]-$*i[L+1],f[B+-7]=$*i[L]+A*i[L+1],L+=8,C-=8,B-=8}for(var Z=h-1-o,Q=Z,q=Z+-(t>>3),J=0,ee=1+(t>>4>>2);0<--ee;){var te=f[Q]-f[q],ae=f[Q+-1]-f[q+-1],re=Q,ie=f;ie[re]=ie[re]+f[q];var se=Q+-1,ne=f;ne[se]=ne[se]+f[q+-1],f[q]=te*i[J]-ae*i[J+1],f[q+-1]=ae*i[J]+te*i[J+1],J+=8,te=f[Q+-2]-f[q+-2],ae=f[Q+-3]-f[q+-3];var _e=Q+-2,he=f;he[_e]=he[_e]+f[q+-2];var oe=Q+-3,le=f;le[oe]=le[oe]+f[q+-3],f[q+-2]=te*i[J]-ae*i[J+1],f[q+-3]=ae*i[J]+te*i[J+1],J+=8,te=f[Q+-4]-f[q+-4],ae=f[Q+-5]-f[q+-5];var ue=Q+-4,de=f;de[ue]=de[ue]+f[q+-4];var ce=Q+-5,ge=f;ge[ce]=ge[ce]+f[q+-5],f[q+-4]=te*i[J]-ae*i[J+1],f[q+-5]=ae*i[J]+te*i[J+1],J+=8,te=f[Q+-6]-f[q+-6],ae=f[Q+-7]-f[q+-7];var pe=Q+-6,fe=f;fe[pe]=fe[pe]+f[q+-6];var me=Q+-7,ke=f;ke[me]=ke[me]+f[q+-7],f[q+-6]=te*i[J]-ae*i[J+1],f[q+-7]=ae*i[J]+te*i[J+1],J+=8,Q-=8,q-=8}for(var ve=h-1-0*l,Se=0,be=ve,ye=ve+-(t>>4),xe=1+(t>>5>>2);0<--xe;){var we=f[be]-f[ye],Te=f[be+-1]-f[ye+-1],Ie=be,Ee=f;Ee[Ie]=Ee[Ie]+f[ye];var Ce=be+-1,Be=f;Be[Ce]=Be[Ce]+f[ye+-1],f[ye]=we*i[Se]-Te*i[Se+1],f[ye+-1]=Te*i[Se]+we*i[Se+1],Se+=16,we=f[be+-2]-f[ye+-2],Te=f[be+-3]-f[ye+-3];var Le=be+-2,Pe=f;Pe[Le]=Pe[Le]+f[ye+-2];var Ae=be+-3,$e=f;$e[Ae]=$e[Ae]+f[ye+-3],f[ye+-2]=we*i[Se]-Te*i[Se+1],f[ye+-3]=Te*i[Se]+we*i[Se+1],Se+=16,we=f[be+-4]-f[ye+-4],Te=f[be+-5]-f[ye+-5];var Ne=be+-4,Re=f;Re[Ne]=Re[Ne]+f[ye+-4];var Fe=be+-5,Ve=f;Ve[Fe]=Ve[Fe]+f[ye+-5],f[ye+-4]=we*i[Se]-Te*i[Se+1],f[ye+-5]=Te*i[Se]+we*i[Se+1],Se+=16,we=f[be+-6]-f[ye+-6],Te=f[be+-7]-f[ye+-7];var Me=be+-6,He=f;He[Me]=He[Me]+f[ye+-6];var Oe=be+-7,Ue=f;Ue[Oe]=Ue[Oe]+f[ye+-7],f[ye+-6]=we*i[Se]-Te*i[Se+1],f[ye+-7]=Te*i[Se]+we*i[Se+1],be-=8,ye-=8,Se+=16}for(var De=h-1-l,Ge=0,ze=De,We=De+-(t>>4),je=1+(t>>5>>2);0<--je;){var Ke=f[ze]-f[We],Xe=f[ze+-1]-f[We+-1],Ye=ze,Ze=f;Ze[Ye]=Ze[Ye]+f[We];var Qe=ze+-1,qe=f;qe[Qe]=qe[Qe]+f[We+-1],f[We]=Ke*i[Ge]-Xe*i[Ge+1],f[We+-1]=Xe*i[Ge]+Ke*i[Ge+1],Ge+=16,Ke=f[ze+-2]-f[We+-2],Xe=f[ze+-3]-f[We+-3];var Je=ze+-2,et=f;et[Je]=et[Je]+f[We+-2];var tt=ze+-3,at=f;at[tt]=at[tt]+f[We+-3],f[We+-2]=Ke*i[Ge]-Xe*i[Ge+1],f[We+-3]=Xe*i[Ge]+Ke*i[Ge+1],Ge+=16,Ke=f[ze+-4]-f[We+-4],Xe=f[ze+-5]-f[We+-5];var rt=ze+-4,it=f;it[rt]=it[rt]+f[We+-4];var st=ze+-5,nt=f;nt[st]=nt[st]+f[We+-5],f[We+-4]=Ke*i[Ge]-Xe*i[Ge+1],f[We+-5]=Xe*i[Ge]+Ke*i[Ge+1],Ge+=16,Ke=f[ze+-6]-f[We+-6],Xe=f[ze+-7]-f[We+-7];var _t=ze+-6,ht=f;ht[_t]=ht[_t]+f[We+-6];var ot=ze+-7,lt=f;lt[ot]=lt[ot]+f[We+-7],f[We+-6]=Ke*i[Ge]-Xe*i[Ge+1],f[We+-7]=Xe*i[Ge]+Ke*i[Ge+1],ze-=8,We-=8,Ge+=16}for(var ut=h-1-2*l,dt=0,ct=ut,gt=ut+-(t>>4),pt=1+(t>>5>>2);0<--pt;){var ft=f[ct]-f[gt],mt=f[ct+-1]-f[gt+-1],kt=ct,vt=f;vt[kt]=vt[kt]+f[gt];var St=ct+-1,bt=f;bt[St]=bt[St]+f[gt+-1],f[gt]=ft*i[dt]-mt*i[dt+1],f[gt+-1]=mt*i[dt]+ft*i[dt+1],dt+=16,ft=f[ct+-2]-f[gt+-2],mt=f[ct+-3]-f[gt+-3];var yt=ct+-2,xt=f;xt[yt]=xt[yt]+f[gt+-2];var wt=ct+-3,Tt=f;Tt[wt]=Tt[wt]+f[gt+-3],f[gt+-2]=ft*i[dt]-mt*i[dt+1],f[gt+-3]=mt*i[dt]+ft*i[dt+1],dt+=16,ft=f[ct+-4]-f[gt+-4],mt=f[ct+-5]-f[gt+-5];var It=ct+-4,Et=f;Et[It]=Et[It]+f[gt+-4];var Ct=ct+-5,Bt=f;Bt[Ct]=Bt[Ct]+f[gt+-5],f[gt+-4]=ft*i[dt]-mt*i[dt+1],f[gt+-5]=mt*i[dt]+ft*i[dt+1],dt+=16,ft=f[ct+-6]-f[gt+-6],mt=f[ct+-7]-f[gt+-7];var Lt=ct+-6,Pt=f;Pt[Lt]=Pt[Lt]+f[gt+-6];var At=ct+-7,$t=f;$t[At]=$t[At]+f[gt+-7],f[gt+-6]=ft*i[dt]-mt*i[dt+1],f[gt+-7]=mt*i[dt]+ft*i[dt+1],ct-=8,gt-=8,dt+=16}for(var Nt=h-1-3*l,Rt=0,Ft=Nt,Vt=Nt+-(t>>4),Mt=1+(t>>5>>2);0<--Mt;){var Ht=f[Ft]-f[Vt],Ot=f[Ft+-1]-f[Vt+-1],Ut=Ft,Dt=f;Dt[Ut]=Dt[Ut]+f[Vt];var Gt=Ft+-1,zt=f;zt[Gt]=zt[Gt]+f[Vt+-1],f[Vt]=Ht*i[Rt]-Ot*i[Rt+1],f[Vt+-1]=Ot*i[Rt]+Ht*i[Rt+1],Rt+=16,Ht=f[Ft+-2]-f[Vt+-2],Ot=f[Ft+-3]-f[Vt+-3];var Wt=Ft+-2,jt=f;jt[Wt]=jt[Wt]+f[Vt+-2];var Kt=Ft+-3,Xt=f;Xt[Kt]=Xt[Kt]+f[Vt+-3],f[Vt+-2]=Ht*i[Rt]-Ot*i[Rt+1],f[Vt+-3]=Ot*i[Rt]+Ht*i[Rt+1],Rt+=16,Ht=f[Ft+-4]-f[Vt+-4],Ot=f[Ft+-5]-f[Vt+-5];var Yt=Ft+-4,Zt=f;Zt[Yt]=Zt[Yt]+f[Vt+-4];var Qt=Ft+-5,qt=f;qt[Qt]=qt[Qt]+f[Vt+-5],f[Vt+-4]=Ht*i[Rt]-Ot*i[Rt+1],f[Vt+-5]=Ot*i[Rt]+Ht*i[Rt+1],Rt+=16,Ht=f[Ft+-6]-f[Vt+-6],Ot=f[Ft+-7]-f[Vt+-7];var Jt=Ft+-6,ea=f;ea[Jt]=ea[Jt]+f[Vt+-6];var ta=Ft+-7,aa=f;aa[ta]=aa[ta]+f[Vt+-7],f[Vt+-6]=Ht*i[Rt]-Ot*i[Rt+1],f[Vt+-7]=Ot*i[Rt]+Ht*i[Rt+1],Ft-=8,Vt-=8,Rt+=16}for(var ra=2,ia=I-3>>1;ra<ia;)for(var sa=ra++,na=t>>sa+2,_a=na>>1,ha=0,oa=1<<sa+1;ha<oa;)for(var la=h-1-na*ha++,ua=1<<sa+3,da=0,ca=la,ga=la+-_a,pa=1+(t>>sa+4>>2);0<--pa;){var fa=f[ca]-f[ga],ma=f[ca+-1]-f[ga+-1],ka=ca,va=f;va[ka]=va[ka]+f[ga];var Sa=ca+-1,ba=f;ba[Sa]=ba[Sa]+f[ga+-1],f[ga]=fa*i[da]-ma*i[da+1],f[ga+-1]=ma*i[da]+fa*i[da+1],da+=ua,fa=f[ca+-2]-f[ga+-2],ma=f[ca+-3]-f[ga+-3];var ya=ca+-2,xa=f;xa[ya]=xa[ya]+f[ga+-2];var wa=ca+-3,Ta=f;Ta[wa]=Ta[wa]+f[ga+-3],f[ga+-2]=fa*i[da]-ma*i[da+1],f[ga+-3]=ma*i[da]+fa*i[da+1],da+=ua,fa=f[ca+-4]-f[ga+-4],ma=f[ca+-5]-f[ga+-5];var Ia=ca+-4,Ea=f;Ea[Ia]=Ea[Ia]+f[ga+-4];var Ca=ca+-5,Ba=f;Ba[Ca]=Ba[Ca]+f[ga+-5],f[ga+-4]=fa*i[da]-ma*i[da+1],f[ga+-5]=ma*i[da]+fa*i[da+1],da+=ua,fa=f[ca+-6]-f[ga+-6],ma=f[ca+-7]-f[ga+-7];var La=ca+-6,Pa=f;Pa[La]=Pa[La]+f[ga+-6];var Aa=ca+-7,$a=f;$a[Aa]=$a[Aa]+f[ga+-7],f[ga+-6]=fa*i[da]-ma*i[da+1],f[ga+-7]=ma*i[da]+fa*i[da+1],ca-=8,ga-=8,da+=ua}for(var Na=I-3>>1,Ra=I-6;Na<Ra;)for(var Fa=Na++,Va=t>>Fa+2,Ma=1<<Fa+3,Ha=Va>>1,Oa=1<<Fa+1,Ua=0,Da=h-1,Ga=(t>>Fa+6)+1;0<--Ga;){for(var za=i[Ua],Wa=i[Ua+1],ja=i[Ua+Ma],Ka=i[Ua+Ma+1],Xa=i[Ua+2*Ma],Ya=i[Ua+2*Ma+1],Za=i[Ua+3*Ma],Qa=i[Ua+3*Ma+1],qa=Da,Ja=Da+-Ha,er=Oa+1;0<--er;){var tr=f[qa]-f[Ja],ar=f[qa+-1]-f[Ja+-1];f[qa]=f[qa]+f[Ja],f[qa+-1]=f[qa+-1]+f[Ja+-1],f[Ja]=tr*za-ar*Wa,f[Ja+-1]=ar*za+tr*Wa,tr=f[qa+-2]-f[Ja+-2],ar=f[qa+-3]-f[Ja+-3],f[qa+-2]=f[qa+-2]+f[Ja+-2],f[qa+-3]=f[qa+-3]+f[Ja+-3],f[Ja+-2]=tr*ja-ar*Ka,f[Ja+-3]=ar*ja+tr*Ka,tr=f[qa+-4]-f[Ja+-4],ar=f[qa+-5]-f[Ja+-5],f[qa+-4]=f[qa+-4]+f[Ja+-4],f[qa+-5]=f[qa+-5]+f[Ja+-5],f[Ja+-4]=tr*Xa-ar*Ya,f[Ja+-5]=ar*Xa+tr*Ya,tr=f[qa+-6]-f[Ja+-6],ar=f[qa+-7]-f[Ja+-7],f[qa+-6]=f[qa+-6]+f[Ja+-6],f[qa+-7]=f[qa+-7]+f[Ja+-7],f[Ja+-6]=tr*Za-ar*Qa,f[Ja+-7]=ar*Za+tr*Qa,qa-=Va,Ja-=Va}Ua+=4*Ma,Da-=8}for(var rr=h-1,ir=i[t>>3],sr=rr,nr=rr-16*(t>>5);nr<sr;){var _r=f[sr],hr=f[sr+-8];f[sr+-8]=_r-hr,f[sr]=_r+hr,_r=f[sr+-1],hr=f[sr+-9],f[sr+-9]=_r-hr,f[sr+-1]=_r+hr;var or=(_r=f[sr+-2])-(hr=f[sr+-10]);f[sr+-2]=_r+hr;var lr=(_r=f[sr+-3])-(hr=f[sr+-11]);f[sr+-3]=_r+hr,f[sr+-10]=(or+lr)*ir,f[sr+-11]=(lr-or)*ir,_r=f[sr+-4],or=(hr=f[sr+-12])-_r,f[sr+-4]=_r+hr,lr=(_r=f[sr+-5])-(hr=f[sr+-13]),f[sr+-5]=_r+hr,f[sr+-12]=lr,f[sr+-13]=or,_r=f[sr+-6],or=(hr=f[sr+-14])-_r,f[sr+-6]=_r+hr,lr=(_r=f[sr+-7])-(hr=f[sr+-15]),f[sr+-7]=_r+hr,f[sr+-14]=(or+lr)*ir,f[sr+-15]=(or-lr)*ir;var ur=f[sr],dr=f[sr+-4],cr=ur-dr,gr=ur+dr,pr=(ur=f[sr+-2])+(dr=f[sr+-6]),fr=ur-dr;f[sr]=gr+pr,f[sr+-2]=gr-pr;var mr=f[sr+-3]-f[sr+-7];f[sr+-4]=cr+mr,f[sr+-6]=cr-mr;var kr=(ur=f[sr+-1])-(dr=f[sr+-5]),vr=ur+dr,Sr=f[sr+-3]+f[sr+-7];f[sr+-1]=vr+Sr,f[sr+-3]=vr-Sr,f[sr+-5]=kr-fr,f[sr+-7]=kr+fr;var br=sr-8,yr=f[br],xr=f[br+-4],wr=yr-xr,Tr=yr+xr,Ir=(yr=f[br+-2])+(xr=f[br+-6]),Er=yr-xr;f[br]=Tr+Ir,f[br+-2]=Tr-Ir;var Cr=f[br+-3]-f[br+-7];f[br+-4]=wr+Cr,f[br+-6]=wr-Cr;var Br=(yr=f[br+-1])-(xr=f[br+-5]),Lr=yr+xr,Pr=f[br+-3]+f[br+-7];f[br+-1]=Lr+Pr,f[br+-3]=Lr-Pr,f[br+-5]=Br-Er,f[br+-7]=Br+Er,sr-=16}for(var Ar=0,$r=o-4,Nr=h-4;0<=$r;){var Rr=_[Ar];m[Nr+3]=f[Rr],m[Nr+2]=f[Rr+1],m[$r+3]=f[Rr+2],m[$r+2]=f[Rr+3],Rr=_[Ar+1],m[Nr+1]=f[Rr],m[Nr]=f[Rr+1],m[$r+1]=f[Rr+2],m[$r]=f[Rr+3],$r-=4,Nr-=4,Ar+=2}for(var Fr=0,Vr=0,Mr=h-4;Vr<Mr;){var Hr=m[Vr]-m[Mr+2],Or=m[Vr+1]+m[Mr+3],Ur=n[Fr+1]*Hr+n[Fr]*Or,Dr=n[Fr+1]*Or-n[Fr]*Hr,Gr=m[Vr]+m[Mr+2],zr=m[Vr+1]-m[Mr+3];m[Vr]=Gr+Ur,m[Vr+1]=zr+Dr,m[Mr+2]=Gr-Ur,m[Mr+3]=Dr-zr,Hr=m[Vr+2]-m[Mr],Or=m[Vr+3]+m[Mr+1],Ur=n[Fr+3]*Hr+n[Fr+2]*Or,Dr=n[Fr+3]*Or-n[Fr+2]*Hr,Gr=m[Vr+2]+m[Mr],zr=m[Vr+3]-m[Mr+1],m[Vr+2]=Gr+Ur,m[Vr+3]=zr+Dr,m[Mr]=Gr-Ur,m[Mr+1]=Dr-zr,Fr+=4,Vr+=4,Mr-=4}for(var Wr=h-8,jr=h-8,Kr=0,Xr=h-4,Yr=h,Zr=t-4;0<=jr;){var Qr=u[jr+6]*s[Wr+7]-u[jr+7]*s[Wr+6],qr=-u[jr+6]*s[Wr+6]-u[jr+7]*s[Wr+7];e[Kr]=Qr,e[Xr+3]=-Qr,e[Yr]=qr,e[Zr+3]=qr;var Jr=u[jr+4]*s[Wr+5]-u[jr+5]*s[Wr+4],ei=-u[jr+4]*s[Wr+4]-u[jr+5]*s[Wr+5];e[Kr+1]=Jr,e[Xr+2]=-Jr,e[Yr+1]=ei,e[Zr+2]=ei,Qr=u[jr+2]*s[Wr+3]-u[jr+3]*s[Wr+2],qr=-u[jr+2]*s[Wr+2]-u[jr+3]*s[Wr+3],e[Kr+2]=Qr,e[Xr+1]=-Qr,e[Yr+2]=qr,e[Zr+1]=qr,Jr=u[jr]*s[Wr+1]-u[jr+1]*s[Wr],ei=-u[jr]*s[Wr]-u[jr+1]*s[Wr+1],e[Kr+3]=Jr,e[Xr]=-Jr,e[Yr+3]=ei,e[Zr]=ei,Wr-=8,jr-=8,Kr+=4,Yr+=4,Xr-=4,Zr-=4}},decodePacket:function(){var e=this.decodeInitial();return null==e?null:this.decodePacketRest(e)},decodeInitial:function(){for(this.channelBufferStart=this.channelBufferEnd=0;;){if(!this.decodeState.maybeStartPacket())return null;if(0==this.decodeState.readBits(1))break;for(;;){var e,t=this.decodeState;if(0!=t.bytesInSeg||!t.lastSeg&&0!=t.next()?(t.bytesInSeg--,t.inputPosition+=1,e=t.input.readByte()):e=-1,t.validBits=0,-1==e)break}}var a=this.header.modes.length-1,r=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],i=this.decodeState.readBits(a<16384?a<16?r[a]:a<512?5+r[a>>5]:10+r[a>>10]:a<16777216?a<524288?15+r[a>>15]:20+r[a>>20]:a<536870912?25+r[a>>25]:a<-2147483648?30+r[a>>30]:0);if(-1==i||i>=this.header.modes.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodeInitial"}));var s,n,_,h=this.header.modes[i];h.blockflag?(s=this.header.blocksize1,n=this.decodeState.readBits(1),_=this.decodeState.readBits(1)):(n=_=0,s=this.header.blocksize0);var o=s>>1;return{mode:i,left:h.blockflag&&0==n?{start:s-this.header.blocksize0>>2,end:s+this.header.blocksize0>>2}:{start:0,end:o},right:h.blockflag&&0==_?{start:3*s-this.header.blocksize0>>2,end:3*s+this.header.blocksize0>>2}:{start:o,end:s}}},decodePacketRest:function(e){for(var t=this.header.modes[e.mode],a=new Array(256),r=new Array(256),i=t.blockflag?this.header.blocksize1:this.header.blocksize0,s=this.header.mapping[t.mapping],n=i>>1,_=[256,128,86,64],h=this.header.codebooks,o=0,l=this.header.channel;o<l;){var u=o++,d=s.chan[u].mux;a[u]=!1;var c=this.header.floorConfig[s.submapFloor[d]];if(0==c.type)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:581,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodePacketRest"}));var g=c.floor1;if(0!=this.decodeState.readBits(1)){var p=[],f=new Array(256),m=_[g.floor1Multiplier-1],k=2,v=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];(p=this.finalY[u])[0]=this.decodeState.readBits((m<16384?m<16?v[m]:m<512?5+v[m>>5]:10+v[m>>10]:m<16777216?m<524288?15+v[m>>15]:20+v[m>>20]:m<536870912?25+v[m>>25]:m<-2147483648?30+v[m>>30]:0)-1);var S=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];p[1]=this.decodeState.readBits((m<16384?m<16?S[m]:m<512?5+S[m>>5]:10+S[m>>10]:m<16777216?m<524288?15+S[m>>15]:20+S[m>>20]:m<536870912?25+S[m>>25]:m<-2147483648?30+S[m>>30]:0)-1);for(var b=0,y=g.partitions;b<y;){var x=b++,w=g.partitionClassList[x],T=g.classDimensions[w],I=g.classSubclasses[w],E=(1<<I)-1,C=0;if(0!=I){var B=h[g.classMasterbooks[w]],L=this.decodeState;L.validBits<10&&L.prepHuffman();var P,A=B.fastHuffman[1023&L.acc];if(0<=A){var $=B.codewordLengths[A];L.acc=L.acc>>>$,L.validBits-=$,L.validBits<0?(L.validBits=0,P=-1):P=A}else P=L.decodeScalarRaw(B);B.sparse&&(P=B.sortedValues[P]),C=P}for(var N=g.subclassBooks[w],R=0,F=T;R<F;){R++;var V=N[C&E];C>>=I;var M,H=k++;if(0<=V){var O=this.decodeState,U=h[V];O.validBits<10&&O.prepHuffman();var D,G=U.fastHuffman[1023&O.acc];if(0<=G){var z=U.codewordLengths[G];O.acc=O.acc>>>z,O.validBits-=z,O.validBits<0?(O.validBits=0,D=-1):D=G}else D=O.decodeScalarRaw(U);U.sparse&&(D=U.sortedValues[D]),M=D}else M=0;p[H]=M}}if(-1==this.decodeState.validBits){a[u]=!0;continue}f[0]=f[1]=!0;for(var W=g.neighbors,j=g.xlist,K=2,X=g.values;K<X;){var Y=K++,Z=W[Y][0],Q=W[Y][1],q=j[Z],J=p[Z],ee=p[Q]-J,te=j[Q]-q,ae=Math.abs(ee)*(j[Y]-q)/te|0,re=ee<0?J-ae:J+ae,ie=p[Y],se=m-re,ne=se<re?2*se:2*re;0!=ie?(f[Z]=f[Q]=!0,f[Y]=!0,p[Y]=ne<=ie?re<se?ie-re+re:re-ie+se-1:0!=(1&ie)?re-(ie+1>>1):re+(ie>>1)):(f[Y]=!1,p[Y]=re)}for(var _e=0,he=g.values;_e<he;){var oe=_e++;f[oe]||(p[oe]=-1)}}else a[u]=!0}for(var le=0,ue=this.header.channel;le<ue;){var de=le++;r[de]=a[de]}for(var ce=0,ge=s.couplingSteps;ce<ge;){var pe=ce++;a[s.chan[pe].magnitude]&&a[s.chan[pe].angle]||(a[s.chan[pe].magnitude]=a[s.chan[pe].angle]=!1)}for(var fe=0,me=s.submaps;fe<me;){for(var ke=fe++,ve=new Array(this.header.channel),Se=new Array(256),be=0,ye=0,xe=this.header.channel;ye<xe;){var we=ye++;s.chan[we].mux==ke&&(a[we]?(Se[be]=!0,ve[be]=null):(Se[be]=!1,ve[be]=this.channelBuffers[we]),++be)}var Te=s.submapResidue[ke];this.header.residueConfig[Te].decode(this.decodeState,this.header,ve,be,n,Se,this.channelBuffers)}for(var Ie=s.couplingSteps,Ee=i>>1;0<=--Ie;)for(var Ce=this.channelBuffers[s.chan[Ie].magnitude],Be=this.channelBuffers[s.chan[Ie].angle],Le=0,Pe=Ee;Le<Pe;){var Ae,$e,Ne=Le++;0<Ce[Ne]?0<Be[Ne]?($e=Ce[Ne],Ae=Ce[Ne]-Be[Ne]):(Ae=Ce[Ne],$e=Ce[Ne]+Be[Ne]):0<Be[Ne]?($e=Ce[Ne],Ae=Ce[Ne]+Be[Ne]):(Ae=Ce[Ne],$e=Ce[Ne]-Be[Ne]),Ce[Ne]=$e,Be[Ne]=Ae}for(var Re=0,Fe=this.header.channel;Re<Fe;){var Ve=Re++;if(r[Ve])for(var Me=0,He=Ee;Me<He;){var Oe=Me++;this.channelBuffers[Ve][Oe]=0}else s.doFloor(this.header.floorConfig,Ve,i,this.channelBuffers[Ve],this.finalY[Ve],null)}for(var Ue=0,De=this.header.channel;Ue<De;){var Ge=Ue++;this.inverseMdct(this.channelBuffers[Ge],i,t.blockflag)}for(var ze=this.decodeState;0!=ze.bytesInSeg||!ze.lastSeg&&0!=ze.next();)ze.bytesInSeg--,ze.inputPosition+=1,ze.input.readByte();return this.decodeState.finishDecodePacket(this.previousLength,i,e)},__class__:kha_audio2_ogg_vorbis_VorbisDecoder};var kha_audio2_ogg_vorbis_VorbisTools=$hxClasses["kha.audio2.ogg.vorbis.VorbisTools"]=function(){};kha_audio2_ogg_vorbis_VorbisTools.__name__=!0,kha_audio2_ogg_vorbis_VorbisTools.assert=function(e,t){if(!e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",t))},kha_audio2_ogg_vorbis_VorbisTools.neighbors=function(e,t){for(var a=-1,r=65536,i=0,s=0,n=0,_=t;n<_;){var h=n++;e[h]>a&&e[h]<e[t]&&(a=e[i=h]),e[h]<r&&e[h]>e[t]&&(r=e[s=h])}return{low:i,high:s}},kha_audio2_ogg_vorbis_VorbisTools.floatUnpack=function(e){var t=_$UInt_UInt_$Impl_$.toFloat(2097151&e),a=(2145386496&e)>>>21;return(0!=(-2147483648&e)?-t:t)*Math.pow(2,a-788)},kha_audio2_ogg_vorbis_VorbisTools.bitReverse=function(e){return(e=(-16711936&(e=(-252645136&(e=(-858993460&(e=(-1431655766&e)>>>1|(1431655765&e)<<1))>>>2|(858993459&e)<<2))>>>4|(252645135&e)<<4))>>>8|(16711935&e)<<8)>>>16|e<<16},kha_audio2_ogg_vorbis_VorbisTools.pointCompare=function(e,t){return e.x<t.x?-1:e.x>t.x?1:0},kha_audio2_ogg_vorbis_VorbisTools.uintAsc=function(e,t){return _$UInt_UInt_$Impl_$.gt(t,e)?-1:e==t?0:1},kha_audio2_ogg_vorbis_VorbisTools.lookup1Values=function(e,t){var a=0|Math.exp(Math.log(e)/t);if((0|Math.pow(a+1,t))<=e&&++a,!(Math.pow(a+1,t)>e))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisTools.hx",lineNumber:155,className:"kha.audio2.ogg.vorbis.VorbisTools",methodName:"lookup1Values"}));if((0|Math.pow(a,t))>e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/VorbisTools.hx",lineNumber:156,className:"kha.audio2.ogg.vorbis.VorbisTools",methodName:"lookup1Values"}));return a},kha_audio2_ogg_vorbis_VorbisTools.computeWindow=function(e,t){for(var a=e>>1,r=0,i=a;r<i;){var s=r++;t[s]=Math.sin(1.5707963267948966*kha_audio2_ogg_vorbis_VorbisTools.square(Math.sin((s+.5)/a*.5*3.141592653589793)))}},kha_audio2_ogg_vorbis_VorbisTools.square=function(e){return e*e},kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse=function(e,t){for(var a=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],r=(e<16384?e<16?a[e]:e<512?5+a[e>>5]:10+a[e>>10]:e<16777216?e<524288?15+a[e>>15]:20+a[e>>20]:e<536870912?25+a[e>>25]:e<-2147483648?30+a[e>>30]:0)-1,i=0,s=e>>3;i<s;){var n=i++,_=n;_=(-16711936&(_=(-252645136&(_=(-858993460&(_=(-1431655766&_)>>>1|(1431655765&_)<<1))>>>2|(858993459&_)<<2))>>>4|(252645135&_)<<4))>>>8|(16711935&_)<<8,t[n]=(_>>>16|_<<16)>>>32-r+3<<2}},kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors=function(e,t,a,r){for(var i=e>>3,s=0,n=0,_=e>>2;n<_;){var h=n++;t[s]=Math.cos(4*h*3.141592653589793/e),t[s+1]=-Math.sin(4*h*3.141592653589793/e),a[s]=.5*Math.cos(3.141592653589793*(s+1)/e/2),a[s+1]=.5*Math.sin(3.141592653589793*(s+1)/e/2),s+=2}for(var o=0,l=0,u=i;l<u;){l++;r[o]=Math.cos(2*(o+1)*3.141592653589793/e),r[o+1]=-Math.sin(2*(o+1)*3.141592653589793/e),o+=2}},kha_audio2_ogg_vorbis_VorbisTools.drawLine=function(e,t,a,r,i,s){if(null==kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable){var n=new Array(32);kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable=n;for(var _=0;_<32;){var h=_++,o=kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable,l=new Array(64);o[h]=l;for(var u=1;u<64;){var d=u++;kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[h][d]=h/d|0}}}var c,g,p=i-a,f=r-t,m=p<0?-p:p,k=t,v=a,S=0;f<64&&m<32?g=p<0?(c=-kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[m][f])-1:(c=kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[m][f])+1:(c=p/f|0,g=p<0?c-1:c+1),m-=(c<0?-c:c)*f,s<r&&(r=s);var b=k,y=e;y[b]=y[b]*kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[v];for(var x=k+1,w=r;x<w;){f<=(S+=m)?(S-=f,v+=g):v+=c;var T=x++,I=e;I[T]=I[T]*kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[v]}},kha_audio2_ogg_vorbis_VorbisTools.predictPoint=function(e,t,a,r,i){var s=i-r,n=a-t,_=Math.abs(s)*(e-t)/n|0;return s<0?r-_:r+_},kha_audio2_ogg_vorbis_VorbisTools.emptyFloatVector=function(e){return new Array(e)},kha_audio2_ogg_vorbis_VorbisTools.copyVector=function(e){for(var t=new Array(e.length),a=0,r=e.length;a<r;){var i=a++;t[i]=e[i]}return t};var kha_audio2_ogg_vorbis_data_Codebook=$hxClasses["kha.audio2.ogg.vorbis.data.Codebook"]=function(){};kha_audio2_ogg_vorbis_data_Codebook.__name__=!0,kha_audio2_ogg_vorbis_data_Codebook.read=function(e){var t=new kha_audio2_ogg_vorbis_data_Codebook;if(66!=e.readBits(8)||67!=e.readBits(8)||86!=e.readBits(8))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:40,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));var a=e.readBits(8);t.dimensions=(e.readBits(8)<<8)+a;var r=e.readBits(8),i=e.readBits(8);t.entries=(e.readBits(8)<<16)+(i<<8)+r;var s=e.readBits(1);t.sparse=0==s&&0!=e.readBits(1);var n=new Array(t.entries);t.sparse||(t.codewordLengths=n);var _,h=0;if(0!=s)for(var o=0,l=e.readBits(5)+1;o<t.entries;){var u=t.entries-o,d=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],c=e.readBits(u<16384?u<16?d[u]:u<512?5+d[u>>5]:10+d[u>>10]:u<16777216?u<524288?15+d[u>>15]:20+d[u>>20]:u<536870912?25+d[u>>25]:u<-2147483648?30+d[u>>30]:0);if(o+c>t.entries)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook entrys",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));for(var g=0,p=c;g<p;){n[o+g++]=l}o+=c,++l}else for(var f=0,m=t.entries;f<m;){var k=f++;0!=(t.sparse?e.readBits(1):1)?(n[k]=e.readBits(5)+1,++h):n[k]=255}if(t.sparse&&h>=t.entries>>2&&(t.codewordLengths=n,t.sparse=!1),t.sparse)_=h;else{for(var v=0,S=0,b=t.entries;S<b;){var y=n[S++];10<y&&255!=y&&++v}_=v}t.sortedEntries=_;var x=null;if(t.sparse){if(0!=t.sortedEntries){var w=new Array(t.sortedEntries);t.codewordLengths=w;var T=new Array(t.entries);t.codewords=T,x=new Array(t.entries)}t.entries,t.sortedEntries}else{var I=new Array(t.entries);t.codewords=I}if(!t.computeCodewords(n,t.entries,x))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"compute codewords",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:120,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0!=t.sortedEntries){t.sortedCodewords=[];var E=new Array(t.sortedEntries);t.sortedValues=E,t.computeSortedHuffman(n,x)}if(t.sparse&&(x=null,n=t.codewords=null),t.computeAcceleratedHuffman(),t.lookupType=e.readBits(4),2<t.lookupType)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook lookup type",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:143,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0<t.lookupType){var C=e.readBits(32),B=_$UInt_UInt_$Impl_$.toFloat(2097151&C),L=(2145386496&C)>>>21,P=0!=(-2147483648&C)?-B:B;t.minimumValue=P*Math.pow(2,L-788);var A=e.readBits(32),$=_$UInt_UInt_$Impl_$.toFloat(2097151&A),N=(2145386496&A)>>>21,R=0!=(-2147483648&A)?-$:$;t.deltaValue=R*Math.pow(2,N-788),t.valueBits=e.readBits(4)+1,t.sequenceP=0!=e.readBits(1),1==t.lookupType?t.lookupValues=kha_audio2_ogg_vorbis_VorbisTools.lookup1Values(t.entries,t.dimensions):t.lookupValues=t.entries*t.dimensions;for(var F=new Array(t.lookupValues),V=0,M=t.lookupValues;V<M;){var H=V++,O=e.readBits(t.valueBits);if(-1==O)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"fail lookup",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:161,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));F[H]=O}var U=new Array(t.lookupValues);t.multiplicands=U;for(var D=0,G=t.lookupValues;D<G;){var z=D++;t.multiplicands[z]=F[z]*t.deltaValue+t.minimumValue}if(2==t.lookupType&&t.sequenceP){for(var W=1,j=t.lookupValues;W<j;){var K=W++;t.multiplicands[K]=t.multiplicands[K-1]}t.sequenceP=!1}}return t},kha_audio2_ogg_vorbis_data_Codebook.prototype={dimensions:null,entries:null,codewordLengths:null,minimumValue:null,deltaValue:null,valueBits:null,lookupType:null,sequenceP:null,sparse:null,lookupValues:null,multiplicands:null,codewords:null,fastHuffman:null,sortedCodewords:null,sortedValues:null,sortedEntries:null,addEntry:function(e,t,a,r,i){this.sparse?(this.codewords[a]=e,this.codewordLengths[a]=r,i[a]=t):this.codewords[t]=e},includeInSort:function(e){if(this.sparse){if(255==e)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:201,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"includeInSort"}));return!0}return 255!=e&&10<e},computeCodewords:function(e,t,a){for(var r=new Array(32),i=0;i<32;){r[i++]=0}for(var s=0;s<t&&!(e[s]<255);)++s;if(s==t){if(0!=this.sortedEntries)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:228,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"computeCodewords"}));return!0}var n=0,_=n++;this.sparse?(this.codewords[_]=0,this.codewordLengths[_]=e[s],a[_]=s):this.codewords[s]=0;for(var h=0;++h<=e[s];)r[h]=1<<32-h;for(h=s;++h<t;){var o=e[h];if(255!=o){for(;0<o&&0==r[o];)--o;if(0==o)return!1;var l=r[o];r[o]=0;var u=l,d=(u=(-16711936&(u=(-252645136&(u=(-858993460&(u=(-1431655766&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8)>>>16|u<<16,c=n++;if(this.sparse?(this.codewords[c]=d,this.codewordLengths[c]=e[h],a[c]=h):this.codewords[h]=d,o!=e[h])for(var g=e[h];o<g;){if(0!=r[g])throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:272,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"computeCodewords"}));r[g]=l+(1<<32-g),--g}}}return!0},computeSortedHuffman:function(e,t){if(this.sparse)for(var a=0,r=this.sortedEntries;a<r;){var i=a++,s=this.codewords[i];s=(-16711936&(s=(-252645136&(s=(-858993460&(s=(-1431655766&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,this.sortedCodewords[i]=s>>>16|s<<16}else{for(var n=0,_=0,h=this.entries;_<h;){var o,l=_++,u=e[l];if(this.sparse){if(255==u)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:201,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"includeInSort"}));o=!0}else o=255!=u&&10<u;if(o){var d=this.codewords[l];d=(-16711936&(d=(-252645136&(d=(-858993460&(d=(-1431655766&d)>>>1|(1431655765&d)<<1))>>>2|(858993459&d)<<2))>>>4|(252645135&d)<<4))>>>8|(16711935&d)<<8,this.sortedCodewords[n++]=d>>>16|d<<16}}if(n!=this.sortedEntries)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:296,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"computeSortedHuffman"}))}this.sortedCodewords[this.sortedEntries]=-1,this.sortedCodewords.sort(kha_audio2_ogg_vorbis_VorbisTools.uintAsc);for(var c=0,g=this.sparse?this.sortedEntries:this.entries;c<g;){var p,f=c++,m=this.sparse?e[t[f]]:e[f];if(this.sparse){if(255==m)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER,"",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:201,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"includeInSort"}));p=!0}else p=255!=m&&10<m;if(p){for(var k=this.codewords[f],v=(k=(-16711936&(k=(-252645136&(k=(-858993460&(k=(-1431655766&k)>>>1|(1431655765&k)<<1))>>>2|(858993459&k)<<2))>>>4|(252645135&k)<<4))>>>8|(16711935&k)<<8)>>>16|k<<16,S=0,b=this.sortedEntries;1<b;){var y=S+(b>>1);_$UInt_UInt_$Impl_$.gte(v,this.sortedCodewords[y])?(S=y,b-=b>>1):b>>=1}this.sparse?(this.sortedValues[S]=t[f],this.codewordLengths[S]=m):this.sortedValues[S]=f}}},computeAcceleratedHuffman:function(){var e=new Array(1024);this.fastHuffman=e,this.fastHuffman[0]=-1;for(var t=0;t<1024;){var a=t++;this.fastHuffman[a]=-1}for(var r=0,i=this.sparse?this.sortedEntries:this.entries;r<i;){var s=r++;if(this.codewordLengths[s]<=10){var n;if(this.sparse){var _=this.sortedCodewords[s];n=(_=(-16711936&(_=(-252645136&(_=(-858993460&(_=(-1431655766&_)>>>1|(1431655765&_)<<1))>>>2|(858993459&_)<<2))>>>4|(252645135&_)<<4))>>>8|(16711935&_)<<8)>>>16|_<<16}else n=this.codewords[s];for(;n<1024;)this.fastHuffman[n]=s,n+=1<<this.codewordLengths[s]}}},codebookDecode:function(e,t,a,r){e.validBits<10&&e.prepHuffman();var i,s=this.fastHuffman[1023&e.acc];if(0<=s){var n=this.codewordLengths[s];e.acc=e.acc>>>n,e.validBits-=n,e.validBits<0?(e.validBits=0,i=-1):i=s}else i=e.decodeScalarRaw(this);this.sparse&&(i=this.sortedValues[i]);var _=i,h=this.lookupValues,o=this.sequenceP,l=this.multiplicands,u=this.minimumValue;if(_<0)return!1;if(r>this.dimensions&&(r=this.dimensions),1==this.lookupType){for(var d=1,c=0,g=0,p=r;g<p;){var f=g++,m=l[_$UInt_UInt_$Impl_$.toFloat(_/d|0)%_$UInt_UInt_$Impl_$.toFloat(h)|0]+c,k=a+f,v=t;v[k]=v[k]+m,o&&(c=m+u),d*=h}return!0}if(_*=this.dimensions,o)for(var S=0,b=0,y=r;b<y;){var x=b++,w=l[_+x]+S,T=a+x,I=t;I[T]=I[T]+w,S=w+u}else for(var E=0,C=r;E<C;){var B=E++,L=a+B,P=t;P[L]=P[L]+(l[_+B]+0)}return!0},codebookDecodeStep:function(e,t,a,r,i){e.validBits<10&&e.prepHuffman();var s,n=this.fastHuffman[1023&e.acc];if(0<=n){var _=this.codewordLengths[n];e.acc=e.acc>>>_,e.validBits-=_,e.validBits<0?(e.validBits=0,s=-1):s=n}else s=e.decodeScalarRaw(this);this.sparse&&(s=this.sortedValues[s]);var h=s,o=0;if(h<0)return!1;r>this.dimensions&&(r=this.dimensions);var l=this.lookupValues,u=this.sequenceP,d=this.multiplicands;if(1==this.lookupType){for(var c=1,g=0,p=r;g<p;){var f=g++,m=d[_$UInt_UInt_$Impl_$.toFloat(h/c|0)%_$UInt_UInt_$Impl_$.toFloat(l)|0]+o,k=a+f*i,v=t;v[k]=v[k]+m,u&&(o=m),c*=l}return!0}h*=this.dimensions;for(var S=0,b=r;S<b;){var y=S++,x=d[h+y]+o,w=a+y*i,T=t;T[w]=T[w]+x,u&&(o=x)}return!0},decodeStart:function(e){e.validBits<10&&e.prepHuffman();var t,a=this.fastHuffman[1023&e.acc];if(0<=a){var r=this.codewordLengths[a];e.acc=e.acc>>>r,e.validBits-=r,e.validBits<0?(e.validBits=0,t=-1):t=a}else t=e.decodeScalarRaw(this);return this.sparse&&(t=this.sortedValues[t]),t},decodeDeinterleaveRepeat:function(e,t,a,r,i,s,n){var _=this.dimensions;if(0==this.lookupType)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:488,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}));for(var h=this.multiplicands,o=this.sequenceP,l=this.lookupValues;0<n;){var u=0;e.validBits<10&&e.prepHuffman();var d,c=this.fastHuffman[1023&e.acc];if(0<=c){var g=this.codewordLengths[c];e.acc=e.acc>>>g,e.validBits-=g,e.validBits<0?(e.validBits=0,d=-1):d=c}else d=e.decodeScalarRaw(this);this.sparse&&(d=this.sortedValues[d]);var p=d;if(p<0){if(0==e.bytesInSeg&&e.lastSeg)return null;throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:503,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}))}if(s*a<r+i*a+_&&(_=s*a-(i*a-r)),1==this.lookupType){var f=1;if(o)for(var m=0,k=_;m<k;){m++;var v=h[_$UInt_UInt_$Impl_$.toFloat(p/f|0)%_$UInt_UInt_$Impl_$.toFloat(l)|0]+u,S=i,b=t[r];b[S]=b[S]+v,++r==a&&(r=0,++i),u=v,f*=l}else for(var y=0,x=_;y<x;){y++;var w=h[_$UInt_UInt_$Impl_$.toFloat(p/f|0)%_$UInt_UInt_$Impl_$.toFloat(l)|0]+u,T=i,I=t[r];I[T]=I[T]+w,++r==a&&(r=0,++i),f*=l}}else if(p*=this.dimensions,o)for(var E=0,C=_;E<C;){var B=h[p+E++]+u,L=i,P=t[r];P[L]=P[L]+B,++r==a&&(r=0,++i),u=B}else for(var A=0,$=_;A<$;){var N=h[p+A++]+u,R=i,F=t[r];F[R]=F[R]+N,++r==a&&(r=0,++i)}n-=_}return{cInter:r,pInter:i}},residueDecode:function(e,t,a,r,i){if(0==i)for(var s=r/this.dimensions|0,n=0,_=s;n<_;){var h=n++;if(!this.codebookDecodeStep(e,t,a+h,r-a-h,s))return!1}else for(var o=0;o<r;){if(!this.codebookDecode(e,t,a,r-o))return!1;o+=this.dimensions,a+=this.dimensions}return!0},__class__:kha_audio2_ogg_vorbis_data_Codebook};var kha_audio2_ogg_vorbis_data_Comment=$hxClasses["kha.audio2.ogg.vorbis.data.Comment"]=function(){this.data=new haxe_ds_StringMap};kha_audio2_ogg_vorbis_data_Comment.__name__=!0,kha_audio2_ogg_vorbis_data_Comment.prototype={data:null,get_title:function(){return this.getString("title")},get_loopStart:function(){return Std.parseInt(this.getString("loopstart"))},get_loopLength:function(){return Std.parseInt(this.getString("looplength"))},get_version:function(){return this.getString("version")},get_album:function(){return this.getString("album")},get_organization:function(){return this.getString("organization")},get_tracknumber:function(){return this.getString("tracknumber")},get_performer:function(){return this.getString("performer")},get_copyright:function(){return this.getString("copyright")},get_license:function(){return this.getString("license")},get_artist:function(){return this.getString("artist")},get_description:function(){return this.getString("description")},get_genre:function(){return this.getString("genre")},get_date:function(){return this.getString("date")},get_location:function(){return this.getString("location")},get_contact:function(){return this.getString("contact")},get_isrc:function(){return this.getString("isrc")},get_artists:function(){return this.getArray("artist")},add:function(e,t){e=e.toLowerCase();var a=this.data;if(null!=__map_reserved[e]?a.existsReserved(e):a.h.hasOwnProperty(e)){var r=this.data;(null!=__map_reserved[e]?r.getReserved(e):r.h[e]).push(t)}else{var i=[t],s=this.data;null!=__map_reserved[e]?s.setReserved(e,i):s.h[e]=i}},getString:function(e){e=e.toLowerCase();var t=this.data;if(null!=__map_reserved[e]?t.existsReserved(e):t.h.hasOwnProperty(e)){var a=this.data;return(null!=__map_reserved[e]?a.getReserved(e):a.h[e])[0]}return null},getArray:function(e){e=e.toLowerCase();var t=this.data;if(null!=__map_reserved[e]?t.existsReserved(e):t.h.hasOwnProperty(e)){var a=this.data;return null!=__map_reserved[e]?a.getReserved(e):a.h[e]}return null},__class__:kha_audio2_ogg_vorbis_data_Comment};var kha_audio2_ogg_vorbis_data_Floor=$hxClasses["kha.audio2.ogg.vorbis.data.Floor"]=function(){};kha_audio2_ogg_vorbis_data_Floor.__name__=!0,kha_audio2_ogg_vorbis_data_Floor.read=function(e,t){var a=new kha_audio2_ogg_vorbis_data_Floor;if(a.type=e.readBits(16),1<a.type)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:28,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));if(0==a.type){var r=a.floor0=new kha_audio2_ogg_vorbis_data_Floor0;r.order=e.readBits(8),r.rate=e.readBits(16),r.barkMapSize=e.readBits(16),r.amplitudeBits=e.readBits(6),r.amplitudeOffset=e.readBits(8),r.numberOfBooks=e.readBits(4)+1;for(var i=0,s=r.numberOfBooks;i<s;){var n=i++;r.bookList[n]=e.readBits(8)}throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.FEATURE_NOT_SUPPORTED,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:41,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}var _=[],h=a.floor1=new kha_audio2_ogg_vorbis_data_Floor1,o=-1;h.partitions=e.readBits(5);var l=new Array(h.partitions);h.partitionClassList=l;for(var u=0,d=h.partitions;u<d;){var c=u++;h.partitionClassList[c]=e.readBits(4),h.partitionClassList[c]>o&&(o=h.partitionClassList[c])}var g=new Array(o+1);h.classDimensions=g;var p=new Array(o+1);h.classMasterbooks=p;var f=new Array(o+1);h.classSubclasses=f;var m=new Array(o+1);h.subclassBooks=m;for(var k=0,v=o+1;k<v;){var S=k++;if(h.classDimensions[S]=e.readBits(3)+1,h.classSubclasses[S]=e.readBits(2),0!=h.classSubclasses[S]&&(h.classMasterbooks[S]=e.readBits(8),h.classMasterbooks[S]>=t.length))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:64,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));var b=1<<h.classSubclasses[S],y=h.subclassBooks,x=new Array(b);y[S]=x;for(var w=0,T=b;w<T;){var I=w++;if(h.subclassBooks[S][I]=e.readBits(8)-1,h.subclassBooks[S][I]>=t.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}}h.floor1Multiplier=e.readBits(2)+1,h.rangebits=e.readBits(4);var E=new Array(250);h.xlist=E,h.xlist[0]=0,h.xlist[1]=1<<h.rangebits,h.values=2;for(var C=0,B=h.partitions;C<B;)for(var L=C++,P=h.partitionClassList[L],A=0,$=h.classDimensions[P];A<$;){A++;h.xlist[h.values]=e.readBits(h.rangebits),h.values++}for(var N=0,R=h.values;N<R;){var F=N++;_.push(new kha_audio2_ogg_vorbis_data_IntPoint),_[F].x=h.xlist[F],_[F].y=F}_.sort(kha_audio2_ogg_vorbis_VorbisTools.pointCompare);var V=new Array(h.values);h.sortedOrder=V;for(var M=0,H=h.values;M<H;){var O=M++;h.sortedOrder[O]=_[O].y}var U=new Array(h.values);h.neighbors=U;for(var D=2,G=h.values;D<G;){for(var z=D++,W=h.xlist,j=-1,K=65536,X=0,Y=0,Z=0,Q=z;Z<Q;){var q=Z++;W[q]>j&&W[q]<W[z]&&(j=W[X=q]),W[q]<K&&W[q]>W[z]&&(K=W[Y=q])}var J=X,ee=Y,te=h.neighbors,ae=new Array(h.values);te[z]=ae,h.neighbors[z][0]=J,h.neighbors[z][1]=ee}return a},kha_audio2_ogg_vorbis_data_Floor.prototype={floor0:null,floor1:null,type:null,__class__:kha_audio2_ogg_vorbis_data_Floor};var kha_audio2_ogg_vorbis_data_Floor0=$hxClasses["kha.audio2.ogg.vorbis.data.Floor0"]=function(){};kha_audio2_ogg_vorbis_data_Floor0.__name__=!0,kha_audio2_ogg_vorbis_data_Floor0.prototype={order:null,rate:null,barkMapSize:null,amplitudeBits:null,amplitudeOffset:null,numberOfBooks:null,bookList:null,__class__:kha_audio2_ogg_vorbis_data_Floor0};var kha_audio2_ogg_vorbis_data_Floor1=$hxClasses["kha.audio2.ogg.vorbis.data.Floor1"]=function(){};kha_audio2_ogg_vorbis_data_Floor1.__name__=!0,kha_audio2_ogg_vorbis_data_Floor1.prototype={partitions:null,partitionClassList:null,classDimensions:null,classSubclasses:null,classMasterbooks:null,subclassBooks:null,xlist:null,sortedOrder:null,neighbors:null,floor1Multiplier:null,rangebits:null,values:null,__class__:kha_audio2_ogg_vorbis_data_Floor1};var kha_audio2_ogg_vorbis_data_Header=$hxClasses["kha.audio2.ogg.vorbis.data.Header"]=function(){};kha_audio2_ogg_vorbis_data_Header.__name__=!0,kha_audio2_ogg_vorbis_data_Header.read=function(e){var t=e.page;if(t.start(e),0==(2&t.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"not firstPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(4&t.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"lastPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(1&t.flag))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"continuedPacket",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.firstPageValidate(),e.inputPosition+=1,1!=e.input.readByte())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:57,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));for(var a=new haxe_io_Bytes(new ArrayBuffer(6)),r=0;r<6;){var i,s=r++;0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,i=e.input.readByte()):i=-1,e.validBits=0,a.b[s]=255&i}if("vorbis"!=a.toString())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));e.inputPosition+=4;var n=e.input.readInt32();if(0!=n)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"vorbis version : "+n,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:66,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var _=new kha_audio2_ogg_vorbis_data_Header;if(e.inputPosition+=1,_.channel=e.input.readByte(),0==_.channel)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no channel",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(16<_.channel)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.TOO_MANY_CHANNELS,"too many channels",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:75,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.inputPosition+=4,_.sampleRate=e.input.readInt32(),0==_.sampleRate)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no sampling rate",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:80,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.inputPosition+=4,_.maximumBitRate=e.input.readInt32(),e.inputPosition+=4,_.nominalBitRate=e.input.readInt32(),e.inputPosition+=4,_.minimumBitRate=e.input.readInt32(),e.inputPosition+=1;var h=e.input.readByte(),o=15&h,l=h>>4;if(_.blocksize0=1<<o,_.blocksize1=1<<l,o<6||13<o)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:93,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(l<6||13<l)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:96,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(l<o)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:99,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.inputPosition+=1;var u=e.input.readByte();if(0==(1&u))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:105,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.page.start(e),e.startPacket();for(var d=0,c=new haxe_io_BytesOutput;0!=(d=e.next());)e.inputPosition+=d,c.write(e.input.read(d)),e.bytesInSeg=0;var g=new haxe_io_BytesInput(c.getBytes());g.readByte(),g.read(6);var p,f=g.readInt32();_.vendor=g.readString(f),_.comment=new kha_audio2_ogg_vorbis_data_Comment;for(var m=0,k=g.readInt32();m<k;){m++;var v=g.readInt32(),S=g.readString(v),b=S.indexOf("=");-1!=b&&_.comment.add(S.substring(0,b),S.substring(b+1))}if(0==(1&g.readByte()))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:141,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.startPacket(),0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,p=e.input.readByte()):p=-1,e.validBits=0,5!=p)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"setup packet",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:149,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));for(var y=new haxe_io_Bytes(new ArrayBuffer(6)),x=0;x<6;){var w,T=x++;0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,w=e.input.readByte()):w=-1,e.validBits=0,y.b[T]=255&w}if("vorbis"!=y.toString())throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));var I=e.readBits(8)+1,E=new Array(I);_.codebooks=E;for(var C=0,B=I;C<B;){var L=C++;_.codebooks[L]=kha_audio2_ogg_vorbis_data_Codebook.read(e)}for(var P=0,A=u=e.readBits(6)+1;P<A;){P++;if(0!=e.readBits(16))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:165,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var $=e.readBits(6)+1,N=new Array($);_.floorConfig=N;for(var R=0,F=$;R<F;){var V=R++;_.floorConfig[V]=kha_audio2_ogg_vorbis_data_Floor.read(e,_.codebooks)}var M=e.readBits(6)+1,H=new Array(M);_.residueConfig=H;for(var O=0,U=M;O<U;){var D=O++;_.residueConfig[D]=kha_audio2_ogg_vorbis_data_Residue.read(e,_.codebooks)}var G=e.readBits(6)+1,z=new Array(G);_.mapping=z;for(var W=0,j=G;W<j;)for(var K=W++,X=kha_audio2_ogg_vorbis_data_Mapping.read(e,_.channel),Y=0,Z=(_.mapping[K]=X).submaps;Y<Z;){var Q=Y++;if(X.submapFloor[Q]>=_.floorConfig.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:191,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(X.submapResidue[Q]>=_.residueConfig.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:194,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var q=e.readBits(6)+1,J=new Array(q);_.modes=J;for(var ee=0,te=q;ee<te;){var ae=ee++,re=kha_audio2_ogg_vorbis_data_Mode.read(e);if((_.modes[ae]=re).mapping>=_.mapping.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:205,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}for(;0!=e.bytesInSeg||!e.lastSeg&&0!=e.next();)e.bytesInSeg--,e.inputPosition+=1,e.input.readByte();return _},kha_audio2_ogg_vorbis_data_Header.prototype={maximumBitRate:null,nominalBitRate:null,minimumBitRate:null,sampleRate:null,channel:null,blocksize0:null,blocksize1:null,codebooks:null,floorConfig:null,residueConfig:null,mapping:null,modes:null,comment:null,vendor:null,__class__:kha_audio2_ogg_vorbis_data_Header};var kha_audio2_ogg_vorbis_data_IntPoint=$hxClasses["kha.audio2.ogg.vorbis.data.IntPoint"]=function(){};kha_audio2_ogg_vorbis_data_IntPoint.__name__=!0,kha_audio2_ogg_vorbis_data_IntPoint.prototype={x:null,y:null,__class__:kha_audio2_ogg_vorbis_data_IntPoint};var kha_audio2_ogg_vorbis_data_Mapping=$hxClasses["kha.audio2.ogg.vorbis.data.Mapping"]=function(){};kha_audio2_ogg_vorbis_data_Mapping.__name__=!0,kha_audio2_ogg_vorbis_data_Mapping.read=function(e,t){var a=new kha_audio2_ogg_vorbis_data_Mapping,r=e.readBits(16);if(0!=r)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"mapping type "+r,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));var i=new Array(t);a.chan=i;for(var s=0,n=t;s<n;){var _=s++;a.chan[_]=new kha_audio2_ogg_vorbis_data_MappingChannel}if(0!=e.readBits(1)?a.submaps=e.readBits(4)+1:a.submaps=1,0!=e.readBits(1)){a.couplingSteps=e.readBits(8)+1;for(var h=0,o=a.couplingSteps;h<o;){var l=h++,u=t-1,d=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];a.chan[l].magnitude=e.readBits(u<16384?u<16?d[u]:u<512?5+d[u>>5]:10+d[u>>10]:u<16777216?u<524288?15+d[u>>15]:20+d[u>>20]:u<536870912?25+d[u>>25]:u<-2147483648?30+d[u>>30]:0);var c=t-1,g=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];if(a.chan[l].angle=e.readBits(c<16384?c<16?g[c]:c<512?5+g[c>>5]:10+g[c>>10]:c<16777216?c<524288?15+g[c>>15]:20+g[c>>20]:c<536870912?25+g[c>>25]:c<-2147483648?30+g[c>>30]:0),a.chan[l].magnitude>=t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(a.chan[l].angle>=t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(a.chan[l].magnitude==a.chan[l].angle)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}}else a.couplingSteps=0;if(0!=e.readBits(2))throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:61,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(1<a.submaps)for(var p=0,f=t;p<f;){var m=p++;if(a.chan[m].mux=e.readBits(4),a.chan[m].mux>=a.submaps)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}else for(var k=0,v=t;k<v;){var S=k++;a.chan[S].mux=0}var b=new Array(a.submaps);a.submapFloor=b;var y=new Array(a.submaps);a.submapResidue=y;for(var x=0,w=a.submaps;x<w;){var T=x++;e.readBits(8),a.submapFloor[T]=e.readBits(8),a.submapResidue[T]=e.readBits(8)}return a},kha_audio2_ogg_vorbis_data_Mapping.prototype={couplingSteps:null,chan:null,submaps:null,submapFloor:null,submapResidue:null,doFloor:function(e,t,a,r,i,s){var n=a>>1,_=this.chan[t].mux,h=e[this.submapFloor[_]];if(0==h.type)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:94,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"doFloor"}));for(var o=h.floor1,l=0,u=i[0]*o.floor1Multiplier,d=1,c=o.values;d<c;){var g=d++,p=o.sortedOrder[g];if(0<=i[p]){var f=i[p]*o.floor1Multiplier,m=o.xlist[p];kha_audio2_ogg_vorbis_VorbisTools.drawLine(r,l,u,m,f,n),l=m,u=f}}if(l<n)for(var k=l,v=n;k<v;){var S=k++,b=r;b[S]=b[S]*kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[u]}},__class__:kha_audio2_ogg_vorbis_data_Mapping};var kha_audio2_ogg_vorbis_data_MappingChannel=$hxClasses["kha.audio2.ogg.vorbis.data.MappingChannel"]=function(){};kha_audio2_ogg_vorbis_data_MappingChannel.__name__=!0,kha_audio2_ogg_vorbis_data_MappingChannel.prototype={magnitude:null,angle:null,mux:null,__class__:kha_audio2_ogg_vorbis_data_MappingChannel};var kha_audio2_ogg_vorbis_data_Mode=$hxClasses["kha.audio2.ogg.vorbis.data.Mode"]=function(){};kha_audio2_ogg_vorbis_data_Mode.__name__=!0,kha_audio2_ogg_vorbis_data_Mode.read=function(e){var t=new kha_audio2_ogg_vorbis_data_Mode;if(t.blockflag=0!=e.readBits(1),t.windowtype=e.readBits(16),t.transformtype=e.readBits(16),t.mapping=e.readBits(8),0!=t.windowtype)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));if(0!=t.transformtype)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:25,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));return t},kha_audio2_ogg_vorbis_data_Mode.prototype={blockflag:null,mapping:null,windowtype:null,transformtype:null,__class__:kha_audio2_ogg_vorbis_data_Mode};var kha_audio2_ogg_vorbis_data_Page=$hxClasses["kha.audio2.ogg.vorbis.data.Page"]=function(){};kha_audio2_ogg_vorbis_data_Page.__name__=!0,kha_audio2_ogg_vorbis_data_Page.prototype={flag:null,clone:function(){var e=new kha_audio2_ogg_vorbis_data_Page;return e.flag=this.flag,e},start:function(e){var t,a,r;if(e.inputPosition+=1,79==e.input.readByte()?(e.inputPosition+=1,r=103!=e.input.readByte()):r=!0,r?a=!0:(e.inputPosition+=1,a=103!=e.input.readByte()),a?t=!0:(e.inputPosition+=1,t=83!=e.input.readByte()),t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}));this.startWithoutCapturePattern(e)},startWithoutCapturePattern:function(e){e.inputPosition+=1;var t=e.input.readByte();if(0!=t)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM_STRUCTURE_VERSION,""+t,{fileName:"kha/audio2/ogg/vorbis/data/Page.hx",lineNumber:34,className:"kha.audio2.ogg.vorbis.data.Page",methodName:"startWithoutCapturePattern"}));e.inputPosition+=1,this.flag=e.input.readByte(),e.inputPosition+=4;var a=e.input.readInt32();e.inputPosition+=4;var r=e.input.readInt32();e.inputPosition+=4,e.input.readInt32(),e.inputPosition+=4,e.input.readInt32(),e.inputPosition+=4,e.input.readInt32(),e.setup(a,r)},__class__:kha_audio2_ogg_vorbis_data_Page};var kha_audio2_ogg_vorbis_data_PageFlag=$hxClasses["kha.audio2.ogg.vorbis.data.PageFlag"]=function(){};kha_audio2_ogg_vorbis_data_PageFlag.__name__=!0;var kha_audio2_ogg_vorbis_data_ProbedPage=$hxClasses["kha.audio2.ogg.vorbis.data.ProbedPage"]=function(){};kha_audio2_ogg_vorbis_data_ProbedPage.__name__=!0,kha_audio2_ogg_vorbis_data_ProbedPage.prototype={pageStart:null,pageEnd:null,afterPreviousPageStart:null,firstDecodedSample:null,lastDecodedSample:null,__class__:kha_audio2_ogg_vorbis_data_ProbedPage};var kha_audio2_ogg_vorbis_data_ReaderError=$hxClasses["kha.audio2.ogg.vorbis.data.ReaderError"]=function(e,t,a){null==t&&(t=""),this.type=e,this.message=t,this.posInfos=a};kha_audio2_ogg_vorbis_data_ReaderError.__name__=!0,kha_audio2_ogg_vorbis_data_ReaderError.prototype={type:null,message:null,posInfos:null,__class__:kha_audio2_ogg_vorbis_data_ReaderError};var kha_audio2_ogg_vorbis_data_ReaderErrorType=$hxEnums["kha.audio2.ogg.vorbis.data.ReaderErrorType"]={__ename__:!0,__constructs__:["NEED_MORE_DATA","INVALID_API_MIXING","OUTOFMEM","FEATURE_NOT_SUPPORTED","TOO_MANY_CHANNELS","FILE_OPEN_FAILURE","SEEK_WITHOUT_LENGTH","UNEXPECTED_EOF","SEEK_INVALID","INVALID_SETUP","INVALID_STREAM","MISSING_CAPTURE_PATTERN","INVALID_STREAM_STRUCTURE_VERSION","CONTINUED_PACKET_FLAG_INVALID","INCORRECT_STREAM_SERIAL_NUMBER","INVALID_FIRST_PAGE","BAD_PACKET_TYPE","CANT_FIND_LAST_PAGE","SEEK_FAILED","OTHER"],NEED_MORE_DATA:{_hx_index:0,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_API_MIXING:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},OUTOFMEM:{_hx_index:2,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},FEATURE_NOT_SUPPORTED:{_hx_index:3,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},TOO_MANY_CHANNELS:{_hx_index:4,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},FILE_OPEN_FAILURE:{_hx_index:5,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_WITHOUT_LENGTH:{_hx_index:6,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},UNEXPECTED_EOF:{_hx_index:7,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_INVALID:{_hx_index:8,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_SETUP:{_hx_index:9,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_STREAM:{_hx_index:10,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},MISSING_CAPTURE_PATTERN:{_hx_index:11,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_STREAM_STRUCTURE_VERSION:{_hx_index:12,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},CONTINUED_PACKET_FLAG_INVALID:{_hx_index:13,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INCORRECT_STREAM_SERIAL_NUMBER:{_hx_index:14,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_FIRST_PAGE:{_hx_index:15,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},BAD_PACKET_TYPE:{_hx_index:16,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},CANT_FIND_LAST_PAGE:{_hx_index:17,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_FAILED:{_hx_index:18,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},OTHER:{_hx_index:19,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}},kha_audio2_ogg_vorbis_data_Residue=$hxClasses["kha.audio2.ogg.vorbis.data.Residue"]=function(){};kha_audio2_ogg_vorbis_data_Residue.__name__=!0,kha_audio2_ogg_vorbis_data_Residue.read=function(e,t){var a=new kha_audio2_ogg_vorbis_data_Residue;if(a.type=e.readBits(16),2<a.type)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:29,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}));var r=new Array(64);a.begin=e.readBits(24),a.end=e.readBits(24),a.partSize=e.readBits(24)+1;var i=a.classifications=e.readBits(6)+1;a.classbook=e.readBits(8);for(var s=0,n=a.classifications;s<n;){var _=s++,h=0,o=e.readBits(3);0!=e.readBits(1)&&(h=e.readBits(5)),r[_]=8*h+o}var l=new Array(a.classifications);a.residueBooks=l;for(var u=0,d=a.classifications;u<d;){var c=u++,g=a.residueBooks,p=new Array(8);g[c]=p;for(var f=0;f<8;){var m=f++;if(0!=(r[c]&1<<m)){if(a.residueBooks[c][m]=e.readBits(8),a.residueBooks[c][m]>=t.length)throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:55,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}))}else a.residueBooks[c][m]=-1}}var k=t[a.classbook].entries,v=t[a.classbook].dimensions,S=new Array(k);a.classdata=S;for(var b=0,y=k;b<y;)for(var x=b++,w=x,T=v,I=a.classdata,E=new Array(v),C=I[x]=E;0<=--T;)C[T]=w%i,w=w/i|0;return a},kha_audio2_ogg_vorbis_data_Residue.prototype={begin:null,end:null,partSize:null,classifications:null,classbook:null,classdata:null,residueBooks:null,type:null,decode:function(e,t,a,r,i,s,n){for(var _=t.codebooks,h=_[this.classbook].dimensions,o=this.end-this.begin,l=this.partSize,u=_$UInt_UInt_$Impl_$.toFloat(o)/_$UInt_UInt_$Impl_$.toFloat(l)|0,d=new Array(t.channel*u+1),c=0,g=r;c<g;){var p=c++;if(!s[p])for(var f=a[p],m=0,k=f.length;m<k;){f[m++]=0}}if(2!=this.type||1==r)for(var v=0;v<8;)for(var S=v++,b=0;b<u;){if(0==S)for(var y=0,x=r;y<x;){var w=y++;if(!s[w]){var T=_[this.classbook];e.validBits<10&&e.prepHuffman();var I,E=T.fastHuffman[1023&e.acc];if(0<=E){var C=T.codewordLengths[E];e.acc=e.acc>>>C,e.validBits-=C,e.validBits<0?(e.validBits=0,I=-1):I=E}else I=e.decodeScalarRaw(T);T.sparse&&(I=T.sortedValues[I]);var B=I;if(-1==B)return;for(var L=h;0<=--L;)d[w*u+L+b]=B%this.classifications,B=B/this.classifications|0}}for(var P=0,A=h;P<A;){P++;if(u<=b)break;for(var $=0,N=r;$<N;){var R=$++;if(!s[R]){var F=d[R*u+b],V=this.residueBooks[F][S];if(0<=V){var M=a[R],H=this.begin+b*l,O=l;if(!_[V].residueDecode(e,M,H,O,this.type))return}}}++b}}else{for(var U=0,D=r;U<D;){var G=U++;if(!s[G])break;if(G==r-1)return}for(var z=0;z<8;){var W=z++,j=0;if(2==r)for(;j<u;){var K=this.begin+j*l,X=1&K,Y=K>>>1;if(0==W){var Z=_[this.classbook];e.validBits<10&&e.prepHuffman();var Q,q=Z.fastHuffman[1023&e.acc];if(0<=q){var J=Z.codewordLengths[q];e.acc=e.acc>>>J,e.validBits-=J,e.validBits<0?(e.validBits=0,Q=-1):Q=q}else Q=e.decodeScalarRaw(Z);Z.sparse&&(Q=Z.sortedValues[Q]);var ee=Q;if(-1==ee)return;for(var te=h;0<=--te;)d[te+j]=ee%this.classifications,ee=ee/this.classifications|0}for(var ae=0,re=h;ae<re;){ae++;if(u<=j)break;var ie=this.begin+j*l,se=d[j],ne=this.residueBooks[se][W];if(0<=ne){var _e=_[ne].decodeDeinterleaveRepeat(e,a,r,X,Y,i,l);if(null==_e)return;X=_e.cInter,Y=_e.pInter}else X=1&(ie+=l),Y=ie>>>1;++j}}else if(1==r)for(;j<u;){var he=0,oe=this.begin+j*l;if(0==W){var le=_[this.classbook];e.validBits<10&&e.prepHuffman();var ue,de=le.fastHuffman[1023&e.acc];if(0<=de){var ce=le.codewordLengths[de];e.acc=e.acc>>>ce,e.validBits-=ce,e.validBits<0?(e.validBits=0,ue=-1):ue=de}else ue=e.decodeScalarRaw(le);le.sparse&&(ue=le.sortedValues[ue]);var ge=ue;if(-1==ge)return;for(var pe=h;0<=--pe;)d[pe+j]=ge%this.classifications,ge=ge/this.classifications|0}for(var fe=0,me=h;fe<me;){fe++;if(u<=j)break;var ke=this.begin+j*l,ve=this.residueBooks[d[j]][W];if(0<=ve){var Se=_[ve].decodeDeinterleaveRepeat(e,a,r,he,oe,i,l);if(null==Se)return;he=Se.cInter,oe=Se.pInter}else he=0,oe=ke+=l;++j}}else for(;j<u;){var be=this.begin+j*l,ye=_$UInt_UInt_$Impl_$.toFloat(be)%_$UInt_UInt_$Impl_$.toFloat(r)|0,xe=_$UInt_UInt_$Impl_$.toFloat(be)/_$UInt_UInt_$Impl_$.toFloat(r)|0;if(0==W){var we=_[this.classbook];e.validBits<10&&e.prepHuffman();var Te,Ie=we.fastHuffman[1023&e.acc];if(0<=Ie){var Ee=we.codewordLengths[Ie];e.acc=e.acc>>>Ee,e.validBits-=Ee,e.validBits<0?(e.validBits=0,Te=-1):Te=Ie}else Te=e.decodeScalarRaw(we);we.sparse&&(Te=we.sortedValues[Te]);var Ce=Te;if(-1==Ce)return;for(var Be=h;0<=--Be;)d[Be+j]=Ce%this.classifications,Ce=Ce/this.classifications|0}for(var Le=0,Pe=h;Le<Pe;){Le++;if(u<=j)break;var Ae=this.begin+j*l,$e=this.residueBooks[d[j]][W];if(0<=$e){var Ne=_[$e].decodeDeinterleaveRepeat(e,a,r,ye,xe,i,l);if(null==Ne)return;ye=Ne.cInter,xe=Ne.pInter}else Ae+=l,ye=_$UInt_UInt_$Impl_$.toFloat(Ae)%_$UInt_UInt_$Impl_$.toFloat(r)|0,xe=_$UInt_UInt_$Impl_$.toFloat(Ae)/_$UInt_UInt_$Impl_$.toFloat(r)|0;++j}}}}},__class__:kha_audio2_ogg_vorbis_data_Residue};var kha_audio2_ogg_vorbis_data_Setting=$hxClasses["kha.audio2.ogg.vorbis.data.Setting"]=function(){};kha_audio2_ogg_vorbis_data_Setting.__name__=!0;var kha_compute_ConstantLocation=$hxClasses["kha.compute.ConstantLocation"]=function(){};kha_compute_ConstantLocation.__name__=!0,kha_compute_ConstantLocation.prototype={__class__:kha_compute_ConstantLocation};var kha_compute_TextureUnit=$hxClasses["kha.compute.TextureUnit"]=function(){};kha_compute_TextureUnit.__name__=!0,kha_compute_TextureUnit.prototype={__class__:kha_compute_TextureUnit};var kha_graphics1_Graphics=$hxClasses["kha.graphics1.Graphics"]=function(){};kha_graphics1_Graphics.__name__=!0,kha_graphics1_Graphics.prototype={begin:null,end:null,setPixel:null,__class__:kha_graphics1_Graphics};var kha_graphics2_Graphics=$hxClasses["kha.graphics2.Graphics"]=function(){this.transformations=[],this.transformations.push(new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1)),this.opacities=[],this.opacities.push(1),this.myFontSize=12,this.pipe=null};kha_graphics2_Graphics.__name__=!0,kha_graphics2_Graphics.prototype={begin:function(e,t){null==e&&(e=!0)},end:function(){},flush:function(){},clear:function(e){},drawImage:function(e,t,a){this.drawSubImage(e,t,a,0,0,e.get_width(),e.get_height())},drawSubImage:function(e,t,a,r,i,s,n){this.drawScaledSubImage(e,r,i,s,n,t,a,s,n)},drawScaledImage:function(e,t,a,r,i){this.drawScaledSubImage(e,0,0,e.get_width(),e.get_height(),t,a,r,i)},drawScaledSubImage:function(e,t,a,r,i,s,n,_,h){},drawRect:function(e,t,a,r,i){null==i&&(i=1)},fillRect:function(e,t,a,r){},drawString:function(e,t,a){},drawCharacters:function(e,t,a,r,i){},drawLine:function(e,t,a,r,i){null==i&&(i=1)},drawVideo:function(e,t,a,r,i){},fillTriangle:function(e,t,a,r,i,s){},get_imageScaleQuality:function(){return kha_graphics2_ImageScaleQuality.Low},set_imageScaleQuality:function(e){return kha_graphics2_ImageScaleQuality.High},get_mipmapScaleQuality:function(){return kha_graphics2_ImageScaleQuality.Low},set_mipmapScaleQuality:function(e){return kha_graphics2_ImageScaleQuality.High},get_color:function(){return-16777216},set_color:function(e){return-16777216},get_font:function(){return null},set_font:function(e){return null},get_fontSize:function(){return this.myFontSize},set_fontSize:function(e){return this.myFontSize=e},pushTransformation:function(e){var t=new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);t._00=e._00,t._10=e._10,t._20=e._20,t._01=e._01,t._11=e._11,t._21=e._21,t._02=e._02,t._12=e._12,t._22=e._22,this.setTransformation(t),this.transformations.push(t)},popTransformation:function(){var e=this.transformations.pop();return this.setTransformation(this.transformations[this.transformations.length-1]),e},get_transformation:function(){return this.transformations[this.transformations.length-1]},set_transformation:function(e){this.setTransformation(e);var t=this.transformations[this.transformations.length-1];return t._00=e._00,t._10=e._10,t._20=e._20,t._01=e._01,t._11=e._11,t._21=e._21,t._02=e._02,t._12=e._12,t._22=e._22,e},translation:function(e,t){var a=e,r=t,i=this.transformations[this.transformations.length-1];return new kha_math_FastMatrix3(1*i._00+0*i._01+a*i._02,1*i._10+0*i._11+a*i._12,1*i._20+0*i._21+a*i._22,0*i._00+1*i._01+r*i._02,0*i._10+1*i._11+r*i._12,0*i._20+1*i._21+r*i._22,0*i._00+0*i._01+1*i._02,0*i._10+0*i._11+1*i._12,0*i._20+0*i._21+1*i._22)},translate:function(e,t){var a=e,r=t,i=this.transformations[this.transformations.length-1],s=new kha_math_FastMatrix3(1*i._00+0*i._01+a*i._02,1*i._10+0*i._11+a*i._12,1*i._20+0*i._21+a*i._22,0*i._00+1*i._01+r*i._02,0*i._10+1*i._11+r*i._12,0*i._20+1*i._21+r*i._22,0*i._00+0*i._01+1*i._02,0*i._10+0*i._11+1*i._12,0*i._20+0*i._21+1*i._22);this.setTransformation(s);var n=this.transformations[this.transformations.length-1];n._00=s._00,n._10=s._10,n._20=s._20,n._01=s._01,n._11=s._11,n._21=s._21,n._02=s._02,n._12=s._12,n._22=s._22},pushTranslation:function(e,t){var a=e,r=t,i=this.transformations[this.transformations.length-1];this.pushTransformation(new kha_math_FastMatrix3(1*i._00+0*i._01+a*i._02,1*i._10+0*i._11+a*i._12,1*i._20+0*i._21+a*i._22,0*i._00+1*i._01+r*i._02,0*i._10+1*i._11+r*i._12,0*i._20+1*i._21+r*i._22,0*i._00+0*i._01+1*i._02,0*i._10+0*i._11+1*i._12,0*i._20+0*i._21+1*i._22))},rotation:function(e,t,a){var r=t,i=a,s=Math.cos(e),n=-Math.sin(e),_=Math.sin(e),h=Math.cos(e),o=1*s+0*_+0*r,l=1*n+0*h+0*r,u=0+1*r,d=0*s+1*_+0*i,c=0*n+1*h+0*i,g=0+1*i,p=0*s+0*_+0,f=0*n+0*h+0,m=-t,k=-a,v=1*o+0*l+0*u,S=0*o+1*l+0*u,b=o*m+l*k+1*u,y=1*d+0*c+0*g,x=0*d+1*c+0*g,w=d*m+c*k+1*g,T=1*p+0*f+0,I=0*p+1*f+0,E=p*m+f*k+1,C=this.transformations[this.transformations.length-1];return new kha_math_FastMatrix3(v*C._00+S*C._01+b*C._02,v*C._10+S*C._11+b*C._12,v*C._20+S*C._21+b*C._22,y*C._00+x*C._01+w*C._02,y*C._10+x*C._11+w*C._12,y*C._20+x*C._21+w*C._22,T*C._00+I*C._01+E*C._02,T*C._10+I*C._11+E*C._12,T*C._20+I*C._21+E*C._22)},rotate:function(e,t,a){var r=t,i=a,s=Math.cos(e),n=-Math.sin(e),_=Math.sin(e),h=Math.cos(e),o=1*s+0*_+0*r,l=1*n+0*h+0*r,u=0+1*r,d=0*s+1*_+0*i,c=0*n+1*h+0*i,g=0+1*i,p=0*s+0*_+0,f=0*n+0*h+0,m=-t,k=-a,v=1*o+0*l+0*u,S=0*o+1*l+0*u,b=o*m+l*k+1*u,y=1*d+0*c+0*g,x=0*d+1*c+0*g,w=d*m+c*k+1*g,T=1*p+0*f+0,I=0*p+1*f+0,E=p*m+f*k+1,C=this.transformations[this.transformations.length-1],B=v*C._00+S*C._01+b*C._02,L=v*C._10+S*C._11+b*C._12,P=v*C._20+S*C._21+b*C._22,A=y*C._00+x*C._01+w*C._02,$=y*C._10+x*C._11+w*C._12,N=y*C._20+x*C._21+w*C._22,R=T*C._00+I*C._01+E*C._02,F=T*C._10+I*C._11+E*C._12,V=T*C._20+I*C._21+E*C._22;this.transformations[this.transformations.length-1]._00=B,this.transformations[this.transformations.length-1]._01=A,this.transformations[this.transformations.length-1]._02=R,this.transformations[this.transformations.length-1]._10=L,this.transformations[this.transformations.length-1]._11=$,this.transformations[this.transformations.length-1]._12=F,this.transformations[this.transformations.length-1]._20=P,this.transformations[this.transformations.length-1]._21=N,this.transformations[this.transformations.length-1]._22=V},pushRotation:function(e,t,a){var r=t,i=a,s=Math.cos(e),n=-Math.sin(e),_=Math.sin(e),h=Math.cos(e),o=1*s+0*_+0*r,l=1*n+0*h+0*r,u=0+1*r,d=0*s+1*_+0*i,c=0*n+1*h+0*i,g=0+1*i,p=0*s+0*_+0,f=0*n+0*h+0,m=-t,k=-a,v=1*o+0*l+0*u,S=0*o+1*l+0*u,b=o*m+l*k+1*u,y=1*d+0*c+0*g,x=0*d+1*c+0*g,w=d*m+c*k+1*g,T=1*p+0*f+0,I=0*p+1*f+0,E=p*m+f*k+1,C=this.transformations[this.transformations.length-1];this.pushTransformation(new kha_math_FastMatrix3(v*C._00+S*C._01+b*C._02,v*C._10+S*C._11+b*C._12,v*C._20+S*C._21+b*C._22,y*C._00+x*C._01+w*C._02,y*C._10+x*C._11+w*C._12,y*C._20+x*C._21+w*C._22,T*C._00+I*C._01+E*C._02,T*C._10+I*C._11+E*C._12,T*C._20+I*C._21+E*C._22))},pushOpacity:function(e){this.setOpacity(e),this.opacities.push(e)},popOpacity:function(){var e=this.opacities.pop();return this.setOpacity(this.get_opacity()),e},get_opacity:function(){return this.opacities[this.opacities.length-1]},set_opacity:function(e){return this.setOpacity(e),this.opacities[this.opacities.length-1]=e},scissor:function(e,t,a,r){},disableScissor:function(){},pipe:null,get_pipeline:function(){return this.pipe},set_pipeline:function(e){return this.setPipeline(e),this.pipe=e},transformations:null,opacities:null,myFontSize:null,setTransformation:function(e){},setOpacity:function(e){},setPipeline:function(e){},__class__:kha_graphics2_Graphics};var kha_graphics2_Graphics1=$hxClasses["kha.graphics2.Graphics1"]=function(e){this.canvas=e};kha_graphics2_Graphics1.__name__=!0,kha_graphics2_Graphics1.__interfaces__=[kha_graphics1_Graphics],kha_graphics2_Graphics1.prototype={canvas:null,texture:null,pixels:null,begin:function(){null==this.texture&&(this.texture=kha_Image.create(this.canvas.get_width(),this.canvas.get_height(),kha_graphics4_TextureFormat.RGBA32,kha_graphics4_Usage.ReadableUsage)),this.pixels=this.texture.lock()},end:function(){this.texture.unlock(),this.canvas.get_g2().begin(),this.canvas.get_g2().drawImage(this.texture,0,0),this.canvas.get_g2().end()},setPixel:function(e,t,a){this.pixels.setInt32(t*this.texture.get_realWidth()*4+4*e,a)},__class__:kha_graphics2_Graphics1};var kha_graphics2_ImageScaleQuality=$hxEnums["kha.graphics2.ImageScaleQuality"]={__ename__:!0,__constructs__:["Low","High"],Low:{_hx_index:0,__enum__:"kha.graphics2.ImageScaleQuality",toString:$estr},High:{_hx_index:1,__enum__:"kha.graphics2.ImageScaleQuality",toString:$estr}},kha_graphics2_truetype_VectorOfIntPointer=$hxClasses["kha.graphics2.truetype.VectorOfIntPointer"]=function(){};kha_graphics2_truetype_VectorOfIntPointer.__name__=!0,kha_graphics2_truetype_VectorOfIntPointer.prototype={value:null,__class__:kha_graphics2_truetype_VectorOfIntPointer};var kha_graphics2_truetype_Stbtt_$temp_$rect=$hxClasses["kha.graphics2.truetype.Stbtt_temp_rect"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$rect.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$rect.prototype={x0:null,y0:null,x1:null,y1:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$rect};var kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics=$hxClasses["kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.prototype={advanceWidth:null,leftSideBearing:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics};var kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics=$hxClasses["kha.graphics2.truetype.Stbtt_temp_font_v_metrics"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.prototype={ascent:null,descent:null,lineGap:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics};var kha_graphics2_truetype_Stbtt_$temp_$region=$hxClasses["kha.graphics2.truetype.Stbtt_temp_region"]=function(){};kha_graphics2_truetype_Stbtt_$temp_$region.__name__=!0,kha_graphics2_truetype_Stbtt_$temp_$region.prototype={width:null,height:null,xoff:null,yoff:null,__class__:kha_graphics2_truetype_Stbtt_$temp_$region};var kha_graphics2_truetype_Stbtt_$bakedchar=$hxClasses["kha.graphics2.truetype.Stbtt_bakedchar"]=function(){};kha_graphics2_truetype_Stbtt_$bakedchar.__name__=!0,kha_graphics2_truetype_Stbtt_$bakedchar.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,__class__:kha_graphics2_truetype_Stbtt_$bakedchar};var kha_graphics2_truetype_Stbtt_$aligned_$quad=$hxClasses["kha.graphics2.truetype.Stbtt_aligned_quad"]=function(){};kha_graphics2_truetype_Stbtt_$aligned_$quad.__name__=!0,kha_graphics2_truetype_Stbtt_$aligned_$quad.prototype={x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,__class__:kha_graphics2_truetype_Stbtt_$aligned_$quad};var kha_graphics2_truetype_Stbtt_$packedchar=$hxClasses["kha.graphics2.truetype.Stbtt_packedchar"]=function(){};kha_graphics2_truetype_Stbtt_$packedchar.__name__=!0,kha_graphics2_truetype_Stbtt_$packedchar.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,xoff2:null,yoff2:null,__class__:kha_graphics2_truetype_Stbtt_$packedchar};var kha_graphics2_truetype_Stbtt_$pack_$range=$hxClasses["kha.graphics2.truetype.Stbtt_pack_range"]=function(){};kha_graphics2_truetype_Stbtt_$pack_$range.__name__=!0,kha_graphics2_truetype_Stbtt_$pack_$range.prototype={font_size:null,first_unicode_codepoint_in_range:null,array_of_unicode_codepoints:null,num_chars:null,chardata_for_range:null,h_oversample:null,v_oversample:null,__class__:kha_graphics2_truetype_Stbtt_$pack_$range};var kha_graphics2_truetype_Stbtt_$pack_$context=$hxClasses["kha.graphics2.truetype.Stbtt_pack_context"]=function(){};kha_graphics2_truetype_Stbtt_$pack_$context.__name__=!0,kha_graphics2_truetype_Stbtt_$pack_$context.prototype={width:null,height:null,stride_in_bytes:null,padding:null,h_oversample:null,v_oversample:null,pixels:null,__class__:kha_graphics2_truetype_Stbtt_$pack_$context};var kha_graphics2_truetype_Stbtt_$fontinfo=$hxClasses["kha.graphics2.truetype.Stbtt_fontinfo"]=function(){};kha_graphics2_truetype_Stbtt_$fontinfo.__name__=!0,kha_graphics2_truetype_Stbtt_$fontinfo.prototype={data:null,fontstart:null,numGlyphs:null,loca:null,head:null,glyf:null,hhea:null,hmtx:null,kern:null,index_map:null,indexToLocFormat:null,__class__:kha_graphics2_truetype_Stbtt_$fontinfo};var kha_graphics2_truetype_Stbtt_$vertex=$hxClasses["kha.graphics2.truetype.Stbtt_vertex"]=function(){};kha_graphics2_truetype_Stbtt_$vertex.__name__=!0,kha_graphics2_truetype_Stbtt_$vertex.prototype={x:null,y:null,cx:null,cy:null,type:null,padding:null,__class__:kha_graphics2_truetype_Stbtt_$vertex};var kha_graphics2_truetype_Stbtt_$_$bitmap=$hxClasses["kha.graphics2.truetype.Stbtt__bitmap"]=function(){};kha_graphics2_truetype_Stbtt_$_$bitmap.__name__=!0,kha_graphics2_truetype_Stbtt_$_$bitmap.prototype={w:null,h:null,stride:null,pixels:null,pixels_offset:null,__class__:kha_graphics2_truetype_Stbtt_$_$bitmap};var kha_graphics2_truetype_Stbtt_$_$edge=$hxClasses["kha.graphics2.truetype.Stbtt__edge"]=function(){};kha_graphics2_truetype_Stbtt_$_$edge.__name__=!0,kha_graphics2_truetype_Stbtt_$_$edge.prototype={x0:null,y0:null,x1:null,y1:null,invert:null,__class__:kha_graphics2_truetype_Stbtt_$_$edge};var kha_graphics2_truetype_Stbtt_$_$active_$edge=$hxClasses["kha.graphics2.truetype.Stbtt__active_edge"]=function(){};kha_graphics2_truetype_Stbtt_$_$active_$edge.__name__=!0,kha_graphics2_truetype_Stbtt_$_$active_$edge.prototype={next:null,fx:null,fdx:null,fdy:null,direction:null,sy:null,ey:null,__class__:kha_graphics2_truetype_Stbtt_$_$active_$edge};var kha_graphics2_truetype_Stbtt_$_$point=$hxClasses["kha.graphics2.truetype.Stbtt__point"]=function(){};kha_graphics2_truetype_Stbtt_$_$point.__name__=!0,kha_graphics2_truetype_Stbtt_$_$point.prototype={x:null,y:null,__class__:kha_graphics2_truetype_Stbtt_$_$point};var kha_graphics2_truetype_StbTruetype=$hxClasses["kha.graphics2.truetype.StbTruetype"]=function(){};kha_graphics2_truetype_StbTruetype.__name__=!0,kha_graphics2_truetype_StbTruetype.STBTT_assert=function(e){if(!e)throw new js__$Boot_HaxeError("Error")},kha_graphics2_truetype_StbTruetype.STBTT_POINT_SIZE=function(e){return-e},kha_graphics2_truetype_StbTruetype.ttBYTE=function(e,t){return null==t&&(t=0),e.readU8(t)},kha_graphics2_truetype_StbTruetype.ttCHAR=function(e,t){null==t&&(t=0);var a=e.readU8(t);return 128<=a?a-256:a},kha_graphics2_truetype_StbTruetype.ttUSHORT=function(e,t){null==t&&(t=0);var a=e.readU8(t);return e.readU8(t+1)|a<<8},kha_graphics2_truetype_StbTruetype.ttSHORT=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1)|a<<8;return 0!=(32768&r)?r-65536:r},kha_graphics2_truetype_StbTruetype.ttULONG=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1),i=e.readU8(t+2);return e.readU8(t+3)|i<<8|r<<16|a<<24},kha_graphics2_truetype_StbTruetype.ttLONG=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1),i=e.readU8(t+2);return e.readU8(t+3)|i<<8|r<<16|a<<24},kha_graphics2_truetype_StbTruetype.ttFixed=function(e,t){null==t&&(t=0);var a=e.readU8(t),r=e.readU8(t+1),i=e.readU8(t+2);return e.readU8(t+3)|i<<8|r<<16|a<<24},kha_graphics2_truetype_StbTruetype.stbtt_tag4=function(e,t,a,r,i,s){return e.readU8(t)==a&&e.readU8(t+1)==r&&e.readU8(t+2)==i&&e.readU8(t+3)==s},kha_graphics2_truetype_StbTruetype.stbtt_tag=function(e,t,a){var r=HxOverrides.cca(a,0),i=HxOverrides.cca(a,1),s=HxOverrides.cca(a,2),n=HxOverrides.cca(a,3);return e.readU8(t)==r&&e.readU8(t+1)==i&&e.readU8(t+2)==s&&e.readU8(t+3)==n},kha_graphics2_truetype_StbTruetype.stbtt__isfont=function(e){var t=HxOverrides.cca("1",0);if(e.readU8(0)==t&&0==e.readU8(1)&&0==e.readU8(2)&&0==e.readU8(3))return!0;var a=HxOverrides.cca("typ1",0),r=HxOverrides.cca("typ1",1),i=HxOverrides.cca("typ1",2),s=HxOverrides.cca("typ1",3);if(e.readU8(0)==a&&e.readU8(1)==r&&e.readU8(2)==i&&e.readU8(3)==s)return!0;var n=HxOverrides.cca("OTTO",0),_=HxOverrides.cca("OTTO",1),h=HxOverrides.cca("OTTO",2),o=HxOverrides.cca("OTTO",3);return e.readU8(0)==n&&e.readU8(1)==_&&e.readU8(2)==h&&e.readU8(3)==o||0==e.readU8(0)&&1==e.readU8(1)&&0==e.readU8(2)&&0==e.readU8(3)},kha_graphics2_truetype_StbTruetype.stbtt__find_table=function(e,t,a){for(var r=t+4,i=e.readU8(r),s=t+12,n=0,_=e.readU8(r+1)|i<<8;n<_;){var h=s+16*n++,o=HxOverrides.cca(a,0),l=HxOverrides.cca(a,1),u=HxOverrides.cca(a,2),d=HxOverrides.cca(a,3);if(e.readU8(h)==o&&e.readU8(h+1)==l&&e.readU8(h+2)==u&&e.readU8(h+3)==d){var c=h+8,g=e.readU8(c),p=e.readU8(c+1),f=e.readU8(c+2);return e.readU8(c+3)|f<<8|p<<16|g<<24}}return 0},kha_graphics2_truetype_StbTruetype.stbtt_GetFontOffsetForIndex=function(e,t){if(kha_graphics2_truetype_StbTruetype.stbtt__isfont(e))return 0==t?0:-1;var a=HxOverrides.cca("ttcf",0),r=HxOverrides.cca("ttcf",1),i=HxOverrides.cca("ttcf",2),s=HxOverrides.cca("ttcf",3);if(e.readU8(0)==a&&e.readU8(1)==r&&e.readU8(2)==i&&e.readU8(3)==s){var n,_=e.readU8(4),h=e.readU8(5),o=e.readU8(6);if(65536!=(e.readU8(7)|o<<8|h<<16|_<<24)){var l=e.readU8(4),u=e.readU8(5),d=e.readU8(6);n=131072==(e.readU8(7)|d<<8|u<<16|l<<24)}else n=!0;if(n){var c=e.readU8(8),g=e.readU8(9),p=e.readU8(10);if((e.readU8(11)|p<<8|g<<16|c<<24)<=t)return-1;var f=12+4*t,m=e.readU8(f),k=e.readU8(f+1),v=e.readU8(f+2);return e.readU8(f+3)|v<<8|k<<16|m<<24}}return-1},kha_graphics2_truetype_StbTruetype.stbtt_InitFont=function(e,t,a){e.data=t,e.fontstart=a;var r=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"cmap");if(e.loca=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"loca"),e.head=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"head"),e.glyf=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"glyf"),e.hhea=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"hhea"),e.hmtx=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"hmtx"),e.kern=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"kern"),0==r||0==e.loca||0==e.head||0==e.glyf||0==e.hhea||0==e.hmtx)return!1;var i=kha_graphics2_truetype_StbTruetype.stbtt__find_table(t,a,"maxp");if(0!=i){var s=i+4,n=t.readU8(s),_=t.readU8(s+1);e.numGlyphs=_|n<<8}else e.numGlyphs=65535;for(var h=r+2,o=t.readU8(h),l=t.readU8(h+1)|o<<8,u=e.index_map=0,d=l;u<d;){var c=r+4+8*u++,g=t.readU8(c);switch(t.readU8(c+1)|g<<8){case 0:var p=c+4,f=t.readU8(p),m=t.readU8(p+1),k=t.readU8(p+2),v=t.readU8(p+3);e.index_map=r+(v|k<<8|m<<16|f<<24);break;case 3:var S=c+2,b=t.readU8(S);switch(t.readU8(S+1)|b<<8){case 1:case 10:var y=c+4,x=t.readU8(y),w=t.readU8(y+1),T=t.readU8(y+2),I=t.readU8(y+3);e.index_map=r+(I|T<<8|w<<16|x<<24)}}}if(0==e.index_map)return!1;var E=e.head+50,C=t.readU8(E),B=t.readU8(E+1);return e.indexToLocFormat=B|C<<8,!0},kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex=function(e,t){var a=e.data,r=e.index_map,i=a.readU8(r),s=a.readU8(r+1)|i<<8;if(0==s){var n=r+2,_=a.readU8(n);return t<(a.readU8(n+1)|_<<8)-6?a.readU8(r+6+t):0}if(6==s){var h=r+6,o=a.readU8(h),l=a.readU8(h+1)|o<<8,u=r+8,d=a.readU8(u),c=a.readU8(u+1);if(l<=t&&t<l+(c|d<<8)){var g=r+10+2*(t-l),p=a.readU8(g);return a.readU8(g+1)|p<<8}return 0}if(2==s)throw new js__$Boot_HaxeError("Error");if(4==s){var f=r+6,m=a.readU8(f),k=(a.readU8(f+1)|m<<8)>>1,v=r+8,S=a.readU8(v),b=(a.readU8(v+1)|S<<8)>>1,y=r+10,x=a.readU8(y),w=a.readU8(y+1)|x<<8,T=r+12,I=a.readU8(T),E=(a.readU8(T+1)|I<<8)>>1,C=r+14,B=C;if(65535<t)return 0;var L=B+2*E,P=a.readU8(L);for((a.readU8(L+1)|P<<8)<=t&&(B+=2*E),B-=2;0!=w;){var A=B+2*(b>>=1),$=a.readU8(A);(a.readU8(A+1)|$<<8)<t&&(B+=2*b),--w}var N=(B+=2)-C>>1,R=C+2*N,F=a.readU8(R);if((a.readU8(R+1)|F<<8)<t)throw new js__$Boot_HaxeError("Error");var V=r+14+2*k+2+2*N,M=a.readU8(V),H=a.readU8(V+1)|M<<8;if(t<H)return 0;var O=r+14+6*k+2+2*N,U=a.readU8(O),D=a.readU8(O+1)|U<<8;if(0==D){var G=r+14+4*k+2+2*N,z=a.readU8(G),W=a.readU8(G+1)|z<<8;return t+(0!=(32768&W)?W-65536:W)}var j=D+2*(t-H)+r+14+6*k+2+2*N,K=a.readU8(j);return a.readU8(j+1)|K<<8}if(12==s||13==s){for(var X=r+12,Y=a.readU8(X),Z=a.readU8(X+1),Q=a.readU8(X+2),q=0,J=a.readU8(X+3)|Q<<8|Z<<16|Y<<24;q<J;){var ee=q+(J-q>>1),te=r+16+12*ee,ae=a.readU8(te),re=a.readU8(te+1),ie=a.readU8(te+2),se=a.readU8(te+3)|ie<<8|re<<16|ae<<24,ne=r+16+12*ee+4,_e=a.readU8(ne),he=a.readU8(ne+1),oe=a.readU8(ne+2),le=a.readU8(ne+3);if(t<se)J=ee;else{if(!((le|oe<<8|he<<16|_e<<24)<t)){var ue=r+16+12*ee+8,de=a.readU8(ue),ce=a.readU8(ue+1),ge=a.readU8(ue+2),pe=a.readU8(ue+3)|ge<<8|ce<<16|de<<24;return 12==s?pe+t-se:pe}q=ee+1}}return 0}throw new js__$Boot_HaxeError("Error")},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointShape=function(e,t){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t))},kha_graphics2_truetype_StbTruetype.stbtt_setvertex=function(e,t,a,r,i,s){e.type=t,e.x=a,e.y=r,e.cx=i,e.cy=s},kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset=function(e,t){var a,r;if(t>=e.numGlyphs)return-1;if(2<=e.indexToLocFormat)return-1;if(0==e.indexToLocFormat){var i=e.glyf,s=e.data,n=e.loca+2*t,_=s.readU8(n);a=i+2*(s.readU8(n+1)|_<<8);var h=e.glyf,o=e.data,l=e.loca+2*t+2,u=o.readU8(l);r=h+2*(o.readU8(l+1)|u<<8)}else{var d=e.glyf,c=e.data,g=e.loca+4*t,p=c.readU8(g),f=c.readU8(g+1),m=c.readU8(g+2);a=d+(c.readU8(g+3)|m<<8|f<<16|p<<24);var k=e.glyf,v=e.data,S=e.loca+4*t+4,b=v.readU8(S),y=v.readU8(S+1),x=v.readU8(S+2);r=k+(v.readU8(S+3)|x<<8|y<<16|b<<24)}return a==r?-1:a},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox=function(e,t,a){var r=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(e,t);if(r<0)return!1;var i=e.data,s=r+2,n=i.readU8(s),_=i.readU8(s+1)|n<<8;a.x0=0!=(32768&_)?_-65536:_;var h=e.data,o=r+4,l=h.readU8(o),u=h.readU8(o+1)|l<<8;a.y0=0!=(32768&u)?u-65536:u;var d=e.data,c=r+6,g=d.readU8(c),p=d.readU8(c+1)|g<<8;a.x1=0!=(32768&p)?p-65536:p;var f=e.data,m=r+8,k=f.readU8(m),v=f.readU8(m+1)|k<<8;return a.y1=0!=(32768&v)?v-65536:v,!0},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBox=function(e,t,a){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t),a)},kha_graphics2_truetype_StbTruetype.stbtt_IsGlyphEmpty=function(e,t){var a=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(e,t);if(a<0)return!0;var r=e.data,i=r.readU8(a),s=r.readU8(a+1)|i<<8;return 0==(0!=(32768&s)?s-65536:s)},kha_graphics2_truetype_StbTruetype.stbtt__close_shape=function(e,t,a,r,i,s,n,_,h,o){return r?(a&&kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],3,h+n>>1,o+_>>1,h,o),kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],3,i,s,n,_)):a?kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],3,i,s,h,o):kha_graphics2_truetype_StbTruetype.stbtt_setvertex(e[t++],2,i,s,0,0),t},kha_graphics2_truetype_StbTruetype.copyVertices=function(e,t,a,r){for(var i=0,s=r;i<s;){var n=i++;t[a+n]=e[n]}},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape=function(e,t){var a,r=e.data,i=null,s=0,n=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(e,t);if(n<0)return null;var _=r.readU8(n),h=r.readU8(n+1)|_<<8,o=0!=(32768&h)?h-65536:h;if(0<o){var l,u=0,d=0,c=0,g=!1,p=!1,f=0;a=r.sub(n+10,r.get_length()-(n+10));var m=n+10+2*o,k=r.readU8(m),v=r.readU8(m+1)|k<<8,S=r.sub(n+10+2*o+2+v,r.get_length()-(n+10+2*o+2+v)),b=2*o-2,y=a.readU8(b),x=1+(a.readU8(b+1)|y<<8),w=x+2*o;if(null==(i=new Array(w)))return null;for(var T=0,I=i.length;T<I;){i[T++]=new kha_graphics2_truetype_Stbtt_$vertex}var E=c=0;l=w-x;for(var C=0,B=x;C<B;){var L=C++;0==E?0!=(8&(u=S.readU8(f++)))&&(E=S.readU8(f++)):--E,i[l+L].type=u}for(var P=0,A=0,$=x;A<$;){var N=A++;if(0!=(2&(u=i[l+N].type))){var R=S.readU8(f++);P+=0!=(16&u)?R:-R}else if(0==(16&u)){var F=S.readU8(f),V=S.readU8(f+1)|F<<8;P+=0!=(32768&V)?V-65536:V,f+=2}i[l+N].x=P}for(var M=0,H=0,O=x;H<O;){var U=H++;if(0!=(4&(u=i[l+U].type))){var D=S.readU8(f++);M+=0!=(32&u)?D:-D}else if(0==(32&u)){var G=S.readU8(f),z=S.readU8(f+1)|G<<8;M+=0!=(32768&z)?z-65536:z,f+=2}i[l+U].y=M}for(var W=s=0,j=W,K=j,X=K,Y=X,Z=Y,Q=0;Q<x;){if(u=i[l+Q].type,P=i[l+Q].x,M=i[l+Q].y,c==Q){0!=Q&&(s=kha_graphics2_truetype_StbTruetype.stbtt__close_shape(i,s,g,p,Z,Y,j,W,X,K)),(p=0==(1&u))?(j=P,W=M,0==(1&i[l+Q+1].type)?(Z=P+i[l+Q+1].x>>1,Y=M+i[l+Q+1].y>>1):(Z=i[l+Q+1].x,Y=i[l+Q+1].y,++Q)):(Z=P,Y=M),kha_graphics2_truetype_StbTruetype.stbtt_setvertex(i[s++],1,Z,Y,0,0),g=!1;var q=2*d,J=a.readU8(q);c=1+(a.readU8(q+1)|J<<8),++d}else 0==(1&u)?(g&&kha_graphics2_truetype_StbTruetype.stbtt_setvertex(i[s++],3,X+P>>1,K+M>>1,X,K),X=P,K=M,g=!0):(g?kha_graphics2_truetype_StbTruetype.stbtt_setvertex(i[s++],3,P,M,X,K):kha_graphics2_truetype_StbTruetype.stbtt_setvertex(i[s++],2,P,M,0,0),g=!1);++Q}s=kha_graphics2_truetype_StbTruetype.stbtt__close_shape(i,s,g,p,Z,Y,j,W,X,K)}else if(-1==o){var ee=1,te=r.sub(n+10,r.get_length()-(n+10)),ae=0;for(s=0,i=null;0!=ee;){var re,ie,se=null,ne=1,_e=0,he=0,oe=1,le=0,ue=0,de=te.readU8(ae),ce=te.readU8(ae+1)|de<<8,ge=0!=(32768&ce)?ce-65536:ce;ae+=2;var pe=te.readU8(ae),fe=te.readU8(ae+1)|pe<<8,me=0!=(32768&fe)?fe-65536:fe;if(ae+=2,0==(2&ge))throw new js__$Boot_HaxeError("Error");if(0!=(1&ge)){var ke=te.readU8(ae),ve=te.readU8(ae+1)|ke<<8;le=0!=(32768&ve)?ve-65536:ve,ae+=2;var Se=te.readU8(ae),be=te.readU8(ae+1)|Se<<8;ue=0!=(32768&be)?be-65536:be,ae+=2}else{var ye=te.readU8(ae);le=128<=ye?ye-256:ye,++ae;var xe=te.readU8(ae);ue=128<=xe?xe-256:xe,++ae}if(0!=(8&ge)){var we=te.readU8(ae),Te=te.readU8(ae+1)|we<<8;ne=oe=(0!=(32768&Te)?Te-65536:Te)/16384,ae+=2,_e=he=0}else if(0!=(64&ge)){var Ie=te.readU8(ae),Ee=te.readU8(ae+1)|Ie<<8;ne=(0!=(32768&Ee)?Ee-65536:Ee)/16384,ae+=2,_e=he=0;var Ce=te.readU8(ae),Be=te.readU8(ae+1)|Ce<<8;oe=(0!=(32768&Be)?Be-65536:Be)/16384,ae+=2}else if(0!=(128&ge)){var Le=te.readU8(ae),Pe=te.readU8(ae+1)|Le<<8;ne=(0!=(32768&Pe)?Pe-65536:Pe)/16384,ae+=2;var Ae=te.readU8(ae),$e=te.readU8(ae+1)|Ae<<8;_e=(0!=(32768&$e)?$e-65536:$e)/16384,ae+=2;var Ne=te.readU8(ae),Re=te.readU8(ae+1)|Ne<<8;he=(0!=(32768&Re)?Re-65536:Re)/16384,ae+=2;var Fe=te.readU8(ae),Ve=te.readU8(ae+1)|Fe<<8;oe=(0!=(32768&Ve)?Ve-65536:Ve)/16384,ae+=2}var Me=Math.sqrt(ne*ne+_e*_e),He=Math.sqrt(he*he+oe*oe);if(0<(re=null==(ie=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,me))?0:ie.length)){for(var Oe=0,Ue=re;Oe<Ue;){var De=ie[Oe++],Ge=De.x,ze=De.y;De.x=Me*(ne*Ge+he*ze+le)|0,De.y=He*(_e*Ge+oe*ze+ue)|0,Ge=De.cx,ze=De.cy,De.cx=Me*(ne*Ge+he*ze+le)|0,De.cy=He*(_e*Ge+oe*ze+ue)|0}if(null==(se=new Array(s+re)))return null;0<s&&kha_graphics2_truetype_StbTruetype.copyVertices(i,se,0,s),kha_graphics2_truetype_StbTruetype.copyVertices(ie,se,s,re),i=se,s+=re}ee=32&ge}}else if(o<0)throw new js__$Boot_HaxeError("Error");if(null==i)return null;if(i.length<s)throw new js__$Boot_HaxeError("Error");if(s<i.length){var We=new Array(s);return kha_graphics2_truetype_StbTruetype.copyVertices(i,We,0,s),We}return i},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics=function(e,t){var a=e.data,r=e.hhea+34,i=a.readU8(r),s=a.readU8(r+1)|i<<8,n=new kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics;if(t<s){var _=e.data,h=e.hmtx+4*t,o=_.readU8(h),l=_.readU8(h+1)|o<<8;n.advanceWidth=0!=(32768&l)?l-65536:l;var u=e.data,d=e.hmtx+4*t+2,c=u.readU8(d),g=u.readU8(d+1)|c<<8;n.leftSideBearing=0!=(32768&g)?g-65536:g}else{var p=e.data,f=e.hmtx+4*(s-1),m=p.readU8(f),k=p.readU8(f+1)|m<<8;n.advanceWidth=0!=(32768&k)?k-65536:k;var v=e.data,S=e.hmtx+4*s+2*(t-s),b=v.readU8(S),y=v.readU8(S+1)|b<<8;n.leftSideBearing=0!=(32768&y)?y-65536:y}return n},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphKernAdvance=function(e,t,a){var r,i,s=e.data.sub(e.kern,e.data.get_length()-e.kern);if(0==e.kern)return 0;var n=s.readU8(2);if((s.readU8(3)|n<<8)<1)return 0;var _=s.readU8(8);if(1!=(s.readU8(9)|_<<8))return 0;for(var h=0,o=s.readU8(10),l=(s.readU8(11)|o<<8)-1,u=t<<16|a;h<=l;){var d=18+6*(i=h+l>>1),c=s.readU8(d),g=s.readU8(d+1),p=s.readU8(d+2);if(u<(r=s.readU8(d+3)|p<<8|g<<16|c<<24))l=i-1;else{if(!(r<u)){var f=22+6*i,m=s.readU8(f),k=s.readU8(f+1)|m<<8;return 0!=(32768&k)?k-65536:k}h=i+1}}return 0},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointKernAdvance=function(e,t,a){return 0==e.kern?0:kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphKernAdvance(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t),kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,a))},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointHMetrics=function(e,t){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t))},kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics=function(e){var t=new kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics,a=e.data,r=e.hhea+4,i=a.readU8(r),s=a.readU8(r+1)|i<<8;t.ascent=0!=(32768&s)?s-65536:s;var n=e.data,_=e.hhea+6,h=n.readU8(_),o=n.readU8(_+1)|h<<8;t.descent=0!=(32768&o)?o-65536:o;var l=e.data,u=e.hhea+8,d=l.readU8(u),c=l.readU8(u+1)|d<<8;return t.lineGap=0!=(32768&c)?c-65536:c,t},kha_graphics2_truetype_StbTruetype.stbtt_GetFontBoundingBox=function(e){var t=new kha_graphics2_truetype_Stbtt_$temp_$rect,a=e.data,r=e.head+36,i=a.readU8(r),s=a.readU8(r+1)|i<<8;t.x0=0!=(32768&s)?s-65536:s;var n=e.data,_=e.head+38,h=n.readU8(_),o=n.readU8(_+1)|h<<8;t.y0=0!=(32768&o)?o-65536:o;var l=e.data,u=e.head+40,d=l.readU8(u),c=l.readU8(u+1)|d<<8;t.x1=0!=(32768&c)?c-65536:c;var g=e.data,p=e.head+42,f=g.readU8(p),m=g.readU8(p+1)|f<<8;return t.y1=0!=(32768&m)?m-65536:m,t},kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight=function(e,t){var a=e.data,r=e.hhea+4,i=a.readU8(r),s=a.readU8(r+1)|i<<8,n=e.data,_=e.hhea+6,h=n.readU8(_),o=n.readU8(_+1)|h<<8;return t/((0!=(32768&s)?s-65536:s)-(0!=(32768&o)?o-65536:o))},kha_graphics2_truetype_StbTruetype.stbtt_ScaleForMappingEmToPixels=function(e,t){var a=e.data,r=e.head+18,i=a.readU8(r);return t/(a.readU8(r+1)|i<<8)},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel=function(e,t,a,r,i,s){var n=new kha_graphics2_truetype_Stbtt_$temp_$rect;if(kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox(e,t,n)){var _=n.x0,h=n.x1,o=n.y0,l=n.y1;n.x0=Math.floor(_*a+i),n.y0=Math.floor(-l*r+s),n.x1=Math.ceil(h*a+i),n.y1=Math.ceil(-o*r+s)}else n.x0=0,n.y0=0,n.x1=0,n.y1=0;return n},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox=function(e,t,a,r){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,t,a,r,0,0)},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBoxSubpixel=function(e,t,a,r,i,s){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,t),a,r,i,s)},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBox=function(e,t,a,r){return kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBoxSubpixel(e,t,a,r,0,0)},kha_graphics2_truetype_StbTruetype.stbtt__new_active=function(e,t,a,r){var i=new kha_graphics2_truetype_Stbtt_$_$active_$edge,s=(e[t].x1-e[t].x0)/(e[t].y1-e[t].y0);return null==i||(i.fdx=s,i.fdy=0!=s?1/s:0,i.fx=e[t].x0+s*(r-e[t].y0),i.fx-=a,i.direction=e[t].invert?1:-1,i.sy=e[t].y0,i.ey=e[t].y1,i.next=null),i},kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge=function(e,t,a,r,i,s,n,_){if(s!=_){if(!(s<_))throw new js__$Boot_HaxeError("Error");if(!(r.sy<=r.ey))throw new js__$Boot_HaxeError("Error");if(!(s>r.ey||_<r.sy)){if(s<r.sy&&(i+=(n-i)*(r.sy-s)/(_-s),s=r.sy),_>r.ey&&(n+=(n-i)*(r.ey-_)/(_-s),_=r.ey),i==a){if(!(n<=a+1))throw new js__$Boot_HaxeError("Error")}else if(i==a+1){if(!(a<=n))throw new js__$Boot_HaxeError("Error")}else if(i<=a){if(!(n<=a))throw new js__$Boot_HaxeError("Error")}else if(a+1<=i){if(!(a+1<=n))throw new js__$Boot_HaxeError("Error")}else if(!(a<=n&&n<=a+1))throw new js__$Boot_HaxeError("Error");if(i<=a&&n<=a){var h=t+a,o=e;o[h]=o[h]+r.direction*(_-s)}else if(!(a+1<=i&&a+1<=n)){if(!(a<=i&&i<=a+1&&a<=n&&n<=a+1))throw new js__$Boot_HaxeError("Error");var l=t+a,u=e;u[l]=u[l]+r.direction*(_-s)*(1-(i-a+(n-a))/2)}}}},kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new=function(e,t,a,r,i,s){for(var n=s+1;null!=i;){if(!(i.ey>=s))throw new js__$Boot_HaxeError("Error");if(0==i.fdx){var _=i.fx;_<r&&(0<=_?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,0|_,i,_,s,_,n),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(t,a-1,_+1|0,i,_,s,_,n)):kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(t,a-1,0,i,_,s,_,n))}else{var h,o,l,u,d=i.fx,c=i.fdx,g=d+c,p=i.fdy;if(!(i.sy<=n&&i.ey>=s))throw new js__$Boot_HaxeError("Error");if(i.sy>s?(h=d+c*(i.sy-s),l=i.sy):(h=d,l=s),i.ey<n?(o=d+c*(i.ey-s),u=i.ey):(o=g,u=n),0<=h&&0<=o&&h<r&&o<r)if((0|h)==(0|o)){var f=0|h,m=u-l;if(!(0<=f&&f<r))throw new js__$Boot_HaxeError("Error");var k=f,v=e;v[k]=v[k]+i.direction*(1-(h-f+(o-f))/2)*m;var S=a+f,b=t;b[S]=b[S]+i.direction*m}else{if(o<h){var y=l=n-(l-s);l=u=n-(u-s),u=y,y=o,o=h,h=y,c=-c,p=-p,y=d,d=g,g=y}var x=0|h,w=0|o,T=(x+1-d)*p+s,I=i.direction,E=I*(T-l),C=x,B=e;B[C]=B[C]+E*(1-(h-x+(x+1-x))/2);for(var L=I*p,P=x+1,A=w;P<A;){var $=P++,N=e;N[$]=N[$]+(E+L/2),E+=L}if(T+=p*(w-(x+1)),!(Math.abs(E)<=1.01))throw new js__$Boot_HaxeError("Error");var R=w,F=e;F[R]=F[R]+(E+I*(1-(w-w+(o-w))/2)*(u-T));var V=a+w,M=t;M[V]=M[V]+I*(u-l)}else for(var H=0,O=r;H<O;){var U=H++,D=s,G=U,z=U+1,W=g,j=n,K=(U-d)/c+s,X=(U+1-d)/c+s;d<G&&z<W?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,G,K),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,G,K,z,X),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,z,X,W,j)):W<G&&z<d?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,z,X),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,z,X,G,K),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,G,K,W,j)):d<G&&G<W?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,G,K),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,G,K,W,j)):W<G&&G<d?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,G,K),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,G,K,W,j)):d<z&&z<W?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,z,X),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,z,X,W,j)):W<z&&z<d?(kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,z,X),kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,z,X,W,j)):kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(e,0,U,i,d,D,W,j)}}i=i.next}},kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges=function(e,t,a,r,i,s){var n,_,h=null,o=0,l=0;64<e.w?n=new Array(2*e.w+1):n=new Array(129);var u=n;_=e.w;var d=s;for(t[l+a].y0=s+e.h+1;o<e.h;){for(var c=d+0,g=d+1,p=h,f=null,m=0,k=e.w;m<k;){n[m++]=0}for(var v=0,S=e.w+1;v<S;){u[_+v++]=0}for(;null!=p;){var b=p;if(b.ey<=c){if(null==f?h=b.next:f.next=b.next,p=b.next,0==b.direction)throw new js__$Boot_HaxeError("Error");b.direction=0}else p=(f=p).next}for(;t[l].y0<=g;){if(t[l].y0!=t[l].y1){var y=kha_graphics2_truetype_StbTruetype.stbtt__new_active(t,l,i,c);if(!(y.ey>=c))throw new js__$Boot_HaxeError("Error");y.next=h,h=y}++l}null!=h&&kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new(n,u,_+1,e.w,h,c);for(var x=0,w=0,T=e.w;w<T;){var I=w++;x+=u[_+I];var E=n[I]+x,C=0|(E=255*Math.abs(E)+.5);255<C&&(C=255),e.pixels.writeU8(e.pixels_offset+o*e.stride+I,C)}for(f=null,p=h;null!=p;){var B=p;B.fx+=B.fdx,p=(f=p).next}++d,++o}},kha_graphics2_truetype_StbTruetype.STBTT__COMPARE=function(e,t){return e.y0<t.y0},kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort=function(e,t){for(var a,r=1,i=t;r<i;){var s=r++,n=e[s],_=n;for(a=s;0<a;){var h=e[a-1];if(!kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(_,h))break;e[a]=e[a-1],--a}s!=a&&(e[a]=n)}},kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort=function(e,t,a){for(;12<a;){var r,i=a>>1,s=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t],e[t+i]),n=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t+i],e[t+a-1]);if(s!=n){var _=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t],e[t+a-1])==n?0:a-1;r=e[t+_],e[t+_]=e[t+i],e[t+i]=r}r=e[t],e[t]=e[t+i],e[t+i]=r;for(var h=1,o=a-1;;){for(;kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t+h],e[t]);)++h;for(;kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(e[t],e[t+o]);)--o;if(o<=h)break;r=e[t+h],e[t+h]=e[t+o],e[t+o]=r,++h,--o}o<a-h?(kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(e,t,o),t+=h,a-=h):(kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(e,t+h,a-h),a=o)}},kha_graphics2_truetype_StbTruetype.stbtt__sort_edges=function(e,t){kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(e,0,t),kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort(e,t)},kha_graphics2_truetype_StbTruetype.stbtt__rasterize=function(e,t,a,r,i,s,n,_,h,o,l){for(var u,d=l?-s:s,c=0,g=0,p=r;g<p;){c+=a[g++]}var f=new Array(c+1);if(null!=f){for(var m=0,k=f.length;m<k;){f[m++]=new kha_graphics2_truetype_Stbtt_$_$edge}for(var v=c=0,S=0,b=r;S<b;){var y=S++,x=t,w=0+v;v+=a[y],u=a[y]-1;for(var T=0,I=a[y];T<I;){var E=T++,C=E,B=u;x[w+u].y!=x[w+E].y?(f[c].invert=!1,(l?x[w+u].y>x[w+E].y:x[w+u].y<x[w+E].y)&&(f[c].invert=!0,C=u,B=E),f[c].x0=x[w+C].x*i+n,f[c].y0=1*(x[w+C].y*d+_),f[c].x1=x[w+B].x*i+n,f[c].y1=1*(x[w+B].y*d+_),++c,u=E):u=E}}kha_graphics2_truetype_StbTruetype.stbtt__sort_edges(f,c),kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges(e,f,c,1,h,o)}},kha_graphics2_truetype_StbTruetype.stbtt__add_point=function(e,t,a,r){null!=e&&(e[t].x=a,e[t].y=r)},kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve=function(e,t,a,r,i,s,n,_,h,o){var l=(a+2*i+n)/4,u=(r+2*s+_)/4,d=(a+n)/2-l,c=(r+_)/2-u;return 16<o||(h<d*d+c*c?(kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(e,t,a,r,(a+i)/2,(r+s)/2,l,u,h,o+1),kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(e,t,l,u,(i+n)/2,(s+_)/2,n,_,h,o+1)):(kha_graphics2_truetype_StbTruetype.stbtt__add_point(e,t.value,n,_),t.value+=1)),1},kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves=function(e,t,a,r,i){for(var s=null,n=0,_=a*a,h=0,o=0,l=0,u=t;l<u;){1==e[l++].type&&++h}if(0==(i.value=h))return null;var d=new Array(h);if(r.value=d,null==r.value)return i.value=0,null;for(var c=0;c<2;){var g=0,p=0;if(1==c++){if(null==(s=new Array(n)))return r.value=null,i.value=0,null;for(var f=0,m=s.length;f<m;){s[f++]=new kha_graphics2_truetype_Stbtt_$_$point}}h=-1;for(var k=n=0,v=t;k<v;){var S=k++;switch(e[S].type){case 1:0<=h&&(r.value[h]=n-o),++h,o=n,g=e[S].x,p=e[S].y,kha_graphics2_truetype_StbTruetype.stbtt__add_point(s,n++,g,p);break;case 2:g=e[S].x,p=e[S].y,kha_graphics2_truetype_StbTruetype.stbtt__add_point(s,n++,g,p);break;case 3:var b={value:n};kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(s,b,g,p,e[S].cx,e[S].cy,e[S].x,e[S].y,_,0),n=b.value,g=e[S].x,p=e[S].y}}r.value[h]=n-o}return s},kha_graphics2_truetype_StbTruetype.stbtt_Rasterize=function(e,t,a,r,i,s,n,_,h,o,l){var u,d=s<i?s:i,c=0,g={value:c},p=new kha_graphics2_truetype_VectorOfIntPointer,f=kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves(a,r,t/d,p,g);c=g.value,u=p.value,null!=f&&kha_graphics2_truetype_StbTruetype.stbtt__rasterize(e,f,u,c,i,s,n,_,h,o,l)},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel=function(e,t,a,r,i,s,n){var _=new kha_graphics2_truetype_Stbtt_$_$bitmap,h=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,s),o=h.length;if(0==t&&(t=a),0==a){if(0==t)return null;a=t}var l=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,s,t,a,r,i),u=l.x0,d=l.y0,c=l.x1,g=l.y1;return _.w=c-u,_.h=g-d,_.pixels=null,n.width=_.w,n.height=_.h,n.xoff=u,n.yoff=d,0!=_.w&&0!=_.h&&(_.pixels=kha_internal_BytesBlob.alloc(_.w*_.h),null!=_.pixels&&(_.stride=_.w,kha_graphics2_truetype_StbTruetype.stbtt_Rasterize(_,.35,h,o,t,a,r,i,u,d,!0))),_.pixels},kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmap=function(e,t,a,r,i){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel(e,t,a,0,0,r,i)},kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel=function(e,t,a,r,i,s,n,_,h,o,l){var u,d,c=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(e,l),g=null==c?0:c.length,p=new kha_graphics2_truetype_Stbtt_$_$bitmap,f=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(e,l,n,_,h,o);u=f.x0,d=f.y0,p.pixels=t,p.pixels_offset=a,p.w=r,p.h=i,p.stride=s,0!=p.w&&0!=p.h&&kha_graphics2_truetype_StbTruetype.stbtt_Rasterize(p,.35,c,g,n,_,h,o,u,d,!0)},kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap=function(e,t,a,r,i,s,n,_,h){kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel(e,t,a,r,i,s,n,_,0,0,h)},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapSubpixel=function(e,t,a,r,i,s,n){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel(e,t,a,r,i,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,s),n)},kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmapSubpixel=function(e,t,a,r,i,s,n,_,h,o,l){kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel(e,t,a,r,i,s,n,_,h,o,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(e,l))},kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmap=function(e,t,a,r,i){return kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapSubpixel(e,t,a,0,0,r,i)},kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmap=function(e,t,a,r,i,s,n,_,h){kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmapSubpixel(e,t,a,r,i,s,n,_,0,0,h)},kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap=function(e,t,a,r,i,s,n,_){var h=new kha_graphics2_truetype_Stbtt_$fontinfo;if(!kha_graphics2_truetype_StbTruetype.stbtt_InitFont(h,e,t))return-1;for(var o=0,l=i*s;o<l;){var u=o++;r.writeU8(u,0)}for(var d=1,c=d,g=1,p=kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(h,a),f=0,m=0;m<n.length;){var k=n[m];++m;var v=kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(h,k),S=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics(h,v),b=S.advanceWidth,y=(S.leftSideBearing,kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox(h,v,p,p)),x=y.x0,w=y.y0,T=y.x1-x,I=y.y1-w;if(i<=c+T+1&&(d=g,c=1),s<=d+I+1)return-f;if(i<=c+T)throw new js__$Boot_HaxeError("Error");if(s<=d+I)throw new js__$Boot_HaxeError("Error");kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap(h,r,c+d*i,T,I,i,p,p,v),_[f].x0=c,_[f].y0=d,_[f].x1=c+T,_[f].y1=d+I,_[f].xadvance=p*b,_[f].xoff=x,_[f].yoff=w,c=c+T+1,g<d+I+1&&(g=d+I+1),++f}return g},kha_graphics2_truetype_StbTruetype.stbtt_GetBakedQuad=function(e,t,a,r,i,s,n,_){var h=_?0:-.5,o=1/t,l=1/a,u=e[r],d=Math.floor(i.value+u.xoff+.5),c=Math.floor(s.value+u.yoff+.5);n.x0=d+h,n.y0=c+h,n.x1=d+u.x1-u.x0+h,n.y1=c+u.y1-u.y0+h,n.s0=u.x0*o,n.t0=u.y0*l,n.s1=u.x1*o,n.t1=u.y1*l,i.value+=u.xadvance};var kha_graphics4_BlendingFactor=$hxEnums["kha.graphics4.BlendingFactor"]={__ename__:!0,__constructs__:["Undefined","BlendOne","BlendZero","SourceAlpha","DestinationAlpha","InverseSourceAlpha","InverseDestinationAlpha","SourceColor","DestinationColor","InverseSourceColor","InverseDestinationColor"],Undefined:{_hx_index:0,__enum__:"kha.graphics4.BlendingFactor",toString:$estr},BlendOne:{_hx_index:1,__enum__:"kha.graphics4.BlendingFactor",toString:$estr},BlendZero:{_hx_index:2,__enum__:"kha.graphics4.BlendingFactor",toString:$estr},SourceAlpha:{_hx_index:3,__enum__:"kha.graphics4.BlendingFactor",toString:$estr},DestinationAlpha:{_hx_index:4,__enum__:"kha.graphics4.BlendingFactor",toString:$estr},InverseSourceAlpha:{_hx_index:5,__enum__:"kha.graphics4.BlendingFactor",toString:$estr},InverseDestinationAlpha:{_hx_index:6,__enum__:"kha.graphics4.BlendingFactor",toString:$estr},SourceColor:{_hx_index:7,__enum__:"kha.graphics4.BlendingFactor",toString:$estr},DestinationColor:{_hx_index:8,__enum__:"kha.graphics4.BlendingFactor",toString:$estr},InverseSourceColor:{_hx_index:9,__enum__:"kha.graphics4.BlendingFactor",toString:$estr},InverseDestinationColor:{_hx_index:10,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}},kha_graphics4_BlendingOperation=$hxEnums["kha.graphics4.BlendingOperation"]={__ename__:!0,__constructs__:["Add","Subtract","ReverseSubtract","Min","Max"],Add:{_hx_index:0,__enum__:"kha.graphics4.BlendingOperation",toString:$estr},Subtract:{_hx_index:1,__enum__:"kha.graphics4.BlendingOperation",toString:$estr},ReverseSubtract:{_hx_index:2,__enum__:"kha.graphics4.BlendingOperation",toString:$estr},Min:{_hx_index:3,__enum__:"kha.graphics4.BlendingOperation",toString:$estr},Max:{_hx_index:4,__enum__:"kha.graphics4.BlendingOperation",toString:$estr}},kha_graphics4_CompareMode=$hxEnums["kha.graphics4.CompareMode"]={__ename__:!0,__constructs__:["Always","Never","Equal","NotEqual","Less","LessEqual","Greater","GreaterEqual"],Always:{_hx_index:0,__enum__:"kha.graphics4.CompareMode",toString:$estr},Never:{_hx_index:1,__enum__:"kha.graphics4.CompareMode",toString:$estr},Equal:{_hx_index:2,__enum__:"kha.graphics4.CompareMode",toString:$estr},NotEqual:{_hx_index:3,__enum__:"kha.graphics4.CompareMode",toString:$estr},Less:{_hx_index:4,__enum__:"kha.graphics4.CompareMode",toString:$estr},LessEqual:{_hx_index:5,__enum__:"kha.graphics4.CompareMode",toString:$estr},Greater:{_hx_index:6,__enum__:"kha.graphics4.CompareMode",toString:$estr},GreaterEqual:{_hx_index:7,__enum__:"kha.graphics4.CompareMode",toString:$estr}},kha_graphics4_ConstantLocation=$hxClasses["kha.graphics4.ConstantLocation"]=function(){};kha_graphics4_ConstantLocation.__name__=!0;var kha_graphics4_CubeMap=$hxClasses["kha.graphics4.CubeMap"]=function(e){this.texture_=e};kha_graphics4_CubeMap.__name__=!0,kha_graphics4_CubeMap.__interfaces__=[kha_Resource,kha_Canvas],kha_graphics4_CubeMap.getRenderTargetFormat=function(e){switch(e._hx_index){case 0:return 0;case 2:return 3;case 3:return 4;case 4:return 1;default:return 0}},kha_graphics4_CubeMap.getDepthBufferBits=function(e){switch(e){case 0:return-1;case 1:case 2:case 3:return 24;case 4:return 32;case 5:return 16}},kha_graphics4_CubeMap.getStencilBufferBits=function(e){switch(e){case 0:case 1:return-1;case 2:case 3:case 4:return 8;case 5:return 0}},kha_graphics4_CubeMap.getTextureFormat=function(e){switch(e._hx_index){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;default:return 1}},kha_graphics4_CubeMap.createRenderTarget=function(e,t,a,r){null==r&&(r=0),null==a&&(a=0),null==t&&(t=kha_graphics4_TextureFormat.RGBA32);var i=new kha_graphics4_CubeMap(null);return i.format=t,i.renderTarget_=Krom.createRenderTargetCubeMap(e,kha_graphics4_CubeMap.getDepthBufferBits(a),kha_graphics4_CubeMap.getRenderTargetFormat(t),kha_graphics4_CubeMap.getStencilBufferBits(a),r),i},kha_graphics4_CubeMap.prototype={texture_:null,renderTarget_:null,format:null,graphics4:null,unload:function(){},lock:function(e){return null==e&&(e=0),null},unlock:function(){},width:null,get_width:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.width},height:null,get_height:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.height},g1:null,get_g1:function(){return null},g2:null,get_g2:function(){return null},g4:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new kha_krom_Graphics(this)),this.graphics4},__class__:kha_graphics4_CubeMap};var kha_graphics4_CullMode=$hxEnums["kha.graphics4.CullMode"]={__ename__:!0,__constructs__:["Clockwise","CounterClockwise","None"],Clockwise:{_hx_index:0,__enum__:"kha.graphics4.CullMode",toString:$estr},CounterClockwise:{_hx_index:1,__enum__:"kha.graphics4.CullMode",toString:$estr},None:{_hx_index:2,__enum__:"kha.graphics4.CullMode",toString:$estr}},kha_graphics4_FragmentShader=$hxClasses["kha.graphics4.FragmentShader"]=function(e,t){null!=e&&(this.shader=Krom.createFragmentShader(e[0].bytes.b.bufferValue,t[0]))};kha_graphics4_FragmentShader.__name__=!0,kha_graphics4_FragmentShader.fromSource=function(e){var t=new kha_graphics4_FragmentShader(null,null);return t.shader=Krom.createFragmentShaderFromSource(e),t},kha_graphics4_FragmentShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_FragmentShader};var kha_graphics4_GeometryShader=$hxClasses["kha.graphics4.GeometryShader"]=function(e,t){this.shader=Krom.createGeometryShader(e[0].bytes.b.bufferValue,t[0])};kha_graphics4_GeometryShader.__name__=!0,kha_graphics4_GeometryShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_GeometryShader};var kha_graphics4_Graphics=$hxClasses["kha.graphics4.Graphics"]=function(){};kha_graphics4_Graphics.__name__=!0,kha_graphics4_Graphics.prototype={begin:null,beginFace:null,beginEye:null,end:null,vsynced:null,refreshRate:null,clear:null,viewport:null,scissor:null,disableScissor:null,setVertexBuffer:null,setVertexBuffers:null,setIndexBuffer:null,setTexture:null,setTextureDepth:null,setTextureArray:null,setVideoTexture:null,setImageTexture:null,setTextureParameters:null,setTexture3DParameters:null,setCubeMap:null,setCubeMapDepth:null,renderTargetsInvertedY:null,instancedRenderingAvailable:null,setPipeline:null,setBool:null,setInt:null,setFloat:null,setFloat2:null,setFloat3:null,setFloat4:null,setFloats:null,setVector2:null,setVector3:null,setVector4:null,setMatrix:null,setMatrix3:null,drawIndexedVertices:null,drawIndexedVerticesInstanced:null,flush:null,__class__:kha_graphics4_Graphics};var kha_graphics4_ImageShaderPainter=$hxClasses["kha.graphics4.ImageShaderPainter"]=function(e){this.destinationBlend=kha_graphics4_BlendingFactor.Undefined,this.sourceBlend=kha_graphics4_BlendingFactor.Undefined,this.myPipeline=null,this.bilinearMipmaps=!1,this.bilinear=!1,this.g=e,kha_graphics4_ImageShaderPainter.bufferIndex=0,kha_graphics4_ImageShaderPainter.initShaders(),this.initBuffers(),this.projectionLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getTextureUnit("tex")};kha_graphics4_ImageShaderPainter.__name__=!0,kha_graphics4_ImageShaderPainter.initShaders=function(){null==kha_graphics4_ImageShaderPainter.structure&&(kha_graphics4_ImageShaderPainter.structure=kha_graphics4_Graphics2.createImageVertexStructure()),null==kha_graphics4_ImageShaderPainter.shaderPipeline&&(kha_graphics4_ImageShaderPainter.shaderPipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_ImageShaderPainter.structure),kha_graphics4_ImageShaderPainter.shaderPipeline.compile())},kha_graphics4_ImageShaderPainter.prototype={projectionMatrix:null,bilinear:null,bilinearMipmaps:null,g:null,myPipeline:null,projectionLocation:null,textureLocation:null,sourceBlend:null,destinationBlend:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return null==e?(this.projectionLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_ImageShaderPainter.shaderPipeline.getTextureUnit("tex")):(this.projectionLocation=e.getConstantLocation("projectionMatrix"),this.textureLocation=e.getTextureUnit("tex")),this.myPipeline=e},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==kha_graphics4_ImageShaderPainter.rectVertexBuffer){kha_graphics4_ImageShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(6e3,kha_graphics4_ImageShaderPainter.structure,kha_graphics4_Usage.DynamicUsage),kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock(),kha_graphics4_ImageShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(9e3,kha_graphics4_Usage.StaticUsage);for(var e=kha_graphics4_ImageShaderPainter.indexBuffer.lock(),t=0;t<1500;){var a=t++;e[3*a*2]=4*a,e[3*a*2+1]=4*a+1,e[3*a*2+2]=4*a+2,e[3*a*2+3]=4*a,e[3*a*2+4]=4*a+2,e[3*a*2+5]=4*a+3}kha_graphics4_ImageShaderPainter.indexBuffer.unlock()}},setRectVertices:function(e,t,a,r,i,s,n,_){var h=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[h]=e,kha_graphics4_ImageShaderPainter.rectVertices[h+1]=t,kha_graphics4_ImageShaderPainter.rectVertices[h+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[h+9]=a,kha_graphics4_ImageShaderPainter.rectVertices[h+10]=r,kha_graphics4_ImageShaderPainter.rectVertices[h+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[h+18]=i,kha_graphics4_ImageShaderPainter.rectVertices[h+19]=s,kha_graphics4_ImageShaderPainter.rectVertices[h+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[h+27]=n,kha_graphics4_ImageShaderPainter.rectVertices[h+28]=_,kha_graphics4_ImageShaderPainter.rectVertices[h+29]=-5},setRectTexCoords:function(e,t,a,r){var i=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[i+3]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+4]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+12]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+13]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+21]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+22]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+30]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+31]=r},setRectColor:function(e,t,a,r){var i=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[i+5]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+6]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+7]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+8]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+14]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+15]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+16]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+17]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+23]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+24]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+25]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+26]=r,kha_graphics4_ImageShaderPainter.rectVertices[i+32]=e,kha_graphics4_ImageShaderPainter.rectVertices[i+33]=t,kha_graphics4_ImageShaderPainter.rectVertices[i+34]=a,kha_graphics4_ImageShaderPainter.rectVertices[i+35]=r},drawBuffer:function(){kha_graphics4_ImageShaderPainter.rectVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_ImageShaderPainter.rectVertexBuffer),this.g.setIndexBuffer(kha_graphics4_ImageShaderPainter.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_ImageShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setTexture(this.textureLocation,kha_graphics4_ImageShaderPainter.lastTexture),this.g.setTextureParameters(this.textureLocation,kha_graphics4_TextureAddressing.Clamp,kha_graphics4_TextureAddressing.Clamp,this.bilinear?kha_graphics4_TextureFilter.LinearFilter:kha_graphics4_TextureFilter.PointFilter,this.bilinear?kha_graphics4_TextureFilter.LinearFilter:kha_graphics4_TextureFilter.PointFilter,this.bilinearMipmaps?kha_graphics4_MipMapFilter.LinearMipFilter:kha_graphics4_MipMapFilter.NoMipFilter),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,2*kha_graphics4_ImageShaderPainter.bufferIndex*3),this.g.setTexture(this.textureLocation,null),kha_graphics4_ImageShaderPainter.bufferIndex=0,kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock()},setBilinearFilter:function(e){this.end(),this.bilinear=e},setBilinearMipmapFilter:function(e){this.end(),this.bilinearMipmaps=e},drawImage:function(e,t,a,r,i,s,n,_,h,o,l){var u=e;(1500<=kha_graphics4_ImageShaderPainter.bufferIndex+1||null!=kha_graphics4_ImageShaderPainter.lastTexture&&u!=kha_graphics4_ImageShaderPainter.lastTexture)&&this.drawBuffer();var d=.00392156862745098*((16711680&l)>>>16),c=.00392156862745098*((65280&l)>>>8),g=.00392156862745098*(255&l),p=.00392156862745098*(l>>>24)*o,f=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[f+5]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+6]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+7]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+8]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+14]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+15]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+16]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+17]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+23]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+24]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+25]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+26]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+32]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+33]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+34]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+35]=p;var m=u.get_width()/u.get_realWidth(),k=u.get_height()/u.get_realHeight(),v=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[v+3]=0,kha_graphics4_ImageShaderPainter.rectVertices[v+4]=k,kha_graphics4_ImageShaderPainter.rectVertices[v+12]=0,kha_graphics4_ImageShaderPainter.rectVertices[v+13]=0,kha_graphics4_ImageShaderPainter.rectVertices[v+21]=m,kha_graphics4_ImageShaderPainter.rectVertices[v+22]=0,kha_graphics4_ImageShaderPainter.rectVertices[v+30]=m,kha_graphics4_ImageShaderPainter.rectVertices[v+31]=k;var S=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[S]=t,kha_graphics4_ImageShaderPainter.rectVertices[S+1]=a,kha_graphics4_ImageShaderPainter.rectVertices[S+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[S+9]=r,kha_graphics4_ImageShaderPainter.rectVertices[S+10]=i,kha_graphics4_ImageShaderPainter.rectVertices[S+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[S+18]=s,kha_graphics4_ImageShaderPainter.rectVertices[S+19]=n,kha_graphics4_ImageShaderPainter.rectVertices[S+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[S+27]=_,kha_graphics4_ImageShaderPainter.rectVertices[S+28]=h,kha_graphics4_ImageShaderPainter.rectVertices[S+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=u},drawImage2:function(e,t,a,r,i,s,n,_,h,o,l,u,d,c,g){var p=e;(1500<=kha_graphics4_ImageShaderPainter.bufferIndex+1||null!=kha_graphics4_ImageShaderPainter.lastTexture&&p!=kha_graphics4_ImageShaderPainter.lastTexture)&&this.drawBuffer();var f=t/p.get_realWidth(),m=a/p.get_realHeight(),k=(t+r)/p.get_realWidth(),v=(a+i)/p.get_realHeight(),S=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[S+3]=f,kha_graphics4_ImageShaderPainter.rectVertices[S+4]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+12]=f,kha_graphics4_ImageShaderPainter.rectVertices[S+13]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+21]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+22]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+30]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+31]=v;var b=.00392156862745098*((16711680&g)>>>16),y=.00392156862745098*((65280&g)>>>8),x=.00392156862745098*(255&g),w=.00392156862745098*(g>>>24)*c,T=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[T+5]=b,kha_graphics4_ImageShaderPainter.rectVertices[T+6]=y,kha_graphics4_ImageShaderPainter.rectVertices[T+7]=x,kha_graphics4_ImageShaderPainter.rectVertices[T+8]=w,kha_graphics4_ImageShaderPainter.rectVertices[T+14]=b,kha_graphics4_ImageShaderPainter.rectVertices[T+15]=y,kha_graphics4_ImageShaderPainter.rectVertices[T+16]=x,kha_graphics4_ImageShaderPainter.rectVertices[T+17]=w,kha_graphics4_ImageShaderPainter.rectVertices[T+23]=b,kha_graphics4_ImageShaderPainter.rectVertices[T+24]=y,kha_graphics4_ImageShaderPainter.rectVertices[T+25]=x,kha_graphics4_ImageShaderPainter.rectVertices[T+26]=w,kha_graphics4_ImageShaderPainter.rectVertices[T+32]=b,kha_graphics4_ImageShaderPainter.rectVertices[T+33]=y,kha_graphics4_ImageShaderPainter.rectVertices[T+34]=x,kha_graphics4_ImageShaderPainter.rectVertices[T+35]=w;var I=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[I]=s,kha_graphics4_ImageShaderPainter.rectVertices[I+1]=n,kha_graphics4_ImageShaderPainter.rectVertices[I+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[I+9]=_,kha_graphics4_ImageShaderPainter.rectVertices[I+10]=h,kha_graphics4_ImageShaderPainter.rectVertices[I+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[I+18]=o,kha_graphics4_ImageShaderPainter.rectVertices[I+19]=l,kha_graphics4_ImageShaderPainter.rectVertices[I+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[I+27]=u,kha_graphics4_ImageShaderPainter.rectVertices[I+28]=d,kha_graphics4_ImageShaderPainter.rectVertices[I+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=p},drawImageScale:function(e,t,a,r,i,s,n,_,h,o,l){var u=e;(1500<=kha_graphics4_ImageShaderPainter.bufferIndex+1||null!=kha_graphics4_ImageShaderPainter.lastTexture&&u!=kha_graphics4_ImageShaderPainter.lastTexture)&&this.drawBuffer();var d=t/u.get_realWidth(),c=a/u.get_realHeight(),g=(t+r)/u.get_realWidth(),p=(a+i)/u.get_realHeight(),f=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[f+3]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+4]=p,kha_graphics4_ImageShaderPainter.rectVertices[f+12]=d,kha_graphics4_ImageShaderPainter.rectVertices[f+13]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+21]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+22]=c,kha_graphics4_ImageShaderPainter.rectVertices[f+30]=g,kha_graphics4_ImageShaderPainter.rectVertices[f+31]=p;var m=.00392156862745098*((16711680&l)>>>16),k=.00392156862745098*((65280&l)>>>8),v=.00392156862745098*(255&l),S=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[S+5]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+6]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+7]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+8]=o,kha_graphics4_ImageShaderPainter.rectVertices[S+14]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+15]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+16]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+17]=o,kha_graphics4_ImageShaderPainter.rectVertices[S+23]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+24]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+25]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+26]=o,kha_graphics4_ImageShaderPainter.rectVertices[S+32]=m,kha_graphics4_ImageShaderPainter.rectVertices[S+33]=k,kha_graphics4_ImageShaderPainter.rectVertices[S+34]=v,kha_graphics4_ImageShaderPainter.rectVertices[S+35]=o;var b=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[b]=s,kha_graphics4_ImageShaderPainter.rectVertices[b+1]=h,kha_graphics4_ImageShaderPainter.rectVertices[b+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[b+9]=s,kha_graphics4_ImageShaderPainter.rectVertices[b+10]=n,kha_graphics4_ImageShaderPainter.rectVertices[b+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[b+18]=_,kha_graphics4_ImageShaderPainter.rectVertices[b+19]=n,kha_graphics4_ImageShaderPainter.rectVertices[b+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[b+27]=_,kha_graphics4_ImageShaderPainter.rectVertices[b+28]=h,kha_graphics4_ImageShaderPainter.rectVertices[b+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=u},end:function(){0<kha_graphics4_ImageShaderPainter.bufferIndex&&this.drawBuffer(),kha_graphics4_ImageShaderPainter.lastTexture=null},__class__:kha_graphics4_ImageShaderPainter};var kha_graphics4_ColoredShaderPainter=$hxClasses["kha.graphics4.ColoredShaderPainter"]=function(e){this.destinationBlend=kha_graphics4_BlendingFactor.Undefined,this.sourceBlend=kha_graphics4_BlendingFactor.Undefined,this.myPipeline=null,this.g=e,kha_graphics4_ColoredShaderPainter.bufferIndex=0,kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0,kha_graphics4_ColoredShaderPainter.initShaders(),this.initBuffers(),this.projectionLocation=kha_graphics4_ColoredShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix")};kha_graphics4_ColoredShaderPainter.__name__=!0,kha_graphics4_ColoredShaderPainter.initShaders=function(){null==kha_graphics4_ColoredShaderPainter.structure&&(kha_graphics4_ColoredShaderPainter.structure=kha_graphics4_Graphics2.createColoredVertexStructure()),null==kha_graphics4_ColoredShaderPainter.shaderPipeline&&(kha_graphics4_ColoredShaderPainter.shaderPipeline=kha_graphics4_Graphics2.createColoredPipeline(kha_graphics4_ColoredShaderPainter.structure),kha_graphics4_ColoredShaderPainter.shaderPipeline.compile())},kha_graphics4_ColoredShaderPainter.prototype={projectionMatrix:null,g:null,myPipeline:null,projectionLocation:null,sourceBlend:null,destinationBlend:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return this.projectionLocation=null==e?kha_graphics4_ColoredShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"):e.getConstantLocation("projectionMatrix"),this.myPipeline=e},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==kha_graphics4_ColoredShaderPainter.rectVertexBuffer){kha_graphics4_ColoredShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(400,kha_graphics4_ColoredShaderPainter.structure,kha_graphics4_Usage.DynamicUsage),kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock(),kha_graphics4_ColoredShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(600,kha_graphics4_Usage.StaticUsage);for(var e=kha_graphics4_ColoredShaderPainter.indexBuffer.lock(),t=0;t<100;){var a=t++;e[3*a*2]=4*a,e[3*a*2+1]=4*a+1,e[3*a*2+2]=4*a+2,e[3*a*2+3]=4*a,e[3*a*2+4]=4*a+2,e[3*a*2+5]=4*a+3}kha_graphics4_ColoredShaderPainter.indexBuffer.unlock(),kha_graphics4_ColoredShaderPainter.triangleVertexBuffer=new kha_graphics4_VertexBuffer(300,kha_graphics4_ColoredShaderPainter.structure,kha_graphics4_Usage.DynamicUsage),kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock(),kha_graphics4_ColoredShaderPainter.triangleIndexBuffer=new kha_graphics4_IndexBuffer(300,kha_graphics4_Usage.StaticUsage);for(var r=kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.lock(),i=0;i<100;){var s=i++;r[3*s]=3*s,r[3*s+1]=3*s+1,r[3*s+2]=3*s+2}kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.unlock()}},setRectVertices:function(e,t,a,r,i,s,n,_){var h=7*kha_graphics4_ColoredShaderPainter.bufferIndex*4;kha_graphics4_ColoredShaderPainter.rectVertices[h]=e,kha_graphics4_ColoredShaderPainter.rectVertices[h+1]=t,kha_graphics4_ColoredShaderPainter.rectVertices[h+2]=-5,kha_graphics4_ColoredShaderPainter.rectVertices[h+7]=a,kha_graphics4_ColoredShaderPainter.rectVertices[h+8]=r,kha_graphics4_ColoredShaderPainter.rectVertices[h+9]=-5,kha_graphics4_ColoredShaderPainter.rectVertices[h+14]=i,kha_graphics4_ColoredShaderPainter.rectVertices[h+15]=s,kha_graphics4_ColoredShaderPainter.rectVertices[h+16]=-5,kha_graphics4_ColoredShaderPainter.rectVertices[h+21]=n,kha_graphics4_ColoredShaderPainter.rectVertices[h+22]=_,kha_graphics4_ColoredShaderPainter.rectVertices[h+23]=-5},setRectColors:function(e,t){var a=7*kha_graphics4_ColoredShaderPainter.bufferIndex*4,r=e*(.00392156862745098*(t>>>24));kha_graphics4_ColoredShaderPainter.rectVertices[a+3]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+4]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+5]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+6]=r,kha_graphics4_ColoredShaderPainter.rectVertices[a+10]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+11]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+12]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+13]=r,kha_graphics4_ColoredShaderPainter.rectVertices[a+17]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+18]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+19]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+20]=r,kha_graphics4_ColoredShaderPainter.rectVertices[a+24]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.rectVertices[a+25]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.rectVertices[a+26]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.rectVertices[a+27]=r},setTriVertices:function(e,t,a,r,i,s){var n=7*kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3;kha_graphics4_ColoredShaderPainter.triangleVertices[n]=e,kha_graphics4_ColoredShaderPainter.triangleVertices[n+1]=t,kha_graphics4_ColoredShaderPainter.triangleVertices[n+2]=-5,kha_graphics4_ColoredShaderPainter.triangleVertices[n+7]=a,kha_graphics4_ColoredShaderPainter.triangleVertices[n+8]=r,kha_graphics4_ColoredShaderPainter.triangleVertices[n+9]=-5,kha_graphics4_ColoredShaderPainter.triangleVertices[n+14]=i,kha_graphics4_ColoredShaderPainter.triangleVertices[n+15]=s,kha_graphics4_ColoredShaderPainter.triangleVertices[n+16]=-5},setTriColors:function(e,t){var a=7*kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3,r=e*(.00392156862745098*(t>>>24));kha_graphics4_ColoredShaderPainter.triangleVertices[a+3]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.triangleVertices[a+4]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.triangleVertices[a+5]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.triangleVertices[a+6]=r,kha_graphics4_ColoredShaderPainter.triangleVertices[a+10]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.triangleVertices[a+11]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.triangleVertices[a+12]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.triangleVertices[a+13]=r,kha_graphics4_ColoredShaderPainter.triangleVertices[a+17]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_ColoredShaderPainter.triangleVertices[a+18]=.00392156862745098*((65280&t)>>>8),kha_graphics4_ColoredShaderPainter.triangleVertices[a+19]=.00392156862745098*(255&t),kha_graphics4_ColoredShaderPainter.triangleVertices[a+20]=r},drawBuffer:function(e){e||0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&this.drawTriBuffer(!0),kha_graphics4_ColoredShaderPainter.rectVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.rectVertexBuffer),this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_ColoredShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,2*kha_graphics4_ColoredShaderPainter.bufferIndex*3),kha_graphics4_ColoredShaderPainter.bufferIndex=0,kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock()},drawTriBuffer:function(e){e||0<kha_graphics4_ColoredShaderPainter.bufferIndex&&this.drawBuffer(!0),kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.triangleVertexBuffer),this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.triangleIndexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_ColoredShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,3*kha_graphics4_ColoredShaderPainter.triangleBufferIndex),kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0,kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock()},fillRect:function(e,t,a,r,i,s,n,_,h,o){0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&this.drawTriBuffer(!0),100<=kha_graphics4_ColoredShaderPainter.bufferIndex+1&&this.drawBuffer(!1),this.setRectColors(e,t),this.setRectVertices(a,r,i,s,n,_,h,o),++kha_graphics4_ColoredShaderPainter.bufferIndex},fillTriangle:function(e,t,a,r,i,s,n,_){0<kha_graphics4_ColoredShaderPainter.bufferIndex&&this.drawBuffer(!0),100<=kha_graphics4_ColoredShaderPainter.triangleBufferIndex+1&&this.drawTriBuffer(!1),this.setTriColors(e,t),this.setTriVertices(a,r,i,s,n,_),++kha_graphics4_ColoredShaderPainter.triangleBufferIndex},endTris:function(e){0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&this.drawTriBuffer(e)},endRects:function(e){0<kha_graphics4_ColoredShaderPainter.bufferIndex&&this.drawBuffer(e)},end:function(){0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&this.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&this.drawBuffer(!1)},__class__:kha_graphics4_ColoredShaderPainter};var kha_graphics4_TextShaderPainter=$hxClasses["kha.graphics4.TextShaderPainter"]=function(e){this.bakedQuadCache=new kha_AlignedQuad,this.destinationBlend=kha_graphics4_BlendingFactor.Undefined,this.sourceBlend=kha_graphics4_BlendingFactor.Undefined,this.bilinear=!1,this.myPipeline=null,this.g=e,kha_graphics4_TextShaderPainter.bufferIndex=0,kha_graphics4_TextShaderPainter.initShaders(),this.initBuffers(),this.projectionLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getTextureUnit("tex")};kha_graphics4_TextShaderPainter.__name__=!0,kha_graphics4_TextShaderPainter.initShaders=function(){null==kha_graphics4_TextShaderPainter.structure&&(kha_graphics4_TextShaderPainter.structure=kha_graphics4_Graphics2.createTextVertexStructure()),null==kha_graphics4_TextShaderPainter.shaderPipeline&&(kha_graphics4_TextShaderPainter.shaderPipeline=kha_graphics4_Graphics2.createTextPipeline(kha_graphics4_TextShaderPainter.structure),kha_graphics4_TextShaderPainter.shaderPipeline.compile())},kha_graphics4_TextShaderPainter.findIndex=function(e,t){for(var a=0,r=t.length;a<r;){var i=a++;if(t[i]==e)return i}return 0},kha_graphics4_TextShaderPainter.prototype={projectionMatrix:null,font:null,g:null,myPipeline:null,projectionLocation:null,textureLocation:null,fontSize:null,bilinear:null,sourceBlend:null,destinationBlend:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return null==e?(this.projectionLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=kha_graphics4_TextShaderPainter.shaderPipeline.getTextureUnit("tex")):(this.projectionLocation=e.getConstantLocation("projectionMatrix"),this.textureLocation=e.getTextureUnit("tex")),this.myPipeline=e},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==kha_graphics4_TextShaderPainter.rectVertexBuffer){kha_graphics4_TextShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(400,kha_graphics4_TextShaderPainter.structure,kha_graphics4_Usage.DynamicUsage),kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock(),kha_graphics4_TextShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(600,kha_graphics4_Usage.StaticUsage);for(var e=kha_graphics4_TextShaderPainter.indexBuffer.lock(),t=0;t<100;){var a=t++;e[3*a*2]=4*a,e[3*a*2+1]=4*a+1,e[3*a*2+2]=4*a+2,e[3*a*2+3]=4*a,e[3*a*2+4]=4*a+2,e[3*a*2+5]=4*a+3}kha_graphics4_TextShaderPainter.indexBuffer.unlock()}},setRectVertices:function(e,t,a,r,i,s,n,_){var h=9*kha_graphics4_TextShaderPainter.bufferIndex*4;kha_graphics4_TextShaderPainter.rectVertices[h]=e,kha_graphics4_TextShaderPainter.rectVertices[h+1]=t,kha_graphics4_TextShaderPainter.rectVertices[h+2]=-5,kha_graphics4_TextShaderPainter.rectVertices[h+9]=a,kha_graphics4_TextShaderPainter.rectVertices[h+10]=r,kha_graphics4_TextShaderPainter.rectVertices[h+11]=-5,kha_graphics4_TextShaderPainter.rectVertices[h+18]=i,kha_graphics4_TextShaderPainter.rectVertices[h+19]=s,kha_graphics4_TextShaderPainter.rectVertices[h+20]=-5,kha_graphics4_TextShaderPainter.rectVertices[h+27]=n,kha_graphics4_TextShaderPainter.rectVertices[h+28]=_,kha_graphics4_TextShaderPainter.rectVertices[h+29]=-5},setRectTexCoords:function(e,t,a,r){var i=9*kha_graphics4_TextShaderPainter.bufferIndex*4;kha_graphics4_TextShaderPainter.rectVertices[i+3]=e,kha_graphics4_TextShaderPainter.rectVertices[i+4]=r,kha_graphics4_TextShaderPainter.rectVertices[i+12]=e,kha_graphics4_TextShaderPainter.rectVertices[i+13]=t,kha_graphics4_TextShaderPainter.rectVertices[i+21]=a,kha_graphics4_TextShaderPainter.rectVertices[i+22]=t,kha_graphics4_TextShaderPainter.rectVertices[i+30]=a,kha_graphics4_TextShaderPainter.rectVertices[i+31]=r},setRectColors:function(e,t){var a=9*kha_graphics4_TextShaderPainter.bufferIndex*4,r=e*(.00392156862745098*(t>>>24));kha_graphics4_TextShaderPainter.rectVertices[a+5]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+6]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+7]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+8]=r,kha_graphics4_TextShaderPainter.rectVertices[a+14]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+15]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+16]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+17]=r,kha_graphics4_TextShaderPainter.rectVertices[a+23]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+24]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+25]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+26]=r,kha_graphics4_TextShaderPainter.rectVertices[a+32]=.00392156862745098*((16711680&t)>>>16),kha_graphics4_TextShaderPainter.rectVertices[a+33]=.00392156862745098*((65280&t)>>>8),kha_graphics4_TextShaderPainter.rectVertices[a+34]=.00392156862745098*(255&t),kha_graphics4_TextShaderPainter.rectVertices[a+35]=r},drawBuffer:function(){kha_graphics4_TextShaderPainter.rectVertexBuffer.unlock(),this.g.setVertexBuffer(kha_graphics4_TextShaderPainter.rectVertexBuffer),this.g.setIndexBuffer(kha_graphics4_TextShaderPainter.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?kha_graphics4_TextShaderPainter.shaderPipeline:this.get_pipeline()),this.g.setTexture(this.textureLocation,kha_graphics4_TextShaderPainter.lastTexture),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.setTextureParameters(this.textureLocation,kha_graphics4_TextureAddressing.Clamp,kha_graphics4_TextureAddressing.Clamp,this.bilinear?kha_graphics4_TextureFilter.LinearFilter:kha_graphics4_TextureFilter.PointFilter,this.bilinear?kha_graphics4_TextureFilter.LinearFilter:kha_graphics4_TextureFilter.PointFilter,kha_graphics4_MipMapFilter.NoMipFilter),this.g.drawIndexedVertices(0,2*kha_graphics4_TextShaderPainter.bufferIndex*3),this.g.setTexture(this.textureLocation,null),kha_graphics4_TextShaderPainter.bufferIndex=0,kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock()},setBilinearFilter:function(e){this.end(),this.bilinear=e},setFont:function(e){this.font=js_Boot.__cast(e,kha_Kravur)},text:null,startString:function(e){this.text=e},charCodeAt:function(e){return HxOverrides.cca(this.text,e)},stringLength:function(){return this.text.length},endString:function(){this.text=null},bakedQuadCache:null,drawString:function(e,t,a,r,i,s,n){var _=this.font._get(this.fontSize,n),h=_.getTexture();null!=kha_graphics4_TextShaderPainter.lastTexture&&h!=kha_graphics4_TextShaderPainter.lastTexture&&this.drawBuffer(),kha_graphics4_TextShaderPainter.lastTexture=h;var o=r,l=i;this.startString(e);for(var u=0,d=this.stringLength();u<d;){var c=u++,g=_.getBakedQuad(this.bakedQuadCache,kha_graphics4_TextShaderPainter.findIndex(this.charCodeAt(c),n),o,l);if(null!=g){100<=kha_graphics4_TextShaderPainter.bufferIndex+1&&this.drawBuffer(),this.setRectColors(t,a),this.setRectTexCoords(g.s0*h.get_width()/h.get_realWidth(),g.t0*h.get_height()/h.get_realHeight(),g.s1*h.get_width()/h.get_realWidth(),g.t1*h.get_height()/h.get_realHeight());var p=g.x0,f=g.y1,m=s._02*p+s._12*f+s._22,k=(s._00*p+s._10*f+s._20)/m,v=(s._01*p+s._11*f+s._21)/m,S=g.x0,b=g.y0,y=s._02*S+s._12*b+s._22,x=(s._00*S+s._10*b+s._20)/y,w=(s._01*S+s._11*b+s._21)/y,T=g.x1,I=g.y0,E=s._02*T+s._12*I+s._22,C=(s._00*T+s._10*I+s._20)/E,B=(s._01*T+s._11*I+s._21)/E,L=g.x1,P=g.y1,A=s._02*L+s._12*P+s._22,$=(s._00*L+s._10*P+s._20)/A,N=(s._01*L+s._11*P+s._21)/A;this.setRectVertices(k,v,x,w,C,B,$,N),o+=g.xadvance,++kha_graphics4_TextShaderPainter.bufferIndex}}this.endString()},drawCharacters:function(e,t,a,r,i,s,n,_,h){var o=this.font._get(this.fontSize,h),l=o.getTexture();null!=kha_graphics4_TextShaderPainter.lastTexture&&l!=kha_graphics4_TextShaderPainter.lastTexture&&this.drawBuffer(),kha_graphics4_TextShaderPainter.lastTexture=l;for(var u=s,d=n,c=t,g=t+a;c<g;){var p=c++,f=o.getBakedQuad(this.bakedQuadCache,kha_graphics4_TextShaderPainter.findIndex(e[p],h),u,d);if(null!=f){100<=kha_graphics4_TextShaderPainter.bufferIndex+1&&this.drawBuffer(),this.setRectColors(r,i),this.setRectTexCoords(f.s0*l.get_width()/l.get_realWidth(),f.t0*l.get_height()/l.get_realHeight(),f.s1*l.get_width()/l.get_realWidth(),f.t1*l.get_height()/l.get_realHeight());var m=f.x0,k=f.y1,v=_._02*m+_._12*k+_._22,S=(_._00*m+_._10*k+_._20)/v,b=(_._01*m+_._11*k+_._21)/v,y=f.x0,x=f.y0,w=_._02*y+_._12*x+_._22,T=(_._00*y+_._10*x+_._20)/w,I=(_._01*y+_._11*x+_._21)/w,E=f.x1,C=f.y0,B=_._02*E+_._12*C+_._22,L=(_._00*E+_._10*C+_._20)/B,P=(_._01*E+_._11*C+_._21)/B,A=f.x1,$=f.y1,N=_._02*A+_._12*$+_._22,R=(_._00*A+_._10*$+_._20)/N,F=(_._01*A+_._11*$+_._21)/N;this.setRectVertices(S,b,T,I,L,P,R,F),u+=f.xadvance,++kha_graphics4_TextShaderPainter.bufferIndex}}},end:function(){0<kha_graphics4_TextShaderPainter.bufferIndex&&this.drawBuffer(),kha_graphics4_TextShaderPainter.lastTexture=null},__class__:kha_graphics4_TextShaderPainter};var kha_graphics4_Graphics2=$hxClasses["kha.graphics4.Graphics2"]=function(e){this.myMipmapScaleQuality=kha_graphics2_ImageScaleQuality.High,this.myImageScaleQuality=kha_graphics2_ImageScaleQuality.High,kha_graphics2_Graphics.call(this),this.set_color(-1),this.canvas=e,this.g=e.get_g4(),this.imagePainter=new kha_graphics4_ImageShaderPainter(this.g),this.coloredPainter=new kha_graphics4_ColoredShaderPainter(this.g),this.textPainter=new kha_graphics4_TextShaderPainter(this.g),this.textPainter.fontSize=this.get_fontSize(),this.setProjection(),null==kha_graphics4_Graphics2.videoPipeline&&(kha_graphics4_Graphics2.videoPipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_Graphics2.createImageVertexStructure()),kha_graphics4_Graphics2.videoPipeline.fragmentShader=kha_Shaders.painter_video_frag,kha_graphics4_Graphics2.videoPipeline.vertexShader=kha_Shaders.painter_video_vert,kha_graphics4_Graphics2.videoPipeline.compile())};kha_graphics4_Graphics2.__name__=!0,kha_graphics4_Graphics2.upperPowerOfTwo=function(e){return--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e},kha_graphics4_Graphics2.createImageVertexStructure=function(){var e=new kha_graphics4_VertexStructure;return e.add("vertexPosition",2),e.add("texPosition",1),e.add("vertexColor",3),e},kha_graphics4_Graphics2.createImagePipeline=function(e){var t=new kha_graphics4_PipelineState;return t.fragmentShader=kha_Shaders.painter_image_frag,t.vertexShader=kha_Shaders.painter_image_vert,t.inputLayout=[e],t.blendSource=kha_graphics4_BlendingFactor.BlendOne,t.blendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t.alphaBlendSource=kha_graphics4_BlendingFactor.BlendOne,t.alphaBlendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t},kha_graphics4_Graphics2.createColoredVertexStructure=function(){var e=new kha_graphics4_VertexStructure;return e.add("vertexPosition",2),e.add("vertexColor",3),e},kha_graphics4_Graphics2.createColoredPipeline=function(e){var t=new kha_graphics4_PipelineState;return t.fragmentShader=kha_Shaders.painter_colored_frag,t.vertexShader=kha_Shaders.painter_colored_vert,t.inputLayout=[e],t.blendSource=kha_graphics4_BlendingFactor.SourceAlpha,t.blendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t.alphaBlendSource=kha_graphics4_BlendingFactor.SourceAlpha,t.alphaBlendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t},kha_graphics4_Graphics2.createTextVertexStructure=function(){var e=new kha_graphics4_VertexStructure;return e.add("vertexPosition",2),e.add("texPosition",1),e.add("vertexColor",3),e},kha_graphics4_Graphics2.createTextPipeline=function(e){var t=new kha_graphics4_PipelineState;return t.fragmentShader=kha_Shaders.painter_text_frag,t.vertexShader=kha_Shaders.painter_text_vert,t.inputLayout=[e],t.blendSource=kha_graphics4_BlendingFactor.SourceAlpha,t.blendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t.alphaBlendSource=kha_graphics4_BlendingFactor.SourceAlpha,t.alphaBlendDestination=kha_graphics4_BlendingFactor.InverseSourceAlpha,t},kha_graphics4_Graphics2.__super__=kha_graphics2_Graphics,kha_graphics4_Graphics2.prototype=$extend(kha_graphics2_Graphics.prototype,{myColor:null,myFont:null,projectionMatrix:null,imagePainter:null,coloredPainter:null,textPainter:null,canvas:null,g:null,setProjection:function(){var e=this.canvas.get_width(),t=this.canvas.get_height();this.canvas instanceof kha_Framebuffer?this.projectionMatrix=kha_math_FastMatrix4.orthogonalProjection(0,e,t,0,.1,1e3):(kha_Image.get_nonPow2Supported()||(e=kha_graphics4_Graphics2.upperPowerOfTwo(e),t=kha_graphics4_Graphics2.upperPowerOfTwo(t)),this.g.renderTargetsInvertedY()?this.projectionMatrix=kha_math_FastMatrix4.orthogonalProjection(0,e,0,t,.1,1e3):this.projectionMatrix=kha_math_FastMatrix4.orthogonalProjection(0,e,t,0,.1,1e3)),this.imagePainter.setProjection(this.projectionMatrix),this.coloredPainter.setProjection(this.projectionMatrix),this.textPainter.setProjection(this.projectionMatrix)},drawImage:function(e,t,a){var r=this.coloredPainter;0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&r.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&r.drawBuffer(!1),this.textPainter.end();var i=t+e.get_width(),s=a+e.get_height(),n=this.transformations[this.transformations.length-1],_=t,h=s,o=n._02*_+n._12*h+n._22,l=(n._00*_+n._10*h+n._20)/o,u=(n._01*_+n._11*h+n._21)/o,d=this.transformations[this.transformations.length-1],c=t,g=a,p=d._02*c+d._12*g+d._22,f=(d._00*c+d._10*g+d._20)/p,m=(d._01*c+d._11*g+d._21)/p,k=this.transformations[this.transformations.length-1],v=i,S=a,b=k._02*v+k._12*S+k._22,y=(k._00*v+k._10*S+k._20)/b,x=(k._01*v+k._11*S+k._21)/b,w=this.transformations[this.transformations.length-1],T=i,I=s,E=w._02*T+w._12*I+w._22,C=(w._00*T+w._10*I+w._20)/E,B=(w._01*T+w._11*I+w._21)/E,L=this.imagePainter,P=this.get_opacity(),A=this.get_color(),$=e;(1500<=kha_graphics4_ImageShaderPainter.bufferIndex+1||null!=kha_graphics4_ImageShaderPainter.lastTexture&&$!=kha_graphics4_ImageShaderPainter.lastTexture)&&L.drawBuffer();var N=.00392156862745098*((16711680&A)>>>16),R=.00392156862745098*((65280&A)>>>8),F=.00392156862745098*(255&A),V=.00392156862745098*(A>>>24)*P,M=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[M+5]=N,kha_graphics4_ImageShaderPainter.rectVertices[M+6]=R,kha_graphics4_ImageShaderPainter.rectVertices[M+7]=F,kha_graphics4_ImageShaderPainter.rectVertices[M+8]=V,kha_graphics4_ImageShaderPainter.rectVertices[M+14]=N,kha_graphics4_ImageShaderPainter.rectVertices[M+15]=R,kha_graphics4_ImageShaderPainter.rectVertices[M+16]=F,kha_graphics4_ImageShaderPainter.rectVertices[M+17]=V,kha_graphics4_ImageShaderPainter.rectVertices[M+23]=N,kha_graphics4_ImageShaderPainter.rectVertices[M+24]=R,kha_graphics4_ImageShaderPainter.rectVertices[M+25]=F,kha_graphics4_ImageShaderPainter.rectVertices[M+26]=V,kha_graphics4_ImageShaderPainter.rectVertices[M+32]=N,kha_graphics4_ImageShaderPainter.rectVertices[M+33]=R,kha_graphics4_ImageShaderPainter.rectVertices[M+34]=F,kha_graphics4_ImageShaderPainter.rectVertices[M+35]=V;var H=$.get_width()/$.get_realWidth(),O=$.get_height()/$.get_realHeight(),U=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[U+3]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+4]=O,kha_graphics4_ImageShaderPainter.rectVertices[U+12]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+13]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+21]=H,kha_graphics4_ImageShaderPainter.rectVertices[U+22]=0,kha_graphics4_ImageShaderPainter.rectVertices[U+30]=H,kha_graphics4_ImageShaderPainter.rectVertices[U+31]=O;var D=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[D]=l,kha_graphics4_ImageShaderPainter.rectVertices[D+1]=u,kha_graphics4_ImageShaderPainter.rectVertices[D+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[D+9]=f,kha_graphics4_ImageShaderPainter.rectVertices[D+10]=m,kha_graphics4_ImageShaderPainter.rectVertices[D+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[D+18]=y,kha_graphics4_ImageShaderPainter.rectVertices[D+19]=x,kha_graphics4_ImageShaderPainter.rectVertices[D+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[D+27]=C,kha_graphics4_ImageShaderPainter.rectVertices[D+28]=B,kha_graphics4_ImageShaderPainter.rectVertices[D+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=$},drawScaledSubImage:function(e,t,a,r,i,s,n,_,h){var o=this.coloredPainter;0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&o.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&o.drawBuffer(!1),this.textPainter.end();var l=this.transformations[this.transformations.length-1],u=s,d=n+h,c=l._02*u+l._12*d+l._22,g=(l._00*u+l._10*d+l._20)/c,p=(l._01*u+l._11*d+l._21)/c,f=this.transformations[this.transformations.length-1],m=s,k=n,v=f._02*m+f._12*k+f._22,S=(f._00*m+f._10*k+f._20)/v,b=(f._01*m+f._11*k+f._21)/v,y=this.transformations[this.transformations.length-1],x=s+_,w=n,T=y._02*x+y._12*w+y._22,I=(y._00*x+y._10*w+y._20)/T,E=(y._01*x+y._11*w+y._21)/T,C=this.transformations[this.transformations.length-1],B=s+_,L=n+h,P=C._02*B+C._12*L+C._22,A=(C._00*B+C._10*L+C._20)/P,$=(C._01*B+C._11*L+C._21)/P,N=this.imagePainter,R=this.get_opacity(),F=this.get_color(),V=e;(1500<=kha_graphics4_ImageShaderPainter.bufferIndex+1||null!=kha_graphics4_ImageShaderPainter.lastTexture&&V!=kha_graphics4_ImageShaderPainter.lastTexture)&&N.drawBuffer();var M=t/V.get_realWidth(),H=a/V.get_realHeight(),O=(t+r)/V.get_realWidth(),U=(a+i)/V.get_realHeight(),D=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[D+3]=M,kha_graphics4_ImageShaderPainter.rectVertices[D+4]=U,kha_graphics4_ImageShaderPainter.rectVertices[D+12]=M,kha_graphics4_ImageShaderPainter.rectVertices[D+13]=H,kha_graphics4_ImageShaderPainter.rectVertices[D+21]=O,kha_graphics4_ImageShaderPainter.rectVertices[D+22]=H,kha_graphics4_ImageShaderPainter.rectVertices[D+30]=O,kha_graphics4_ImageShaderPainter.rectVertices[D+31]=U;var G=.00392156862745098*((16711680&F)>>>16),z=.00392156862745098*((65280&F)>>>8),W=.00392156862745098*(255&F),j=.00392156862745098*(F>>>24)*R,K=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[K+5]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+6]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+7]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+8]=j,kha_graphics4_ImageShaderPainter.rectVertices[K+14]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+15]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+16]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+17]=j,kha_graphics4_ImageShaderPainter.rectVertices[K+23]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+24]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+25]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+26]=j,kha_graphics4_ImageShaderPainter.rectVertices[K+32]=G,kha_graphics4_ImageShaderPainter.rectVertices[K+33]=z,kha_graphics4_ImageShaderPainter.rectVertices[K+34]=W,kha_graphics4_ImageShaderPainter.rectVertices[K+35]=j;var X=9*kha_graphics4_ImageShaderPainter.bufferIndex*4;kha_graphics4_ImageShaderPainter.rectVertices[X]=g,kha_graphics4_ImageShaderPainter.rectVertices[X+1]=p,kha_graphics4_ImageShaderPainter.rectVertices[X+2]=-5,kha_graphics4_ImageShaderPainter.rectVertices[X+9]=S,kha_graphics4_ImageShaderPainter.rectVertices[X+10]=b,kha_graphics4_ImageShaderPainter.rectVertices[X+11]=-5,kha_graphics4_ImageShaderPainter.rectVertices[X+18]=I,kha_graphics4_ImageShaderPainter.rectVertices[X+19]=E,kha_graphics4_ImageShaderPainter.rectVertices[X+20]=-5,kha_graphics4_ImageShaderPainter.rectVertices[X+27]=A,kha_graphics4_ImageShaderPainter.rectVertices[X+28]=$,kha_graphics4_ImageShaderPainter.rectVertices[X+29]=-5,++kha_graphics4_ImageShaderPainter.bufferIndex,kha_graphics4_ImageShaderPainter.lastTexture=V},get_color:function(){return this.myColor},set_color:function(e){return this.myColor=e},drawRect:function(e,t,a,r,i){null==i&&(i=1),this.imagePainter.end(),this.textPainter.end();var s=this.transformations[this.transformations.length-1],n=e-i/2,_=t+i/2,h=s._02*n+s._12*_+s._22,o=(s._00*n+s._10*_+s._20)/h,l=(s._01*n+s._11*_+s._21)/h,u=new kha_math_FastVector2(o,l),d=this.transformations[this.transformations.length-1],c=e-i/2,g=t-i/2,p=d._02*c+d._12*g+d._22,f=(d._00*c+d._10*g+d._20)/p,m=(d._01*c+d._11*g+d._21)/p,k=new kha_math_FastVector2(f,m),v=this.transformations[this.transformations.length-1],S=e+a+i/2,b=t-i/2,y=v._02*S+v._12*b+v._22,x=(v._00*S+v._10*b+v._20)/y,w=(v._01*S+v._11*b+v._21)/y,T=new kha_math_FastVector2(x,w),I=this.transformations[this.transformations.length-1],E=e+a+i/2,C=t+i/2,B=I._02*E+I._12*C+I._22,L=(I._00*E+I._10*C+I._20)/B,P=(I._01*E+I._11*C+I._21)/B,A=new kha_math_FastVector2(L,P);this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,k.x,k.y,T.x,T.y,A.x,A.y);var $=this.transformations[this.transformations.length-1],N=e-i/2,R=t+r-i/2,F=$._02*N+$._12*R+$._22,V=($._00*N+$._10*R+$._20)/F,M=($._01*N+$._11*R+$._21)/F;u=new kha_math_FastVector2(V,M);var H=this.transformations[this.transformations.length-1],O=e-i/2,U=t+i/2,D=H._02*O+H._12*U+H._22,G=(H._00*O+H._10*U+H._20)/D,z=(H._01*O+H._11*U+H._21)/D;k=new kha_math_FastVector2(G,z);var W=this.transformations[this.transformations.length-1],j=e+i/2,K=t+i/2,X=W._02*j+W._12*K+W._22,Y=(W._00*j+W._10*K+W._20)/X,Z=(W._01*j+W._11*K+W._21)/X;T=new kha_math_FastVector2(Y,Z);var Q=this.transformations[this.transformations.length-1],q=e+i/2,J=t+r-i/2,ee=Q._02*q+Q._12*J+Q._22,te=(Q._00*q+Q._10*J+Q._20)/ee,ae=(Q._01*q+Q._11*J+Q._21)/ee;A=new kha_math_FastVector2(te,ae),this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,k.x,k.y,T.x,T.y,A.x,A.y);var re=this.transformations[this.transformations.length-1],ie=e-i/2,se=t+r+i/2,ne=re._02*ie+re._12*se+re._22,_e=(re._00*ie+re._10*se+re._20)/ne,he=(re._01*ie+re._11*se+re._21)/ne;u=new kha_math_FastVector2(_e,he);var oe=this.transformations[this.transformations.length-1],le=e-i/2,ue=t+r-i/2,de=oe._02*le+oe._12*ue+oe._22,ce=(oe._00*le+oe._10*ue+oe._20)/de,ge=(oe._01*le+oe._11*ue+oe._21)/de;k=new kha_math_FastVector2(ce,ge);var pe=this.transformations[this.transformations.length-1],fe=e+a+i/2,me=t+r-i/2,ke=pe._02*fe+pe._12*me+pe._22,ve=(pe._00*fe+pe._10*me+pe._20)/ke,Se=(pe._01*fe+pe._11*me+pe._21)/ke;T=new kha_math_FastVector2(ve,Se);var be=this.transformations[this.transformations.length-1],ye=e+a+i/2,xe=t+r+i/2,we=be._02*ye+be._12*xe+be._22,Te=(be._00*ye+be._10*xe+be._20)/we,Ie=(be._01*ye+be._11*xe+be._21)/we;A=new kha_math_FastVector2(Te,Ie),this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,k.x,k.y,T.x,T.y,A.x,A.y);var Ee=this.transformations[this.transformations.length-1],Ce=e+a-i/2,Be=t+r-i/2,Le=Ee._02*Ce+Ee._12*Be+Ee._22,Pe=(Ee._00*Ce+Ee._10*Be+Ee._20)/Le,Ae=(Ee._01*Ce+Ee._11*Be+Ee._21)/Le;u=new kha_math_FastVector2(Pe,Ae);var $e=this.transformations[this.transformations.length-1],Ne=e+a-i/2,Re=t+i/2,Fe=$e._02*Ne+$e._12*Re+$e._22,Ve=($e._00*Ne+$e._10*Re+$e._20)/Fe,Me=($e._01*Ne+$e._11*Re+$e._21)/Fe;k=new kha_math_FastVector2(Ve,Me);var He=this.transformations[this.transformations.length-1],Oe=e+a+i/2,Ue=t+i/2,De=He._02*Oe+He._12*Ue+He._22,Ge=(He._00*Oe+He._10*Ue+He._20)/De,ze=(He._01*Oe+He._11*Ue+He._21)/De;T=new kha_math_FastVector2(Ge,ze);var We=this.transformations[this.transformations.length-1],je=e+a+i/2,Ke=t+r-i/2,Xe=We._02*je+We._12*Ke+We._22,Ye=(We._00*je+We._10*Ke+We._20)/Xe,Ze=(We._01*je+We._11*Ke+We._21)/Xe;A=new kha_math_FastVector2(Ye,Ze),this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),u.x,u.y,k.x,k.y,T.x,T.y,A.x,A.y)},fillRect:function(e,t,a,r){this.imagePainter.end(),this.textPainter.end();var i=this.transformations[this.transformations.length-1],s=e,n=t+r,_=i._02*s+i._12*n+i._22,h=(i._00*s+i._10*n+i._20)/_,o=(i._01*s+i._11*n+i._21)/_,l=this.transformations[this.transformations.length-1],u=e,d=t,c=l._02*u+l._12*d+l._22,g=(l._00*u+l._10*d+l._20)/c,p=(l._01*u+l._11*d+l._21)/c,f=this.transformations[this.transformations.length-1],m=e+a,k=t,v=f._02*m+f._12*k+f._22,S=(f._00*m+f._10*k+f._20)/v,b=(f._01*m+f._11*k+f._21)/v,y=this.transformations[this.transformations.length-1],x=e+a,w=t+r,T=y._02*x+y._12*w+y._22,I=(y._00*x+y._10*w+y._20)/T,E=(y._01*x+y._11*w+y._21)/T;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),h,o,g,p,S,b,I,E)},drawString:function(e,t,a){this.imagePainter.end();var r=this.coloredPainter;0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&r.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&r.drawBuffer(!1),this.textPainter.drawString(e,this.get_opacity(),this.get_color(),t,a,this.transformations[this.transformations.length-1],kha_graphics2_Graphics.fontGlyphs)},drawCharacters:function(e,t,a,r,i){this.imagePainter.end();var s=this.coloredPainter;0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&s.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&s.drawBuffer(!1),this.textPainter.drawCharacters(e,t,a,this.get_opacity(),this.get_color(),r,i,this.transformations[this.transformations.length-1],kha_graphics2_Graphics.fontGlyphs)},get_font:function(){return this.myFont},set_font:function(e){return this.textPainter.setFont(e),this.myFont=e},set_fontSize:function(e){return kha_graphics2_Graphics.prototype.set_fontSize.call(this,this.textPainter.fontSize=e)},drawLine:function(e,t,a,r,i){var s;null==i&&(i=1),this.imagePainter.end(),this.textPainter.end(),(s=r==t?new kha_math_FastVector2(0,-1):new kha_math_FastVector2(1,-(a-e)/(r-t))).set_length(i);var n=new kha_math_FastVector2(e+.5*s.x,t+.5*s.y),_=new kha_math_FastVector2(a+.5*s.x,r+.5*s.y),h=new kha_math_FastVector2(n.x-s.x,n.y-s.y),o=new kha_math_FastVector2(_.x-s.x,_.y-s.y),l=this.transformations[this.transformations.length-1],u=l._02*n.x+l._12*n.y+l._22,d=(l._00*n.x+l._10*n.y+l._20)/u,c=(l._01*n.x+l._11*n.y+l._21)/u;n=new kha_math_FastVector2(d,c);var g=this.transformations[this.transformations.length-1],p=g._02*_.x+g._12*_.y+g._22,f=(g._00*_.x+g._10*_.y+g._20)/p,m=(g._01*_.x+g._11*_.y+g._21)/p;_=new kha_math_FastVector2(f,m);var k=this.transformations[this.transformations.length-1],v=k._02*h.x+k._12*h.y+k._22,S=(k._00*h.x+k._10*h.y+k._20)/v,b=(k._01*h.x+k._11*h.y+k._21)/v;h=new kha_math_FastVector2(S,b);var y=this.transformations[this.transformations.length-1],x=y._02*o.x+y._12*o.y+y._22,w=(y._00*o.x+y._10*o.y+y._20)/x,T=(y._01*o.x+y._11*o.y+y._21)/x;o=new kha_math_FastVector2(w,T),this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),n.x,n.y,_.x,_.y,h.x,h.y),this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),h.x,h.y,_.x,_.y,o.x,o.y)},fillTriangle:function(e,t,a,r,i,s){this.imagePainter.end(),this.textPainter.end();var n=this.transformations[this.transformations.length-1],_=e,h=t,o=n._02*_+n._12*h+n._22,l=(n._00*_+n._10*h+n._20)/o,u=(n._01*_+n._11*h+n._21)/o,d=this.transformations[this.transformations.length-1],c=a,g=r,p=d._02*c+d._12*g+d._22,f=(d._00*c+d._10*g+d._20)/p,m=(d._01*c+d._11*g+d._21)/p,k=this.transformations[this.transformations.length-1],v=i,S=s,b=k._02*v+k._12*S+k._22,y=(k._00*v+k._10*S+k._20)/b,x=(k._01*v+k._11*S+k._21)/b;this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),l,u,f,m,y,x)},myImageScaleQuality:null,get_imageScaleQuality:function(){return this.myImageScaleQuality},set_imageScaleQuality:function(e){return this.imagePainter.setBilinearFilter(e==kha_graphics2_ImageScaleQuality.High),this.textPainter.setBilinearFilter(e==kha_graphics2_ImageScaleQuality.High),this.myImageScaleQuality=e},myMipmapScaleQuality:null,get_mipmapScaleQuality:function(){return this.myMipmapScaleQuality},set_mipmapScaleQuality:function(e){return this.imagePainter.setBilinearMipmapFilter(e==kha_graphics2_ImageScaleQuality.High),this.myMipmapScaleQuality=e},setPipeline:function(e){this.flush(),this.imagePainter.set_pipeline(e),this.coloredPainter.set_pipeline(e),this.textPainter.set_pipeline(e),null!=e&&this.g.setPipeline(e)},scissor:function(e,t,a,r){this.flush(),this.g.scissor(e,t,a,r)},disableScissor:function(){this.flush(),this.g.disableScissor()},begin:function(e,t){null==e&&(e=!0),this.g.begin(),e&&this.clear(t),this.setProjection()},clear:function(e){this.flush(),this.g.clear(null==e?-16777216:e)},flush:function(){this.imagePainter.end(),this.textPainter.end();var e=this.coloredPainter;0<kha_graphics4_ColoredShaderPainter.triangleBufferIndex&&e.drawTriBuffer(!1),0<kha_graphics4_ColoredShaderPainter.bufferIndex&&e.drawBuffer(!1)},end:function(){this.flush(),this.g.end()},drawVideoInternal:function(e,t,a,r,i){},drawVideo:function(e,t,a,r,i){this.setPipeline(kha_graphics4_Graphics2.videoPipeline),this.drawVideoInternal(e,t,a,r,i),this.setPipeline(null)},__class__:kha_graphics4_Graphics2});var kha_graphics4_IndexBuffer=$hxClasses["kha.graphics4.IndexBuffer"]=function(e,t,a){null==a&&(a=!1),this.indexCount=e,this.buffer=Krom.createIndexBuffer(e)};kha_graphics4_IndexBuffer.__name__=!0,kha_graphics4_IndexBuffer.prototype={buffer:null,_data:null,indexCount:null,delete:function(){Krom.deleteIndexBuffer(this.buffer),this.buffer=null},lock:function(e,t){return this._data=Krom.lockIndexBuffer(this.buffer),null==e&&(e=0),null==t&&(t=this.indexCount),this._data.subarray(e,e+t)},unlock:function(){Krom.unlockIndexBuffer(this.buffer)},set:function(){Krom.setIndexBuffer(this.buffer)},count:function(){return this.indexCount},__class__:kha_graphics4_IndexBuffer};var kha_graphics4_MipMapFilter=$hxEnums["kha.graphics4.MipMapFilter"]={__ename__:!0,__constructs__:["NoMipFilter","PointMipFilter","LinearMipFilter"],NoMipFilter:{_hx_index:0,__enum__:"kha.graphics4.MipMapFilter",toString:$estr},PointMipFilter:{_hx_index:1,__enum__:"kha.graphics4.MipMapFilter",toString:$estr},LinearMipFilter:{_hx_index:2,__enum__:"kha.graphics4.MipMapFilter",toString:$estr}},kha_graphics4_PipelineStateBase=$hxClasses["kha.graphics4.PipelineStateBase"]=function(){this.inputLayout=null,this.vertexShader=null,this.fragmentShader=null,this.geometryShader=null,this.tessellationControlShader=null,this.tessellationEvaluationShader=null,this.cullMode=kha_graphics4_CullMode.None,this.depthWrite=!1,this.depthMode=kha_graphics4_CompareMode.Always,this.stencilMode=kha_graphics4_CompareMode.Always,this.stencilBothPass=kha_graphics4_StencilAction.Keep,this.stencilDepthFail=kha_graphics4_StencilAction.Keep,this.stencilFail=kha_graphics4_StencilAction.Keep,this.stencilReferenceValue=0,this.stencilReadMask=255,this.stencilWriteMask=255,this.blendSource=kha_graphics4_BlendingFactor.BlendOne,this.blendDestination=kha_graphics4_BlendingFactor.BlendZero,this.blendOperation=kha_graphics4_BlendingOperation.Add,this.alphaBlendSource=kha_graphics4_BlendingFactor.BlendOne,this.alphaBlendDestination=kha_graphics4_BlendingFactor.BlendZero,this.alphaBlendOperation=kha_graphics4_BlendingOperation.Add,this.colorWriteMaskRed=this.colorWriteMaskBlue=this.colorWriteMaskGreen=this.colorWriteMaskAlpha=!0,this.conservativeRasterization=!1};kha_graphics4_PipelineStateBase.__name__=!0,kha_graphics4_PipelineStateBase.prototype={inputLayout:null,vertexShader:null,fragmentShader:null,geometryShader:null,tessellationControlShader:null,tessellationEvaluationShader:null,cullMode:null,depthWrite:null,depthMode:null,stencilMode:null,stencilBothPass:null,stencilDepthFail:null,stencilFail:null,stencilReferenceValue:null,stencilReadMask:null,stencilWriteMask:null,blendSource:null,blendDestination:null,blendOperation:null,alphaBlendSource:null,alphaBlendDestination:null,alphaBlendOperation:null,colorWriteMaskRed:null,colorWriteMaskGreen:null,colorWriteMaskBlue:null,colorWriteMaskAlpha:null,set_colorWriteMask:function(e){return this.colorWriteMaskRed=this.colorWriteMaskBlue=this.colorWriteMaskGreen=this.colorWriteMaskAlpha=e},conservativeRasterization:null,__class__:kha_graphics4_PipelineStateBase};var kha_graphics4_PipelineState=$hxClasses["kha.graphics4.PipelineState"]=function(){kha_graphics4_PipelineStateBase.call(this),this.pipeline=Krom.createPipeline()};kha_graphics4_PipelineState.__name__=!0,kha_graphics4_PipelineState.convertCullMode=function(e){switch(e._hx_index){case 0:return 0;case 1:return 1;case 2:return 2}},kha_graphics4_PipelineState.convertCompareMode=function(e){switch(e._hx_index){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 6;case 7:return 7}},kha_graphics4_PipelineState.convertStencilAction=function(e){switch(e._hx_index){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 6;case 7:return 7}},kha_graphics4_PipelineState.convertBlendingFactor=function(e){switch(e._hx_index){case 0:case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 9:return 8;case 10:return 9}},kha_graphics4_PipelineState.__super__=kha_graphics4_PipelineStateBase,kha_graphics4_PipelineState.prototype=$extend(kha_graphics4_PipelineStateBase.prototype,{pipeline:null,delete:function(){Krom.deletePipeline(this.pipeline),this.pipeline=null},compile:function(){var e=0<this.inputLayout.length?this.inputLayout[0].elements:null,t=1<this.inputLayout.length?this.inputLayout[1].elements:null,a=2<this.inputLayout.length?this.inputLayout[2].elements:null,r=3<this.inputLayout.length?this.inputLayout[3].elements:null,i=null!=this.geometryShader?this.geometryShader.shader:null,s=null!=this.tessellationControlShader?this.tessellationControlShader.shader:null,n=null!=this.tessellationEvaluationShader?this.tessellationEvaluationShader.shader:null;Krom.compilePipeline(this.pipeline,e,t,a,r,this.inputLayout.length,this.vertexShader.shader,this.fragmentShader.shader,i,s,n,{cullMode:kha_graphics4_PipelineState.convertCullMode(this.cullMode),depthWrite:this.depthWrite,depthMode:kha_graphics4_PipelineState.convertCompareMode(this.depthMode),stencilMode:kha_graphics4_PipelineState.convertCompareMode(this.stencilMode),stencilBothPass:kha_graphics4_PipelineState.convertStencilAction(this.stencilBothPass),stencilDepthFail:kha_graphics4_PipelineState.convertStencilAction(this.stencilDepthFail),stencilFail:kha_graphics4_PipelineState.convertStencilAction(this.stencilFail),stencilReferenceValue:this.stencilReferenceValue,stencilReadMask:this.stencilReadMask,stencilWriteMask:this.stencilWriteMask,blendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.blendSource),blendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.blendDestination),alphaBlendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendSource),alphaBlendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendDestination),colorWriteMaskRed:this.colorWriteMaskRed,colorWriteMaskGreen:this.colorWriteMaskGreen,colorWriteMaskBlue:this.colorWriteMaskBlue,colorWriteMaskAlpha:this.colorWriteMaskAlpha,conservativeRasterization:this.conservativeRasterization})},set:function(){Krom.setPipeline(this.pipeline)},getConstantLocation:function(e){return Krom.getConstantLocation(this.pipeline,e)},getTextureUnit:function(e){return Krom.getTextureUnit(this.pipeline,e)},__class__:kha_graphics4_PipelineState});var kha_graphics4_StencilAction=$hxEnums["kha.graphics4.StencilAction"]={__ename__:!0,__constructs__:["Keep","Zero","Replace","Increment","IncrementWrap","Decrement","DecrementWrap","Invert"],Keep:{_hx_index:0,__enum__:"kha.graphics4.StencilAction",toString:$estr},Zero:{_hx_index:1,__enum__:"kha.graphics4.StencilAction",toString:$estr},Replace:{_hx_index:2,__enum__:"kha.graphics4.StencilAction",toString:$estr},Increment:{_hx_index:3,__enum__:"kha.graphics4.StencilAction",toString:$estr},IncrementWrap:{_hx_index:4,__enum__:"kha.graphics4.StencilAction",toString:$estr},Decrement:{_hx_index:5,__enum__:"kha.graphics4.StencilAction",toString:$estr},DecrementWrap:{_hx_index:6,__enum__:"kha.graphics4.StencilAction",toString:$estr},Invert:{_hx_index:7,__enum__:"kha.graphics4.StencilAction",toString:$estr}},kha_graphics4_TessellationControlShader=$hxClasses["kha.graphics4.TessellationControlShader"]=function(e,t){this.shader=Krom.createTessellationControlShader(e[0].bytes.b.bufferValue,t[0])};kha_graphics4_TessellationControlShader.__name__=!0,kha_graphics4_TessellationControlShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_TessellationControlShader};var kha_graphics4_TessellationEvaluationShader=$hxClasses["kha.graphics4.TessellationEvaluationShader"]=function(e,t){this.shader=Krom.createTessellationEvaluationShader(e[0].bytes.b.bufferValue,t[0])};kha_graphics4_TessellationEvaluationShader.__name__=!0,kha_graphics4_TessellationEvaluationShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_TessellationEvaluationShader};var kha_graphics4_TexDir=$hxEnums["kha.graphics4.TexDir"]={__ename__:!0,__constructs__:["U","V"],U:{_hx_index:0,__enum__:"kha.graphics4.TexDir",toString:$estr},V:{_hx_index:1,__enum__:"kha.graphics4.TexDir",toString:$estr}},kha_graphics4_TextureAddressing=$hxEnums["kha.graphics4.TextureAddressing"]={__ename__:!0,__constructs__:["Repeat","Mirror","Clamp"],Repeat:{_hx_index:0,__enum__:"kha.graphics4.TextureAddressing",toString:$estr},Mirror:{_hx_index:1,__enum__:"kha.graphics4.TextureAddressing",toString:$estr},Clamp:{_hx_index:2,__enum__:"kha.graphics4.TextureAddressing",toString:$estr}},kha_graphics4_TextureFilter=$hxEnums["kha.graphics4.TextureFilter"]={__ename__:!0,__constructs__:["PointFilter","LinearFilter","AnisotropicFilter"],PointFilter:{_hx_index:0,__enum__:"kha.graphics4.TextureFilter",toString:$estr},LinearFilter:{_hx_index:1,__enum__:"kha.graphics4.TextureFilter",toString:$estr},AnisotropicFilter:{_hx_index:2,__enum__:"kha.graphics4.TextureFilter",toString:$estr}},kha_graphics4_TextureFormat=$hxEnums["kha.graphics4.TextureFormat"]={__ename__:!0,__constructs__:["RGBA32","L8","RGBA128","DEPTH16","RGBA64","A32","A16"],RGBA32:{_hx_index:0,__enum__:"kha.graphics4.TextureFormat",toString:$estr},L8:{_hx_index:1,__enum__:"kha.graphics4.TextureFormat",toString:$estr},RGBA128:{_hx_index:2,__enum__:"kha.graphics4.TextureFormat",toString:$estr},DEPTH16:{_hx_index:3,__enum__:"kha.graphics4.TextureFormat",toString:$estr},RGBA64:{_hx_index:4,__enum__:"kha.graphics4.TextureFormat",toString:$estr},A32:{_hx_index:5,__enum__:"kha.graphics4.TextureFormat",toString:$estr},A16:{_hx_index:6,__enum__:"kha.graphics4.TextureFormat",toString:$estr}},kha_graphics4_TextureUnit=$hxClasses["kha.graphics4.TextureUnit"]=function(){};kha_graphics4_TextureUnit.__name__=!0;var kha_graphics4_Usage=$hxEnums["kha.graphics4.Usage"]={__ename__:!0,__constructs__:["StaticUsage","DynamicUsage","ReadableUsage"],StaticUsage:{_hx_index:0,__enum__:"kha.graphics4.Usage",toString:$estr},DynamicUsage:{_hx_index:1,__enum__:"kha.graphics4.Usage",toString:$estr},ReadableUsage:{_hx_index:2,__enum__:"kha.graphics4.Usage",toString:$estr}},kha_graphics4_VertexBuffer=$hxClasses["kha.graphics4.VertexBuffer"]=function(e,t,a,r,i){null==i&&(i=!1),null==r&&(r=0),this.vertexCount=e,this.structure=t,this.buffer=Krom.createVertexBuffer(e,t.elements,a._hx_index,r)};kha_graphics4_VertexBuffer.__name__=!0,kha_graphics4_VertexBuffer.prototype={buffer:null,_data:null,vertexCount:null,structure:null,delete:function(){Krom.deleteVertexBuffer(this.buffer),this.buffer=null},lock:function(e,t){return this._data=Krom.lockVertexBuffer(this.buffer),this._data},unlock:function(){Krom.unlockVertexBuffer(this.buffer)},stride:function(){return this.structure.byteSize()},count:function(){return this.vertexCount},set:function(e){return Krom.setVertexBuffer(this.buffer),0},__class__:kha_graphics4_VertexBuffer};var kha_graphics4_VertexElement=$hxClasses["kha.graphics4.VertexElement"]=function(e,t){this.name=e,this.data=t};kha_graphics4_VertexElement.__name__=!0,kha_graphics4_VertexElement.prototype={name:null,data:null,__class__:kha_graphics4_VertexElement};var kha_graphics4_VertexShader=$hxClasses["kha.graphics4.VertexShader"]=function(e,t){null!=e&&(this.shader=Krom.createVertexShader(e[0].bytes.b.bufferValue,t[0]))};kha_graphics4_VertexShader.__name__=!0,kha_graphics4_VertexShader.fromSource=function(e){var t=new kha_graphics4_VertexShader(null,null);return t.shader=Krom.createVertexShaderFromSource(e),t},kha_graphics4_VertexShader.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:kha_graphics4_VertexShader};var kha_graphics4_VertexStructure=$hxClasses["kha.graphics4.VertexStructure"]=function(){this.elements=[],this.instanced=!1};kha_graphics4_VertexStructure.__name__=!0,kha_graphics4_VertexStructure.prototype={elements:null,instanced:null,add:function(e,t){this.elements.push(new kha_graphics4_VertexElement(e,t))},size:function(){return this.elements.length},byteSize:function(){for(var e=0,t=0,a=this.elements.length;t<a;){var r=t++;e+=this.dataByteSize(this.elements[r].data)}return e},dataByteSize:function(e){switch(e){case 0:return 4;case 1:return 8;case 2:return 12;case 3:return 16;case 4:return 64}},get:function(e){return this.elements[e]},__class__:kha_graphics4_VertexStructure};var kha_graphics5_Graphics=$hxClasses["kha.graphics5.Graphics"]=function(){};kha_graphics5_Graphics.__name__=!0,kha_graphics5_Graphics.prototype={renderTargetsInvertedY:null,begin:null,end:null,swapBuffers:null,__class__:kha_graphics5_Graphics};var kha_graphics5_RenderTarget=$hxClasses["kha.graphics5.RenderTarget"]=function(){};kha_graphics5_RenderTarget.__name__=!0;var kha_input_Gamepad=$hxClasses["kha.input.Gamepad"]=$hx_exports.kha.input.Gamepad=function(e,t){null==t&&(t="unknown"),null==e&&(e=0),this.index=e,this.axisListeners=[],this.buttonListeners=[],kha_input_Gamepad.instances[e]=this};kha_input_Gamepad.__name__=!0,kha_input_Gamepad.get=function(e){return null==e&&(e=0),e>=kha_input_Gamepad.instances.length?null:kha_input_Gamepad.instances[e]},kha_input_Gamepad.notifyOnConnect=function(e,t){null!=e&&kha_input_Gamepad.connectListeners.push(e),null!=t&&kha_input_Gamepad.disconnectListeners.push(t)},kha_input_Gamepad.removeConnect=function(e,t){null!=e&&HxOverrides.remove(kha_input_Gamepad.connectListeners,e),null!=t&&HxOverrides.remove(kha_input_Gamepad.disconnectListeners,t)},kha_input_Gamepad.sendConnectEvent=function(e){kha_input_Gamepad.instances[e].connected=!0;for(var t=0,a=kha_input_Gamepad.connectListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_input_Gamepad.sendDisconnectEvent=function(e){kha_input_Gamepad.instances[e].connected=!1;for(var t=0,a=kha_input_Gamepad.disconnectListeners;t<a.length;){var r=a[t];++t,r(e)}},kha_input_Gamepad.prototype={index:null,notify:function(e,t){null!=e&&this.axisListeners.push(e),null!=t&&this.buttonListeners.push(t)},remove:function(e,t){null!=e&&HxOverrides.remove(this.axisListeners,e),null!=t&&HxOverrides.remove(this.buttonListeners,t)},axisListeners:null,buttonListeners:null,id:null,connected:null,get_id:function(){return kha_SystemImpl.getGamepadId(this.index)},sendAxisEvent:function(e,t){for(var a=0,r=this.axisListeners;a<r.length;){var i=r[a];++a,i(e,t)}},sendButtonEvent:function(e,t){for(var a=0,r=this.buttonListeners;a<r.length;){var i=r[a];++a,i(e,t)}},__class__:kha_input_Gamepad};var kha_network_Controller=$hxClasses["kha.network.Controller"]=function(){this.__id=kha_network_ControllerBuilder.nextId++,this._inputBuffer=new haxe_io_Bytes(new ArrayBuffer(1))};kha_network_Controller.__name__=!0,kha_network_Controller.prototype={__id:null,_inputBufferIndex:null,_inputBuffer:null,_id:function(){return this.__id},_receive:function(e){},__class__:kha_network_Controller};var kha_input_Keyboard=$hxClasses["kha.input.Keyboard"]=$hx_exports.kha.input.Keyboard=function(){kha_network_Controller.call(this),this.downListeners=[],this.upListeners=[],this.pressListeners=[],kha_input_Keyboard.instance=this};kha_input_Keyboard.__name__=!0,kha_input_Keyboard.get=function(e){return null==e&&(e=0),kha_SystemImpl.getKeyboard(e)},kha_input_Keyboard.__super__=kha_network_Controller,kha_input_Keyboard.prototype=$extend(kha_network_Controller.prototype,{notify:function(e,t,a){null!=e&&this.downListeners.push(e),null!=t&&this.upListeners.push(t),null!=a&&this.pressListeners.push(a)},remove:function(e,t,a){null!=e&&HxOverrides.remove(this.downListeners,e),null!=t&&HxOverrides.remove(this.upListeners,t),null!=a&&HxOverrides.remove(this.pressListeners,a)},show:function(){},hide:function(){},downListeners:null,upListeners:null,pressListeners:null,sendDownEvent:function(e){for(var t=0,a=this.downListeners;t<a.length;){var r=a[t];++t,r(e)}},sendUpEvent:function(e){for(var t=0,a=this.upListeners;t<a.length;){var r=a[t];++t,r(e)}},sendPressEvent:function(e){for(var t=0,a=this.pressListeners;t<a.length;){var r=a[t];++t,r(e)}},_receive:function(e){},__class__:kha_input_Keyboard});var kha_input_Mouse=$hxClasses["kha.input.Mouse"]=$hx_exports.kha.input.Mouse=function(){kha_network_Controller.call(this),kha_input_Mouse.instance=this};kha_input_Mouse.__name__=!0,kha_input_Mouse.get=function(e){return null==e&&(e=0),kha_SystemImpl.getMouse(e)},kha_input_Mouse.__super__=kha_network_Controller,kha_input_Mouse.prototype=$extend(kha_network_Controller.prototype,{notify:function(e,t,a,r,i){this.notifyWindowed(0,e,t,a,r,i)},remove:function(e,t,a,r,i){this.removeWindowed(0,e,t,a,r,i)},notifyWindowed:function(e,t,a,r,i,s){if(null!=t){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=e;)this.windowDownListeners.push([]);this.windowDownListeners[e].push(t)}if(null!=a){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=e;)this.windowUpListeners.push([]);this.windowUpListeners[e].push(a)}if(null!=r){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=e;)this.windowMoveListeners.push([]);this.windowMoveListeners[e].push(r)}if(null!=i){for(null==this.windowWheelListeners&&(this.windowWheelListeners=[]);this.windowWheelListeners.length<=e;)this.windowWheelListeners.push([]);this.windowWheelListeners[e].push(i)}if(null!=s){for(null==this.windowLeaveListeners&&(this.windowLeaveListeners=[]);this.windowLeaveListeners.length<=e;)this.windowLeaveListeners.push([]);this.windowLeaveListeners[e].push(s)}},removeWindowed:function(e,t,a,r,i,s){null!=t&&(null!=this.windowDownListeners?e<this.windowDownListeners.length?HxOverrides.remove(this.windowDownListeners[e],t):haxe_Log.trace('no downListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:110,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no downListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:114,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=a&&(null!=this.windowUpListeners?e<this.windowUpListeners.length?HxOverrides.remove(this.windowUpListeners[e],a):haxe_Log.trace('no upListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:124,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no upListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:128,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=r&&(null!=this.windowMoveListeners?e<this.windowMoveListeners.length?HxOverrides.remove(this.windowMoveListeners[e],r):haxe_Log.trace('no moveListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:138,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no moveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:142,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=i&&(null!=this.windowWheelListeners?e<this.windowWheelListeners.length?HxOverrides.remove(this.windowWheelListeners[e],i):haxe_Log.trace('no wheelListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:152,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no wheelListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:156,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=s&&(null!=this.windowLeaveListeners?e<this.windowLeaveListeners.length?HxOverrides.remove(this.windowLeaveListeners[e],s):haxe_Log.trace('no leaveListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:166,className:"kha.input.Mouse",methodName:"removeWindowed"}):haxe_Log.trace("no leaveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:170,className:"kha.input.Mouse",methodName:"removeWindowed"}))},lock:function(){},unlock:function(){},canLock:function(){return!1},isLocked:function(){return!1},notifyOnLockChange:function(e,t){},removeFromLockChange:function(e,t){},hideSystemCursor:function(){},showSystemCursor:function(){},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,windowWheelListeners:null,windowLeaveListeners:null,sendLeaveEvent:function(e){if(null!=this.windowLeaveListeners)for(var t=0,a=this.windowLeaveListeners[e];t<a.length;){var r=a[t];++t,r()}},sendDownEvent:function(e,t,a,r){if(null!=this.windowDownListeners)for(var i=0,s=this.windowDownListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendUpEvent:function(e,t,a,r){if(null!=this.windowUpListeners)for(var i=0,s=this.windowUpListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendMoveEvent:function(e,t,a,r,i){if(null!=this.windowMoveListeners)for(var s=0,n=this.windowMoveListeners[e];s<n.length;){var _=n[s];++s,_(t,a,r,i)}},sendWheelEvent:function(e,t){if(null!=this.windowWheelListeners)for(var a=0,r=this.windowWheelListeners[e];a<r.length;){var i=r[a];++a,i(t)}},_receive:function(e){},__class__:kha_input_Mouse});var kha_input_MouseImpl=$hxClasses["kha.input.MouseImpl"]=function(){kha_input_Mouse.call(this)};kha_input_MouseImpl.__name__=!0,kha_input_MouseImpl.__super__=kha_input_Mouse,kha_input_MouseImpl.prototype=$extend(kha_input_Mouse.prototype,{lock:function(){kha_SystemImpl.lockMouse()},unlock:function(){kha_SystemImpl.unlockMouse()},canLock:function(){return kha_SystemImpl.canLockMouse()},isLocked:function(){return kha_SystemImpl.isMouseLocked()},notifyOnLockChange:function(e,t){kha_SystemImpl.notifyOfMouseLockChange(e,t)},removeFromLockChange:function(e,t){kha_SystemImpl.removeFromMouseLockChange(e,t)},hideSystemCursor:function(){kha_SystemImpl.hideSystemCursor()},showSystemCursor:function(){kha_SystemImpl.showSystemCursor()},_receive:function(e){},__class__:kha_input_MouseImpl});var kha_input_Pen=$hxClasses["kha.input.Pen"]=function(){kha_input_Pen.instance=this};kha_input_Pen.__name__=!0,kha_input_Pen.get=function(e){return null==e&&(e=0),kha_SystemImpl.getPen(e)},kha_input_Pen.prototype={notify:function(e,t,a){this.notifyWindowed(0,e,t,a)},remove:function(e,t,a){this.removeWindowed(0,e,t,a)},notifyWindowed:function(e,t,a,r){if(null!=t){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=e;)this.windowDownListeners.push([]);this.windowDownListeners[e].push(t)}if(null!=a){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=e;)this.windowUpListeners.push([]);this.windowUpListeners[e].push(a)}if(null!=r){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=e;)this.windowMoveListeners.push([]);this.windowMoveListeners[e].push(r)}},removeWindowed:function(e,t,a,r){null!=t&&null!=this.windowDownListeners&&e<this.windowDownListeners.length&&HxOverrides.remove(this.windowDownListeners[e],t),null!=a&&null!=this.windowUpListeners&&e<this.windowUpListeners.length&&HxOverrides.remove(this.windowUpListeners[e],a),null!=r&&null!=this.windowMoveListeners&&e<this.windowMoveListeners.length&&HxOverrides.remove(this.windowMoveListeners[e],r)},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,sendDownEvent:function(e,t,a,r){if(null!=this.windowDownListeners)for(var i=0,s=this.windowDownListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendUpEvent:function(e,t,a,r){if(null!=this.windowUpListeners)for(var i=0,s=this.windowUpListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},sendMoveEvent:function(e,t,a,r){if(null!=this.windowMoveListeners)for(var i=0,s=this.windowMoveListeners[e];i<s.length;){var n=s[i];++i,n(t,a,r)}},__class__:kha_input_Pen};var kha_input_Surface=$hxClasses["kha.input.Surface"]=$hx_exports.kha.input.Surface=function(){this.touchStartListeners=[],this.touchEndListeners=[],this.moveListeners=[],kha_input_Surface.instance=this};kha_input_Surface.__name__=!0,kha_input_Surface.get=function(e){return null==e&&(e=0),0!=e?null:kha_input_Surface.instance},kha_input_Surface.prototype={notify:function(e,t,a){null!=e&&this.touchStartListeners.push(e),null!=t&&this.touchEndListeners.push(t),null!=a&&this.moveListeners.push(a)},remove:function(e,t,a){null!=e&&HxOverrides.remove(this.touchStartListeners,e),null!=t&&HxOverrides.remove(this.touchEndListeners,t),null!=a&&this.moveListeners.push(a)},touchStartListeners:null,touchEndListeners:null,moveListeners:null,sendTouchStartEvent:function(e,t,a){for(var r=0,i=this.touchStartListeners;r<i.length;){var s=i[r];++r,s(e,t,a)}},sendTouchEndEvent:function(e,t,a){for(var r=0,i=this.touchEndListeners;r<i.length;){var s=i[r];++r,s(e,t,a)}},sendMoveEvent:function(e,t,a){for(var r=0,i=this.moveListeners;r<i.length;){var s=i[r];++r,s(e,t,a)}},__class__:kha_input_Surface};var kha_internal_BytesBlob=$hxClasses["kha.internal.BytesBlob"]=function(e){this.bytes=e};kha_internal_BytesBlob.__name__=!0,kha_internal_BytesBlob.__interfaces__=[kha_Resource],kha_internal_BytesBlob.fromBytes=function(e){return new kha_internal_BytesBlob(e)},kha_internal_BytesBlob.alloc=function(e){return new kha_internal_BytesBlob(new haxe_io_Bytes(new ArrayBuffer(e)))},kha_internal_BytesBlob.readF32=function(e){var t=0==(-2147483648&e)?1:-1,a=e>>23&255,r=8388607&e;switch(a){case 0:return 0;case 255:return 0!=r?NaN:0<t?1/0:-1/0;default:return t*((r+8388608)/8388608)*Math.pow(2,a-127)}},kha_internal_BytesBlob.bit=function(e,t){if(1==(e>>>t&1)){return 0,!0}return 0,!1},kha_internal_BytesBlob.toText=function(e,t){for(var a="",r=0,i=t;r<i;){var s=r++;a+=String.fromCharCode(e[s])}return a},kha_internal_BytesBlob.prototype={bytes:null,sub:function(e,t){return new kha_internal_BytesBlob(this.bytes.sub(e,t))},length:null,get_length:function(){return this.bytes.length},writeU8:function(e,t){this.bytes.b[e]=255&t},readU8:function(e){var t=this.bytes.b[e];return++e,t},readS8:function(e){var t=this.bytes.b[e];return++e,(0==(128&t)?1:-1)*(t&=127)},readU16BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1];return e+=2,256*t+a},readU16LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1];return e+=2,256*a+t},readU32LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3];return e+=4,t+256*a+256*r*256+256*i*256*256},readU32BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3];return e+=4,i+256*r+256*a*256+256*t*256*256},readS16BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1];e+=2;var r=0==(128&t)?1:-1;return t&=127,-1==r?256*t-32767+a:256*t+a},readS16LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=0==(128&a)?1:-1;return a&=127,e+=2,-1==r?256*a-32767+t:256*a+t},readS32LE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3],s=0==(128&i)?1:-1;return i&=127,e+=4,-1==s?-2147483647+t+256*a+256*r*256+256*i*256*256:t+256*a+256*r*256+256*i*256*256},readS32BE:function(e){var t=this.bytes.b[e],a=this.bytes.b[e+1],r=this.bytes.b[e+2],i=this.bytes.b[e+3],s=0==(128&t)?1:-1;return t&=127,e+=4,-1==s?-2147483647+i+256*r+256*a*256+256*t*256*256:i+256*r+256*a*256+256*t*256*256},readF32LE:function(e){return kha_internal_BytesBlob.readF32(this.readS32LE(e))},readF32BE:function(e){return kha_internal_BytesBlob.readF32(this.readS32BE(e))},toString:function(){return this.bytes.toString()},readUtf8Char:function(e){if(e.value>=this.get_length())return-1;var t=this.readU8(e.value);++e.value;var a=0;if(kha_internal_BytesBlob.bit(t,7))if(kha_internal_BytesBlob.bit(t,7)&&kha_internal_BytesBlob.bit(t,6)&&!kha_internal_BytesBlob.bit(t,5)){var r=31&t,i=this.readU8(e.value);++e.value,a=r<<6|63&i}else kha_internal_BytesBlob.bit(t,7)&&kha_internal_BytesBlob.bit(t,6)&&kha_internal_BytesBlob.bit(t,5)&&!kha_internal_BytesBlob.bit(t,4)?e.value+=2:kha_internal_BytesBlob.bit(t,7)&&kha_internal_BytesBlob.bit(t,6)&&kha_internal_BytesBlob.bit(t,5)&&kha_internal_BytesBlob.bit(t,4)&&!kha_internal_BytesBlob.bit(t,3)&&(e.value+=3);else a=t;return a},readUtf8Block:function(e,t){var a=0;if(t.value>=this.get_length())return"";for(;a<2e3;){var r=this.readUtf8Char(t);if(r<0)break;e[a]=r,++a}return kha_internal_BytesBlob.toText(e,a)},readUtf8String:function(){var e=new Array(2e3),t="",a=0;3<=this.get_length()&&239==this.bytes.b[0]&&187==this.bytes.b[1]&&191==this.bytes.b[2]&&(a=3);for(var r={value:a};r.value<this.get_length();)t+=this.readUtf8Block(e,r);return t},toBytes:function(){return this.bytes},unload:function(){this.bytes=null},__class__:kha_internal_BytesBlob};var kha_krom_Graphics=$hxClasses["kha.krom.Graphics"]=function(e){this.renderTarget=e};kha_krom_Graphics.__name__=!0,kha_krom_Graphics.__interfaces__=[kha_graphics4_Graphics],kha_krom_Graphics.prototype={renderTarget:null,begin:function(e){Krom.begin(this.renderTarget,e)},beginFace:function(e){Krom.beginFace(this.renderTarget,e)},beginEye:function(e){},end:function(){Krom.end()},flush:function(){},vsynced:function(){return!0},refreshRate:function(){return 60},clear:function(e,t,a){var r=0;null!=e&&(r|=1),null!=t&&(r|=2),null!=a&&(r|=4),Krom.clear(r,null==e?0:e,t,a)},viewport:function(e,t,a,r){Krom.viewport(e,t,a,r)},setVertexBuffer:function(e){e.set(0)},setVertexBuffers:function(e){Krom.setVertexBuffers(e)},setIndexBuffer:function(e){e.set()},setCubeMap:function(e,t){null!=t&&(null!=t.texture_?Krom.setTexture(e,t.texture_):Krom.setRenderTarget(e,t.renderTarget_))},setCubeMapDepth:function(e,t){null!=t&&Krom.setTextureDepth(e,t.renderTarget_)},setTexture:function(e,t){null!=t&&(null!=t.texture_?Krom.setTexture(e,t.texture_):Krom.setRenderTarget(e,t.renderTarget_))},setTextureDepth:function(e,t){null!=t&&Krom.setTextureDepth(e,t.renderTarget_)},setTextureArray:function(e,t){},setVideoTexture:function(e,t){},setImageTexture:function(e,t){null!=t&&Krom.setImageTexture(e,t.texture_)},setTextureParameters:function(e,t,a,r,i,s){Krom.setTextureParameters(e,t._hx_index,a._hx_index,r._hx_index,i._hx_index,s._hx_index)},setTexture3DParameters:function(e,t,a,r,i,s,n){Krom.setTexture3DParameters(e,t._hx_index,a._hx_index,r._hx_index,i._hx_index,s._hx_index,n._hx_index)},setPipeline:function(e){e.set()},setBool:function(e,t){Krom.setBool(e,t)},setInt:function(e,t){Krom.setInt(e,t)},setFloat:function(e,t){Krom.setFloat(e,t)},setFloat2:function(e,t,a){Krom.setFloat2(e,t,a)},setFloat3:function(e,t,a,r){Krom.setFloat3(e,t,a,r)},setFloat4:function(e,t,a,r,i){Krom.setFloat4(e,t,a,r,i)},setFloats:function(e,t){Krom.setFloats(e,t.buffer)},setVector2:function(e,t){Krom.setFloat2(e,t.x,t.y)},setVector3:function(e,t){Krom.setFloat3(e,t.x,t.y,t.z)},setVector4:function(e,t){Krom.setFloat4(e,t.x,t.y,t.z,t.w)},setMatrix:function(e,t){kha_krom_Graphics.mat[0]=t._00,kha_krom_Graphics.mat[1]=t._01,kha_krom_Graphics.mat[2]=t._02,kha_krom_Graphics.mat[3]=t._03,kha_krom_Graphics.mat[4]=t._10,kha_krom_Graphics.mat[5]=t._11,kha_krom_Graphics.mat[6]=t._12,kha_krom_Graphics.mat[7]=t._13,kha_krom_Graphics.mat[8]=t._20,kha_krom_Graphics.mat[9]=t._21,kha_krom_Graphics.mat[10]=t._22,kha_krom_Graphics.mat[11]=t._23,kha_krom_Graphics.mat[12]=t._30,kha_krom_Graphics.mat[13]=t._31,kha_krom_Graphics.mat[14]=t._32,kha_krom_Graphics.mat[15]=t._33,Krom.setMatrix(e,kha_krom_Graphics.mat.buffer)},setMatrix3:function(e,t){kha_krom_Graphics.mat[0]=t._00,kha_krom_Graphics.mat[1]=t._01,kha_krom_Graphics.mat[2]=t._02,kha_krom_Graphics.mat[3]=t._10,kha_krom_Graphics.mat[4]=t._11,kha_krom_Graphics.mat[5]=t._12,kha_krom_Graphics.mat[6]=t._20,kha_krom_Graphics.mat[7]=t._21,kha_krom_Graphics.mat[8]=t._22,Krom.setMatrix3(e,kha_krom_Graphics.mat.buffer)},drawIndexedVertices:function(e,t){null==t&&(t=-1),null==e&&(e=0),Krom.drawIndexedVertices(e,t)},drawIndexedVerticesInstanced:function(e,t,a){null==a&&(a=-1),null==t&&(t=0),Krom.drawIndexedVerticesInstanced(e,t,a)},instancedRenderingAvailable:function(){return!1},scissor:function(e,t,a,r){Krom.scissor(e,t,a,r)},disableScissor:function(){Krom.disableScissor()},renderTargetsInvertedY:function(){return Krom.renderTargetsInvertedY()},__class__:kha_krom_Graphics};var kha_krom_Sound=$hxClasses["kha.krom.Sound"]=function(e){kha_Sound.call(this),this.compressedData=e,this.uncompressedData=null};kha_krom_Sound.__name__=!0,kha_krom_Sound.__super__=kha_Sound,kha_krom_Sound.prototype=$extend(kha_Sound.prototype,{uncompress:function(e){if(null==this.uncompressedData){var t=this.compressedData,a=t.length/4|0,r=new Float32Array(a);this.uncompressedData=r;for(var i=0,s=a;i<s;){var n=i++;this.uncompressedData[n]=t.getFloat(4*n)}this.compressedData=null,e()}else e()},unload:function(){kha_Sound.prototype.unload.call(this)},__class__:kha_krom_Sound});var kha_math_FastMatrix3=$hxClasses["kha.math.FastMatrix3"]=function(e,t,a,r,i,s,n,_,h){this._00=e,this._10=t,this._20=a,this._01=r,this._11=i,this._21=s,this._02=n,this._12=_,this._22=h};kha_math_FastMatrix3.__name__=!0,kha_math_FastMatrix3.fromMatrix3=function(e){return new kha_math_FastMatrix3(e._00,e._10,e._20,e._01,e._11,e._21,e._02,e._12,e._22)},kha_math_FastMatrix3.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:kha_math_FastMatrix3};var kha_math_FastMatrix4=$hxClasses["kha.math.FastMatrix4"]=function(e,t,a,r,i,s,n,_,h,o,l,u,d,c,g,p){this._00=e,this._10=t,this._20=a,this._30=r,this._01=i,this._11=s,this._21=n,this._31=_,this._02=h,this._12=o,this._22=l,this._32=u,this._03=d,this._13=c,this._23=g,this._33=p};kha_math_FastMatrix4.__name__=!0,kha_math_FastMatrix4.fromMatrix4=function(e){return new kha_math_FastMatrix4(e._00,e._10,e._20,e._30,e._01,e._11,e._21,e._31,e._02,e._12,e._22,e._32,e._03,e._13,e._23,e._33)},kha_math_FastMatrix4.orthogonalProjection=function(e,t,a,r,i,s){return new kha_math_FastMatrix4(2/(t-e),0,0,-(t+e)/(t-e),0,2/(r-a),0,-(r+a)/(r-a),0,0,-2/(s-i),-(s+i)/(s-i),0,0,0,1)},kha_math_FastMatrix4.perspectiveProjection=function(e,t,a,r){var i=1/Math.tan(e/2);return new kha_math_FastMatrix4(i/t,0,0,0,0,i,0,0,0,0,(r+a)/(a-r),2*r*a/(a-r),0,0,-1,0)},kha_math_FastMatrix4.lookAt=function(e,t,a){var r=new kha_math_FastVector3(t.x-e.x,t.y-e.y,t.z-e.z);r.set_length(1);var i=r.y*a.z-r.z*a.y,s=r.z*a.x-r.x*a.z,n=r.x*a.y-r.y*a.x,_=new kha_math_FastVector3(i,s,n);_.set_length(1);var h=_.y*r.z-_.z*r.y,o=_.z*r.x-_.x*r.z,l=_.x*r.y-_.y*r.x;return new kha_math_FastMatrix4(_.x,_.y,_.z,-(_.x*e.x+_.y*e.y+_.z*e.z),h,o,l,-(h*e.x+o*e.y+l*e.z),-r.x,-r.y,-r.z,r.x*e.x+r.y*e.y+r.z*e.z,0,0,0,1)},kha_math_FastMatrix4.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:kha_math_FastMatrix4};var kha_math_FastVector2=$hxClasses["kha.math.FastVector2"]=function(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t};kha_math_FastVector2.__name__=!0,kha_math_FastVector2.fromVector2=function(e){return new kha_math_FastVector2(e.x,e.y)},kha_math_FastVector2.prototype={x:null,y:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,e},toString:function(){return"FastVector2("+this.x+", "+this.y+")"},__class__:kha_math_FastVector2};var kha_math_FastVector3=$hxClasses["kha.math.FastVector3"]=function(e,t,a){null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a};kha_math_FastVector3.__name__=!0,kha_math_FastVector3.fromVector3=function(e){return new kha_math_FastVector3(e.x,e.y,e.z)},kha_math_FastVector3.prototype={x:null,y:null,z:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,e},toString:function(){return"FastVector3("+this.x+", "+this.y+", "+this.z+")"},__class__:kha_math_FastVector3};var kha_math_FastVector4=$hxClasses["kha.math.FastVector4"]=function(e,t,a,r){null==r&&(r=1),null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a,this.w=r};kha_math_FastVector4.__name__=!0,kha_math_FastVector4.fromVector4=function(e){return new kha_math_FastVector4(e.x,e.y,e.z,e.w)},kha_math_FastVector4.prototype={x:null,y:null,z:null,w:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,this.w*=a,e},toString:function(){return"FastVector4("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},__class__:kha_math_FastVector4};var kha_math_Matrix3=$hxClasses["kha.math.Matrix3"]=function(e,t,a,r,i,s,n,_,h){this._00=e,this._10=t,this._20=a,this._01=r,this._11=i,this._21=s,this._02=n,this._12=_,this._22=h};kha_math_Matrix3.__name__=!0,kha_math_Matrix3.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:kha_math_Matrix3};var kha_math_Matrix4=$hxClasses["kha.math.Matrix4"]=function(e,t,a,r,i,s,n,_,h,o,l,u,d,c,g,p){this._00=e,this._10=t,this._20=a,this._30=r,this._01=i,this._11=s,this._21=n,this._31=_,this._02=h,this._12=o,this._22=l,this._32=u,this._03=d,this._13=c,this._23=g,this._33=p};kha_math_Matrix4.__name__=!0,kha_math_Matrix4.orthogonalProjection=function(e,t,a,r,i,s){return new kha_math_Matrix4(2/(t-e),0,0,-(t+e)/(t-e),0,2/(r-a),0,-(r+a)/(r-a),0,0,-2/(s-i),-(s+i)/(s-i),0,0,0,1)},kha_math_Matrix4.perspectiveProjection=function(e,t,a,r){var i=1/Math.tan(e/2);return new kha_math_Matrix4(i/t,0,0,0,0,i,0,0,0,0,(r+a)/(a-r),2*r*a/(a-r),0,0,-1,0)},kha_math_Matrix4.lookAt=function(e,t,a){var r=new kha_math_Vector3(t.x-e.x,t.y-e.y,t.z-e.z);r.set_length(1);var i=r.y*a.z-r.z*a.y,s=r.z*a.x-r.x*a.z,n=r.x*a.y-r.y*a.x,_=new kha_math_Vector3(i,s,n);_.set_length(1);var h=_.y*r.z-_.z*r.y,o=_.z*r.x-_.x*r.z,l=_.x*r.y-_.y*r.x;return new kha_math_Matrix4(_.x,_.y,_.z,-(_.x*e.x+_.y*e.y+_.z*e.z),h,o,l,-(h*e.x+o*e.y+l*e.z),-r.x,-r.y,-r.z,r.x*e.x+r.y*e.y+r.z*e.z,0,0,0,1)},kha_math_Matrix4.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:kha_math_Matrix4};var kha_math_Vector2=$hxClasses["kha.math.Vector2"]=function(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t};kha_math_Vector2.__name__=!0,kha_math_Vector2.prototype={x:null,y:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,e},__class__:kha_math_Vector2};var kha_math_Vector3=$hxClasses["kha.math.Vector3"]=function(e,t,a){null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a};kha_math_Vector3.__name__=!0,kha_math_Vector3.prototype={x:null,y:null,z:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,e},__class__:kha_math_Vector3};var kha_math_Vector4=$hxClasses["kha.math.Vector4"]=function(e,t,a,r){null==r&&(r=1),null==a&&(a=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=a,this.w=r};kha_math_Vector4.__name__=!0,kha_math_Vector4.prototype={x:null,y:null,z:null,w:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},set_length:function(e){var t=this.get_length();if(0==t)return 0;var a=e/t;return this.x*=a,this.y*=a,this.z*=a,this.w*=a,e},__class__:kha_math_Vector4};var kha_network_Client=$hxClasses["kha.network.Client"]=function(){};kha_network_Client.__name__=!0,kha_network_Client.prototype={get_id:null,id:null,send:null,receive:null,onClose:null,__class__:kha_network_Client};var kha_network_ControllerBuilder=$hxClasses["kha.network.ControllerBuilder"]=function(){};kha_network_ControllerBuilder.__name__=!0;var kha_network_Entity=$hxClasses["kha.network.Entity"]=function(){};kha_network_Entity.__name__=!0,kha_network_Entity.prototype={_id:null,_size:null,_send:null,_receive:null,__class__:kha_network_Entity};var kha_network_LocalClient=$hxClasses["kha.network.LocalClient"]=function(e){this.myId=e};kha_network_LocalClient.__name__=!0,kha_network_LocalClient.__interfaces__=[kha_network_Client],kha_network_LocalClient.prototype={myId:null,send:function(e,t){},receive:function(e){},onClose:function(e){},controllers:null,get_controllers:function(){return null},id:null,get_id:function(){return this.myId},__class__:kha_network_LocalClient};var kha_network_Network=$hxClasses["kha.network.Network"]=function(e,t,a,r){};kha_network_Network.__name__=!0,kha_network_Network.prototype={send:function(e,t){},listen:function(e){},__class__:kha_network_Network};var kha_network_State=$hxClasses["kha.network.State"]=function(e,t){this.time=e,this.data=t};kha_network_State.__name__=!0,kha_network_State.prototype={time:null,data:null,__class__:kha_network_State};var kha_network_Session=$hxClasses["kha.network.Session"]=function(e,t,a){this.ping=1,this.currentPlayers=0,this.controllers=new haxe_ds_IntMap,this.entities=new haxe_ds_IntMap,(kha_network_Session.instance=this).maxPlayers=e,this.address=t,this.port=a};kha_network_Session.__name__=!0,kha_network_Session.the=function(){return kha_network_Session.instance},kha_network_Session.prototype={entities:null,controllers:null,maxPlayers:null,currentPlayers:null,ping:null,address:null,port:null,startCallback:null,refusedCallback:null,resetCallback:null,localClient:null,network:null,updateTaskId:null,pingTaskId:null,me:null,get_me:function(){return this.localClient},addEntity:function(e){var t=this.entities,a=e._id();t.h[a]=e},addController:function(e){haxe_Log.trace("Adding controller id "+e._id(),{fileName:"kha/network/Session.hx",lineNumber:88,className:"kha.network.Session",methodName:"addController"}),e._inputBufferIndex=0;var t=this.controllers,a=e._id();t.h[a]=e},sendControllerUpdate:function(e,t){if(this.controllers.h.hasOwnProperty(e)){if(this.controllers.h[e]._inputBuffer.length<this.controllers.h[e]._inputBufferIndex+4+t.length){var a=new haxe_io_Bytes(new ArrayBuffer(this.controllers.h[e]._inputBufferIndex+4+t.length));a.blit(0,this.controllers.h[e]._inputBuffer,0,this.controllers.h[e]._inputBufferIndex),this.controllers.h[e]._inputBuffer=a}this.controllers.h[e]._inputBuffer.setInt32(this.controllers.h[e]._inputBufferIndex,t.length),this.controllers.h[e]._inputBuffer.blit(this.controllers.h[e]._inputBufferIndex+4,t,0,t.length),this.controllers.h[e]._inputBufferIndex+=4+t.length}},sendPing:function(){var e=new haxe_io_Bytes(new ArrayBuffer(5));e.b[0]=4,e.setFloat(1,kha_Scheduler.realTime()),this.sendToServer(e)},sendPlayerUpdate:function(){},receive:function(e,t){switch(e.b[0]){case 0:var a=e.b[1];this.localClient=new kha_network_LocalClient(a),kha_Scheduler.resetTime(),this.startCallback();break;case 1:for(var r=e.getDouble(1),i=9,s=this.entities.iterator();s.hasNext();){var n=s.next();n._receive(i,e),i+=n._size()}kha_Scheduler.warp(r);break;case 3:switch(e.b[1]){case 0:break;case 1:this.executeRPC(e)}break;case 4:var _=e.getFloat(1);this.ping=kha_Scheduler.realTime()-_;break;case 5:this.refusedCallback();break;case 6:this.currentPlayers=e.getInt32(1)}},executeRPC:function(e){var t=[],a=e.getInt32(2),r=6,i=e.getUInt16(r);r+=2;for(var s="",n=0,_=i;n<_;){n++;s+=String.fromCharCode(e.b[r]),++r}var h=e.getUInt16(r);r+=2;for(var o="",l=0,u=h;l<u;){l++;o+=String.fromCharCode(e.b[r]),++r}for(;r<e.length;){var d=e.b[r];switch(++r,d){case 66:var c=1==e.b[r];++r,haxe_Log.trace("Bool: "+(null==c?"null":""+c),{fileName:"kha/network/Session.hx",lineNumber:295,className:"kha.network.Session",methodName:"executeRPC"}),t.push(c);break;case 70:var g=e.getDouble(r);r+=8,haxe_Log.trace("Float: "+g,{fileName:"kha/network/Session.hx",lineNumber:300,className:"kha.network.Session",methodName:"executeRPC"}),t.push(g);break;case 73:var p=e.getInt32(r);r+=4,haxe_Log.trace("Int: "+p,{fileName:"kha/network/Session.hx",lineNumber:305,className:"kha.network.Session",methodName:"executeRPC"}),t.push(p);break;case 83:var f=e.getUInt16(r);r+=2;for(var m="",k=0,v=f;k<v;){k++;m+=String.fromCharCode(e.b[r]),++r}haxe_Log.trace("String: "+m,{fileName:"kha/network/Session.hx",lineNumber:315,className:"kha.network.Session",methodName:"executeRPC"}),t.push(m);break;default:haxe_Log.trace("Unknown argument type.",{fileName:"kha/network/Session.hx",lineNumber:318,className:"kha.network.Session",methodName:"executeRPC"})}}-1==a?Reflect.field($hxClasses[s],o+"_remotely").apply(null,t):Reflect.field(kha_network_SyncBuilder.objects[a],o+"_remotely").apply(kha_network_SyncBuilder.objects[a],t)},waitForStart:function(e,t,a,r,i){var s=this;this.startCallback=e,this.refusedCallback=t,this.resetCallback=i,this.network=new kha_network_Network(this.address,this.port,a,function(){r(),s.reset()}),this.network.listen(function(e){s.receive(e)}),this.updateTaskId=kha_Scheduler.addFrameTask($bind(this,this.update),0),this.ping=1,this.pingTaskId=kha_Scheduler.addTimeTask($bind(this,this.sendPing),0,1)},reset:function(){kha_Scheduler.removeFrameTask(this.updateTaskId),kha_Scheduler.removeTimeTask(this.pingTaskId),this.currentPlayers=0,this.ping=1,this.controllers=new haxe_ds_IntMap,this.entities=new haxe_ds_IntMap,this.resetCallback()},update:function(){for(var e=this.controllers.iterator();e.hasNext();){var t=e.next();if(0<t._inputBufferIndex){var a=new haxe_io_Bytes(new ArrayBuffer(22+t._inputBufferIndex));a.b[0]=2,a.setInt32(1,t._id()),a.setDouble(5,kha_Scheduler.time()),a.setInt32(13,kha_System.windowWidth(0)),a.setInt32(17,kha_System.windowHeight(0)),a.b[21]=0,a.blit(22,t._inputBuffer,0,t._inputBufferIndex),this.sendToServer(a),t._inputBufferIndex=0}}},sendToServer:function(e){this.network.send(e,!1)},__class__:kha_network_Session};var kha_network_SyncBuilder=$hxClasses["kha.network.SyncBuilder"]=function(){};kha_network_SyncBuilder.__name__=!0;var kha_simd_Float32x4=$hxClasses["kha.simd.Float32x4"]=function(e,t,a,r){this._0=e,this._1=t,this._2=a,this._3=r};kha_simd_Float32x4.__name__=!0,kha_simd_Float32x4.create=function(){return new kha_simd_Float32x4(0,0,0,0)},kha_simd_Float32x4.loadAllFast=function(e){return new kha_simd_Float32x4(e,e,e,e)},kha_simd_Float32x4.load=function(e,t,a,r){return new kha_simd_Float32x4(e,t,a,r)},kha_simd_Float32x4.loadFast=function(e,t,a,r){return new kha_simd_Float32x4(e,t,a,r)},kha_simd_Float32x4.get=function(e,t){var a=0;switch(t){case 0:a=e._0;break;case 1:a=e._1;break;case 2:a=e._2;break;case 3:a=e._3}return a},kha_simd_Float32x4.getFast=function(e,t){switch(t){case 0:return e._0;case 1:return e._1;case 2:return e._2;case 3:return e._3}return 0},kha_simd_Float32x4.abs=function(e){return new kha_simd_Float32x4(Math.abs(e._0),Math.abs(e._1),Math.abs(e._2),Math.abs(e._3))},kha_simd_Float32x4.add=function(e,t){return new kha_simd_Float32x4(e._0+t._0,e._1+t._1,e._2+t._2,e._3+t._3)},kha_simd_Float32x4.div=function(e,t){return new kha_simd_Float32x4(e._0/t._0,e._1/t._1,e._2/t._2,e._3/t._3)},kha_simd_Float32x4.mul=function(e,t){return new kha_simd_Float32x4(e._0*t._0,e._1*t._1,e._2*t._2,e._3*t._3)},kha_simd_Float32x4.neg=function(e){return new kha_simd_Float32x4(-e._0,-e._1,-e._2,-e._3)},kha_simd_Float32x4.reciprocalApproximation=function(e){return new kha_simd_Float32x4(0,0,0,0)},kha_simd_Float32x4.reciprocalSqrtApproximation=function(e){return new kha_simd_Float32x4(0,0,0,0)},kha_simd_Float32x4.sub=function(e,t){return new kha_simd_Float32x4(e._0-t._0,e._1-t._1,e._2-t._2,e._3-t._3)},kha_simd_Float32x4.sqrt=function(e){return new kha_simd_Float32x4(Math.sqrt(e._0),Math.sqrt(e._1),Math.sqrt(e._2),Math.sqrt(e._3))},kha_simd_Float32x4.prototype={_0:null,_1:null,_2:null,_3:null,__class__:kha_simd_Float32x4};var zui_Handle=$hxClasses["zui.Handle"]=function(e){this.changed=!1,this.dragY=0,this.dragX=0,this.dragEnabled=!1,this.dragging=!1,this.lastMaxY=0,this.lastMaxX=0,this.layout=0,this.scrollEnabled=!1,this.scrollOffset=0,this.scrolling=!1,this.redraws=2,this.texture=null,this.text="",this.value=0,this.color=-1,this.position=0,this.selected=!1,null!=e&&(null!=e.selected&&(this.selected=e.selected),null!=e.position&&(this.position=e.position),null!=e.value&&(this.value=e.value),null!=e.text&&(this.text=e.text),null!=e.color&&(this.color=e.color),null!=e.layout&&(this.layout=e.layout))};zui_Handle.__name__=!0,zui_Handle.prototype={selected:null,position:null,color:null,value:null,text:null,texture:null,redraws:null,scrolling:null,scrollOffset:null,scrollEnabled:null,layout:null,lastMaxX:null,lastMaxY:null,dragging:null,dragEnabled:null,dragX:null,dragY:null,changed:null,children:null,nest:function(e,t){for(null==this.children&&(this.children=[]);this.children.length<=e;)this.children.push(null);return null==this.children[e]&&(this.children[e]=new zui_Handle(t)),this.children[e]},__class__:zui_Handle};var zui_Canvas=$hxClasses["zui.Canvas"]=function(){};zui_Canvas.__name__=!0,zui_Canvas.draw=function(e,t,a){-1==zui_Canvas.screenW&&(zui_Canvas.screenW=kha_System.windowWidth(),zui_Canvas.screenH=kha_System.windowHeight()),zui_Canvas.events=[],(zui_Canvas._ui=e).begin(a),e.g=a;for(var r=0,i=t.elements;r<i.length;){var s=i[r];++r,null==s.parent&&zui_Canvas.drawElement(e,t,s)}return e.end(),zui_Canvas.events},zui_Canvas.drawElement=function(e,t,a,r,i){if(null==i&&(i=0),null==r&&(r=0),null!=a&&0!=a.visible){e._x=t.x+(a.x*zui_Canvas._ui.SCALE|0)+(r*zui_Canvas._ui.SCALE|0),e._y=t.y+(a.y*zui_Canvas._ui.SCALE|0)+(i*zui_Canvas._ui.SCALE|0),e._w=a.width*zui_Canvas._ui.SCALE|0;var s=t.width*zui_Canvas._ui.SCALE|0,n=t.height*zui_Canvas._ui.SCALE|0;switch(a.anchor){case 1:e._x-=(s-zui_Canvas.screenW)/2;break;case 2:e._x-=s-zui_Canvas.screenW;break;case 3:e._y-=(n-zui_Canvas.screenH)/2;break;case 4:e._x-=(s-zui_Canvas.screenW)/2,e._y-=(n-zui_Canvas.screenH)/2;break;case 5:e._x-=s-zui_Canvas.screenW,e._y-=(n-zui_Canvas.screenH)/2;break;case 6:e._y-=n-zui_Canvas.screenH;break;case 7:e._x-=(s-zui_Canvas.screenW)/2,e._y-=n-zui_Canvas.screenH;break;case 8:e._x-=s-zui_Canvas.screenW,e._y-=n-zui_Canvas.screenH}var _=null!=a.rotation&&0!=a.rotation;switch(_&&e.g.pushRotation(a.rotation,e._x+(a.width*zui_Canvas._ui.SCALE|0)/2,e._y+(a.height*zui_Canvas._ui.SCALE|0)/2),a.type){case 0:var h=e.ops.font,o=e.fontSize,l=e.t.TEXT_COL;null!=a.asset&&StringTools.endsWith(a.asset,".ttf")&&(e.ops.font=zui_Canvas.getAsset(t,a.asset)),e.fontSize=a.height*zui_Canvas._ui.SCALE|0,e.t.TEXT_COL=a.color,e.text(a.text),e.ops.font=h,e.fontSize=o,e.t.TEXT_COL=l;break;case 1:var u=zui_Canvas.getAsset(t,a.asset),d=null!=a.asset&&StringTools.endsWith(a.asset,".ttf");if(null!=u&&!d){e.imageScrollAlign=!1;var c=null!=a.color?a.color:-1;if(3==e.image(u,c,a.height*zui_Canvas._ui.SCALE|0)){var g=a.event;null!=g&&""!=g&&zui_Canvas.events.push(g)}e.imageScrollAlign=!0}break;case 2:var p=e.t.BUTTON_H;if(e.t.BUTTON_H=a.height*zui_Canvas._ui.SCALE|0,e.button(a.text)){var f=a.event;null!=f&&""!=f&&zui_Canvas.events.push(f)}e.t.BUTTON_H=p;break;case 3:break;case 6:e.check(zui_Canvas.h.nest(a.id),a.text);break;case 7:e.inlineRadio(zui_Canvas.h.nest(a.id),a.text.split(";"));break;case 8:e.combo(zui_Canvas.h.nest(a.id),a.text.split(";"));break;case 9:var m=e.g.get_color();e.g.set_color(a.color),e.g.fillRect(e._x,e._y,e._w,a.height*zui_Canvas._ui.SCALE|0),e.g.set_color(m);break;case 10:e.slider(zui_Canvas.h.nest(a.id),a.text,0,1,!0);break;case 11:e.textInput(zui_Canvas.h.nest(a.id),a.text)}if(null!=a.children)for(var k=0,v=a.children;k<v.length;){var S=v[k];++k,zui_Canvas.drawElement(e,t,zui_Canvas.elemById(t,S),a.x+r,a.y+i)}_&&e.g.popTransformation()}},zui_Canvas.getText=function(e,t){return t.text},zui_Canvas.getAsset=function(e,t){for(var a=0,r=e.assets;a<r.length;){var i=r[a];if(++a,i.name==t)return zui_Canvas.assetMap.h[i.id]}return null},zui_Canvas.getElementId=function(e){if(-1==zui_Canvas.elemId)for(var t=0,a=e.elements;t<a.length;){var r=a[t];++t,zui_Canvas.elemId<r.id&&(zui_Canvas.elemId=r.id)}return++zui_Canvas.elemId},zui_Canvas.getAssetId=function(e){if(-1==zui_Canvas.assetId)for(var t=0,a=e.assets;t<a.length;){var r=a[t];++t,zui_Canvas.assetId<r.id&&(zui_Canvas.assetId=r.id)}return++zui_Canvas.assetId},zui_Canvas.elemById=function(e,t){for(var a=0,r=e.elements;a<r.length;){var i=r[a];if(++a,i.id==t)return i}return null},zui_Canvas.scaled=function(e){return e*zui_Canvas._ui.SCALE|0};var zui_Ext=$hxClasses["zui.Ext"]=function(){};zui_Ext.__name__=!0,zui_Ext.list=function(e,t,a,r){var i=0;null==r&&(r={});for(var s=null!=r.addCb?r.addCb:function(e){a.push(e)},n=null!=r.removeCb?r.removeCb:function(e){a.splice(e,1)},_=null!=r.getNameCb?r.getNameCb:function(e){return a[e]},h=null!=r.setNameCb?r.setNameCb:function(e,t){a[e]=t},o=null!=r.getLabelCb?r.getLabelCb:function(e){return""},l=r.itemDrawCb,u=null!=r.showRadio&&r.showRadio,d=null==r.editable||r.editable,c=null==r.showAdd||r.showAdd,g=null!=r.addLabel?r.addLabel:"Add",p=0;p<a.length;){u?(e.row([.12,.68,.2]),e.radio(t.nest(0),p,"")&&(i=p)):e.row([.8,.2]);var f=t.nest(p);f.text=_(p),d?h(p,e.textInput(f,o(p))):e.text(_(p)),e.button("X")?n(p):++p,null!=l&&l(f.nest(p),p-1)}return c&&e.button(g)&&s("untitled"),i},zui_Ext.panelList=function(e,t,a,r,i,s,n,_,h,o,l){null==l&&(l="Add"),null==o&&(o=!0),null==h&&(h=!0),null==r&&(r=function(e){a.push(e)}),null==i&&(i=function(e){a.splice(e,1)}),null==s&&(s=function(e){return a[e]}),null==n&&(n=function(e,t){a[e]=t});for(var u=0;u<a.length;){e.row([.12,.68,.2]);var d=e.panel(t.nest(u),"",0),c=t.nest(u);h?n(u,e.textInput(c,s(u))):e.text(s(u)),e.button("X")?i(u):++u,null!=_&&d&&_(c.nest(u),u-1)}o&&e.button(l)&&r("untitled")},zui_Ext.colorPicker=function(e,t,a){null==a&&(a=!1);var r=e.slider(t.nest(0,{value:.00392156862745098*((16711680&t.color)>>>16)}),"R",0,1,!0),i=e.slider(t.nest(1,{value:.00392156862745098*((65280&t.color)>>>8)}),"G",0,1,!0),s=e.slider(t.nest(2,{value:.00392156862745098*(255&t.color)}),"B",0,1,!0),n=.00392156862745098*(t.color>>>24);a&&(n=e.slider(t.nest(3,{value:n}),"A",0,1,!0));var _=kha__$Color_Color_$Impl_$.fromFloats(r,i,s,n);return e.text("",2,_),_},zui_Ext.initPath=function(e,t){e.text="Windows"==t?"C:\\Users":"/"},zui_Ext.fileBrowser=function(e,t,a){null==a&&(a=!1);var r="/",i="ls ",s=kha_System.get_systemId();"Windows"==s&&(i="dir /b ",a&&(i+="/ad "),r="\\",t.text=StringTools.replace(t.text,"\\\\","\\"),t.text=StringTools.replace(t.text,"\r","")),""==t.text&&zui_Ext.initPath(t,s);var n="Linux"==s?"/tmp":Krom.savePath();n+="Windows"==s?"\\dir.txt":"/dir.txt",t.text!=zui_Ext.lastPath&&Krom.sysCommand(i+'"'+t.text+'" > "'+n+'"'),zui_Ext.lastPath=t.text;var _=haxe_io_Bytes.ofData(Krom.loadBlob(n)).toString().split("\n");(-1!=t.text.indexOf("/",1)||-1!=t.text.indexOf("\\",2))&&e.button("..",0)&&(t.text=t.text.substring(0,t.text.lastIndexOf(r)),2==t.text.length&&":"==t.text.charAt(1)&&(t.text+=r));for(var h=0;h<_.length;){var o=_[h];++h,""!=o&&"."!=o.charAt(0)&&e.button(o,0)&&(t.text+=r+o)}return t.text},zui_Ext.colorWheel=function(e,t,a,r,i){null==i&&(i=!1),null==a&&(a=!1),null==r&&(r=e._w),zui_Ext.rgbToHsv(.00392156862745098*((16711680&t.color)>>>16),.00392156862745098*((65280&t.color)>>>8),.00392156862745098*(255&t.color),zui_Ext.ar);var s=zui_Ext.ar[0],n=zui_Ext.ar[1],_=zui_Ext.ar[2],h=.00392156862745098*(t.color>>>24),o=e._x,l=e._y;null!=e.currentWindow&&e.currentWindow.scrollEnabled||(r-=e.t.SCROLL_W*e.SCALE|0,o+=(e.t.SCROLL_W*e.SCALE|0)/2),e.image(e.ops.color_wheel,kha__$Color_Color_$Impl_$.fromFloats(_,_,_));var u=o+r/2,d=l+(e._y-l)/2,c=.7*r,g=c/2,p=u,f=d+n*g,m=s*(2*Math.PI),k=Math.cos(m)*(p-u)-Math.sin(m)*(f-d)+u,v=Math.sin(m)*(p-u)+Math.cos(m)*(f-d)+d;p=k,f=v,e.g.set_color(-16777216),e.g.fillRect(p-3,f-3,6,6),e.g.set_color(-1),e.g.fillRect(p-2,f-2,4,4),i&&(a?e.row([.3333333333333333,.3333333333333333,.3333333333333333]):e.row([.5,.5])),_=e.slider(t.nest(0,{value:Math.round(100*_)/100}),"Value",0,1,!0),a&&(h=e.slider(t.nest(1,{value:Math.round(100*h)/100}),"Alpha",0,1,!0));var S=u+e._windowX,b=d+e._windowY;if(e.inputStarted&&e.getInputInRect(S-g,b-g,c,c)&&(zui_Ext.wheelSelectedHande=t),e.inputReleased&&(zui_Ext.wheelSelectedHande=null),e.inputDown&&zui_Ext.wheelSelectedHande==t){var y=S-e.inputX,x=b-e.inputY;n=Math.min(Math.sqrt(y*y+x*x),g)/g;var w=Math.atan2(e.inputX-S,e.inputY-b);w<0&&(w=Math.PI+(Math.PI-Math.abs(w))),s=(w=2*Math.PI-w)/(2*Math.PI),t.changed=e.changed=!0}return zui_Ext.hsvToRgb(s,n,_,zui_Ext.ar),t.color=kha__$Color_Color_$Impl_$.fromFloats(zui_Ext.ar[0],zui_Ext.ar[1],zui_Ext.ar[2],h),e.text("",2,t.color),t.color},zui_Ext.dist=function(e,t,a,r){var i=e-a,s=t-r;return Math.sqrt(i*i+s*s)},zui_Ext.fract=function(e){return e-(0|e)},zui_Ext.mix=function(e,t,a){return e*(1-a)+t*a},zui_Ext.clamp=function(e,t,a){return Math.min(Math.max(e,t),a)},zui_Ext.step=function(e,t){return t<e?0:1},zui_Ext.hsvToRgb=function(e,t,a,r){var i=e+1,s=Math.abs(6*(i-(0|i))-3),n=e+.6666666666666666,_=Math.abs(6*(n-(0|n))-3),h=e+.3333333333333333,o=Math.abs(6*(h-(0|h))-3);r[0]=a*(1-t+Math.min(Math.max(s-1,0),1)*t),r[1]=a*(1-t+Math.min(Math.max(_-1,0),1)*t),r[2]=a*(1-t+Math.min(Math.max(o-1,0),1)*t)},zui_Ext.rgbToHsv=function(e,t,a,r){var i=t<a?0:1,s=a*(1-i)+t*i,n=t<a?0:1,_=t*(1-n)+a*n,h=t<a?0:1,o=t<a?0:1,l=e<s?0:1,u=s*(1-l)+e*l,d=e<s?0:1,c=_*(1-d)+_*d,g=e<s?0:1,p=(.6666666666666666*(1-o)+-.3333333333333333*o)*(1-g)+(-1*(1-h)+0*h)*g,f=e<s?0:1,m=e*(1-f)+s*f,k=u-Math.min(m,c);r[0]=Math.abs(p+(m-c)/(6*k+1e-10)),r[1]=k/(u+1e-10),r[2]=u};var zui_Id=$hxClasses["zui.Id"]=function(){};zui_Id.__name__=!0;var zui_Themes=$hxClasses["zui.Themes"]=function(){};zui_Themes.__name__=!0;var zui_Zui=$hxClasses["zui.Zui"]=function(e){this.restoreY=-1,this.restoreX=-1,this.checkSelectImage=null,this.elementsBaked=!1,this.tabScroll=0,this.tabHandle=null,this.tabNames=null,this.tooltipTime=0,this.tooltipShown=!1,this.tooltipY=0,this.tooltipX=0,this.tooltipText="",this.comboToSubmit=0,this.submitComboHandle=null,this.comboSelectedWindow=null,this.comboSelectedHandle=null,this.tabPressedHandle=null,this.tabPressed=!1,this.textToSubmit="",this.submitTextHandle=null,this.textSelectedHandle=null,this.windowHeader=0,this.scrollEnabled=!0,this.scrollingHandle=null,this.windowEnded=!0,this.imageScrollAlign=!0,this.scrollAlign=0,this.curRatio=-1,this.highlightEnd=0,this.highlightStart=0,this.cursorY=0,this.cursorX=0,this.key=null,this.isKeyDown=!1,this.inputWheelDelta=0,this.inputEnabled=!0,this.inputRegistered=!1,this.imageInvertY=!1,this.alwaysRedraw=!1,this.changed=!1,this.isReleased=!1,this.isHovered=!1,this.isPushed=!1,this.isStarted=!1,this.isTyping=!1,this.isScrolling=!1,null==e.theme&&(e.theme=zui_Themes.dark),this.t=e.theme,null==e.khaWindowId&&(e.khaWindowId=0),null==e.scaleFactor&&(e.scaleFactor=1),null==e.scaleTexture&&(e.scaleTexture=1),null==e.autoNotifyInput&&(e.autoNotifyInput=!0),this.ops=e,this.setScale(e.scaleFactor),e.autoNotifyInput&&this.registerInput(),this.bakeElements()};function $getIterator(e){return e instanceof Array?HxOverrides.iter(e):e.iterator()}zui_Zui.__name__=!0,zui_Zui.prototype={isScrolling:null,isTyping:null,isStarted:null,isPushed:null,isHovered:null,isReleased:null,changed:null,alwaysRedraw:null,imageInvertY:null,inputRegistered:null,inputEnabled:null,inputX:null,inputY:null,inputInitialX:null,inputInitialY:null,inputDX:null,inputDY:null,inputWheelDelta:null,inputStarted:null,inputReleased:null,inputDown:null,inputDownR:null,isKeyDown:null,key:null,char:null,cursorX:null,cursorY:null,highlightStart:null,highlightEnd:null,ratios:null,curRatio:null,xBeforeSplit:null,wBeforeSplit:null,globalG:null,g:null,t:null,SCALE:null,ops:null,fontSize:null,fontOffsetY:null,arrowOffsetX:null,arrowOffsetY:null,titleOffsetX:null,buttonOffsetY:null,checkOffsetX:null,checkOffsetY:null,checkSelectOffsetX:null,checkSelectOffsetY:null,radioOffsetX:null,radioOffsetY:null,radioSelectOffsetX:null,radioSelectOffsetY:null,scrollAlign:null,imageScrollAlign:null,_x:null,_y:null,_w:null,_h:null,_windowX:null,_windowY:null,_windowW:null,_windowH:null,currentWindow:null,windowEnded:null,scrollingHandle:null,scrollEnabled:null,windowHeader:null,textSelectedHandle:null,textSelectedCurrentText:null,submitTextHandle:null,textToSubmit:null,tabPressed:null,tabPressedHandle:null,comboSelectedHandle:null,comboSelectedWindow:null,comboSelectedAlign:null,comboSelectedTexts:null,comboSelectedLabel:null,comboSelectedX:null,comboSelectedY:null,comboSelectedW:null,submitComboHandle:null,comboToSubmit:null,tooltipText:null,tooltipX:null,tooltipY:null,tooltipShown:null,tooltipTime:null,tabNames:null,tabHandle:null,tabScroll:null,elementsBaked:null,checkSelectImage:null,setScale:function(e){this.ops.scaleFactor=e,this.SCALE=this.ops.scaleFactor*this.ops.scaleTexture,this.fontSize=this.t.FONT_SIZE*this.ops.scaleFactor|0;var t=this.ops.font.height(this.fontSize);this.fontOffsetY=(this.t.ELEMENT_H*this.SCALE-t)/2,this.arrowOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.ARROW_SIZE*this.SCALE)/2,this.arrowOffsetX=this.arrowOffsetY,this.titleOffsetX=(2*this.arrowOffsetX+this.t.ARROW_SIZE*this.SCALE)/this.SCALE,this.buttonOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.BUTTON_H*this.SCALE)/2,this.checkOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.CHECK_SIZE*this.SCALE)/2,this.checkOffsetX=this.checkOffsetY,this.checkSelectOffsetY=(this.t.CHECK_SIZE*this.SCALE-this.t.CHECK_SELECT_SIZE*this.SCALE)/2,this.checkSelectOffsetX=this.checkSelectOffsetY,this.radioOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.CHECK_SIZE*this.SCALE)/2,this.radioOffsetX=this.radioOffsetY,this.radioSelectOffsetY=(this.t.CHECK_SIZE*this.SCALE-this.t.CHECK_SELECT_SIZE*this.SCALE)/2,this.radioSelectOffsetX=this.radioSelectOffsetY,this.elementsBaked=!1},bakeElements:function(){null!=this.checkSelectImage&&this.checkSelectImage.unload(),this.checkSelectImage=kha_Image.createRenderTarget(this.t.CHECK_SELECT_SIZE*this.SCALE|0,this.t.CHECK_SELECT_SIZE*this.SCALE|0,null,0,1,this.ops.khaWindowId);var e=this.checkSelectImage.get_g2();e.begin(!0,0),e.set_color(this.t.ACCENT_SELECT_COL),e.drawLine(0,0,this.checkSelectImage.get_width(),this.checkSelectImage.get_height(),2*this.SCALE),e.drawLine(this.checkSelectImage.get_width(),0,0,this.checkSelectImage.get_height(),2*this.SCALE),e.end(),this.elementsBaked=!0},remove:function(){this.ops.autoNotifyInput&&this.unregisterInput()},registerInput:function(){kha_input_Mouse.get().notifyWindowed(this.ops.khaWindowId,$bind(this,this.onMouseDown),$bind(this,this.onMouseUp),$bind(this,this.onMouseMove),$bind(this,this.onMouseWheel)),kha_input_Keyboard.get().notify($bind(this,this.onKeyDown),$bind(this,this.onKeyUp),$bind(this,this.onKeyPress)),this.inputRegistered=!0},unregisterInput:function(){kha_input_Mouse.get().removeWindowed(this.ops.khaWindowId,$bind(this,this.onMouseDown),$bind(this,this.onMouseUp),$bind(this,this.onMouseMove),$bind(this,this.onMouseWheel)),kha_input_Keyboard.get().remove($bind(this,this.onKeyDown),$bind(this,this.onKeyUp),$bind(this,this.onKeyPress)),this.endInput(),this.inputX=this.inputY=0,this.inputRegistered=!1},begin:function(e){this.elementsBaked||this.bakeElements(),this.globalG=e,this._x=0,this._y=0,this._w=0,this._h=0},end:function(e){if(null==e&&(e=!0),this.windowEnded||this.endWindow(),null!=this.comboSelectedHandle&&this.drawCombo(),e&&this.endInput(),null!=this.tabPressedHandle){var t=this.tabPressedHandle.text.length;this.highlightStart=0<t?0:t,this.highlightEnd=0<t?t:0,this.tabPressedHandle=null}},endInput:function(){this.isKeyDown=!1,this.inputStarted=!1,this.inputReleased=!1,this.inputDX=0,this.inputDY=0,this.inputWheelDelta=0},beginLayout:function(e,t,a,r){this.elementsBaked||this.bakeElements(),this.currentWindow=null,this.g=e,this._windowX=0,this._windowY=0,this._windowW=r,this._x=t,this._y=a,this._w=r},endLayout:function(e){null==e&&(e=!0),e&&this.endInput()},inputChanged:function(){return!!(0!=this.inputDX||0!=this.inputDY||0!=this.inputWheelDelta||this.inputStarted||this.inputReleased||this.inputDown||this.inputDownR)||this.isKeyDown},windowDirty:function(e,t,a,r,i){var s=t+e.dragX,n=a+e.dragY,_=this.getInputInRect(s,n,r,i)&&this.inputChanged();return!!(this.alwaysRedraw||this.isScrolling||this.isTyping)||_},window:function(e,t,a,r,i,s){return null==s&&(s=!1),null!=e.texture&&r==e.texture.get_width()&&i==e.texture.get_height()||this.resize(e,r,i,this.ops.khaWindowId),this.windowEnded||this.endWindow(),this.windowEnded=!1,this.g=e.texture.get_g2(),this.currentWindow=e,this._windowX=t+e.dragX,this._windowY=a+e.dragY,this._windowW=r,this._windowH=i,this.windowHeader=0,this.windowDirty(e,t,a,r,i)&&(e.redraws=2),0!=e.redraws&&(this._x=0,this._y=e.scrollOffset,1==e.layout&&(r=this.t.ELEMENT_W*this.SCALE|0),this._w=e.scrollEnabled?r-(this.t.SCROLL_W*this.SCALE|0):r,this._h=i,this.tooltipText="",this.tabNames=null,this.t.FILL_WINDOW_BG?this.g.begin(!0,this.t.WINDOW_BG_COL):(this.g.begin(!0,0),this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._x,this._y-e.scrollOffset,e.lastMaxX,e.lastMaxY)),(e.dragEnabled=s)&&(this.inputStarted&&this.getInputInRect(this._windowX,this._windowY,this._windowW,15)?e.dragging=!0:this.inputReleased&&(e.dragging=!1),e.dragging&&(e.redraws=2,e.dragX+=0|this.inputDX,e.dragY+=0|this.inputDY),this._y+=15,this.windowHeader+=15),!0)},endWindow:function(e){null==e&&(e=!0);var t=this.currentWindow;if(null!=t){if(0<t.redraws||this.isScrolling||this.isTyping){null!=this.tabNames&&this.drawTabs(),t.dragEnabled&&(this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(0,0,this._windowW,15));var a=this._y-t.scrollOffset;if(a<this._windowH||1==t.layout||!this.scrollEnabled)t.scrollEnabled=!1,t.scrollOffset=0;else{t.scrollEnabled=!0,this.tabScroll<0&&(t.scrollOffset=this.tabScroll,this.tabScroll=0);var r=a-this._windowH,i=-t.scrollOffset/r,s=this._windowH*Math.abs(this._windowH/a);s=Math.max(s,this.t.ELEMENT_H*this.SCALE);var n=this._windowH-s,_=r/n,h=n*i;this.inputStarted&&this.getInputInRect(this._windowX+this._windowW-(this.t.SCROLL_W*this.SCALE|0),h+this._windowY,this.t.SCROLL_W*this.SCALE|0,s)&&(t.scrolling=!0,this.scrollingHandle=t,this.isScrolling=!0),t.scrolling?this.scroll(this.inputDY*_,a):0!=this.inputWheelDelta&&this.scroll(this.inputWheelDelta*(this.t.ELEMENT_H*this.SCALE),a),0<t.scrollOffset?t.scrollOffset=0:a+t.scrollOffset<this._windowH&&(t.scrollOffset=this._windowH-a),this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._windowW-(this.t.SCROLL_W*this.SCALE|0),this._windowY,this.t.SCROLL_W*this.SCALE|0,this._windowH),this.g.set_color(this.t.ACCENT_COL),this.g.fillRect(this._windowW-(this.t.SCROLL_W*this.SCALE|0)-this.scrollAlign,h,this.t.SCROLL_W*this.SCALE|0,s)}t.lastMaxX=this._x,t.lastMaxY=this._y,0==t.layout?t.lastMaxX+=this._windowW:t.lastMaxY+=this._windowH,t.redraws--,this.g.end()}this.windowEnded=!0,e&&this.globalG.begin(!1),this.globalG.set_color(this.t.WINDOW_TINT_COL),this.globalG.drawScaledImage(t.texture,this._windowX,this._windowY,t.texture.get_width()/this.ops.scaleTexture,t.texture.get_height()/this.ops.scaleTexture),""!=this.tooltipText?(this.tooltipShown||(this.tooltipShown=!0,this.tooltipX=this.inputX,this.tooltipTime=kha_Scheduler.time()),kha_Scheduler.time()-this.tooltipTime>this.t.TOOLTIP_DELAY&&this.drawTooltip()):this.tooltipShown=!1,e&&this.globalG.end()}},scroll:function(e,t){this.currentWindow.scrollOffset-=e},restoreX:null,restoreY:null,tab:function(e,t){null==this.tabNames&&(this.tabNames=[],this.tabHandle=e,this.windowHeader+=this.buttonOffsetY+this.t.BUTTON_H*this.SCALE,this.restoreX=this.inputX,this.restoreY=this.inputY,this.getInputInRect(this._windowX,this._windowY,this._windowW,this.windowHeader)&&(this.inputX=this.inputY=-1)),this.tabNames.push(t);var a=e.position==this.tabNames.length-1;return a&&this.endElement(),a},drawTabs:function(){if(this.inputX=this.restoreX,this.inputY=this.restoreY,null!=this.currentWindow){var e=0,t=this._y;this._y=this.currentWindow.dragEnabled?15:0,this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(0,this._y,this._windowW,this.buttonOffsetY+this.t.BUTTON_H*this.SCALE),this.g.set_color(this.t.ACCENT_COL),this.g.fillRect(this.buttonOffsetY,this._y+this.buttonOffsetY+this.t.BUTTON_H*this.SCALE,this._windowW-2*this.buttonOffsetY,this.t.LINE_STRENGTH*this.SCALE);for(var a=0,r=this.tabNames.length;a<r;){var i=a++;this._x=e,this._w=this.ops.font.width(this.fontSize,this.tabNames[i])+2*this.buttonOffsetY+14*this.SCALE|0;var s=this.getReleased(),n=this.getPushed(),_=this.getHover();if(s){var h=this.tabHandle.nest(this.tabHandle.position);h.scrollOffset=this.currentWindow.scrollOffset,h=this.tabHandle.nest(i),this.tabScroll=h.scrollOffset,this.tabHandle.position=i,this.currentWindow.redraws=3}var o=this.tabHandle.position==i;this.g.set_color(n?this.t.ACCENT_HOVER_COL:_?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL),e+=this._w+5;var l=this.g,u=this._x+this.buttonOffsetY,d=this._y+this.buttonOffsetY,c=this._w,g=this.t.BUTTON_H*this.SCALE,p=0;0==p&&(p=this.t.LINE_STRENGTH*this.SCALE),o?l.drawRect(u,d,c,g,p):l.fillRect(u,d,c,g),this.g.set_color(this.t.BUTTON_TEXT_COL),this.drawString(this.g,this.tabNames[i],this.t.TEXT_OFFSET,0,0),o&&(this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._x+this.buttonOffsetY+1,this._y+this.buttonOffsetY+this.t.BUTTON_H*this.SCALE,this._w-1,this.t.LINE_STRENGTH*this.SCALE))}this._x=0,this._y=t,this._w=0|(this.currentWindow.scrollEnabled?this._windowW-(this.t.SCROLL_W*this.SCALE|0):this._windowW)}},panel:function(e,t,a,r){return null==r&&(r=!1),null==a&&(a=0),this.isVisible(this.t.ELEMENT_H*this.SCALE)&&(this.getReleased()&&(e.selected=!e.selected),0<a&&(this.g.set_color(this.t.PANEL_BG_COL),this.g.fillRect(this._x,this._y,this._w,this.t.ELEMENT_H*this.SCALE)),r?this.drawTree(e.selected):this.drawArrow(e.selected),this.g.set_color(this.t.PANEL_TEXT_COL),this.g.set_opacity(1),this.drawString(this.g,t,this.titleOffsetX,0)),this.endElement(),e.selected},image:function(e,t,a){null==t&&(t=-1);var r=e.get_width()*this.SCALE,i=e.get_height()*this.SCALE,s=Math.min(r,this._w),n=this._x;if(this.imageScrollAlign&&(s=Math.min(r,this._w-2*this.buttonOffsetY),n+=this.buttonOffsetY,!(null!=this.currentWindow&&this.currentWindow.scrollEnabled))){var _=-1==this.curRatio?1:this.ratios[this.curRatio];s-=(this.t.SCROLL_W*this.SCALE|0)*_,n+=(this.t.SCROLL_W*this.SCALE|0)*_/2}var h=null==a?s/r:a/i;if(null==a?a=i*h:s=r*h,!this.isVisible(a))return this.endElement(a),0;var o=this.getStarted(a),l=this.getPushed(a),u=this.getReleased(a);this.g.set_color(t);var d=a;return this.imageInvertY?this.g.drawScaledImage(e,n,this._y+d,s,-d):this.g.drawScaledImage(e,n,this._y,s,d),this.endElement(a),o?1:u?3:l?2:0},text:function(e,t,a){null==a&&(a=0),null==t&&(t=0),this.isVisible(this.t.ELEMENT_H*this.SCALE)&&(this.getReleased(),0!=a&&(this.g.set_color(a),this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,e,this.t.TEXT_OFFSET,0,t)),this.endElement()},floatInput:function(e,t,a){null==a&&(a=0),null==t&&(t="");var r=this.textInput(e,t,a,!0);return parseFloat(r)},startTextEdit:function(e){this.isTyping=!0,this.submitTextHandle=this.textSelectedHandle,this.textToSubmit=this.textSelectedCurrentText,this.textSelectedHandle=e,this.textSelectedCurrentText=e.text,this.tabPressed=!1,this.tabPressedHandle=e,this.cursorX=e.text.length,this.cursorY=0;var t=this.cursorX;this.highlightStart=0<t?0:t,this.highlightEnd=0<t?t:0,null!=kha_input_Keyboard.get()&&kha_input_Keyboard.get().show()},submitTextEdit:function(){this.submitTextHandle.text=this.textToSubmit,this.submitTextHandle.changed=this.changed=!0,this.submitTextHandle=null,this.textToSubmit="",this.textSelectedCurrentText=""},updateTextEdit:function(e,t){null==e&&(e=0);var a=this.textSelectedCurrentText;if(this.isKeyDown){37==this.key?0<this.cursorX&&this.cursorX--:39==this.key?this.cursorX<a.length&&this.cursorX++:8==this.key?0<this.cursorX&&(a=this.highlightStart!=this.highlightEnd?HxOverrides.substr(a,0,this.highlightStart)+HxOverrides.substr(a,this.highlightEnd,a.length):HxOverrides.substr(a,0,this.cursorX-1)+HxOverrides.substr(a,this.cursorX,a.length),this.cursorX--):46==this.key?a=HxOverrides.substr(a,0,this.highlightStart)+HxOverrides.substr(a,this.highlightEnd+1,null):13==this.key?this.deselectText():9==this.key?(this.tabPressed=!0,this.deselectText(),this.key=null):36==this.key?this.cursorX=0:35==this.key?this.cursorX=a.length:16!=this.key&&20!=this.key&&null!=this.char&&""!=this.char&&32<=HxOverrides.cca(this.char,0)&&127!=HxOverrides.cca(this.char,0)&&(a=HxOverrides.substr(a,0,this.highlightStart)+this.char+HxOverrides.substr(a,this.highlightEnd,null),this.cursorX++);var r=this.cursorX,i=this.cursorX;this.highlightStart=r<i?r:i,this.highlightEnd=r<i?i:r}var s=this.t.TEXT_OFFSET,n=this.t.ELEMENT_H*this.SCALE,_=n-3*this.buttonOffsetY;if(this.highlightStart!=this.highlightEnd){var h=0==e?HxOverrides.substr(a,this.highlightStart,this.highlightEnd):a.substring(this.highlightEnd,this.highlightStart),o=this.g.get_font().width(this.g.get_fontSize(),h),l=0==e?this._x+this.highlightStart+s:this._x+this._w-o-s;this.g.fillRect(l,this._y+this.cursorY*n+1.5*this.buttonOffsetY,o*this.SCALE,_)}if(kha_Scheduler.time()%(2*this.t.FLASH_SPEED)<this.t.FLASH_SPEED){this.g.set_color(this.t.TEXT_COL);var u=0==e?HxOverrides.substr(a,0,this.cursorX):a.substring(this.cursorX,a.length),d=this.g.get_font().width(this.g.get_fontSize(),u),c=0==e?this._x+d+s:this._x+this._w-d-s;this.g.fillRect(c,this._y+this.cursorY*n+1.5*this.buttonOffsetY,this.SCALE,_)}if(t){var g=parseFloat(a);g!=g&&(g=0);var p=null==g?"null":""+g;Std.parseInt(a)==g&&(p+=".0"),"-"==a.charAt(0)&&("-"!=p.charAt(0)&&(p="-"+p),"-"==a.charAt(1)&&(p=a.substring(1,a.length),this.cursorX--)),a=p}this.textSelectedCurrentText=a},textInput:function(e,t,a,r){if(null==r&&(r=!1),null==a&&(a=0),null==t&&(t=""),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.text;var i=this.getHover();this.g.set_color(i?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var s=this.g,n=this._x+this.buttonOffsetY,_=this._y+this.buttonOffsetY,h=this._w-2*this.buttonOffsetY,o=this.t.BUTTON_H*this.SCALE,l=0;0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?s.fillRect(n,_,h,o):s.drawRect(n,_,h,o,l);var u=this.getReleased()||this.tabPressed;if(this.textSelectedHandle!=e&&u&&this.startTextEdit(e),this.textSelectedHandle==e&&this.updateTextEdit(a,r),this.submitTextHandle==e?this.submitTextEdit():e.changed=!1,""!=t){this.g.set_color(this.t.LABEL_COL);var d=2==a?0:2,c=0==d?7:0;this.drawString(this.g,t,c,0,d)}return this.g.set_color(this.t.TEXT_COL),this.textSelectedHandle!=e?this.drawString(this.g,e.text,null,0,a):this.drawString(this.g,this.textSelectedCurrentText,null,0,a),this.endElement(),e.text},setHighlight:function(e,t){this.highlightStart=e<t?e:t,this.highlightEnd=e<t?t:e},formatFloatString:function(e){var t=parseFloat(e);t!=t&&(t=0);var a=null==t?"null":""+t;return Std.parseInt(e)==t&&(a+=".0"),"-"==e.charAt(0)&&("-"!=a.charAt(0)&&(a="-"+a),"-"==e.charAt(1)&&(a=e.substring(1,e.length),this.cursorX--)),a},deselectText:function(){this.submitTextHandle=this.textSelectedHandle,this.textToSubmit=this.textSelectedCurrentText,this.textSelectedHandle=null,this.isTyping=!1,null!=this.currentWindow&&(this.currentWindow.redraws=2),null!=kha_input_Keyboard.get()&&kha_input_Keyboard.get().hide(),this.highlightStart=0,this.highlightEnd=0},button:function(e,t){if(null==t&&(t=1),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),!1;var a=this.getReleased(),r=this.getPushed(),i=this.getHover();this.g.set_color(r?this.t.BUTTON_PRESSED_COL:i?this.t.BUTTON_HOVER_COL:this.t.BUTTON_COL);var s=this.g,n=this._x+this.buttonOffsetY,_=this._y+this.buttonOffsetY,h=this._w-2*this.buttonOffsetY,o=this.t.BUTTON_H*this.SCALE,l=0;return 0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_BUTTON_BG?s.fillRect(n,_,h,o):s.drawRect(n,_,h,o,l),this.g.set_color(this.t.BUTTON_TEXT_COL),this.drawString(this.g,e,this.t.TEXT_OFFSET,0,t),this.endElement(),a},check:function(e,t){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.selected;this.getReleased()?(e.selected=!e.selected,e.changed=this.changed=!0):e.changed=!1;var a=this.getHover();return this.drawCheck(e.selected,a),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,t,this.titleOffsetX,0,0),this.endElement(),e.selected},radio:function(e,t,a){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position==t;this.getReleased()?(e.position=t,e.changed=this.changed=!0):e.changed=!1;var r=this.getHover();return this.drawRadio(e.position==t,r),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,a,this.titleOffsetX,0),this.endElement(),e.position==t},inlineRadio:function(e,t){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position;this.getReleased()?(++e.position>=t.length&&(e.position=0),e.changed=this.changed=!0):e.changed=!1;var a=this.getHover();return this.drawInlineRadio(t[e.position],a),this.endElement(),e.position},combo:function(e,t,a,r,i){if(null==i&&(i=0),null==r&&(r=!1),null==a&&(a=""),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position;if(this.getReleased()&&null==this.comboSelectedHandle&&(this.inputEnabled=!1,this.comboSelectedHandle=e,this.comboSelectedWindow=this.currentWindow,this.comboSelectedAlign=i,this.comboSelectedTexts=t,this.comboSelectedLabel=a,this.comboSelectedX=this._x+this._windowX|0,this.comboSelectedY=this._y+this._windowY+this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE|0,this.comboSelectedW=0|this._w),e==this.submitComboHandle?(e.position=this.comboToSubmit,this.submitComboHandle=null,e.changed=this.changed=!0):e.changed=!1,this.getHover()){this.g.set_color(this.t.ACCENT_HOVER_COL);var s=this.g,n=this._x+this.buttonOffsetY,_=this._y+this.buttonOffsetY,h=this._w-2*this.buttonOffsetY,o=this.t.BUTTON_H*this.SCALE,l=0;0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?s.fillRect(n,_,h,o):s.drawRect(n,_,h,o,l)}else{this.g.set_color(this.t.ACCENT_COL);var u=this.g,d=this._x+this.buttonOffsetY,c=this._y+this.buttonOffsetY,g=this._w-2*this.buttonOffsetY,p=this.t.BUTTON_H*this.SCALE,f=0;0==f&&(f=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?u.fillRect(d,c,g,p):u.drawRect(d,c,g,p,f)}var m=this._x+this._w-this.arrowOffsetX-8,k=this._y+this.arrowOffsetY+3;return this.g.fillTriangle(m,k,m+this.t.ARROW_SIZE*this.SCALE,k,m+this.t.ARROW_SIZE*this.SCALE/2,k+this.t.ARROW_SIZE*this.SCALE/2),this.g.set_color(this.t.TEXT_COL),r&&""!=a&&(0==i&&(this._x-=15),this.drawString(this.g,a,null,0,0==i?2:0),0==i&&(this._x+=15)),2==i&&(this._x-=15),this.drawString(this.g,t[e.position],null,0,i),2==i&&(this._x+=15),this.endElement(),e.position},slider:function(e,t,a,r,i,s,n,_){if(null==_&&(_=2),null==n&&(n=!0),null==s&&(s=100),null==i&&(i=!1),null==r&&(r=1),null==a&&(a=0),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.value;if(this.getStarted()&&(e.scrolling=!0,this.scrollingHandle=e,this.isScrolling=!0),e.changed=!1,e.scrolling){var h=r-a,o=this._x+this._windowX+this.buttonOffsetY,l=h/(this._w-2*this.buttonOffsetY),u=a+(this.inputX-o)*l;e.value=(u*s|0)/s,e.value<a?e.value=a:e.value>r&&(e.value=r),e.changed=this.changed=!0}var d=this.getHover();this.drawSlider(e.value,a,r,i,d),(this.getReleased()||this.tabPressed)&&(e.text=e.value+"",this.startTextEdit(e));var c=0==_?2:0;return this.textSelectedHandle==e&&this.updateTextEdit(c,!1),this.submitTextHandle==e&&(this.submitTextEdit(),e.value=parseFloat(e.text)),this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,t,null,0,_),n&&(this.g.set_color(this.t.TEXT_COL),this.textSelectedHandle!=e?this.drawString(this.g,e.value+"",null,0,c):this.drawString(this.g,this.textSelectedCurrentText,null,0,c)),this.endElement(),e.value},separator:function(){this.isVisible(this.t.ELEMENT_H*this.SCALE)&&(this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(this._x,this._y,this._w-this.t.TEXT_OFFSET,this.t.LINE_STRENGTH*this.SCALE)),this._y+=2},tooltip:function(e){this.tooltipText=e,this.tooltipY=this._y+this._windowY},drawArrow:function(e){var t=this._x+this.arrowOffsetX,a=this._y+this.arrowOffsetY;this.g.set_color(this.t.ARROW_COL),e?this.g.fillTriangle(t,a,t+this.t.ARROW_SIZE*this.SCALE,a,t+this.t.ARROW_SIZE*this.SCALE/2,a+this.t.ARROW_SIZE*this.SCALE):this.g.fillTriangle(t,a,t,a+this.t.ARROW_SIZE*this.SCALE,t+this.t.ARROW_SIZE*this.SCALE,a+this.t.ARROW_SIZE*this.SCALE/2)},drawTree:function(e){var t=this._x+this.arrowOffsetX+1,a=this._y+this.arrowOffsetY+1;this.g.set_color(this.t.ARROW_COL),e?this.g.fillRect(t,a+3.5-1,7,7/8):(this.g.fillRect(t,a+3.5-1,7,7/8),this.g.fillRect(t+3.5-1,a,7/8,7))},drawCheck:function(e,t){var a=this._x+this.checkOffsetX,r=this._y+this.checkOffsetY;this.g.set_color(t?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var i=this.g,s=this.t.CHECK_SIZE*this.SCALE,n=this.t.CHECK_SIZE*this.SCALE,_=0;0==_&&(_=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?i.fillRect(a,r,s,n):i.drawRect(a,r,s,n,_),e&&(this.g.set_color(-1),this.g.drawImage(this.checkSelectImage,a+this.checkSelectOffsetX,r+this.checkSelectOffsetY))},drawRadio:function(e,t){var a=this._x+this.radioOffsetX,r=this._y+this.radioOffsetY;this.g.set_color(t?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var i=this.g,s=this.t.CHECK_SIZE*this.SCALE,n=this.t.CHECK_SIZE*this.SCALE,_=0;0==_&&(_=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?i.fillRect(a,r,s,n):i.drawRect(a,r,s,n,_),e&&(this.g.set_color(this.t.ACCENT_SELECT_COL),this.g.fillRect(a+this.radioSelectOffsetX,r+this.radioSelectOffsetY,this.t.CHECK_SELECT_SIZE*this.SCALE,this.t.CHECK_SELECT_SIZE*this.SCALE))},drawInlineRadio:function(e,t){t?(this.g.set_color(this.t.ACCENT_HOVER_COL),this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)):(this.g.set_color(this.t.ACCENT_COL),this.g.drawRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,e,this.titleOffsetX,0,1)},drawSlider:function(e,t,a,r,i){var s=this._x+this.buttonOffsetY,n=this._y+this.buttonOffsetY,_=this._w-2*this.buttonOffsetY;this.g.set_color(i?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var h=this.g,o=this.t.BUTTON_H*this.SCALE,l=0;0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.t.FILL_ACCENT_BG?h.fillRect(s,n,_,o):h.drawRect(s,n,_,o,l),this.g.set_color(i?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var u=(e-t)/(a-t),d=8*this.SCALE,c=r?s:s+(_-d)*u,g=r?_*u:d;g=Math.min(g,_),this.g.fillRect(c,n,g,this.t.BUTTON_H*this.SCALE)},drawCombo:function(){var e=this.g;this.globalG.set_color(-14540254);var t=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE;this.globalG.begin(!1),this.globalG.fillRect(this.comboSelectedX,this.comboSelectedY,this.comboSelectedW,(this.comboSelectedTexts.length+1)*t),this.beginLayout(this.globalG,this.comboSelectedX,this.comboSelectedY,this.comboSelectedW),this.inputEnabled=!0;for(var a=0,r=this.comboSelectedTexts.length;a<r;){var i=a++;if(this.button(this.comboSelectedTexts[i],this.comboSelectedAlign)){this.comboToSubmit=i,this.submitComboHandle=this.comboSelectedHandle,null!=this.comboSelectedWindow&&(this.comboSelectedWindow.redraws=2);break}}this.text(this.comboSelectedLabel),this.inputReleased&&!zui_Zui.comboFirst?(this.comboSelectedHandle=null,zui_Zui.comboFirst=!0):zui_Zui.comboFirst=!1,this.inputEnabled=null==this.comboSelectedHandle,this.endLayout(!1),this.globalG.end(),this.g=e},drawTooltip:function(){this.globalG.set_color(this.t.TEXT_COL);for(var e=this.tooltipText.split("\n"),t=0,a=0;a<e.length;){var r=e[a];++a;var i=this.ops.font.width(this.fontSize,r);t<i&&(t=i)}this.tooltipX=Math.min(this.tooltipX,kha_System.windowWidth()-t-20),this.globalG.fillRect(this.tooltipX,this.tooltipY,t+20,this.t.ELEMENT_H*this.SCALE*e.length*.6),this.globalG.set_font(this.ops.font),this.globalG.set_fontSize(this.fontSize),this.globalG.set_color(this.t.ACCENT_COL);for(var s=0,n=e.length;s<n;){var _=s++;this.globalG.drawString(e[_],this.tooltipX+5,this.tooltipY+_*this.fontSize)}},drawString:function(e,t,a,r,i){null==i&&(i=0),null==r&&(r=0);var s=this._w/(this.fontSize/2|0)|0;t.length>s&&(t=t.substring(0,s)+".."),null==a&&(a=this.t.TEXT_OFFSET),a*=this.SCALE,e.set_font(this.ops.font),e.set_fontSize(this.fontSize),1==i?a=this._w/2-this.ops.font.width(this.fontSize,t)/2:2==i&&(a=this._w-this.ops.font.width(this.fontSize,t)-this.t.TEXT_OFFSET),e.drawString(t,this._x+a,this._y+this.fontOffsetY+r)},endElement:function(e){null!=this.currentWindow?0==this.currentWindow.layout?-1==this.curRatio||null!=this.ratios&&this.curRatio==this.ratios.length-1?(null==e&&(e=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE),this._y+=e,null!=this.ratios&&this.curRatio==this.ratios.length-1&&(this.curRatio=-1,this.ratios=null,this._x=this.xBeforeSplit,this._w=this.wBeforeSplit)):(this.curRatio++,this._x+=this._w,this._w=this.wBeforeSplit*this.ratios[this.curRatio]|0):this._x+=this._w+this.t.ELEMENT_OFFSET*this.SCALE:this._y+=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE},row:function(e){this.ratios=e,this.curRatio=0,this.xBeforeSplit=this._x,this.wBeforeSplit=this._w,this._w=this._w*e[this.curRatio]|0},indent:function(){this._x+=this.t.TAB_W*this.SCALE|0,this._w-=this.t.TAB_W*this.SCALE|0},unindent:function(){this._x-=this.t.TAB_W*this.SCALE|0,this._w+=this.t.TAB_W*this.SCALE|0},fill:function(e,t,a,r,i){this.g.set_color(i),this.g.fillRect(this._x+e*this.SCALE,this._y+t*this.SCALE,a*this.SCALE,r*this.SCALE),this.g.set_color(-1)},drawRect:function(e,t,a,r,i,s,n){null==n&&(n=0),0==n&&(n=this.t.LINE_STRENGTH*this.SCALE),t?e.fillRect(a,r,i,s):e.drawRect(a,r,i,s,n)},isVisible:function(e){return null==this.currentWindow||0<this._y+e&&this._y<this.currentWindow.texture.get_height()},getReleased:function(e){return null==e&&(e=-1),this.isReleased=this.inputEnabled&&this.inputReleased&&this.getHover(e)&&this.getInitialHover(e),this.isReleased},getPushed:function(e){return null==e&&(e=-1),this.isPushed=this.inputEnabled&&this.inputDown&&this.getHover(e)&&this.getInitialHover(e),this.isPushed},getStarted:function(e){return null==e&&(e=-1),this.isStarted=this.inputEnabled&&this.inputStarted&&this.getHover(e),this.isStarted},getInitialHover:function(e){return null==e&&(e=-1),-1==e&&(e=this.t.ELEMENT_H*this.SCALE),!!(this.inputEnabled&&this.inputInitialX>=this._windowX+this._x&&this.inputInitialX<this._windowX+this._x+this._w&&this.inputInitialY>=this._windowY+this._y)&&this.inputInitialY<this._windowY+this._y+e},getHover:function(e){return null==e&&(e=-1),-1==e&&(e=this.t.ELEMENT_H*this.SCALE),this.isHovered=this.inputEnabled&&this.inputX>=this._windowX+this._x&&this.inputX<this._windowX+this._x+this._w&&this.inputY>=this._windowY+this._y&&this.inputY<this._windowY+this._y+e,this.isHovered},getInputInRect:function(e,t,a,r,i){return null==i&&(i=1),!!(this.inputEnabled&&this.inputX>=e*i&&this.inputX<(e+a)*i&&this.inputY>=t*i)&&this.inputY<(t+r)*i},onMouseDown:function(e,t,a){this.inputStarted=!0,0==e?this.inputDown=!0:this.inputDownR=!0;var r=t*this.ops.scaleTexture|0,i=a*this.ops.scaleTexture|0;this.setInputPosition(r,i),this.inputInitialX=r,this.inputInitialY=i},onMouseUp:function(e,t,a){this.isScrolling?(this.isScrolling=!1,null!=this.scrollingHandle&&(this.scrollingHandle.scrolling=!1),t==this.inputInitialX&&a==this.inputInitialY&&(this.inputReleased=!0)):this.inputReleased=!0,0==e?this.inputDown=!1:this.inputDownR=!1,this.setInputPosition(t*this.ops.scaleTexture|0,a*this.ops.scaleTexture|0),this.deselectText()},onMouseMove:function(e,t,a,r){this.setInputPosition(e*this.ops.scaleTexture|0,t*this.ops.scaleTexture|0)},onMouseWheel:function(e){this.inputWheelDelta=e},setInputPosition:function(e,t){this.inputDX+=e-this.inputX,this.inputDY+=t-this.inputY,this.inputX=e,this.inputY=t},onKeyDown:function(e){this.isKeyDown=!0,32==(this.key=e)&&(this.char=" ")},onKeyUp:function(e){},onKeyPress:function(e){this.isKeyDown=!0,this.char=e},ELEMENT_W:function(){return this.t.ELEMENT_W*this.SCALE},ELEMENT_H:function(){return this.t.ELEMENT_H*this.SCALE},ELEMENT_OFFSET:function(){return this.t.ELEMENT_OFFSET*this.SCALE},ARROW_SIZE:function(){return this.t.ARROW_SIZE*this.SCALE},BUTTON_H:function(){return this.t.BUTTON_H*this.SCALE},CHECK_SIZE:function(){return this.t.CHECK_SIZE*this.SCALE},CHECK_SELECT_SIZE:function(){return this.t.CHECK_SELECT_SIZE*this.SCALE},SCROLL_W:function(){return this.t.SCROLL_W*this.SCALE|0},TEXT_OFFSET:function(){return this.t.TEXT_OFFSET},TAB_W:function(){return this.t.TAB_W*this.SCALE|0},LINE_STRENGTH:function(){return this.t.LINE_STRENGTH*this.SCALE},resize:function(e,t,a,r){null==r&&(r=0),e.redraws=2,null!=e.texture&&e.texture.unload(),e.texture=kha_Image.createRenderTarget(t,a,kha_graphics4_TextureFormat.RGBA32,0,1,r),e.texture.get_g2().set_imageScaleQuality(kha_graphics2_ImageScaleQuality.High)},__class__:zui_Zui};var $fid=0;function $bind(e,t){return null==t?null:(null==t.__id__&&(t.__id__=$fid++),null==e.hx__closures__?e.hx__closures__={}:a=e.hx__closures__[t.__id__],null==a&&(a=t.bind(e),e.hx__closures__[t.__id__]=a),a);var a}$hxClasses.Math=Math,String.prototype.__class__=$hxClasses.String=String,String.__name__=!0,$hxClasses.Array=Array,Array.__name__=!0,Date.prototype.__class__=$hxClasses.Date=Date,Date.__name__=["Date"];var Int={},Dynamic={},Float=Number,Bool=Boolean,Class={},Enum={};haxe_ds_ObjectMap.count=0;var __map_reserved={};Object.defineProperty(js__$Boot_HaxeError.prototype,"message",{get:function(){return String(this.val)}});var ArrayBuffer=$global.ArrayBuffer||js_html_compat_ArrayBuffer;null==ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=js_html_compat_ArrayBuffer.sliceImpl);var DataView=$global.DataView||js_html_compat_DataView,Float32Array=$global.Float32Array||js_html_compat_Float32Array._new,Uint8Array=$global.Uint8Array||js_html_compat_Uint8Array._new;Elements.defaultWindowW=240,Elements.windowW=Elements.defaultWindowW,Elements.coffX=70,Elements.coffY=50,Elements.modalW=625,Elements.modalH=545,Elements.modalHeaderH=66,Elements.modalRectW=625,Elements.modalRectH=545,Elements.path="/",Main.cwd="",haxe_Unserializer.DEFAULT_RESOLVER=new haxe__$Unserializer_DefaultResolver,haxe_Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",haxe_io_FPHelper.i64tmp=new haxe__$Int64__$_$_$Int64(0,0),haxe_io_FPHelper.helper=new DataView(new ArrayBuffer(8)),js_Boot.__toStr={}.toString,js_html_compat_Float32Array.BYTES_PER_ELEMENT=4,js_html_compat_Uint8Array.BYTES_PER_ELEMENT=1,kha_Assets.images=new kha__$Assets_ImageList,kha_Assets.sounds=new kha__$Assets_SoundList,kha_Assets.blobs=new kha__$Assets_BlobList,kha_Assets.fonts=new kha__$Assets_FontList,kha_Assets.videos=new kha__$Assets_VideoList,kha__$Color_Color_$Impl_$.Black=-16777216,kha__$Color_Color_$Impl_$.White=-1,kha__$Color_Color_$Impl_$.Red=-65536,kha__$Color_Color_$Impl_$.Blue=-16776961,kha__$Color_Color_$Impl_$.Green=-16711936,kha__$Color_Color_$Impl_$.Magenta=-65281,kha__$Color_Color_$Impl_$.Yellow=-256,kha__$Color_Color_$Impl_$.Cyan=-16711681,kha__$Color_Color_$Impl_$.Purple=-8388480,kha__$Color_Color_$Impl_$.Pink=-16181,kha__$Color_Color_$Impl_$.Orange=-23296,kha__$Color_Color_$Impl_$.Transparent=0,kha__$Color_Color_$Impl_$.invMaxChannelValue=.00392156862745098,kha_Display.displays=[],kha_FontStyle.Default=new kha_FontStyle(!1,!1,!1),kha_Scheduler.timeWarpSaveTime=10,kha_Scheduler.DIF_COUNT=3,kha_Scheduler.maxframetime=.5,kha_Scheduler.startTime=0,kha_Shaders.painter_colored_fragData0="s274:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgpvdXQgdmVjNCBGcmFnQ29sb3I7CmluIHZlYzQgZnJhZ21lbnRDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIEZyYWdDb2xvciA9IGZyYWdtZW50Q29sb3I7Cn0KCg",kha_Shaders.painter_colored_vertData0="s439:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWM0IGZyYWdtZW50Q29sb3I7CmluIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgZnJhZ21lbnRDb2xvciA9IHZlcnRleENvbG9yOwp9Cgo",kha_Shaders.painter_image_fragData0="s506:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgppbiB2ZWMyIHRleENvb3JkOwppbiB2ZWM0IGNvbG9yOwpvdXQgdmVjNCBGcmFnQ29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZSh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgRnJhZ0NvbG9yID0gdGV4Y29sb3I7Cn0KCg",kha_Shaders.painter_image_vertData0="s508:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHRleFBvc2l0aW9uOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK",kha_Shaders.painter_text_fragData0="s402:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgpvdXQgdmVjNCBGcmFnQ29sb3I7CmluIHZlYzQgZnJhZ21lbnRDb2xvcjsKaW4gdmVjMiB0ZXhDb29yZDsKCnZvaWQgbWFpbigpCnsKICAgIEZyYWdDb2xvciA9IHZlYzQoZnJhZ21lbnRDb2xvci54eXosIHRleHR1cmUodGV4LCB0ZXhDb29yZCkueCAqIGZyYWdtZW50Q29sb3Iudyk7Cn0KCg",kha_Shaders.painter_text_vertData0="s530:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBmcmFnbWVudENvbG9yOwppbiB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBmcmFnbWVudENvbG9yID0gdmVydGV4Q29sb3I7Cn0KCg",kha_Shaders.painter_video_fragData0="s506:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgppbiB2ZWMyIHRleENvb3JkOwppbiB2ZWM0IGNvbG9yOwpvdXQgdmVjNCBGcmFnQ29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZSh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgRnJhZ0NvbG9yID0gdGV4Y29sb3I7Cn0KCg",kha_Shaders.painter_video_vertData0="s508:I3ZlcnNpb24gMzMwCiNpZmRlZiBHTF9BUkJfc2hhZGluZ19sYW5ndWFnZV80MjBwYWNrCiNleHRlbnNpb24gR0xfQVJCX3NoYWRpbmdfbGFuZ3VhZ2VfNDIwcGFjayA6IHJlcXVpcmUKI2VuZGlmCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHRleFBvc2l0aW9uOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK",kha_System.renderListeners=[],kha_System.foregroundListeners=[],kha_System.resumeListeners=[],kha_System.pauseListeners=[],kha_System.backgroundListeners=[],kha_System.shutdownListeners=[],kha_System.dropFilesListeners=[],kha_SystemImpl.maxGamepads=4,kha_SystemImpl.mouseLockListeners=[],kha_Window.windows=[],kha_WindowOptions.FeatureResizable=1,kha_WindowOptions.FeatureMinimizable=2,kha_WindowOptions.FeatureMaximizable=4,kha_WindowOptions.FeatureBorderless=8,kha_WindowOptions.FeatureOnTop=16,kha_audio2_Audio1.channelCount=16,kha_audio2_ogg_tools_Crc32.POLY=79764919,kha_audio2_ogg_vorbis_VorbisDecodeState.INVALID_BITS=-1,kha_audio2_ogg_vorbis_VorbisTools.EOP=-1,kha_audio2_ogg_vorbis_VorbisTools.M__PI=3.141592653589793,kha_audio2_ogg_vorbis_VorbisTools.DIVTAB_NUMER=32,kha_audio2_ogg_vorbis_VorbisTools.DIVTAB_DENOM=64,kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE=[1.0649863e-7,1.1341951e-7,1.2079015e-7,1.2863978e-7,1.3699951e-7,1.4590251e-7,1.5538408e-7,1.6548181e-7,1.7623575e-7,1.8768855e-7,1.9988561e-7,2.128753e-7,2.2670913e-7,2.4144197e-7,2.5713223e-7,2.7384213e-7,2.9163793e-7,3.1059021e-7,3.3077411e-7,3.5226968e-7,3.7516214e-7,3.9954229e-7,4.255068e-7,4.5315863e-7,4.8260743e-7,5.1396998e-7,5.4737065e-7,5.8294187e-7,6.2082472e-7,6.6116941e-7,7.0413592e-7,7.4989464e-7,7.9862701e-7,8.505263e-7,9.0579828e-7,9.6466216e-7,10273513e-13,10941144e-13,11652161e-13,12409384e-13,13215816e-13,14074654e-13,14989305e-13,15963394e-13,17000785e-13,18105592e-13,19282195e-13,20535261e-13,21869758e-13,23290978e-13,24804557e-13,26416497e-13,2813319e-12,29961443e-13,31908506e-13,33982101e-13,36190449e-13,38542308e-13,41047004e-13,4371447e-12,46555282e-13,49580707e-13,5280274e-12,5623416e-12,59888572e-13,63780469e-13,67925283e-13,72339451e-13,77040476e-13,82047e-10,87378876e-13,93057248e-13,99104632e-13,10554501e-12,11240392e-12,11970856e-12,12748789e-12,13577278e-12,14459606e-12,15399272e-12,16400004e-12,17465768e-12,18600792e-12,19809576e-12,21096914e-12,22467911e-12,23928002e-12,25482978e-12,27139006e-12,28902651e-12,30780908e-12,32781225e-12,34911534e-12,37180282e-12,39596466e-12,42169667e-12,4491009e-11,47828601e-12,50936773e-12,54246931e-12,57772202e-12,61526565e-12,65524908e-12,69783085e-12,74317983e-12,79147585e-12,8429104e-11,89768747e-12,95602426e-12,.00010181521,.00010843174,.00011547824,.00012298267,.00013097477,.00013948625,.00014855085,.00015820453,.00016848555,.00017943469,.00019109536,.00020351382,.00021673929,.00023082423,.00024582449,.00026179955,.00027881276,.00029693158,.00031622787,.00033677814,.00035866388,.00038197188,.00040679456,.00043323036,.00046138411,.00049136745,.00052329927,.00055730621,.00059352311,.00063209358,.00067317058,716917e-9,.0007635063,.00081312324,.00086596457,.00092223983,.00098217216,.0010459992,.0011139742,.0011863665,.0012634633,.0013455702,.0014330129,.0015261382,.0016253153,.0017309374,.0018434235,.0019632195,.0020908006,.0022266726,.0023713743,.0025254795,.0026895994,.0028643847,.0030505286,.0032487691,.0034598925,.0036847358,.0039241906,.0041792066,.004450795,.0047400328,.0050480668,.0053761186,.0057254891,.0060975636,.0064938176,.0069158225,.0073652516,.0078438871,.0083536271,.0088964928,.009474637,.010090352,.01074608,.011444421,.012188144,.012980198,.013823725,.014722068,.015678791,.016697687,.017782797,.018938423,.020169149,.021479854,.022875735,.02436233,.025945531,.027631618,.029427276,.031339626,.033376252,.035545228,.037855157,.040315199,.042935108,.045725273,.048696758,.051861348,.055231591,.05882085,.062643361,.066714279,.071049749,.075666962,.080584227,.085821044,.091398179,.097337747,.1036633,.11039993,.11757434,.12521498,.13335215,.14201813,.15124727,.16107617,.1715438,.18269168,.19456402,.20720788,.22067342,.23501402,.25028656,.26655159,.28387361,.30232132,.32196786,.34289114,.36517414,.38890521,.41417847,.44109412,.4697589,.50028648,.53279791,.56742212,.6042964,.64356699,.68538959,.72993007,.77736504,.8278826,.88168307,.9389798,1],kha_audio2_ogg_vorbis_data_Codebook.NO_CODE=255,kha_audio2_ogg_vorbis_data_Codebook.delay=0,kha_audio2_ogg_vorbis_data_Header.PACKET_ID=1,kha_audio2_ogg_vorbis_data_Header.PACKET_COMMENT=3,kha_audio2_ogg_vorbis_data_Header.PACKET_SETUP=5,kha_audio2_ogg_vorbis_data_PageFlag.CONTINUED_PACKET=1,kha_audio2_ogg_vorbis_data_PageFlag.FIRST_PAGE=2,kha_audio2_ogg_vorbis_data_PageFlag.LAST_PAGE=4,kha_audio2_ogg_vorbis_data_Setting.MAX_CHANNELS=16,kha_audio2_ogg_vorbis_data_Setting.PUSHDATA_CRC_COUNT=4,kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_LENGTH=10,kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_TABLE_SIZE=1024,kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_TABLE_MASK=1023,kha_graphics2_Graphics.fontGlyphs=function(e){for(var t=[],a=32;a<256;){var r=a++;t.push(r)}return t}(),kha_graphics2_truetype_StbTruetype.STBTT_vmove=1,kha_graphics2_truetype_StbTruetype.STBTT_vline=2,kha_graphics2_truetype_StbTruetype.STBTT_vcurve=3,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_DONTCARE=0,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_BOLD=1,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_ITALIC=2,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_UNDERSCORE=4,kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_NONE=8,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_UNICODE=0,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_MAC=1,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_ISO=2,kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_MICROSOFT=3,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_1_0=0,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_1_1=1,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_ISO_10646=2,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_2_0_BMP=3,kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_2_0_FULL=4,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_SYMBOL=0,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_UNICODE_BMP=1,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_SHIFTJIS=2,kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_UNICODE_FULL=10,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_ROMAN=0,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_ARABIC=4,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_JAPANESE=1,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_HEBREW=5,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_CHINESE_TRAD=2,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_GREEK=6,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_KOREAN=3,kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_RUSSIAN=7,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_ENGLISH=1033,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_ITALIAN=1040,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_CHINESE=2052,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_JAPANESE=1041,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_DUTCH=1043,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_KOREAN=1042,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_FRENCH=1036,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_RUSSIAN=1049,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_GERMAN=1031,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_SPANISH=1033,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_HEBREW=1037,kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_SWEDISH=1053,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ENGLISH=0,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_JAPANESE=11,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ARABIC=12,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_KOREAN=23,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_DUTCH=4,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_RUSSIAN=32,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_FRENCH=1,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_SPANISH=6,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_GERMAN=2,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_SWEDISH=5,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_HEBREW=10,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_CHINESE_SIMPLIFIED=33,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ITALIAN=3,kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_CHINESE_TRAD=19,kha_graphics2_truetype_StbTruetype.STBTT_MAX_OVERSAMPLE=8,kha_graphics2_truetype_StbTruetype.STBTT_RASTERIZER_VERSION=2,kha_graphics4_ImageShaderPainter.bufferSize=1500,kha_graphics4_ImageShaderPainter.vertexSize=9,kha_graphics4_ColoredShaderPainter.bufferSize=100,kha_graphics4_ColoredShaderPainter.triangleBufferSize=100,kha_graphics4_TextShaderPainter.bufferSize=100,kha_input_Gamepad.__meta__={statics:{sendConnectEvent:{input:null},sendDisconnectEvent:{input:null}},fields:{sendAxisEvent:{input:null},sendButtonEvent:{input:null}}},kha_input_Gamepad.instances=[],kha_input_Gamepad.connectListeners=[],kha_input_Gamepad.disconnectListeners=[],kha_input_Keyboard.__meta__={fields:{sendDownEvent:{input:null},sendUpEvent:{input:null},sendPressEvent:{input:null}}},kha_input_Mouse.__meta__={fields:{sendLeaveEvent:{input:null},sendDownEvent:{input:null},sendUpEvent:{input:null},sendMoveEvent:{input:null},sendWheelEvent:{input:null}}},kha_internal_BytesBlob.bufferSize=2e3,kha_krom_Graphics.mat=new Float32Array(16),kha_math_FastMatrix3.width=3,kha_math_FastMatrix3.height=3,kha_math_FastMatrix4.width=4,kha_math_FastMatrix4.height=4,kha_math_Matrix3.width=3,kha_math_Matrix3.height=3,kha_math_Matrix4.width=4,kha_math_Matrix4.height=4,kha_network_ControllerBuilder.nextId=0,kha_network_Session.START=0,kha_network_Session.ENTITY_UPDATES=1,kha_network_Session.CONTROLLER_UPDATES=2,kha_network_Session.REMOTE_CALL=3,kha_network_Session.PING=4,kha_network_Session.SESSION_ERROR=5,kha_network_Session.PLAYER_UPDATES=6,kha_network_Session.RPC_SERVER=0,kha_network_Session.RPC_ALL=1,kha_network_SyncBuilder.nextId=0,kha_network_SyncBuilder.objects=[],zui_Handle.global=new zui_Handle,zui_Canvas.assetMap=new haxe_ds_IntMap,zui_Canvas.events=[],zui_Canvas.screenW=-1,zui_Canvas.screenH=-1,zui_Canvas.locale="en",zui_Canvas.h=new zui_Handle,zui_Canvas.elemId=-1,zui_Canvas.assetId=-1,zui_Ext.lastPath="",zui_Ext.kx=1,zui_Ext.ky=.6666666666666666,zui_Ext.kz=.3333333333333333,zui_Ext.kw=3,zui_Ext.ar=[0,0,0],zui_Ext.Kx=0,zui_Ext.Ky=-.3333333333333333,zui_Ext.Kz=.6666666666666666,zui_Ext.Kw=-1,zui_Ext.e=1e-10,zui_Id.i=0,zui_Themes.dark={FONT_SIZE:13,ELEMENT_W:100,ELEMENT_H:22,ELEMENT_OFFSET:2,ARROW_SIZE:5,BUTTON_H:17,CHECK_SIZE:15,CHECK_SELECT_SIZE:8,SCROLL_W:8,TEXT_OFFSET:8,TAB_W:12,LINE_STRENGTH:1,FLASH_SPEED:.5,TOOLTIP_DELAY:1,FILL_WINDOW_BG:!1,FILL_BUTTON_BG:!0,FILL_ACCENT_BG:!1,WINDOW_BG_COL:-14671840,WINDOW_TINT_COL:-1,ACCENT_COL:-12566464,ACCENT_HOVER_COL:-11513776,ACCENT_SELECT_COL:-10066330,PANEL_BG_COL:-16777216,PANEL_TEXT_COL:-1118482,BUTTON_COL:-13948117,BUTTON_TEXT_COL:-3487289,BUTTON_HOVER_COL:-12895429,BUTTON_PRESSED_COL:-15000805,TEXT_COL:-3487289,LABEL_COL:-5592406,ARROW_COL:-3487289,SEPARATOR_COL:-14277082},zui_Themes.light={FONT_SIZE:26,ELEMENT_W:200,ELEMENT_H:44,ELEMENT_OFFSET:4,ARROW_SIZE:10,BUTTON_H:34,CHECK_SIZE:30,CHECK_SELECT_SIZE:16,SCROLL_W:16,TEXT_OFFSET:16,TAB_W:24,LINE_STRENGTH:2,FLASH_SPEED:.5,TOOLTIP_DELAY:1,FILL_WINDOW_BG:!1,FILL_BUTTON_BG:!0,FILL_ACCENT_BG:!1,WINDOW_BG_COL:-1052689,WINDOW_TINT_COL:2236962,ACCENT_COL:-1118482,ACCENT_HOVER_COL:-4473925,ACCENT_SELECT_COL:-5592406,PANEL_BG_COL:-1,PANEL_TEXT_COL:-14540254,BUTTON_COL:-3355444,BUTTON_TEXT_COL:-14540254,BUTTON_HOVER_COL:-5000269,BUTTON_PRESSED_COL:-5131855,TEXT_COL:-6710887,LABEL_COL:-5592406,ARROW_COL:-3487289,SEPARATOR_COL:-6710887},zui_Zui.comboFirst=!0,Main.main();